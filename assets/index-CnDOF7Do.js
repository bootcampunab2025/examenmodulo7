const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-Lr1JcAiq.js","assets/courses-BUTPmGTd.js","assets/orders-BgooqpD3.js","assets/BCard.vue_vue_type_script_setup_true_lang-BAaV9t2h-CIFWF0FW.js","assets/HomeView-B_yFd98H.css","assets/LoginView-B16T8Fiz.js","assets/LoginView-EOD9WSD1.css","assets/RegisterView-Cevhqim9.js","assets/BAlert.vue_vue_type_script_setup_true_lang-BoLIpZFk-BMwzMJkR.js","assets/BFormInput.vue_vue_type_script_setup_true_lang-B9E5yJEs-B8Rcxc3z.js","assets/RegisterView-CrVO5LIr.css","assets/AdminView-7-gEeTD8.js","assets/CourseForm-B3_aL1fp.js","assets/CourseForm-D47y8cO3.css","assets/BTable.vue_vue_type_script_setup_true_lang-BpEcqTUn-DWnsn5f9.js","assets/AdminView-fE3kx2tE.css","assets/EditCourseView-DrYi7QfY.js","assets/EditCourseView-1JJceoCq.css","assets/MyCoursesView-CqhOKKq9.js","assets/MyCoursesView-Fx3DOmUf.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ph(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const De={},Gs=[],kn=()=>{},bg=()=>!1,kl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),mh=t=>t.startsWith("onUpdate:"),ct=Object.assign,gh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},xT=Object.prototype.hasOwnProperty,Le=(t,e)=>xT.call(t,e),ce=Array.isArray,Ws=t=>xo(t)==="[object Map]",Ol=t=>xo(t)==="[object Set]",yd=t=>xo(t)==="[object Date]",_e=t=>typeof t=="function",Ke=t=>typeof t=="string",pn=t=>typeof t=="symbol",Be=t=>t!==null&&typeof t=="object",wg=t=>(Be(t)||_e(t))&&_e(t.then)&&_e(t.catch),Ig=Object.prototype.toString,xo=t=>Ig.call(t),MT=t=>xo(t).slice(8,-1),Ag=t=>xo(t)==="[object Object]",_h=t=>Ke(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ji=ph(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},FT=/-\w/g,nn=Nl(t=>t.replace(FT,e=>e.slice(1).toUpperCase())),BT=/\B([A-Z])/g,Br=Nl(t=>t.replace(BT,"-$1").toLowerCase()),Dl=Nl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bc=Nl(t=>t?`on${Dl(t)}`:""),Ht=(t,e)=>!Object.is(t,e),Ca=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Cg=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Tu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},UT=t=>{const e=Ke(t)?Number(t):NaN;return isNaN(e)?t:e};let vd;const Vl=()=>vd||(vd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Mo(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ke(r)?HT(r):Mo(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ke(t)||Be(t))return t}const $T=/;(?![^(]*\))/g,jT=/:([^]+)/,qT=/\/\*[^]*?\*\//g;function HT(t){const e={};return t.replace(qT,"").split($T).forEach(n=>{if(n){const r=n.split(jT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function gt(t){let e="";if(Ke(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const r=gt(t[n]);r&&(e+=r+" ")}else if(Be(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Fn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ke(e)&&(t.class=gt(e)),n&&(t.style=Mo(n)),t}const GT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",WT=ph(GT);function Sg(t){return!!t||t===""}function zT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ll(t[r],e[r]);return n}function Ll(t,e){if(t===e)return!0;let n=yd(t),r=yd(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=pn(t),r=pn(e),n||r)return t===e;if(n=ce(t),r=ce(e),n||r)return n&&r?zT(t,e):!1;if(n=Be(t),r=Be(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Ll(t[o],e[o]))return!1}}return String(t)===String(e)}function Rg(t,e){return t.findIndex(n=>Ll(n,e))}const Pg=t=>!!(t&&t.__v_isRef===!0),zn=t=>Ke(t)?t:t==null?"":ce(t)||Be(t)&&(t.toString===Ig||!_e(t.toString))?Pg(t)?zn(t.value):JSON.stringify(t,kg,2):String(t),kg=(t,e)=>Pg(e)?kg(t,e.value):Ws(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Uc(r,i)+" =>"]=s,n),{})}:Ol(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Uc(n))}:pn(e)?Uc(e):Be(e)&&!ce(e)&&!Ag(e)?String(e):e,Uc=(t,e="")=>{var n;return pn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rt;class Og{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Rt,!e&&Rt&&(this.index=(Rt.scopes||(Rt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Rt;try{return Rt=this,e()}finally{Rt=n}}}on(){++this._on===1&&(this.prevScope=Rt,Rt=this)}off(){this._on>0&&--this._on===0&&(Rt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Ng(t){return new Og(t)}function Dg(){return Rt}function KT(t,e=!1){Rt&&Rt.cleanups.push(t)}let je;const $c=new WeakSet;class Vg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Rt&&Rt.active&&Rt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$c.has(this)&&($c.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ed(this),Mg(this);const e=je,n=dn;je=this,dn=!0;try{return this.fn()}finally{Fg(this),je=e,dn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Eh(e);this.deps=this.depsTail=void 0,Ed(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$c.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){bu(this)&&this.run()}get dirty(){return bu(this)}}let Lg=0,Xi,Zi;function xg(t,e=!1){if(t.flags|=8,e){t.next=Zi,Zi=t;return}t.next=Xi,Xi=t}function yh(){Lg++}function vh(){if(--Lg>0)return;if(Zi){let e=Zi;for(Zi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Xi;){let e=Xi;for(Xi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Mg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Fg(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Eh(r),QT(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function bu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Bg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Bg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===go)||(t.globalVersion=go,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!bu(t))))return;t.flags|=2;const e=t.dep,n=je,r=dn;je=t,dn=!0;try{Mg(t);const s=t.fn(t._value);(e.version===0||Ht(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{je=n,dn=r,Fg(t),t.flags&=-3}}function Eh(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Eh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function QT(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let dn=!0;const Ug=[];function Xn(){Ug.push(dn),dn=!1}function Zn(){const t=Ug.pop();dn=t===void 0?!0:t}function Ed(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=je;je=void 0;try{e()}finally{je=n}}}let go=0;class YT{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!je||!dn||je===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==je)n=this.activeLink=new YT(je,this),je.deps?(n.prevDep=je.depsTail,je.depsTail.nextDep=n,je.depsTail=n):je.deps=je.depsTail=n,$g(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=je.depsTail,n.nextDep=void 0,je.depsTail.nextDep=n,je.depsTail=n,je.deps===n&&(je.deps=r)}return n}trigger(e){this.version++,go++,this.notify(e)}notify(e){yh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{vh()}}}function $g(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)$g(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ja=new WeakMap,hs=Symbol(""),wu=Symbol(""),_o=Symbol("");function kt(t,e,n){if(dn&&je){let r=ja.get(t);r||ja.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new xl),s.map=r,s.key=n),s.track()}}function Gn(t,e,n,r,s,i){const o=ja.get(t);if(!o){go++;return}const l=c=>{c&&c.trigger()};if(yh(),e==="clear")o.forEach(l);else{const c=ce(t),u=c&&_h(n);if(c&&n==="length"){const h=Number(r);o.forEach((d,m)=>{(m==="length"||m===_o||!pn(m)&&m>=h)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(_o)),e){case"add":c?u&&l(o.get("length")):(l(o.get(hs)),Ws(t)&&l(o.get(wu)));break;case"delete":c||(l(o.get(hs)),Ws(t)&&l(o.get(wu)));break;case"set":Ws(t)&&l(o.get(hs));break}}vh()}function JT(t,e){const n=ja.get(t);return n&&n.get(e)}function Os(t){const e=Oe(t);return e===t?e:(kt(e,"iterate",_o),ln(t)?e:e.map(Et))}function Ml(t){return kt(t=Oe(t),"iterate",_o),t}const XT={__proto__:null,[Symbol.iterator](){return jc(this,Symbol.iterator,Et)},concat(...t){return Os(this).concat(...t.map(e=>ce(e)?Os(e):e))},entries(){return jc(this,"entries",t=>(t[1]=Et(t[1]),t))},every(t,e){return Bn(this,"every",t,e,void 0,arguments)},filter(t,e){return Bn(this,"filter",t,e,n=>n.map(Et),arguments)},find(t,e){return Bn(this,"find",t,e,Et,arguments)},findIndex(t,e){return Bn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Bn(this,"findLast",t,e,Et,arguments)},findLastIndex(t,e){return Bn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Bn(this,"forEach",t,e,void 0,arguments)},includes(...t){return qc(this,"includes",t)},indexOf(...t){return qc(this,"indexOf",t)},join(t){return Os(this).join(t)},lastIndexOf(...t){return qc(this,"lastIndexOf",t)},map(t,e){return Bn(this,"map",t,e,void 0,arguments)},pop(){return Fi(this,"pop")},push(...t){return Fi(this,"push",t)},reduce(t,...e){return Td(this,"reduce",t,e)},reduceRight(t,...e){return Td(this,"reduceRight",t,e)},shift(){return Fi(this,"shift")},some(t,e){return Bn(this,"some",t,e,void 0,arguments)},splice(...t){return Fi(this,"splice",t)},toReversed(){return Os(this).toReversed()},toSorted(t){return Os(this).toSorted(t)},toSpliced(...t){return Os(this).toSpliced(...t)},unshift(...t){return Fi(this,"unshift",t)},values(){return jc(this,"values",Et)}};function jc(t,e,n){const r=Ml(t),s=r[e]();return r!==t&&!ln(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const ZT=Array.prototype;function Bn(t,e,n,r,s,i){const o=Ml(t),l=o!==t&&!ln(t),c=o[e];if(c!==ZT[e]){const d=c.apply(t,i);return l?Et(d):d}let u=n;o!==t&&(l?u=function(d,m){return n.call(this,Et(d),m,t)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,t)}));const h=c.call(o,u,r);return l&&s?s(h):h}function Td(t,e,n,r){const s=Ml(t);let i=n;return s!==t&&(ln(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,Et(l),c,t)}),s[e](i,...r)}function qc(t,e,n){const r=Oe(t);kt(r,"iterate",_o);const s=r[e](...n);return(s===-1||s===!1)&&Th(n[0])?(n[0]=Oe(n[0]),r[e](...n)):s}function Fi(t,e,n=[]){Xn(),yh();const r=Oe(t)[e].apply(t,n);return vh(),Zn(),r}const eb=ph("__proto__,__v_isRef,__isVue"),jg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pn));function tb(t){pn(t)||(t=String(t));const e=Oe(this);return kt(e,"has",t),e.hasOwnProperty(t)}class qg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Qg:Kg:i?zg:Wg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ce(e);if(!s){let c;if(o&&(c=XT[n]))return c;if(n==="hasOwnProperty")return tb}const l=Reflect.get(e,n,et(e)?e:r);if((pn(n)?jg.has(n):eb(n))||(s||kt(e,"get",n),i))return l;if(et(l)){const c=o&&_h(n)?l:l.value;return s&&Be(c)?Wt(c):c}return Be(l)?s?Wt(l):Fo(l):l}}class Hg extends qg{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=Or(i);if(!ln(r)&&!Or(r)&&(i=Oe(i),r=Oe(r)),!ce(e)&&et(i)&&!et(r))return c||(i.value=r),!0}const o=ce(e)&&_h(n)?Number(n)<e.length:Le(e,n),l=Reflect.set(e,n,r,et(e)?e:s);return e===Oe(s)&&(o?Ht(r,i)&&Gn(e,"set",n,r):Gn(e,"add",n,r)),l}deleteProperty(e,n){const r=Le(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Gn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!pn(n)||!jg.has(n))&&kt(e,"has",n),r}ownKeys(e){return kt(e,"iterate",ce(e)?"length":hs),Reflect.ownKeys(e)}}class Gg extends qg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const nb=new Hg,rb=new Gg,sb=new Hg(!0),ib=new Gg(!0),Iu=t=>t,ua=t=>Reflect.getPrototypeOf(t);function ob(t,e,n){return function(...r){const s=this.__v_raw,i=Oe(s),o=Ws(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?Iu:e?qa:Et;return!e&&kt(i,"iterate",c?wu:hs),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:l?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function ha(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ab(t,e){const n={get(s){const i=this.__v_raw,o=Oe(i),l=Oe(s);t||(Ht(s,l)&&kt(o,"get",s),kt(o,"get",l));const{has:c}=ua(o),u=e?Iu:t?qa:Et;if(c.call(o,s))return u(i.get(s));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&kt(Oe(s),"iterate",hs),s.size},has(s){const i=this.__v_raw,o=Oe(i),l=Oe(s);return t||(Ht(s,l)&&kt(o,"has",s),kt(o,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const o=this,l=o.__v_raw,c=Oe(l),u=e?Iu:t?qa:Et;return!t&&kt(c,"iterate",hs),l.forEach((h,d)=>s.call(i,u(h),u(d),o))}};return ct(n,t?{add:ha("add"),set:ha("set"),delete:ha("delete"),clear:ha("clear")}:{add(s){!e&&!ln(s)&&!Or(s)&&(s=Oe(s));const i=Oe(this);return ua(i).has.call(i,s)||(i.add(s),Gn(i,"add",s,s)),this},set(s,i){!e&&!ln(i)&&!Or(i)&&(i=Oe(i));const o=Oe(this),{has:l,get:c}=ua(o);let u=l.call(o,s);u||(s=Oe(s),u=l.call(o,s));const h=c.call(o,s);return o.set(s,i),u?Ht(i,h)&&Gn(o,"set",s,i):Gn(o,"add",s,i),this},delete(s){const i=Oe(this),{has:o,get:l}=ua(i);let c=o.call(i,s);c||(s=Oe(s),c=o.call(i,s)),l&&l.call(i,s);const u=i.delete(s);return c&&Gn(i,"delete",s,void 0),u},clear(){const s=Oe(this),i=s.size!==0,o=s.clear();return i&&Gn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ob(s,t,e)}),n}function Fl(t,e){const n=ab(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Le(n,s)&&s in r?n:r,s,i)}const lb={get:Fl(!1,!1)},cb={get:Fl(!1,!0)},ub={get:Fl(!0,!1)},hb={get:Fl(!0,!0)},Wg=new WeakMap,zg=new WeakMap,Kg=new WeakMap,Qg=new WeakMap;function fb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function db(t){return t.__v_skip||!Object.isExtensible(t)?0:fb(MT(t))}function Fo(t){return Or(t)?t:Bl(t,!1,nb,lb,Wg)}function Yg(t){return Bl(t,!1,sb,cb,zg)}function Wt(t){return Bl(t,!0,rb,ub,Kg)}function pb(t){return Bl(t,!0,ib,hb,Qg)}function Bl(t,e,n,r,s){if(!Be(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=db(t);if(i===0)return t;const o=s.get(t);if(o)return o;const l=new Proxy(t,i===2?r:n);return s.set(t,l),l}function zs(t){return Or(t)?zs(t.__v_raw):!!(t&&t.__v_isReactive)}function Or(t){return!!(t&&t.__v_isReadonly)}function ln(t){return!!(t&&t.__v_isShallow)}function Th(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function mb(t){return!Le(t,"__v_skip")&&Object.isExtensible(t)&&Cg(t,"__v_skip",!0),t}const Et=t=>Be(t)?Fo(t):t,qa=t=>Be(t)?Wt(t):t;function et(t){return t?t.__v_isRef===!0:!1}function Fe(t){return Jg(t,!1)}function rn(t){return Jg(t,!0)}function Jg(t,e){return et(t)?t:new gb(t,e)}class gb{constructor(e,n){this.dep=new xl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Oe(e),this._value=n?e:Et(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ln(e)||Or(e);e=r?e:Oe(e),Ht(e,n)&&(this._rawValue=e,this._value=r?e:Et(e),this.dep.trigger())}}function z(t){return et(t)?t.value:t}function $e(t){return _e(t)?t():z(t)}const _b={get:(t,e,n)=>e==="__v_raw"?t:z(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return et(s)&&!et(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Xg(t){return zs(t)?t:new Proxy(t,_b)}class yb{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new xl,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Zg(t){return new yb(t)}class vb{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return JT(Oe(this._object),this._key)}}class Eb{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ps(t,e,n){return et(t)?t:_e(t)?new Eb(t):Be(t)&&arguments.length>1?Tb(t,e,n):Fe(t)}function Tb(t,e,n){const r=t[e];return et(r)?r:new vb(t,e,n)}class bb{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new xl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=go-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&je!==this)return xg(this,!0),!0}get value(){const e=this.dep.track();return Bg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function wb(t,e,n=!1){let r,s;return _e(t)?r=t:(r=t.get,s=t.set),new bb(r,s,n)}const fa={},Ha=new WeakMap;let rs;function Ib(t,e=!1,n=rs){if(n){let r=Ha.get(n);r||Ha.set(n,r=[]),r.push(t)}}function Ab(t,e,n=De){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:l,call:c}=n,u=G=>s?G:ln(G)||s===!1||s===0?Wn(G,1):Wn(G);let h,d,m,_,R=!1,P=!1;if(et(t)?(d=()=>t.value,R=ln(t)):zs(t)?(d=()=>u(t),R=!0):ce(t)?(P=!0,R=t.some(G=>zs(G)||ln(G)),d=()=>t.map(G=>{if(et(G))return G.value;if(zs(G))return u(G);if(_e(G))return c?c(G,2):G()})):_e(t)?e?d=c?()=>c(t,2):t:d=()=>{if(m){Xn();try{m()}finally{Zn()}}const G=rs;rs=h;try{return c?c(t,3,[_]):t(_)}finally{rs=G}}:d=kn,e&&s){const G=d,Y=s===!0?1/0:s;d=()=>Wn(G(),Y)}const k=Dg(),V=()=>{h.stop(),k&&k.active&&gh(k.effects,h)};if(i&&e){const G=e;e=(...Y)=>{G(...Y),V()}}let L=P?new Array(t.length).fill(fa):fa;const H=G=>{if(!(!(h.flags&1)||!h.dirty&&!G))if(e){const Y=h.run();if(s||R||(P?Y.some((Z,I)=>Ht(Z,L[I])):Ht(Y,L))){m&&m();const Z=rs;rs=h;try{const I=[Y,L===fa?void 0:P&&L[0]===fa?[]:L,_];L=Y,c?c(e,3,I):e(...I)}finally{rs=Z}}}else h.run()};return l&&l(H),h=new Vg(d),h.scheduler=o?()=>o(H,!1):H,_=G=>Ib(G,!1,h),m=h.onStop=()=>{const G=Ha.get(h);if(G){if(c)c(G,4);else for(const Y of G)Y();Ha.delete(h)}},e?r?H(!0):L=h.run():o?o(H.bind(null,!0),!0):h.run(),V.pause=h.pause.bind(h),V.resume=h.resume.bind(h),V.stop=V,V}function Wn(t,e=1/0,n){if(e<=0||!Be(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,et(t))Wn(t.value,e,n);else if(ce(t))for(let r=0;r<t.length;r++)Wn(t[r],e,n);else if(Ol(t)||Ws(t))t.forEach(r=>{Wn(r,e,n)});else if(Ag(t)){for(const r in t)Wn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Wn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Bo(t,e,n,r){try{return r?t(...r):t()}catch(s){Ul(s,e,n)}}function mn(t,e,n,r){if(_e(t)){const s=Bo(t,e,n,r);return s&&wg(s)&&s.catch(i=>{Ul(i,e,n)}),s}if(ce(t)){const s=[];for(let i=0;i<t.length;i++)s.push(mn(t[i],e,n,r));return s}}function Ul(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||De;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,c,u)===!1)return}l=l.parent}if(i){Xn(),Bo(i,null,10,[t,c,u]),Zn();return}}Cb(t,n,s,r,o)}function Cb(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Bt=[];let Cn=-1;const Ks=[];let yr=null,xs=0;const e_=Promise.resolve();let Ga=null;function qn(t){const e=Ga||e_;return t?e.then(this?t.bind(this):t):e}function Sb(t){let e=Cn+1,n=Bt.length;for(;e<n;){const r=e+n>>>1,s=Bt[r],i=yo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function bh(t){if(!(t.flags&1)){const e=yo(t),n=Bt[Bt.length-1];!n||!(t.flags&2)&&e>=yo(n)?Bt.push(t):Bt.splice(Sb(e),0,t),t.flags|=1,t_()}}function t_(){Ga||(Ga=e_.then(r_))}function Rb(t){ce(t)?Ks.push(...t):yr&&t.id===-1?yr.splice(xs+1,0,t):t.flags&1||(Ks.push(t),t.flags|=1),t_()}function bd(t,e,n=Cn+1){for(;n<Bt.length;n++){const r=Bt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Bt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function n_(t){if(Ks.length){const e=[...new Set(Ks)].sort((n,r)=>yo(n)-yo(r));if(Ks.length=0,yr){yr.push(...e);return}for(yr=e,xs=0;xs<yr.length;xs++){const n=yr[xs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}yr=null,xs=0}}const yo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function r_(t){try{for(Cn=0;Cn<Bt.length;Cn++){const e=Bt[Cn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Bo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Cn<Bt.length;Cn++){const e=Bt[Cn];e&&(e.flags&=-2)}Cn=-1,Bt.length=0,n_(),Ga=null,(Bt.length||Ks.length)&&r_()}}let bt=null,s_=null;function Wa(t){const e=bt;return bt=t,s_=t&&t.type.__scopeId||null,e}function qt(t,e=bt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ja(-1);const i=Wa(e);let o;try{o=t(...s)}finally{Wa(i),r._d&&Ja(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function wd(t,e){if(bt===null)return t;const n=zl(bt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,l,c=De]=e[s];i&&(_e(i)&&(i={mounted:i,updated:i}),i.deep&&Wn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Xr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(Xn(),mn(c,n,8,[t.el,l,t,e]),Zn())}}const i_=Symbol("_vte"),o_=t=>t.__isTeleport,eo=t=>t&&(t.disabled||t.disabled===""),Id=t=>t&&(t.defer||t.defer===""),Ad=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Cd=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Au=(t,e)=>{const n=t&&t.to;return Ke(n)?e?e(n):null:n},a_={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,l,c,u){const{mc:h,pc:d,pbc:m,o:{insert:_,querySelector:R,createText:P,createComment:k}}=u,V=eo(e.props);let{shapeFlag:L,children:H,dynamicChildren:G}=e;if(t==null){const Y=e.el=P(""),Z=e.anchor=P("");_(Y,n,r),_(Z,n,r);const I=(E,S)=>{L&16&&h(H,E,S,s,i,o,l,c)},v=()=>{const E=e.target=Au(e.props,R),S=l_(E,e,P,_);E&&(o!=="svg"&&Ad(E)?o="svg":o!=="mathml"&&Cd(E)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(E),V||(I(E,S),Sa(e,!1)))};V&&(I(n,Z),Sa(e,!0)),Id(e.props)?(e.el.__isMounted=!1,Mt(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(Id(e.props)&&t.el.__isMounted===!1){Mt(()=>{a_.process(t,e,n,r,s,i,o,l,c,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const Y=e.anchor=t.anchor,Z=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=eo(t.props),E=v?n:Z,S=v?Y:I;if(o==="svg"||Ad(Z)?o="svg":(o==="mathml"||Cd(Z))&&(o="mathml"),G?(m(t.dynamicChildren,G,E,s,i,o,l),Ch(t,e,!0)):c||d(t,e,E,S,s,i,o,l,!1),V)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):da(e,n,Y,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const A=e.target=Au(e.props,R);A&&da(e,A,null,u,0)}else v&&da(e,Z,I,u,1);Sa(e,V)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:h,target:d,props:m}=t;if(d&&(s(u),s(h)),i&&s(c),o&16){const _=i||!eo(m);for(let R=0;R<l.length;R++){const P=l[R];r(P,e,n,_,!!P.dynamicChildren)}}},move:da,hydrate:Pb};function da(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:l,shapeFlag:c,children:u,props:h}=t,d=i===2;if(d&&r(o,e,n),(!d||eo(h))&&c&16)for(let m=0;m<u.length;m++)s(u[m],e,n,2);d&&r(l,e,n)}function Pb(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:h}},d){function m(P,k,V,L){k.anchor=d(o(P),k,l(P),n,r,s,i),k.targetStart=V,k.targetAnchor=L}const _=e.target=Au(e.props,c),R=eo(e.props);if(_){const P=_._lpa||_.firstChild;if(e.shapeFlag&16)if(R)m(t,e,P,P&&o(P));else{e.anchor=o(t);let k=P;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,_._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||l_(_,e,h,u),d(P&&o(P),e,_,n,r,s,i)}Sa(e,R)}else R&&e.shapeFlag&16&&m(t,e,t,o(t));return e.anchor&&o(e.anchor)}const kb=a_;function Sa(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function l_(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[i_]=i,t&&(r(s,t),r(i,t)),i}const Hn=Symbol("_leaveCb"),pa=Symbol("_enterCb");function Ob(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ur(()=>{t.isMounted=!0}),wh(()=>{t.isUnmounting=!0}),t}const sn=[Function,Array],c_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:sn,onEnter:sn,onAfterEnter:sn,onEnterCancelled:sn,onBeforeLeave:sn,onLeave:sn,onAfterLeave:sn,onLeaveCancelled:sn,onBeforeAppear:sn,onAppear:sn,onAfterAppear:sn,onAppearCancelled:sn},u_=t=>{const e=t.subTree;return e.component?u_(e.component):e},Nb={name:"BaseTransition",props:c_,setup(t,{slots:e}){const n=Tn(),r=Ob();return()=>{const s=e.default&&d_(e.default(),!0);if(!s||!s.length)return;const i=h_(s),o=Oe(t),{mode:l}=o;if(r.isLeaving)return Hc(i);const c=Sd(i);if(!c)return Hc(i);let u=Cu(c,o,r,n,d=>u=d);c.type!==Nt&&vo(c,u);let h=n.subTree&&Sd(n.subTree);if(h&&h.type!==Nt&&!is(h,c)&&u_(n).type!==Nt){let d=Cu(h,o,r,n);if(vo(h,d),l==="out-in"&&c.type!==Nt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},Hc(i);l==="in-out"&&c.type!==Nt?d.delayLeave=(m,_,R)=>{const P=f_(r,h);P[String(h.key)]=h,m[Hn]=()=>{_(),m[Hn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{R(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function h_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Nt){e=n;break}}return e}const Db=Nb;function f_(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Cu(t,e,n,r,s){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:m,onLeave:_,onAfterLeave:R,onLeaveCancelled:P,onBeforeAppear:k,onAppear:V,onAfterAppear:L,onAppearCancelled:H}=e,G=String(t.key),Y=f_(n,t),Z=(E,S)=>{E&&mn(E,r,9,S)},I=(E,S)=>{const A=S[1];Z(E,S),ce(E)?E.every(T=>T.length<=1)&&A():E.length<=1&&A()},v={mode:o,persisted:l,beforeEnter(E){let S=c;if(!n.isMounted)if(i)S=k||c;else return;E[Hn]&&E[Hn](!0);const A=Y[G];A&&is(t,A)&&A.el[Hn]&&A.el[Hn](),Z(S,[E])},enter(E){let S=u,A=h,T=d;if(!n.isMounted)if(i)S=V||u,A=L||h,T=H||d;else return;let g=!1;const F=E[pa]=te=>{g||(g=!0,te?Z(T,[E]):Z(A,[E]),v.delayedLeave&&v.delayedLeave(),E[pa]=void 0)};S?I(S,[E,F]):F()},leave(E,S){const A=String(t.key);if(E[pa]&&E[pa](!0),n.isUnmounting)return S();Z(m,[E]);let T=!1;const g=E[Hn]=F=>{T||(T=!0,S(),F?Z(P,[E]):Z(R,[E]),E[Hn]=void 0,Y[A]===t&&delete Y[A])};Y[A]=t,_?I(_,[E,g]):g()},clone(E){const S=Cu(E,e,n,r,s);return s&&s(S),S}};return v}function Hc(t){if($l(t))return t=Nr(t),t.children=null,t}function Sd(t){if(!$l(t))return o_(t.type)&&t.children?h_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&_e(n.default))return n.default()}}function vo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,vo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function d_(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ut?(o.patchFlag&128&&s++,r=r.concat(d_(o.children,e,l))):(e||o.type!==Nt)&&r.push(l!=null?Nr(o,{key:l}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function gn(t,e){return _e(t)?ct({name:t.name},e,{setup:t}):t}function p_(){const t=Tn();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function m_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ms(t){const e=Tn(),n=rn(null);if(e){const s=e.refs===De?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}const za=new WeakMap;function to(t,e,n,r,s=!1){if(ce(t)){t.forEach((R,P)=>to(R,e&&(ce(e)?e[P]:e),n,r,s));return}if(Qs(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&to(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?zl(r.component):r.el,o=s?null:i,{i:l,r:c}=t,u=e&&e.r,h=l.refs===De?l.refs={}:l.refs,d=l.setupState,m=Oe(d),_=d===De?bg:R=>Le(m,R);if(u!=null&&u!==c){if(Rd(e),Ke(u))h[u]=null,_(u)&&(d[u]=null);else if(et(u)){u.value=null;const R=e;R.k&&(h[R.k]=null)}}if(_e(c))Bo(c,l,12,[o,h]);else{const R=Ke(c),P=et(c);if(R||P){const k=()=>{if(t.f){const V=R?_(c)?d[c]:h[c]:c.value;if(s)ce(V)&&gh(V,i);else if(ce(V))V.includes(i)||V.push(i);else if(R)h[c]=[i],_(c)&&(d[c]=h[c]);else{const L=[i];c.value=L,t.k&&(h[t.k]=L)}}else R?(h[c]=o,_(c)&&(d[c]=o)):P&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const V=()=>{k(),za.delete(t)};V.id=-1,za.set(t,V),Mt(V,n)}else Rd(t),k()}}}function Rd(t){const e=za.get(t);e&&(e.flags|=8,za.delete(t))}Vl().requestIdleCallback;Vl().cancelIdleCallback;const Qs=t=>!!t.type.__asyncLoader,$l=t=>t.type.__isKeepAlive;function Vb(t,e){g_(t,"a",e)}function Lb(t,e){g_(t,"da",e)}function g_(t,e,n=Dt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(jl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)$l(s.parent.vnode)&&xb(r,e,n,s),s=s.parent}}function xb(t,e,n,r){const s=jl(e,t,r,!0);ql(()=>{gh(r[e],s)},n)}function jl(t,e,n=Dt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Xn();const l=Uo(n),c=mn(e,n,t,o);return l(),Zn(),c});return r?s.unshift(i):s.push(i),i}}const or=t=>(e,n=Dt)=>{(!bo||t==="sp")&&jl(t,(...r)=>e(...r),n)},Mb=or("bm"),Ur=or("m"),Fb=or("bu"),Bb=or("u"),wh=or("bum"),ql=or("um"),Ub=or("sp"),$b=or("rtg"),jb=or("rtc");function qb(t,e=Dt){jl("ec",t,e)}const __="components";function ND(t,e){return v_(__,t,!0,e)||t}const y_=Symbol.for("v-ndc");function hi(t){return Ke(t)?v_(__,t,!1)||t:t||y_}function v_(t,e,n=!0,r=!1){const s=bt||Dt;if(s){const i=s.type;{const l=Rw(i,!1);if(l&&(l===e||l===nn(e)||l===Dl(nn(e))))return i}const o=Pd(s[t]||i[t],e)||Pd(s.appContext[t],e);return!o&&r?i:o}}function Pd(t,e){return t&&(t[e]||t[nn(e)]||t[Dl(nn(e))])}function DD(t,e,n,r){let s;const i=n,o=ce(t);if(o||Ke(t)){const l=o&&zs(t);let c=!1,u=!1;l&&(c=!ln(t),u=Or(t),t=Ml(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(c?u?qa(Et(t[h])):Et(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,i)}else if(Be(t))if(t[Symbol.iterator])s=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);s=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function VD(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(ce(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function $t(t,e,n={},r,s){if(bt.ce||bt.parent&&Qs(bt.parent)&&bt.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),Ne(),Ft(Ut,null,[at("slot",n,r&&r())],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),Ne();const o=i&&E_(i(n)),l=n.key||o&&o.key,c=Ft(Ut,{key:(l&&!pn(l)?l:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function E_(t){return t.some(e=>To(e)?!(e.type===Nt||e.type===Ut&&!E_(e.children)):!0)?t:null}const Su=t=>t?q_(t)?zl(t):Su(t.parent):null,no=ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Su(t.parent),$root:t=>Su(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>I_(t),$forceUpdate:t=>t.f||(t.f=()=>{bh(t.update)}),$nextTick:t=>t.n||(t.n=qn.bind(t.proxy)),$watch:t=>fw.bind(t)}),Gc=(t,e)=>t!==De&&!t.__isScriptSetup&&Le(t,e),Hb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Gc(r,e))return o[e]=1,r[e];if(s!==De&&Le(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Le(u,e))return o[e]=3,i[e];if(n!==De&&Le(n,e))return o[e]=4,n[e];Ru&&(o[e]=0)}}const h=no[e];let d,m;if(h)return e==="$attrs"&&kt(t.attrs,"get",""),h(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==De&&Le(n,e))return o[e]=4,n[e];if(m=c.config.globalProperties,Le(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Gc(s,e)?(s[e]=n,!0):r!==De&&Le(r,e)?(r[e]=n,!0):Le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},l){let c,u;return!!(n[l]||t!==De&&l[0]!=="$"&&Le(t,l)||Gc(e,l)||(c=i[0])&&Le(c,l)||Le(r,l)||Le(no,l)||Le(s.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function T_(){return b_().slots}function Gb(){return b_().attrs}function b_(t){const e=Tn();return e.setupContext||(e.setupContext=G_(e))}function Ka(t){return ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Qa(t,e){return!t||!e?t||e:ce(t)&&ce(e)?t.concat(e):ct({},Ka(t),Ka(e))}let Ru=!0;function Wb(t){const e=I_(t),n=t.proxy,r=t.ctx;Ru=!1,e.beforeCreate&&kd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:_,updated:R,activated:P,deactivated:k,beforeDestroy:V,beforeUnmount:L,destroyed:H,unmounted:G,render:Y,renderTracked:Z,renderTriggered:I,errorCaptured:v,serverPrefetch:E,expose:S,inheritAttrs:A,components:T,directives:g,filters:F}=e;if(u&&zb(u,r,null),o)for(const ae in o){const oe=o[ae];_e(oe)&&(r[ae]=oe.bind(n))}if(s){const ae=s.call(n,n);Be(ae)&&(t.data=Fo(ae))}if(Ru=!0,i)for(const ae in i){const oe=i[ae],fe=_e(oe)?oe.bind(n,n):_e(oe.get)?oe.get.bind(n,n):kn,we=!_e(oe)&&_e(oe.set)?oe.set.bind(n):kn,be=Q({get:fe,set:we});Object.defineProperty(r,ae,{enumerable:!0,configurable:!0,get:()=>be.value,set:Re=>be.value=Re})}if(l)for(const ae in l)w_(l[ae],r,n,ae);if(c){const ae=_e(c)?c.call(n):c;Reflect.ownKeys(ae).forEach(oe=>{ro(oe,ae[oe])})}h&&kd(h,t,"c");function le(ae,oe){ce(oe)?oe.forEach(fe=>ae(fe.bind(n))):oe&&ae(oe.bind(n))}if(le(Mb,d),le(Ur,m),le(Fb,_),le(Bb,R),le(Vb,P),le(Lb,k),le(qb,v),le(jb,Z),le($b,I),le(wh,L),le(ql,G),le(Ub,E),ce(S))if(S.length){const ae=t.exposed||(t.exposed={});S.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>n[oe],set:fe=>n[oe]=fe,enumerable:!0})})}else t.exposed||(t.exposed={});Y&&t.render===kn&&(t.render=Y),A!=null&&(t.inheritAttrs=A),T&&(t.components=T),g&&(t.directives=g),E&&m_(t)}function zb(t,e,n=kn){ce(t)&&(t=Pu(t));for(const r in t){const s=t[r];let i;Be(s)?"default"in s?i=wt(s.from||r,s.default,!0):i=wt(s.from||r):i=wt(s),et(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function kd(t,e,n){mn(ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function w_(t,e,n,r){let s=r.includes(".")?x_(n,r):()=>n[r];if(Ke(t)){const i=e[t];_e(i)&&ze(s,i)}else if(_e(t))ze(s,t.bind(n));else if(Be(t))if(ce(t))t.forEach(i=>w_(i,e,n,r));else{const i=_e(t.handler)?t.handler.bind(n):e[t.handler];_e(i)&&ze(s,i,t)}}function I_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Ya(c,u,o,!0)),Ya(c,e,o)),Be(e)&&i.set(e,c),c}function Ya(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Ya(t,i,n,!0),s&&s.forEach(o=>Ya(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const l=Kb[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const Kb={data:Od,props:Nd,emits:Nd,methods:qi,computed:qi,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:qi,directives:qi,watch:Yb,provide:Od,inject:Qb};function Od(t,e){return e?t?function(){return ct(_e(t)?t.call(this,this):t,_e(e)?e.call(this,this):e)}:e:t}function Qb(t,e){return qi(Pu(t),Pu(e))}function Pu(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function xt(t,e){return t?[...new Set([].concat(t,e))]:e}function qi(t,e){return t?ct(Object.create(null),t,e):e}function Nd(t,e){return t?ce(t)&&ce(e)?[...new Set([...t,...e])]:ct(Object.create(null),Ka(t),Ka(e??{})):e}function Yb(t,e){if(!t)return e;if(!e)return t;const n=ct(Object.create(null),t);for(const r in e)n[r]=xt(t[r],e[r]);return n}function A_(){return{app:null,config:{isNativeTag:bg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jb=0;function Xb(t,e){return function(r,s=null){_e(r)||(r=ct({},r)),s!=null&&!Be(s)&&(s=null);const i=A_(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:Jb++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:kw,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&_e(h.install)?(o.add(h),h.install(u,...d)):_e(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,m){if(!c){const _=u._ceVNode||at(r,s);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,h,m),c=!0,u._container=h,h.__vue_app__=u,zl(_.component)}},onUnmount(h){l.push(h)},unmount(){c&&(mn(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=Ys;Ys=u;try{return h()}finally{Ys=d}}};return u}}let Ys=null;function ro(t,e){if(Dt){let n=Dt.provides;const r=Dt.parent&&Dt.parent.provides;r===n&&(n=Dt.provides=Object.create(r)),n[t]=e}}function wt(t,e,n=!1){const r=Tn();if(r||Ys){let s=Ys?Ys._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&_e(e)?e.call(r&&r.proxy):e}}const C_={},S_=()=>Object.create(C_),R_=t=>Object.getPrototypeOf(t)===C_;function Zb(t,e,n,r=!1){const s={},i=S_();t.propsDefaults=Object.create(null),P_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Yg(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function ew(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,l=Oe(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(Gl(t.emitsOptions,m))continue;const _=e[m];if(c)if(Le(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const R=nn(m);s[R]=ku(c,l,R,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{P_(t,e,s,i)&&(u=!0);let h;for(const d in l)(!e||!Le(e,d)&&((h=Br(d))===d||!Le(e,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=ku(c,l,d,void 0,t,!0)):delete s[d]);if(i!==l)for(const d in i)(!e||!Le(e,d))&&(delete i[d],u=!0)}u&&Gn(t.attrs,"set","")}function P_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Ji(c))continue;const u=e[c];let h;s&&Le(s,h=nn(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:Gl(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Oe(n),u=l||De;for(let h=0;h<i.length;h++){const d=i[h];n[d]=ku(s,c,d,u[d],t,!Le(u,d))}}return o}function ku(t,e,n,r,s,i){const o=t[n];if(o!=null){const l=Le(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&_e(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Uo(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===Br(n))&&(r=!0))}return r}const tw=new WeakMap;function k_(t,e,n=!1){const r=n?tw:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},l=[];let c=!1;if(!_e(t)){const h=d=>{c=!0;const[m,_]=k_(d,e,!0);ct(o,m),_&&l.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Be(t)&&r.set(t,Gs),Gs;if(ce(i))for(let h=0;h<i.length;h++){const d=nn(i[h]);Dd(d)&&(o[d]=De)}else if(i)for(const h in i){const d=nn(h);if(Dd(d)){const m=i[h],_=o[d]=ce(m)||_e(m)?{type:m}:ct({},m),R=_.type;let P=!1,k=!0;if(ce(R))for(let V=0;V<R.length;++V){const L=R[V],H=_e(L)&&L.name;if(H==="Boolean"){P=!0;break}else H==="String"&&(k=!1)}else P=_e(R)&&R.name==="Boolean";_[0]=P,_[1]=k,(P||Le(_,"default"))&&l.push(d)}}const u=[o,l];return Be(t)&&r.set(t,u),u}function Dd(t){return t[0]!=="$"&&!Ji(t)}const Ih=t=>t==="_"||t==="_ctx"||t==="$stable",Ah=t=>ce(t)?t.map(Rn):[Rn(t)],nw=(t,e,n)=>{if(e._n)return e;const r=qt((...s)=>Ah(e(...s)),n);return r._c=!1,r},O_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Ih(s))continue;const i=t[s];if(_e(i))e[s]=nw(s,i,r);else if(i!=null){const o=Ah(i);e[s]=()=>o}}},N_=(t,e)=>{const n=Ah(e);t.slots.default=()=>n},D_=(t,e,n)=>{for(const r in e)(n||!Ih(r))&&(t[r]=e[r])},rw=(t,e,n)=>{const r=t.slots=S_();if(t.vnode.shapeFlag&32){const s=e._;s?(D_(r,e,n),n&&Cg(r,"_",s,!0)):O_(e,r)}else e&&N_(t,e)},sw=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=De;if(r.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:D_(s,e,n):(i=!e.$stable,O_(e,s)),o=e}else e&&(N_(t,e),o={default:1});if(i)for(const l in s)!Ih(l)&&o[l]==null&&delete s[l]},Mt=vw;function iw(t){return ow(t)}function ow(t,e){const n=Vl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:_=kn,insertStaticContent:R}=t,P=(b,C,w,D=null,B=null,x=null,K=void 0,U=null,j=!!C.dynamicChildren)=>{if(b===C)return;b&&!is(b,C)&&(D=M(b),Re(b,B,x,!0),b=null),C.patchFlag===-2&&(j=!1,C.dynamicChildren=null);const{type:W,ref:de,shapeFlag:re}=C;switch(W){case Wl:k(b,C,w,D);break;case Nt:V(b,C,w,D);break;case zc:b==null&&L(C,w,D,K);break;case Ut:T(b,C,w,D,B,x,K,U,j);break;default:re&1?Y(b,C,w,D,B,x,K,U,j):re&6?g(b,C,w,D,B,x,K,U,j):(re&64||re&128)&&W.process(b,C,w,D,B,x,K,U,j,ne)}de!=null&&B?to(de,b&&b.ref,x,C||b,!C):de==null&&b&&b.ref!=null&&to(b.ref,null,x,b,!0)},k=(b,C,w,D)=>{if(b==null)r(C.el=l(C.children),w,D);else{const B=C.el=b.el;C.children!==b.children&&u(B,C.children)}},V=(b,C,w,D)=>{b==null?r(C.el=c(C.children||""),w,D):C.el=b.el},L=(b,C,w,D)=>{[b.el,b.anchor]=R(b.children,C,w,D,b.el,b.anchor)},H=({el:b,anchor:C},w,D)=>{let B;for(;b&&b!==C;)B=m(b),r(b,w,D),b=B;r(C,w,D)},G=({el:b,anchor:C})=>{let w;for(;b&&b!==C;)w=m(b),s(b),b=w;s(C)},Y=(b,C,w,D,B,x,K,U,j)=>{C.type==="svg"?K="svg":C.type==="math"&&(K="mathml"),b==null?Z(C,w,D,B,x,K,U,j):E(b,C,B,x,K,U,j)},Z=(b,C,w,D,B,x,K,U)=>{let j,W;const{props:de,shapeFlag:re,transition:he,dirs:pe}=b;if(j=b.el=o(b.type,x,de&&de.is,de),re&8?h(j,b.children):re&16&&v(b.children,j,null,D,B,Wc(b,x),K,U),pe&&Xr(b,null,D,"created"),I(j,b,b.scopeId,K,D),de){for(const Me in de)Me!=="value"&&!Ji(Me)&&i(j,Me,null,de[Me],x,D);"value"in de&&i(j,"value",null,de.value,x),(W=de.onVnodeBeforeMount)&&An(W,D,b)}pe&&Xr(b,null,D,"beforeMount");const Ie=aw(B,he);Ie&&he.beforeEnter(j),r(j,C,w),((W=de&&de.onVnodeMounted)||Ie||pe)&&Mt(()=>{W&&An(W,D,b),Ie&&he.enter(j),pe&&Xr(b,null,D,"mounted")},B)},I=(b,C,w,D,B)=>{if(w&&_(b,w),D)for(let x=0;x<D.length;x++)_(b,D[x]);if(B){let x=B.subTree;if(C===x||U_(x.type)&&(x.ssContent===C||x.ssFallback===C)){const K=B.vnode;I(b,K,K.scopeId,K.slotScopeIds,B.parent)}}},v=(b,C,w,D,B,x,K,U,j=0)=>{for(let W=j;W<b.length;W++){const de=b[W]=U?vr(b[W]):Rn(b[W]);P(null,de,C,w,D,B,x,K,U)}},E=(b,C,w,D,B,x,K)=>{const U=C.el=b.el;let{patchFlag:j,dynamicChildren:W,dirs:de}=C;j|=b.patchFlag&16;const re=b.props||De,he=C.props||De;let pe;if(w&&Zr(w,!1),(pe=he.onVnodeBeforeUpdate)&&An(pe,w,C,b),de&&Xr(C,b,w,"beforeUpdate"),w&&Zr(w,!0),(re.innerHTML&&he.innerHTML==null||re.textContent&&he.textContent==null)&&h(U,""),W?S(b.dynamicChildren,W,U,w,D,Wc(C,B),x):K||oe(b,C,U,null,w,D,Wc(C,B),x,!1),j>0){if(j&16)A(U,re,he,w,B);else if(j&2&&re.class!==he.class&&i(U,"class",null,he.class,B),j&4&&i(U,"style",re.style,he.style,B),j&8){const Ie=C.dynamicProps;for(let Me=0;Me<Ie.length;Me++){const ke=Ie[Me],At=re[ke],Ct=he[ke];(Ct!==At||ke==="value")&&i(U,ke,At,Ct,B,w)}}j&1&&b.children!==C.children&&h(U,C.children)}else!K&&W==null&&A(U,re,he,w,B);((pe=he.onVnodeUpdated)||de)&&Mt(()=>{pe&&An(pe,w,C,b),de&&Xr(C,b,w,"updated")},D)},S=(b,C,w,D,B,x,K)=>{for(let U=0;U<C.length;U++){const j=b[U],W=C[U],de=j.el&&(j.type===Ut||!is(j,W)||j.shapeFlag&198)?d(j.el):w;P(j,W,de,null,D,B,x,K,!0)}},A=(b,C,w,D,B)=>{if(C!==w){if(C!==De)for(const x in C)!Ji(x)&&!(x in w)&&i(b,x,C[x],null,B,D);for(const x in w){if(Ji(x))continue;const K=w[x],U=C[x];K!==U&&x!=="value"&&i(b,x,U,K,B,D)}"value"in w&&i(b,"value",C.value,w.value,B)}},T=(b,C,w,D,B,x,K,U,j)=>{const W=C.el=b?b.el:l(""),de=C.anchor=b?b.anchor:l("");let{patchFlag:re,dynamicChildren:he,slotScopeIds:pe}=C;pe&&(U=U?U.concat(pe):pe),b==null?(r(W,w,D),r(de,w,D),v(C.children||[],w,de,B,x,K,U,j)):re>0&&re&64&&he&&b.dynamicChildren?(S(b.dynamicChildren,he,w,B,x,K,U),(C.key!=null||B&&C===B.subTree)&&Ch(b,C,!0)):oe(b,C,w,de,B,x,K,U,j)},g=(b,C,w,D,B,x,K,U,j)=>{C.slotScopeIds=U,b==null?C.shapeFlag&512?B.ctx.activate(C,w,D,K,j):F(C,w,D,B,x,K,j):te(b,C,j)},F=(b,C,w,D,B,x,K)=>{const U=b.component=Iw(b,D,B);if($l(b)&&(U.ctx.renderer=ne),Aw(U,!1,K),U.asyncDep){if(B&&B.registerDep(U,le,K),!b.el){const j=U.subTree=at(Nt);V(null,j,C,w),b.placeholder=j.el}}else le(U,b,C,w,B,x,K)},te=(b,C,w)=>{const D=C.component=b.component;if(_w(b,C,w))if(D.asyncDep&&!D.asyncResolved){ae(D,C,w);return}else D.next=C,D.update();else C.el=b.el,D.vnode=C},le=(b,C,w,D,B,x,K)=>{const U=()=>{if(b.isMounted){let{next:re,bu:he,u:pe,parent:Ie,vnode:Me}=b;{const Yt=V_(b);if(Yt){re&&(re.el=Me.el,ae(b,re,K)),Yt.asyncDep.then(()=>{b.isUnmounted||U()});return}}let ke=re,At;Zr(b,!1),re?(re.el=Me.el,ae(b,re,K)):re=Me,he&&Ca(he),(At=re.props&&re.props.onVnodeBeforeUpdate)&&An(At,Ie,re,Me),Zr(b,!0);const Ct=Ld(b),Qt=b.subTree;b.subTree=Ct,P(Qt,Ct,d(Qt.el),M(Qt),b,B,x),re.el=Ct.el,ke===null&&yw(b,Ct.el),pe&&Mt(pe,B),(At=re.props&&re.props.onVnodeUpdated)&&Mt(()=>An(At,Ie,re,Me),B)}else{let re;const{el:he,props:pe}=C,{bm:Ie,m:Me,parent:ke,root:At,type:Ct}=b,Qt=Qs(C);Zr(b,!1),Ie&&Ca(Ie),!Qt&&(re=pe&&pe.onVnodeBeforeMount)&&An(re,ke,C),Zr(b,!0);{At.ce&&At.ce._def.shadowRoot!==!1&&At.ce._injectChildStyle(Ct);const Yt=b.subTree=Ld(b);P(null,Yt,w,D,b,B,x),C.el=Yt.el}if(Me&&Mt(Me,B),!Qt&&(re=pe&&pe.onVnodeMounted)){const Yt=C;Mt(()=>An(re,ke,Yt),B)}(C.shapeFlag&256||ke&&Qs(ke.vnode)&&ke.vnode.shapeFlag&256)&&b.a&&Mt(b.a,B),b.isMounted=!0,C=w=D=null}};b.scope.on();const j=b.effect=new Vg(U);b.scope.off();const W=b.update=j.run.bind(j),de=b.job=j.runIfDirty.bind(j);de.i=b,de.id=b.uid,j.scheduler=()=>bh(de),Zr(b,!0),W()},ae=(b,C,w)=>{C.component=b;const D=b.vnode.props;b.vnode=C,b.next=null,ew(b,C.props,D,w),sw(b,C.children,w),Xn(),bd(b),Zn()},oe=(b,C,w,D,B,x,K,U,j=!1)=>{const W=b&&b.children,de=b?b.shapeFlag:0,re=C.children,{patchFlag:he,shapeFlag:pe}=C;if(he>0){if(he&128){we(W,re,w,D,B,x,K,U,j);return}else if(he&256){fe(W,re,w,D,B,x,K,U,j);return}}pe&8?(de&16&&Qe(W,B,x),re!==W&&h(w,re)):de&16?pe&16?we(W,re,w,D,B,x,K,U,j):Qe(W,B,x,!0):(de&8&&h(w,""),pe&16&&v(re,w,D,B,x,K,U,j))},fe=(b,C,w,D,B,x,K,U,j)=>{b=b||Gs,C=C||Gs;const W=b.length,de=C.length,re=Math.min(W,de);let he;for(he=0;he<re;he++){const pe=C[he]=j?vr(C[he]):Rn(C[he]);P(b[he],pe,w,null,B,x,K,U,j)}W>de?Qe(b,B,x,!0,!1,re):v(C,w,D,B,x,K,U,j,re)},we=(b,C,w,D,B,x,K,U,j)=>{let W=0;const de=C.length;let re=b.length-1,he=de-1;for(;W<=re&&W<=he;){const pe=b[W],Ie=C[W]=j?vr(C[W]):Rn(C[W]);if(is(pe,Ie))P(pe,Ie,w,null,B,x,K,U,j);else break;W++}for(;W<=re&&W<=he;){const pe=b[re],Ie=C[he]=j?vr(C[he]):Rn(C[he]);if(is(pe,Ie))P(pe,Ie,w,null,B,x,K,U,j);else break;re--,he--}if(W>re){if(W<=he){const pe=he+1,Ie=pe<de?C[pe].el:D;for(;W<=he;)P(null,C[W]=j?vr(C[W]):Rn(C[W]),w,Ie,B,x,K,U,j),W++}}else if(W>he)for(;W<=re;)Re(b[W],B,x,!0),W++;else{const pe=W,Ie=W,Me=new Map;for(W=Ie;W<=he;W++){const mt=C[W]=j?vr(C[W]):Rn(C[W]);mt.key!=null&&Me.set(mt.key,W)}let ke,At=0;const Ct=he-Ie+1;let Qt=!1,Yt=0;const un=new Array(Ct);for(W=0;W<Ct;W++)un[W]=0;for(W=pe;W<=re;W++){const mt=b[W];if(At>=Ct){Re(mt,B,x,!0);continue}let ft;if(mt.key!=null)ft=Me.get(mt.key);else for(ke=Ie;ke<=he;ke++)if(un[ke-Ie]===0&&is(mt,C[ke])){ft=ke;break}ft===void 0?Re(mt,B,x,!0):(un[ft-Ie]=W+1,ft>=Yt?Yt=ft:Qt=!0,P(mt,C[ft],w,null,B,x,K,U,j),At++)}const Ss=Qt?lw(un):Gs;for(ke=Ss.length-1,W=Ct-1;W>=0;W--){const mt=Ie+W,ft=C[mt],wi=C[mt+1],zr=mt+1<de?wi.el||wi.placeholder:D;un[W]===0?P(null,ft,w,zr,B,x,K,U,j):Qt&&(ke<0||W!==Ss[ke]?be(ft,w,zr,2):ke--)}}},be=(b,C,w,D,B=null)=>{const{el:x,type:K,transition:U,children:j,shapeFlag:W}=b;if(W&6){be(b.component.subTree,C,w,D);return}if(W&128){b.suspense.move(C,w,D);return}if(W&64){K.move(b,C,w,ne);return}if(K===Ut){r(x,C,w);for(let re=0;re<j.length;re++)be(j[re],C,w,D);r(b.anchor,C,w);return}if(K===zc){H(b,C,w);return}if(D!==2&&W&1&&U)if(D===0)U.beforeEnter(x),r(x,C,w),Mt(()=>U.enter(x),B);else{const{leave:re,delayLeave:he,afterLeave:pe}=U,Ie=()=>{b.ctx.isUnmounted?s(x):r(x,C,w)},Me=()=>{x._isLeaving&&x[Hn](!0),re(x,()=>{Ie(),pe&&pe()})};he?he(x,Ie,Me):Me()}else r(x,C,w)},Re=(b,C,w,D=!1,B=!1)=>{const{type:x,props:K,ref:U,children:j,dynamicChildren:W,shapeFlag:de,patchFlag:re,dirs:he,cacheIndex:pe}=b;if(re===-2&&(B=!1),U!=null&&(Xn(),to(U,null,w,b,!0),Zn()),pe!=null&&(C.renderCache[pe]=void 0),de&256){C.ctx.deactivate(b);return}const Ie=de&1&&he,Me=!Qs(b);let ke;if(Me&&(ke=K&&K.onVnodeBeforeUnmount)&&An(ke,C,b),de&6)ht(b.component,w,D);else{if(de&128){b.suspense.unmount(w,D);return}Ie&&Xr(b,null,C,"beforeUnmount"),de&64?b.type.remove(b,C,w,ne,D):W&&!W.hasOnce&&(x!==Ut||re>0&&re&64)?Qe(W,C,w,!1,!0):(x===Ut&&re&384||!B&&de&16)&&Qe(j,C,w),D&&st(b)}(Me&&(ke=K&&K.onVnodeUnmounted)||Ie)&&Mt(()=>{ke&&An(ke,C,b),Ie&&Xr(b,null,C,"unmounted")},w)},st=b=>{const{type:C,el:w,anchor:D,transition:B}=b;if(C===Ut){He(w,D);return}if(C===zc){G(b);return}const x=()=>{s(w),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(b.shapeFlag&1&&B&&!B.persisted){const{leave:K,delayLeave:U}=B,j=()=>K(w,x);U?U(b.el,x,j):j()}else x()},He=(b,C)=>{let w;for(;b!==C;)w=m(b),s(b),b=w;s(C)},ht=(b,C,w)=>{const{bum:D,scope:B,job:x,subTree:K,um:U,m:j,a:W}=b;Vd(j),Vd(W),D&&Ca(D),B.stop(),x&&(x.flags|=8,Re(K,b,C,w)),U&&Mt(U,C),Mt(()=>{b.isUnmounted=!0},C)},Qe=(b,C,w,D=!1,B=!1,x=0)=>{for(let K=x;K<b.length;K++)Re(b[K],C,w,D,B)},M=b=>{if(b.shapeFlag&6)return M(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const C=m(b.anchor||b.el),w=C&&C[i_];return w?m(w):C};let ee=!1;const X=(b,C,w)=>{b==null?C._vnode&&Re(C._vnode,null,null,!0):P(C._vnode||null,b,C,null,null,null,w),C._vnode=b,ee||(ee=!0,bd(),n_(),ee=!1)},ne={p:P,um:Re,m:be,r:st,mt:F,mc:v,pc:oe,pbc:S,n:M,o:t};return{render:X,hydrate:void 0,createApp:Xb(X)}}function Wc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Zr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function aw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ch(t,e,n=!1){const r=t.children,s=e.children;if(ce(r)&&ce(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=vr(s[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Ch(o,l)),l.type===Wl&&l.patchFlag!==-1&&(l.el=o.el),l.type===Nt&&!l.el&&(l.el=o.el)}}function lw(t){const e=t.slice(),n=[0];let r,s,i,o,l;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function V_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:V_(e)}function Vd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const cw=Symbol.for("v-scx"),uw=()=>wt(cw);function L_(t,e){return Hl(t,null,e)}function hw(t,e){return Hl(t,null,{flush:"sync"})}function ze(t,e,n){return Hl(t,e,n)}function Hl(t,e,n=De){const{immediate:r,deep:s,flush:i,once:o}=n,l=ct({},n),c=e&&r||!e&&i!=="post";let u;if(bo){if(i==="sync"){const _=uw();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!c){const _=()=>{};return _.stop=kn,_.resume=kn,_.pause=kn,_}}const h=Dt;l.call=(_,R,P)=>mn(_,h,R,P);let d=!1;i==="post"?l.scheduler=_=>{Mt(_,h&&h.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(_,R)=>{R?_():bh(_)}),l.augmentJob=_=>{e&&(_.flags|=4),d&&(_.flags|=2,h&&(_.id=h.uid,_.i=h))};const m=Ab(t,e,l);return bo&&(u?u.push(m):c&&m()),m}function fw(t,e,n){const r=this.proxy,s=Ke(t)?t.includes(".")?x_(r,t):()=>r[t]:t.bind(r,r);let i;_e(e)?i=e:(i=e.handler,n=e);const o=Uo(this),l=Hl(s,i.bind(r),n);return o(),l}function x_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function M_(t,e,n=De){const r=Tn(),s=nn(e),i=Br(e),o=F_(t,s),l=Zg((c,u)=>{let h,d=De,m;return hw(()=>{const _=t[s];Ht(h,_)&&(h=_,u())}),{get(){return c(),n.get?n.get(h):h},set(_){const R=n.set?n.set(_):_;if(!Ht(R,h)&&!(d!==De&&Ht(_,d)))return;const P=r.vnode.props;P&&(e in P||s in P||i in P)&&(`onUpdate:${e}`in P||`onUpdate:${s}`in P||`onUpdate:${i}`in P)||(h=_,u()),r.emit(`update:${e}`,R),Ht(_,R)&&Ht(_,d)&&!Ht(R,m)&&u(),d=_,m=R}}});return l[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?o||De:l,done:!1}:{done:!0}}}},l}const F_=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${nn(e)}Modifiers`]||t[`${Br(e)}Modifiers`];function dw(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||De;let s=n;const i=e.startsWith("update:"),o=i&&F_(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Ke(h)?h.trim():h)),o.number&&(s=n.map(Tu)));let l,c=r[l=Bc(e)]||r[l=Bc(nn(e))];!c&&i&&(c=r[l=Bc(Br(e))]),c&&mn(c,t,6,s);const u=r[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,mn(u,t,6,s)}}const pw=new WeakMap;function B_(t,e,n=!1){const r=n?pw:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},l=!1;if(!_e(t)){const c=u=>{const h=B_(u,e,!0);h&&(l=!0,ct(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Be(t)&&r.set(t,null),null):(ce(i)?i.forEach(c=>o[c]=null):ct(o,i),Be(t)&&r.set(t,o),o)}function Gl(t,e){return!t||!kl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,Br(e))||Le(t,e))}function Ld(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:d,data:m,setupState:_,ctx:R,inheritAttrs:P}=t,k=Wa(t);let V,L;try{if(n.shapeFlag&4){const G=s||r,Y=G;V=Rn(u.call(Y,G,h,d,_,m,R)),L=l}else{const G=e;V=Rn(G.length>1?G(d,{attrs:l,slots:o,emit:c}):G(d,null)),L=e.props?l:mw(l)}}catch(G){so.length=0,Ul(G,t,1),V=at(Nt)}let H=V;if(L&&P!==!1){const G=Object.keys(L),{shapeFlag:Y}=H;G.length&&Y&7&&(i&&G.some(mh)&&(L=gw(L,i)),H=Nr(H,L,!1,!0))}return n.dirs&&(H=Nr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&vo(H,n.transition),V=H,Wa(k),V}const mw=t=>{let e;for(const n in t)(n==="class"||n==="style"||kl(n))&&((e||(e={}))[n]=t[n]);return e},gw=(t,e)=>{const n={};for(const r in t)(!mh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function _w(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?xd(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==r[m]&&!Gl(u,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?xd(r,o,u):!0:!!o;return!1}function xd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Gl(n,i))return!0}return!1}function yw({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const U_=t=>t.__isSuspense;function vw(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):Rb(t)}const Ut=Symbol.for("v-fgt"),Wl=Symbol.for("v-txt"),Nt=Symbol.for("v-cmt"),zc=Symbol.for("v-stc"),so=[];let en=null;function Ne(t=!1){so.push(en=t?null:[])}function Ew(){so.pop(),en=so[so.length-1]||null}let Eo=1;function Ja(t,e=!1){Eo+=t,t<0&&en&&e&&(en.hasOnce=!0)}function $_(t){return t.dynamicChildren=Eo>0?en||Gs:null,Ew(),Eo>0&&en&&en.push(t),t}function vt(t,e,n,r,s,i){return $_(ot(t,e,n,r,s,i,!0))}function Ft(t,e,n,r,s){return $_(at(t,e,n,r,s,!0))}function To(t){return t?t.__v_isVNode===!0:!1}function is(t,e){return t.type===e.type&&t.key===e.key}const j_=({key:t})=>t??null,Ra=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ke(t)||et(t)||_e(t)?{i:bt,r:t,k:e,f:!!n}:t:null);function ot(t,e=null,n=null,r=0,s=null,i=t===Ut?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&j_(e),ref:e&&Ra(e),scopeId:s_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:bt};return l?(Sh(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Ke(n)?8:16),Eo>0&&!o&&en&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&en.push(c),c}const at=Tw;function Tw(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===y_)&&(t=Nt),To(t)){const l=Nr(t,e,!0);return n&&Sh(l,n),Eo>0&&!i&&en&&(l.shapeFlag&6?en[en.indexOf(t)]=l:en.push(l)),l.patchFlag=-2,l}if(Pw(t)&&(t=t.__vccOpts),e){e=_r(e);let{class:l,style:c}=e;l&&!Ke(l)&&(e.class=gt(l)),Be(c)&&(Th(c)&&!ce(c)&&(c=ct({},c)),e.style=Mo(c))}const o=Ke(t)?1:U_(t)?128:o_(t)?64:Be(t)?4:_e(t)?2:0;return ot(t,e,n,r,s,o,i,!0)}function _r(t){return t?Th(t)||R_(t)?ct({},t):t:null}function Nr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?hn(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&j_(u),ref:e&&e.ref?n&&i?ce(i)?i.concat(Ra(e)):[i,Ra(e)]:Ra(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ut?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Nr(t.ssContent),ssFallback:t.ssFallback&&Nr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&vo(h,c.clone(h)),h}function ls(t=" ",e=0){return at(Wl,null,t,e)}function Xt(t="",e=!1){return e?(Ne(),Ft(Nt,null,t)):at(Nt,null,t)}function Rn(t){return t==null||typeof t=="boolean"?at(Nt):ce(t)?at(Ut,null,t.slice()):To(t)?vr(t):at(Wl,null,String(t))}function vr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Nr(t)}function Sh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Sh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!R_(e)?e._ctx=bt:s===3&&bt&&(bt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _e(e)?(e={default:e,_ctx:bt},n=32):(e=String(e),r&64?(n=16,e=[ls(e)]):n=8);t.children=e,t.shapeFlag|=n}function hn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=gt([e.class,r.class]));else if(s==="style")e.style=Mo([e.style,r.style]);else if(kl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ce(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function An(t,e,n,r=null){mn(t,e,7,[n,r])}const bw=A_();let ww=0;function Iw(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||bw,i={uid:ww++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Og(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:k_(r,s),emitsOptions:B_(r,s),emit:null,emitted:null,propsDefaults:De,inheritAttrs:r.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=dw.bind(null,i),t.ce&&t.ce(i),i}let Dt=null;const Tn=()=>Dt||bt;let Xa,Ou;{const t=Vl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Xa=e("__VUE_INSTANCE_SETTERS__",n=>Dt=n),Ou=e("__VUE_SSR_SETTERS__",n=>bo=n)}const Uo=t=>{const e=Dt;return Xa(t),t.scope.on(),()=>{t.scope.off(),Xa(e)}},Md=()=>{Dt&&Dt.scope.off(),Xa(null)};function q_(t){return t.vnode.shapeFlag&4}let bo=!1;function Aw(t,e=!1,n=!1){e&&Ou(e);const{props:r,children:s}=t.vnode,i=q_(t);Zb(t,r,i,e),rw(t,s,n||e);const o=i?Cw(t,e):void 0;return e&&Ou(!1),o}function Cw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Hb);const{setup:r}=n;if(r){Xn();const s=t.setupContext=r.length>1?G_(t):null,i=Uo(t),o=Bo(r,t,0,[t.props,s]),l=wg(o);if(Zn(),i(),(l||t.sp)&&!Qs(t)&&m_(t),l){if(o.then(Md,Md),e)return o.then(c=>{Fd(t,c)}).catch(c=>{Ul(c,t,0)});t.asyncDep=o}else Fd(t,o)}else H_(t)}function Fd(t,e,n){_e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Be(e)&&(t.setupState=Xg(e)),H_(t)}function H_(t,e,n){const r=t.type;t.render||(t.render=r.render||kn);{const s=Uo(t);Xn();try{Wb(t)}finally{Zn(),s()}}}const Sw={get(t,e){return kt(t,"get",""),t[e]}};function G_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Sw),slots:t.slots,emit:t.emit,expose:e}}function zl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Xg(mb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in no)return no[n](t)},has(e,n){return n in e||n in no}})):t.proxy}function Rw(t,e=!0){return _e(t)?t.displayName||t.name:t.name||e&&t.__name}function Pw(t){return _e(t)&&"__vccOpts"in t}const Q=(t,e)=>wb(t,e,bo);function Kl(t,e,n){try{Ja(-1);const r=arguments.length;return r===2?Be(e)&&!ce(e)?To(e)?at(t,null,[e]):at(t,e):at(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&To(n)&&(n=[n]),at(t,e,n))}finally{Ja(1)}}const kw="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nu;const Bd=typeof window<"u"&&window.trustedTypes;if(Bd)try{Nu=Bd.createPolicy("vue",{createHTML:t=>t})}catch{}const W_=Nu?t=>Nu.createHTML(t):t=>t,Ow="http://www.w3.org/2000/svg",Nw="http://www.w3.org/1998/Math/MathML",jn=typeof document<"u"?document:null,Ud=jn&&jn.createElement("template"),Dw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?jn.createElementNS(Ow,t):e==="mathml"?jn.createElementNS(Nw,t):n?jn.createElement(t,{is:n}):jn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>jn.createTextNode(t),createComment:t=>jn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>jn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Ud.innerHTML=W_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Ud.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},pr="transition",Bi="animation",wo=Symbol("_vtc"),z_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Vw=ct({},c_,z_),Lw=t=>(t.displayName="Transition",t.props=Vw,t),$d=Lw((t,{slots:e})=>Kl(Db,xw(t),e)),es=(t,e=[])=>{ce(t)?t.forEach(n=>n(...e)):t&&t(...e)},jd=t=>t?ce(t)?t.some(e=>e.length>1):t.length>1:!1;function xw(t){const e={};for(const T in t)T in z_||(e[T]=t[T]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,R=Mw(s),P=R&&R[0],k=R&&R[1],{onBeforeEnter:V,onEnter:L,onEnterCancelled:H,onLeave:G,onLeaveCancelled:Y,onBeforeAppear:Z=V,onAppear:I=L,onAppearCancelled:v=H}=e,E=(T,g,F,te)=>{T._enterCancelled=te,ts(T,g?h:l),ts(T,g?u:o),F&&F()},S=(T,g)=>{T._isLeaving=!1,ts(T,d),ts(T,_),ts(T,m),g&&g()},A=T=>(g,F)=>{const te=T?I:L,le=()=>E(g,T,F);es(te,[g,le]),qd(()=>{ts(g,T?c:i),Un(g,T?h:l),jd(te)||Hd(g,r,P,le)})};return ct(e,{onBeforeEnter(T){es(V,[T]),Un(T,i),Un(T,o)},onBeforeAppear(T){es(Z,[T]),Un(T,c),Un(T,u)},onEnter:A(!1),onAppear:A(!0),onLeave(T,g){T._isLeaving=!0;const F=()=>S(T,g);Un(T,d),T._enterCancelled?(Un(T,m),zd(T)):(zd(T),Un(T,m)),qd(()=>{T._isLeaving&&(ts(T,d),Un(T,_),jd(G)||Hd(T,r,k,F))}),es(G,[T,F])},onEnterCancelled(T){E(T,!1,void 0,!0),es(H,[T])},onAppearCancelled(T){E(T,!0,void 0,!0),es(v,[T])},onLeaveCancelled(T){S(T),es(Y,[T])}})}function Mw(t){if(t==null)return null;if(Be(t))return[Kc(t.enter),Kc(t.leave)];{const e=Kc(t);return[e,e]}}function Kc(t){return UT(t)}function Un(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[wo]||(t[wo]=new Set)).add(e)}function ts(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[wo];n&&(n.delete(e),n.size||(t[wo]=void 0))}function qd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Fw=0;function Hd(t,e,n,r){const s=t._endId=++Fw,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=Bw(t,e);if(!o)return r();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,m),i()},m=_=>{_.target===t&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},l+1),t.addEventListener(u,m)}function Bw(t,e){const n=window.getComputedStyle(t),r=R=>(n[R]||"").split(", "),s=r(`${pr}Delay`),i=r(`${pr}Duration`),o=Gd(s,i),l=r(`${Bi}Delay`),c=r(`${Bi}Duration`),u=Gd(l,c);let h=null,d=0,m=0;e===pr?o>0&&(h=pr,d=o,m=i.length):e===Bi?u>0&&(h=Bi,d=u,m=c.length):(d=Math.max(o,u),h=d>0?o>u?pr:Bi:null,m=h?h===pr?i.length:c.length:0);const _=h===pr&&/\b(?:transform|all)(?:,|$)/.test(r(`${pr}Property`).toString());return{type:h,timeout:d,propCount:m,hasTransform:_}}function Gd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Wd(n)+Wd(t[r])))}function Wd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function zd(t){return(t?t.ownerDocument:document).body.offsetHeight}function Uw(t,e,n){const r=t[wo];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Za=Symbol("_vod"),K_=Symbol("_vsh"),Kd={name:"show",beforeMount(t,{value:e},{transition:n}){t[Za]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ui(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ui(t,!0),r.enter(t)):r.leave(t,()=>{Ui(t,!1)}):Ui(t,e))},beforeUnmount(t,{value:e}){Ui(t,e)}};function Ui(t,e){t.style.display=e?t[Za]:"none",t[K_]=!e}const $w=Symbol(""),jw=/(?:^|;)\s*display\s*:/;function qw(t,e,n){const r=t.style,s=Ke(n);let i=!1;if(n&&!s){if(e)if(Ke(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Pa(r,l,"")}else for(const o in e)n[o]==null&&Pa(r,o,"");for(const o in n)o==="display"&&(i=!0),Pa(r,o,n[o])}else if(s){if(e!==n){const o=r[$w];o&&(n+=";"+o),r.cssText=n,i=jw.test(n)}}else e&&t.removeAttribute("style");Za in t&&(t[Za]=i?r.display:"",t[K_]&&(r.display="none"))}const Qd=/\s*!important$/;function Pa(t,e,n){if(ce(n))n.forEach(r=>Pa(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Hw(t,e);Qd.test(n)?t.setProperty(Br(r),n.replace(Qd,""),"important"):t[r]=n}}const Yd=["Webkit","Moz","ms"],Qc={};function Hw(t,e){const n=Qc[e];if(n)return n;let r=nn(e);if(r!=="filter"&&r in t)return Qc[e]=r;r=Dl(r);for(let s=0;s<Yd.length;s++){const i=Yd[s]+r;if(i in t)return Qc[e]=i}return e}const Jd="http://www.w3.org/1999/xlink";function Xd(t,e,n,r,s,i=WT(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Jd,e.slice(6,e.length)):t.setAttributeNS(Jd,e,n):n==null||i&&!Sg(n)?t.removeAttribute(e):t.setAttribute(e,i?"":pn(n)?String(n):n)}function Zd(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?W_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Sg(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function os(t,e,n,r){t.addEventListener(e,n,r)}function Gw(t,e,n,r){t.removeEventListener(e,n,r)}const ep=Symbol("_vei");function Ww(t,e,n,r,s=null){const i=t[ep]||(t[ep]={}),o=i[e];if(r&&o)o.value=r;else{const[l,c]=zw(e);if(r){const u=i[e]=Yw(r,s);os(t,l,u,c)}else o&&(Gw(t,l,o,c),i[e]=void 0)}}const tp=/(?:Once|Passive|Capture)$/;function zw(t){let e;if(tp.test(t)){e={};let r;for(;r=t.match(tp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Br(t.slice(2)),e]}let Yc=0;const Kw=Promise.resolve(),Qw=()=>Yc||(Kw.then(()=>Yc=0),Yc=Date.now());function Yw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;mn(Jw(r,n.value),e,5,[r])};return n.value=t,n.attached=Qw(),n}function Jw(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const np=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Xw=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Uw(t,r,o):e==="style"?qw(t,n,r):kl(e)?mh(e)||Ww(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Zw(t,e,r,o))?(Zd(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Xd(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ke(r))?Zd(t,nn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Xd(t,e,r,o))};function Zw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&np(e)&&_e(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return np(e)&&Ke(n)?!1:e in t}const el=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ce(e)?n=>Ca(e,n):e};function eI(t){t.target.composing=!0}function rp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Js=Symbol("_assign"),LD={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Js]=el(s);const i=r||s.props&&s.props.type==="number";os(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),i&&(l=Tu(l)),t[Js](l)}),n&&os(t,"change",()=>{t.value=t.value.trim()}),e||(os(t,"compositionstart",eI),os(t,"compositionend",rp),os(t,"change",rp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Js]=el(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Tu(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},xD={deep:!0,created(t,e,n){t[Js]=el(n),os(t,"change",()=>{const r=t._modelValue,s=tI(t),i=t.checked,o=t[Js];if(ce(r)){const l=Rg(r,s),c=l!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const u=[...r];u.splice(l,1),o(u)}}else if(Ol(r)){const l=new Set(r);i?l.add(s):l.delete(s),o(l)}else o(Q_(t,i))})},mounted:sp,beforeUpdate(t,e,n){t[Js]=el(n),sp(t,e,n)}};function sp(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(ce(e))s=Rg(e,r.props.value)>-1;else if(Ol(e))s=e.has(r.props.value);else{if(e===n)return;s=Ll(e,Q_(t,!0))}t.checked!==s&&(t.checked=s)}function tI(t){return"_value"in t?t._value:t.value}function Q_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const nI=["ctrl","shift","alt","meta"],rI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>nI.some(n=>t[`${n}Key`]&&!e.includes(n))},sI=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const l=rI[e[o]];if(l&&l(s,e))return}return t(s,...i)}))},iI=ct({patchProp:Xw},Dw);let ip;function oI(){return ip||(ip=iw(iI))}const aI=((...t)=>{const e=oI().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=cI(r);if(!s)return;const i=e._component;!_e(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,lI(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function lI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function cI(t){return Ke(t)?document.querySelector(t):t}function uI(){return Y_().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Y_(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const hI=typeof Proxy=="function",fI="devtools-plugin:setup",dI="plugin:settings:set";let Ns,Du;function pI(){var t;return Ns!==void 0||(typeof window<"u"&&window.performance?(Ns=!0,Du=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Ns=!0,Du=globalThis.perf_hooks.performance):Ns=!1),Ns}function mI(){return pI()?Du.now():Date.now()}class gI{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const l=e.settings[o];r[o]=l.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),l=JSON.parse(o);Object.assign(i,l)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return mI()}},n&&n.on(dI,(o,l)=>{o===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(o,l)=>this.target?this.target.on[l]:(...c)=>{this.onQueue.push({method:l,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...c)=>(this.targetQueue.push({method:l,args:c,resolve:()=>{}}),this.fallbacks[l](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:l,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function _I(t,e){const n=t,r=Y_(),s=uI(),i=hI&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(fI,t,e);else{const o=i?new gI(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Fs=typeof document<"u";function J_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function yI(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&J_(t.default)}const Ve=Object.assign;function Jc(t,e){const n={};for(const r in e){const s=e[r];n[r]=_n(s)?s.map(t):t(s)}return n}const io=()=>{},_n=Array.isArray,X_=/#/g,vI=/&/g,EI=/\//g,TI=/=/g,bI=/\?/g,Z_=/\+/g,wI=/%5B/g,II=/%5D/g,ey=/%5E/g,AI=/%60/g,ty=/%7B/g,CI=/%7C/g,ny=/%7D/g,SI=/%20/g;function Rh(t){return encodeURI(""+t).replace(CI,"|").replace(wI,"[").replace(II,"]")}function RI(t){return Rh(t).replace(ty,"{").replace(ny,"}").replace(ey,"^")}function Vu(t){return Rh(t).replace(Z_,"%2B").replace(SI,"+").replace(X_,"%23").replace(vI,"%26").replace(AI,"`").replace(ty,"{").replace(ny,"}").replace(ey,"^")}function PI(t){return Vu(t).replace(TI,"%3D")}function kI(t){return Rh(t).replace(X_,"%23").replace(bI,"%3F")}function OI(t){return t==null?"":kI(t).replace(EI,"%2F")}function Io(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const NI=/\/$/,DI=t=>t.replace(NI,"");function Xc(t,e,n="/"){let r,s={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),s=t(i)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=MI(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Io(o)}}function VI(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function op(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function LI(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ni(e.matched[r],n.matched[s])&&ry(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ni(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function ry(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!xI(t[n],e[n]))return!1;return!0}function xI(t,e){return _n(t)?ap(t,e):_n(e)?ap(e,t):t===e}function ap(t,e){return _n(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function MI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const mr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ao;(function(t){t.pop="pop",t.push="push"})(Ao||(Ao={}));var oo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(oo||(oo={}));function FI(t){if(!t)if(Fs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),DI(t)}const BI=/^[^#]+#/;function UI(t,e){return t.replace(BI,"#")+e}function $I(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Ql=()=>({left:window.scrollX,top:window.scrollY});function jI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=$I(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function lp(t,e){return(history.state?history.state.position-e:-1)+t}const Lu=new Map;function qI(t,e){Lu.set(t,e)}function HI(t){const e=Lu.get(t);return Lu.delete(t),e}let GI=()=>location.protocol+"//"+location.host;function sy(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let l=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),op(c,"")}return op(n,t)+r+s}function WI(t,e,n,r){let s=[],i=[],o=null;const l=({state:m})=>{const _=sy(t,location),R=n.value,P=e.value;let k=0;if(m){if(n.value=_,e.value=m,o&&o===R){o=null;return}k=P?m.position-P.position:0}else r(_);s.forEach(V=>{V(n.value,R,{delta:k,type:Ao.pop,direction:k?k>0?oo.forward:oo.back:oo.unknown})})};function c(){o=n.value}function u(m){s.push(m);const _=()=>{const R=s.indexOf(m);R>-1&&s.splice(R,1)};return i.push(_),_}function h(){const{history:m}=window;m.state&&m.replaceState(Ve({},m.state,{scroll:Ql()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:d}}function cp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Ql():null}}function zI(t){const{history:e,location:n}=window,r={value:sy(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:GI()+t+c;try{e[h?"replaceState":"pushState"](u,"",m),s.value=u}catch(_){console.error(_),n[h?"replace":"assign"](m)}}function o(c,u){const h=Ve({},e.state,cp(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,h,!0),r.value=c}function l(c,u){const h=Ve({},s.value,e.state,{forward:c,scroll:Ql()});i(h.current,h,!0);const d=Ve({},cp(r.value,c,null),{position:h.position+1},u);i(c,d,!1),r.value=c}return{location:r,state:s,push:l,replace:o}}function KI(t){t=FI(t);const e=zI(t),n=WI(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ve({location:"",base:t,go:r,createHref:UI.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function QI(t){return typeof t=="string"||t&&typeof t=="object"}function iy(t){return typeof t=="string"||typeof t=="symbol"}const oy=Symbol("");var up;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(up||(up={}));function ri(t,e){return Ve(new Error,{type:t,[oy]:!0},e)}function $n(t,e){return t instanceof Error&&oy in t&&(e==null||!!(t.type&e))}const hp="[^/]+?",YI={sensitive:!1,strict:!1,start:!0,end:!0},JI=/[.+*?^${}()[\]/\\]/g;function XI(t,e){const n=Ve({},YI,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const m=u[d];let _=40+(n.sensitive?.25:0);if(m.type===0)d||(s+="/"),s+=m.value.replace(JI,"\\$&"),_+=40;else if(m.type===1){const{value:R,repeatable:P,optional:k,regexp:V}=m;i.push({name:R,repeatable:P,optional:k});const L=V||hp;if(L!==hp){_+=10;try{new RegExp(`(${L})`)}catch(G){throw new Error(`Invalid custom RegExp for param "${R}" (${L}): `+G.message)}}let H=P?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;d||(H=k&&u.length<2?`(?:/${H})`:"/"+H),k&&(H+="?"),s+=H,_+=20,k&&(_+=-8),P&&(_+=-20),L===".*"&&(_+=-50)}h.push(_)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function l(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const _=h[m]||"",R=i[m-1];d[R.name]=_&&R.repeatable?_.split("/"):_}return d}function c(u){let h="",d=!1;for(const m of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const _ of m)if(_.type===0)h+=_.value;else if(_.type===1){const{value:R,repeatable:P,optional:k}=_,V=R in u?u[R]:"";if(_n(V)&&!P)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const L=_n(V)?V.join("/"):V;if(!L)if(k)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${R}"`);h+=L}}return h||"/"}return{re:o,score:r,keys:i,parse:l,stringify:c}}function ZI(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function ay(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=ZI(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(fp(r))return 1;if(fp(s))return-1}return s.length-r.length}function fp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const eA={type:0,value:""},tA=/[a-zA-Z0-9_]/;function nA(t){if(!t)return[[]];if(t==="/")return[[eA]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let l=0,c,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&d(),o()):c===":"?(d(),n=1):m();break;case 4:m(),n=r;break;case 1:c==="("?n=2:tA.test(c)?m():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}function rA(t,e,n){const r=XI(nA(t.path),n),s=Ve(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function sA(t,e){const n=[],r=new Map;e=gp({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,m,_){const R=!_,P=pp(d);P.aliasOf=_&&_.record;const k=gp(e,d),V=[P];if("alias"in d){const G=typeof d.alias=="string"?[d.alias]:d.alias;for(const Y of G)V.push(pp(Ve({},P,{components:_?_.record.components:P.components,path:Y,aliasOf:_?_.record:P})))}let L,H;for(const G of V){const{path:Y}=G;if(m&&Y[0]!=="/"){const Z=m.record.path,I=Z[Z.length-1]==="/"?"":"/";G.path=m.record.path+(Y&&I+Y)}if(L=rA(G,m,k),_?_.alias.push(L):(H=H||L,H!==L&&H.alias.push(L),R&&d.name&&!mp(L)&&o(d.name)),ly(L)&&c(L),P.children){const Z=P.children;for(let I=0;I<Z.length;I++)i(Z[I],L,_&&_.children[I])}_=_||L}return H?()=>{o(H)}:io}function o(d){if(iy(d)){const m=r.get(d);m&&(r.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function c(d){const m=aA(d,n);n.splice(m,0,d),d.record.name&&!mp(d)&&r.set(d.record.name,d)}function u(d,m){let _,R={},P,k;if("name"in d&&d.name){if(_=r.get(d.name),!_)throw ri(1,{location:d});k=_.record.name,R=Ve(dp(m.params,_.keys.filter(H=>!H.optional).concat(_.parent?_.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),d.params&&dp(d.params,_.keys.map(H=>H.name))),P=_.stringify(R)}else if(d.path!=null)P=d.path,_=n.find(H=>H.re.test(P)),_&&(R=_.parse(P),k=_.record.name);else{if(_=m.name?r.get(m.name):n.find(H=>H.re.test(m.path)),!_)throw ri(1,{location:d,currentLocation:m});k=_.record.name,R=Ve({},m.params,d.params),P=_.stringify(R)}const V=[];let L=_;for(;L;)V.unshift(L.record),L=L.parent;return{name:k,path:P,params:R,matched:V,meta:oA(V)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:s}}function dp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function pp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:iA(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function iA(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function mp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function oA(t){return t.reduce((e,n)=>Ve(e,n.meta),{})}function gp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function aA(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;ay(t,e[i])<0?r=i:n=i+1}const s=lA(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function lA(t){let e=t;for(;e=e.parent;)if(ly(e)&&ay(t,e)===0)return e}function ly({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function cA(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Z_," "),o=i.indexOf("="),l=Io(o<0?i:i.slice(0,o)),c=o<0?null:Io(i.slice(o+1));if(l in e){let u=e[l];_n(u)||(u=e[l]=[u]),u.push(c)}else e[l]=c}return e}function _p(t){let e="";for(let n in t){const r=t[n];if(n=PI(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(_n(r)?r.map(i=>i&&Vu(i)):[r&&Vu(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function uA(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=_n(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const hA=Symbol(""),yp=Symbol(""),Yl=Symbol(""),Ph=Symbol(""),xu=Symbol("");function $i(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Er(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(ri(4,{from:n,to:e})):m instanceof Error?c(m):QI(m)?c(ri(2,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),l())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(m=>c(m))})}function Zc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(J_(c)){const h=(c.__vccOpts||c)[e];h&&i.push(Er(h,n,r,o,l,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=yI(h)?h.default:h;o.mods[l]=h,o.components[l]=d;const _=(d.__vccOpts||d)[e];return _&&Er(_,n,r,o,l,s)()}))}}return i}function vp(t){const e=wt(Yl),n=wt(Ph),r=Q(()=>{const c=z(t.to);return e.resolve(c)}),s=Q(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(ni.bind(null,h));if(m>-1)return m;const _=Ep(c[u-2]);return u>1&&Ep(h)===_&&d[d.length-1].path!==_?d.findIndex(ni.bind(null,c[u-2])):m}),i=Q(()=>s.value>-1&&gA(n.params,r.value.params)),o=Q(()=>s.value>-1&&s.value===n.matched.length-1&&ry(n.params,r.value.params));function l(c={}){if(mA(c)){const u=e[z(t.replace)?"replace":"push"](z(t.to)).catch(io);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Q(()=>r.value.href),isActive:i,isExactActive:o,navigate:l}}function fA(t){return t.length===1?t[0]:t}const dA=gn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:vp,setup(t,{slots:e}){const n=Fo(vp(t)),{options:r}=wt(Yl),s=Q(()=>({[Tp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Tp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&fA(e.default(n));return t.custom?i:Kl("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),pA=dA;function mA(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function gA(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!_n(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Ep(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Tp=(t,e,n)=>t??e??n,_A=gn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=wt(xu),s=Q(()=>t.route||r.value),i=wt(yp,0),o=Q(()=>{let u=z(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),l=Q(()=>s.value.matched[o.value]);ro(yp,Q(()=>o.value+1)),ro(hA,l),ro(xu,s);const c=Fe();return ze(()=>[c.value,l.value,t.name],([u,h,d],[m,_,R])=>{h&&(h.instances[d]=u,_&&_!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=_.leaveGuards),h.updateGuards.size||(h.updateGuards=_.updateGuards))),u&&h&&(!_||!ni(h,_)||!m)&&(h.enterCallbacks[d]||[]).forEach(P=>P(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=l.value,m=d&&d.components[h];if(!m)return bp(n.default,{Component:m,route:u});const _=d.props[h],R=_?_===!0?u.params:typeof _=="function"?_(u):_:null,k=Kl(m,Ve({},R,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return bp(n.default,{Component:k,route:u})||k}}});function bp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const cy=_A;function yA(t){const e=sA(t.routes,t),n=t.parseQuery||cA,r=t.stringifyQuery||_p,s=t.history,i=$i(),o=$i(),l=$i(),c=rn(mr);let u=mr;Fs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Jc.bind(null,M=>""+M),d=Jc.bind(null,OI),m=Jc.bind(null,Io);function _(M,ee){let X,ne;return iy(M)?(X=e.getRecordMatcher(M),ne=ee):ne=M,e.addRoute(ne,X)}function R(M){const ee=e.getRecordMatcher(M);ee&&e.removeRoute(ee)}function P(){return e.getRoutes().map(M=>M.record)}function k(M){return!!e.getRecordMatcher(M)}function V(M,ee){if(ee=Ve({},ee||c.value),typeof M=="string"){const w=Xc(n,M,ee.path),D=e.resolve({path:w.path},ee),B=s.createHref(w.fullPath);return Ve(w,D,{params:m(D.params),hash:Io(w.hash),redirectedFrom:void 0,href:B})}let X;if(M.path!=null)X=Ve({},M,{path:Xc(n,M.path,ee.path).path});else{const w=Ve({},M.params);for(const D in w)w[D]==null&&delete w[D];X=Ve({},M,{params:d(w)}),ee.params=d(ee.params)}const ne=e.resolve(X,ee),Ee=M.hash||"";ne.params=h(m(ne.params));const b=VI(r,Ve({},M,{hash:RI(Ee),path:ne.path})),C=s.createHref(b);return Ve({fullPath:b,hash:Ee,query:r===_p?uA(M.query):M.query||{}},ne,{redirectedFrom:void 0,href:C})}function L(M){return typeof M=="string"?Xc(n,M,c.value.path):Ve({},M)}function H(M,ee){if(u!==M)return ri(8,{from:ee,to:M})}function G(M){return I(M)}function Y(M){return G(Ve(L(M),{replace:!0}))}function Z(M){const ee=M.matched[M.matched.length-1];if(ee&&ee.redirect){const{redirect:X}=ee;let ne=typeof X=="function"?X(M):X;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=L(ne):{path:ne},ne.params={}),Ve({query:M.query,hash:M.hash,params:ne.path!=null?{}:M.params},ne)}}function I(M,ee){const X=u=V(M),ne=c.value,Ee=M.state,b=M.force,C=M.replace===!0,w=Z(X);if(w)return I(Ve(L(w),{state:typeof w=="object"?Ve({},Ee,w.state):Ee,force:b,replace:C}),ee||X);const D=X;D.redirectedFrom=ee;let B;return!b&&LI(r,ne,X)&&(B=ri(16,{to:D,from:ne}),be(ne,ne,!0,!1)),(B?Promise.resolve(B):S(D,ne)).catch(x=>$n(x)?$n(x,2)?x:we(x):oe(x,D,ne)).then(x=>{if(x){if($n(x,2))return I(Ve({replace:C},L(x.to),{state:typeof x.to=="object"?Ve({},Ee,x.to.state):Ee,force:b}),ee||D)}else x=T(D,ne,!0,C,Ee);return A(D,ne,x),x})}function v(M,ee){const X=H(M,ee);return X?Promise.reject(X):Promise.resolve()}function E(M){const ee=He.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(M):M()}function S(M,ee){let X;const[ne,Ee,b]=vA(M,ee);X=Zc(ne.reverse(),"beforeRouteLeave",M,ee);for(const w of ne)w.leaveGuards.forEach(D=>{X.push(Er(D,M,ee))});const C=v.bind(null,M,ee);return X.push(C),Qe(X).then(()=>{X=[];for(const w of i.list())X.push(Er(w,M,ee));return X.push(C),Qe(X)}).then(()=>{X=Zc(Ee,"beforeRouteUpdate",M,ee);for(const w of Ee)w.updateGuards.forEach(D=>{X.push(Er(D,M,ee))});return X.push(C),Qe(X)}).then(()=>{X=[];for(const w of b)if(w.beforeEnter)if(_n(w.beforeEnter))for(const D of w.beforeEnter)X.push(Er(D,M,ee));else X.push(Er(w.beforeEnter,M,ee));return X.push(C),Qe(X)}).then(()=>(M.matched.forEach(w=>w.enterCallbacks={}),X=Zc(b,"beforeRouteEnter",M,ee,E),X.push(C),Qe(X))).then(()=>{X=[];for(const w of o.list())X.push(Er(w,M,ee));return X.push(C),Qe(X)}).catch(w=>$n(w,8)?w:Promise.reject(w))}function A(M,ee,X){l.list().forEach(ne=>E(()=>ne(M,ee,X)))}function T(M,ee,X,ne,Ee){const b=H(M,ee);if(b)return b;const C=ee===mr,w=Fs?history.state:{};X&&(ne||C?s.replace(M.fullPath,Ve({scroll:C&&w&&w.scroll},Ee)):s.push(M.fullPath,Ee)),c.value=M,be(M,ee,X,C),we()}let g;function F(){g||(g=s.listen((M,ee,X)=>{if(!ht.listening)return;const ne=V(M),Ee=Z(ne);if(Ee){I(Ve(Ee,{replace:!0,force:!0}),ne).catch(io);return}u=ne;const b=c.value;Fs&&qI(lp(b.fullPath,X.delta),Ql()),S(ne,b).catch(C=>$n(C,12)?C:$n(C,2)?(I(Ve(L(C.to),{force:!0}),ne).then(w=>{$n(w,20)&&!X.delta&&X.type===Ao.pop&&s.go(-1,!1)}).catch(io),Promise.reject()):(X.delta&&s.go(-X.delta,!1),oe(C,ne,b))).then(C=>{C=C||T(ne,b,!1),C&&(X.delta&&!$n(C,8)?s.go(-X.delta,!1):X.type===Ao.pop&&$n(C,20)&&s.go(-1,!1)),A(ne,b,C)}).catch(io)}))}let te=$i(),le=$i(),ae;function oe(M,ee,X){we(M);const ne=le.list();return ne.length?ne.forEach(Ee=>Ee(M,ee,X)):console.error(M),Promise.reject(M)}function fe(){return ae&&c.value!==mr?Promise.resolve():new Promise((M,ee)=>{te.add([M,ee])})}function we(M){return ae||(ae=!M,F(),te.list().forEach(([ee,X])=>M?X(M):ee()),te.reset()),M}function be(M,ee,X,ne){const{scrollBehavior:Ee}=t;if(!Fs||!Ee)return Promise.resolve();const b=!X&&HI(lp(M.fullPath,0))||(ne||!X)&&history.state&&history.state.scroll||null;return qn().then(()=>Ee(M,ee,b)).then(C=>C&&jI(C)).catch(C=>oe(C,M,ee))}const Re=M=>s.go(M);let st;const He=new Set,ht={currentRoute:c,listening:!0,addRoute:_,removeRoute:R,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:P,resolve:V,options:t,push:G,replace:Y,go:Re,back:()=>Re(-1),forward:()=>Re(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:le.add,isReady:fe,install(M){const ee=this;M.component("RouterLink",pA),M.component("RouterView",cy),M.config.globalProperties.$router=ee,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>z(c)}),Fs&&!st&&c.value===mr&&(st=!0,G(s.location).catch(Ee=>{}));const X={};for(const Ee in mr)Object.defineProperty(X,Ee,{get:()=>c.value[Ee],enumerable:!0});M.provide(Yl,ee),M.provide(Ph,Yg(X)),M.provide(xu,c);const ne=M.unmount;He.add(M),M.unmount=function(){He.delete(M),He.size<1&&(u=mr,g&&g(),g=null,c.value=mr,st=!1,ae=!1),ne()}}};function Qe(M){return M.reduce((ee,X)=>ee.then(()=>E(X)),Promise.resolve())}return ht}function vA(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>ni(u,l))?r.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>ni(u,c))||s.push(c))}return[n,r,s]}function EA(){return wt(Yl)}function MD(t){return wt(Ph)}const uy="BootstrapVueNext__",kh=(t,e="")=>{const n=`${e}___`;return`${uy}ID__${t}__${e?n:""}`},$r=t=>kh(t),fi=t=>kh(`${t}__registry`),FD=$r("progress"),BD=$r("checkboxGroup"),TA=$r("collapse"),hy=fi("showHide"),bA=$r("navbar"),wA=fi("rtl"),wp=`${uy}global_breadcrumb`,IA=fi("breadcrumb"),fy=fi("modalManager"),ka=fi("defaults"),UD=$r("inputGroup"),$D=$r("buttonGroup"),AA=fi("orchestrator"),jD=$r("formGroupPlugin"),qD=$r("tableKeyboardNavigation");function yn(t){return Dg()?(KT(t),!0):!1}function CA(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=Ng(!0),n=r.run(()=>t(...i))),yn(s),n)}function SA(t,e){if(typeof Symbol<"u"){const n={...t};return Object.defineProperty(n,Symbol.iterator,{enumerable:!1,value(){let r=0;return{next:()=>({value:e[r++],done:r>e.length})}}}),n}else return Object.assign([...e],t)}const tl=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const dy=t=>t!=null,RA=Object.prototype.toString,PA=t=>RA.call(t)==="[object Object]",Ip=()=>+Date.now(),nl=()=>{},Ap=kA();function kA(){var t,e;return tl&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function OA(...t){if(t.length!==1)return ps(...t);const e=t[0];return typeof e=="function"?Wt(Zg(()=>({get:e,set:nl}))):Fe(e)}function NA(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}function DA(...t){let e=0,n,r=!0,s=nl,i,o,l,c,u;!et(t[0])&&typeof t[0]=="object"?{delay:o,trailing:l=!0,leading:c=!0,rejectOnCancel:u=!1}=t[0]:[o,l=!0,c=!0,u=!1]=t;const h=()=>{n&&(clearTimeout(n),n=void 0,s(),s=nl)};return m=>{const _=$e(o),R=Date.now()-e,P=()=>i=m();return h(),_<=0?(e=Date.now(),P()):(R>_&&(c||!r)?(e=Date.now(),P()):l&&(i=new Promise((k,V)=>{s=u?V:k,n=setTimeout(()=>{e=Date.now(),r=!0,k(P()),h()},Math.max(0,_-R))})),!c&&!n&&(n=setTimeout(()=>r=!0,_)),r=!1,i)}}function ao(t){return Array.isArray(t)?t:[t]}function VA(t){const e=Object.create(null);return n=>e[n]||(e[n]=t(n))}const LA=/-(\w)/g,xA=VA(t=>t.replace(LA,(e,n)=>n?n.toUpperCase():""));function Cp(t,e=200,n=!1,r=!0,s=!1){return NA(DA(e,n,r,s),t)}function MA(t,e=1e3,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n;let i=null;const o=rn(!1);function l(){i&&(clearInterval(i),i=null)}function c(){o.value=!1,l()}function u(){const h=$e(e);h<=0||(o.value=!0,s&&t(),l(),o.value&&(i=setInterval(t,h)))}if(r&&tl&&u(),et(e)||typeof e=="function"){const h=ze(e,()=>{o.value&&tl&&u()});yn(h)}return yn(c),{isActive:pb(o),pause:c,resume:u}}function HD(t,e={}){const{method:n="parseFloat",radix:r,nanToZero:s}=e;return Q(()=>{let i=$e(t);return typeof n=="function"?i=n(i):typeof i=="string"&&(i=Number[n](i,r)),s&&Number.isNaN(i)&&(i=0),i})}function FA(t,e,n){return ze(t,e,{...n,immediate:!0})}function GD(t={}){const{inheritAttrs:e=!0}=t,n=rn(),r=gn({setup(i,{slots:o}){return()=>{n.value=o.default}}}),s=gn({inheritAttrs:e,props:t.props,setup(i,{attrs:o,slots:l}){return()=>{var c;n.value;const u=(c=n.value)==null?void 0:c.call(n,{...t.props==null?BA(o):i,$slots:l});return e&&u?.length===1?u[0]:u}}});return SA({define:r,reuse:s},[r,s])}function BA(t){const e={};for(const n in t)e[xA(n)]=t[n];return e}const di=tl?window:void 0;function er(t){var e;const n=$e(t);return(e=n?.$el)!=null?e:n}function ms(...t){const e=[],n=()=>{e.forEach(l=>l()),e.length=0},r=(l,c,u,h)=>(l.addEventListener(c,u,h),()=>l.removeEventListener(c,u,h)),s=Q(()=>{const l=ao($e(t[0])).filter(c=>c!=null);return l.every(c=>typeof c!="string")?l:void 0}),i=FA(()=>{var l,c;return[(c=(l=s.value)==null?void 0:l.map(u=>er(u)))!=null?c:[di].filter(u=>u!=null),ao($e(s.value?t[1]:t[0])),ao(z(s.value?t[2]:t[1])),$e(s.value?t[3]:t[2])]},([l,c,u,h])=>{if(n(),!l?.length||!c?.length||!u?.length)return;const d=PA(h)?{...h}:h;e.push(...l.flatMap(m=>c.flatMap(_=>u.map(R=>r(m,_,R,d)))))},{flush:"post"}),o=()=>{i(),n()};return yn(n),o}function UA(){const t=rn(!1),e=Tn();return e&&Ur(()=>{t.value=!0},e),t}function $A(t){const e=UA();return Q(()=>(e.value,!!t()))}function py(t,e,n={}){const{window:r=di,...s}=n;let i;const o=$A(()=>r&&"MutationObserver"in r),l=()=>{i&&(i.disconnect(),i=void 0)},c=Q(()=>{const m=$e(t),_=ao(m).map(er).filter(dy);return new Set(_)}),u=ze(()=>c.value,m=>{l(),o.value&&m.size&&(i=new MutationObserver(e),m.forEach(_=>i.observe(_,s)))},{immediate:!0,flush:"post"}),h=()=>i?.takeRecords(),d=()=>{u(),l()};return yn(d),{isSupported:o,stop:d,takeRecords:h}}function jA(t,e,n={}){const{window:r=di,document:s=r?.document,flush:i="sync"}=n;if(!r||!s)return nl;let o;const l=h=>{o?.(),o=h},c=L_(()=>{const h=er(t);if(h){const{stop:d}=py(s,m=>{m.map(R=>[...R.removedNodes]).flat().some(R=>R===h||R.contains(h))&&e(m)},{window:r,childList:!0,subtree:!0});l(d)}},{flush:i}),u=()=>{c(),l()};return yn(u),u}function qA(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function my(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=di,eventName:i="keydown",passive:o=!1,dedupe:l=!1}=r,c=qA(e);return ms(s,i,h=>{h.repeat&&$e(l)||c(h)&&n(h)},o)}function HA(t,e={}){const{immediate:n=!0,fpsLimit:r=void 0,window:s=di,once:i=!1}=e,o=rn(!1),l=Q(()=>r?1e3/$e(r):null);let c=0,u=null;function h(_){if(!o.value||!s)return;c||(c=_);const R=_-c;if(l.value&&R<l.value){u=s.requestAnimationFrame(h);return}if(c=_,t({delta:R,timestamp:_}),i){o.value=!1,u=null;return}u=s.requestAnimationFrame(h)}function d(){!o.value&&s&&(o.value=!0,c=0,u=s.requestAnimationFrame(h))}function m(){o.value=!1,u!=null&&s&&(s.cancelAnimationFrame(u),u=null)}return n&&d(),yn(m),{isActive:Wt(o),pause:m,resume:d}}const ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ga="__vueuse_ssr_handlers__",GA=WA();function WA(){return ga in ma||(ma[ga]=ma[ga]||{}),ma[ga]}function zA(t,e){return GA[t]||e}function WD(t,e={}){const{delayEnter:n=0,delayLeave:r=0,triggerOnRemoval:s=!1,window:i=di}=e,o=rn(!1);let l;const c=u=>{const h=u?n:r;l&&(clearTimeout(l),l=void 0),h?l=setTimeout(()=>o.value=u,h):o.value=u};return i&&(ms(t,"mouseenter",()=>c(!0),{passive:!0}),ms(t,"mouseleave",()=>c(!1),{passive:!0}),s&&jA(Q(()=>er(t)),()=>c(!1))),o}function zD(t,e={}){const{initialValue:n=!1,focusVisible:r=!1,preventScroll:s=!1}=e,i=rn(!1),o=Q(()=>er(t)),l={passive:!0};ms(o,"focus",u=>{var h,d;(!r||(d=(h=u.target).matches)!=null&&d.call(h,":focus-visible"))&&(i.value=!0)},l),ms(o,"blur",()=>i.value=!1,l);const c=Q({get:()=>i.value,set(u){var h,d;!u&&i.value?(h=o.value)==null||h.blur():u&&!i.value&&((d=o.value)==null||d.focus({preventScroll:s}))}});return ze(o,()=>{c.value=n},{immediate:!0,flush:"post"}),{focused:c}}function eu(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function gy(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!n||n.tagName==="BODY"?!1:gy(n)}}function KA(t){const e=t||window.event,n=e.target;return gy(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const tu=new WeakMap;function QA(t,e=!1){const n=rn(e);let r=null,s="";ze(OA(t),l=>{const c=eu($e(l));if(c){const u=c;if(tu.get(u)||tu.set(u,u.style.overflow),u.style.overflow!=="hidden"&&(s=u.style.overflow),u.style.overflow==="hidden")return n.value=!0;if(n.value)return u.style.overflow="hidden"}},{immediate:!0});const i=()=>{const l=eu($e(t));!l||n.value||(Ap&&(r=ms(l,"touchmove",c=>{KA(c)},{passive:!1})),l.style.overflow="hidden",n.value=!0)},o=()=>{const l=eu($e(t));!l||!n.value||(Ap&&r?.(),l.style.overflow=s,tu.delete(l),n.value=!1)};return yn(o),Q({get(){return n.value},set(l){l?i():o()}})}function KD(t={}){const{controls:e=!1,offset:n=0,immediate:r=!0,interval:s="requestAnimationFrame",callback:i}=t,o=rn(Ip()+n),l=()=>o.value=Ip()+n,c=i?()=>{l(),i(o.value)}:l,u=s==="requestAnimationFrame"?HA(c,{immediate:r}):MA(c,s,{immediate:r});return e?{timestamp:o,...u}:o}const YA=()=>({store:Fe([]),_isOrchestratorInstalled:Fe(!1),_isToastAppend:Fe(!1)}),_y={BAccordion:"/components/BAccordion",BAccordionItem:"/components/BAccordion",BAlert:"/components/BAlert",BApp:"/components/BApp",BAvatar:"/components/BAvatar",BAvatarGroup:"/components/BAvatar",BBadge:"/components/BBadge",BBreadcrumb:"/components/BBreadcrumb",BBreadcrumbItem:"/components/BBreadcrumb",BButton:"/components/BButton",BButtonGroup:"/components/BButton",BButtonToolbar:"/components/BButton",BCloseButton:"/components/BButton",BCard:"/components/BCard",BCardBody:"/components/BCard",BCardFooter:"/components/BCard",BCardGroup:"/components/BCard",BCardHeader:"/components/BCard",BCardImg:"/components/BCard",BCardSubtitle:"/components/BCard",BCardText:"/components/BCard",BCardTitle:"/components/BCard",BCarousel:"/components/BCarousel",BCarouselSlide:"/components/BCarousel",BCol:"/components/BContainer",BCollapse:"/components/BCollapse",BContainer:"/components/BContainer",BDropdown:"/components/BDropdown",BDropdownDivider:"/components/BDropdown",BDropdownForm:"/components/BDropdown",BDropdownGroup:"/components/BDropdown",BDropdownHeader:"/components/BDropdown",BDropdownItem:"/components/BDropdown",BDropdownItemButton:"/components/BDropdown",BDropdownText:"/components/BDropdown",BForm:"/components/BForm",BFormCheckbox:"/components/BFormCheckbox",BFormCheckboxGroup:"/components/BFormCheckbox",BFormDatalist:"/components/BForm",BFormFile:"/components/BFormFile",BFormFloatingLabel:"/components/BForm",BFormGroup:"/components/BFormGroup",BFormInput:"/components/BFormInput",BFormInvalidFeedback:"/components/BForm",BFormRadio:"/components/BFormRadio",BFormRadioGroup:"/components/BFormRadio",BFormRating:"/components/BFormRating",BFormRow:"/components/BForm",BFormSelect:"/components/BFormSelect",BFormSelectOption:"/components/BFormSelect",BFormSelectOptionGroup:"/components/BFormSelect",BFormSpinbutton:"/components/BFormSpinbutton",BFormTag:"/components/BFormTags",BFormTags:"/components/BFormTags",BFormText:"/components/BForm",BFormTextarea:"/components/BFormTextarea",BFormValidFeedback:"/components/BForm",BImg:"/components/BImg",BInput:"/components/BFormInput",BInputGroup:"/components/BInputGroup",BInputGroupText:"/components/BInputGroup",BListGroup:"/components/BListGroup",BListGroupItem:"/components/BListGroup",BModal:"/components/BModal",BModalOrchestrator:"/components/BModal",BNav:"/components/BNav",BNavForm:"/components/BNav",BNavItem:"/components/BNav",BNavItemDropdown:"/components/BNav",BNavText:"/components/BNav",BNavbar:"/components/BNavbar",BNavbarBrand:"/components/BNavbar",BNavbarNav:"/components/BNavbar",BNavbarToggle:"/components/BNavbar",BOffcanvas:"/components/BOffcanvas",BOverlay:"/components/BOverlay",BOrchestrator:"/components/BApp",BPagination:"/components/BPagination",BPlaceholder:"/components/BPlaceholder",BPlaceholderButton:"/components/BPlaceholder",BPlaceholderCard:"/components/BPlaceholder",BPlaceholderTable:"/components/BPlaceholder",BPlaceholderWrapper:"/components/BPlaceholder",BPopover:"/components/BPopover",BProgress:"/components/BProgress",BRow:"/components/BContainer",BSpinner:"/components/BSpinner",BTab:"/components/BTabs",BTabs:"/components/BTabs",BToast:"/components/BToast",BToastOrchestrator:"/components/BToast",BTooltip:"/components/BTooltip",BLink:"/components/BLink",BProgressBar:"/components/BProgress",BTableSimple:"/components/BTable",BTableLite:"/components/BTable",BTable:"/components/BTable",BTbody:"/components/BTable",BTd:"/components/BTable",BTh:"/components/BTable",BThead:"/components/BTable",BTfoot:"/components/BTable",BTr:"/components/BTable",BPopoverOrchestrator:"/components/BPopover"},JA=Object.freeze(Object.keys(_y)),yy={vBColorMode:"/directives/BColorMode",vBModal:"/directives/BModal",vBPopover:"/directives/BPopover",vBScrollspy:"/directives/BScrollspy",vBToggle:"/directives/BToggle",vBTooltip:"/directives/BTooltip"},XA=Object.freeze(Object.keys(yy)),ZA={useBreadcrumb:"/composables/useBreadcrumb",useColorMode:"/composables/useColorMode",useModal:"/composables/useModal",useModalController:"/composables/useModal",useScrollLock:"/composables/useScrollLock",useScrollspy:"/composables/useScrollspy",useToast:"/composables/useToast",useToastController:"/composables/useToast",useToggle:"/composables/useToggle",usePopover:"/composables/usePopover",usePopoverController:"/composables/usePopover",useRegistry:"/composables/useRegistry",useProvideDefaults:"/composables/useProvideDefaults",useOrchestratorRegistry:"/composables/orchestratorShared"};Object.freeze(Object.keys(ZA));const eC=gn({name:"ConditionalTeleport",inheritAttrs:!1,props:{to:{type:[String,Object],default:null},disabled:{type:Boolean,required:!0}},slots:Object,setup(t,{slots:e}){return()=>t.to?Kl(kb,{to:t.to,disabled:t.disabled||!t.to},[e.default?.({})]):e.default?.({})}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var vy=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],rl=vy.join(","),Ey=typeof Element>"u",gs=Ey?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,sl=!Ey&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},il=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},tC=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},Ty=function(e,n,r){if(il(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(rl));return n&&gs.call(e,rl)&&s.unshift(e),s=s.filter(r),s},by=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!il(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),c=l.length?l:o.children,u=t(c,!0,r);r.flatten?s.push.apply(s,u):s.push({scopeParent:o,candidates:u})}else{var h=gs.call(o,rl);h&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var d=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!il(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(d&&m){var _=t(d===!0?o.children:d.children,!0,r);r.flatten?s.push.apply(s,_):s.push({scopeParent:o,candidates:_})}else i.unshift.apply(i,o.children)}}return s},wy=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},as=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||tC(e))&&!wy(e)?0:e.tabIndex},nC=function(e,n){var r=as(e);return r<0&&n&&!wy(e)?0:r},rC=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Iy=function(e){return e.tagName==="INPUT"},sC=function(e){return Iy(e)&&e.type==="hidden"},iC=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},oC=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},aC=function(e){if(!e.name)return!0;var n=e.form||sl(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=oC(s,e.form);return!i||i===e},lC=function(e){return Iy(e)&&e.type==="radio"},cC=function(e){return lC(e)&&!aC(e)},uC=function(e){var n,r=e&&sl(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,l,c;for(i=!!((o=s)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(s)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!i&&s;){var u,h,d;r=sl(s),s=(u=r)===null||u===void 0?void 0:u.host,i=!!((h=s)!==null&&h!==void 0&&(d=h.ownerDocument)!==null&&d!==void 0&&d.contains(s))}}return i},Sp=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},hC=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=gs.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(gs.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var l=e;e;){var c=e.parentElement,u=sl(e);if(c&&!c.shadowRoot&&s(c)===!0)return Sp(e);e.assignedSlot?e=e.assignedSlot:!c&&u!==e.ownerDocument?e=u.host:e=c}e=l}if(uC(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Sp(e);return!1},fC=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return gs.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},ol=function(e,n){return!(n.disabled||il(n)||sC(n)||hC(n,e)||iC(n)||fC(n))},Mu=function(e,n){return!(cC(n)||as(n)<0||!ol(e,n))},dC=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},pC=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,l=o?s.scopeParent:s,c=nC(l,o),u=o?t(s.candidates):l;c===0?o?n.push.apply(n,u):n.push(l):r.push({documentOrder:i,tabIndex:c,item:s,isScope:o,content:u})}),r.sort(rC).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},mC=function(e,n){n=n||{};var r;return n.getShadowRoot?r=by([e],n.includeContainer,{filter:Mu.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:dC}):r=Ty(e,n.includeContainer,Mu.bind(null,n)),pC(r)},gC=function(e,n){n=n||{};var r;return n.getShadowRoot?r=by([e],n.includeContainer,{filter:ol.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=Ty(e,n.includeContainer,ol.bind(null,n)),r},Ds=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return gs.call(e,rl)===!1?!1:Mu(n,e)},_C=vy.concat("iframe").join(","),nu=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return gs.call(e,_C)===!1?!1:ol(n,e)};/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Fu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function yC(t){if(Array.isArray(t))return Fu(t)}function vC(t,e,n){return(e=IC(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EC(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rp(Object(n),!0).forEach(function(r){vC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bC(t){return yC(t)||EC(t)||AC(t)||TC()}function wC(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IC(t){var e=wC(t,"string");return typeof e=="symbol"?e:e+""}function AC(t,e){if(t){if(typeof t=="string")return Fu(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fu(t,e):void 0}}var kp={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r._setPausedState(!0)}var s=e.indexOf(n);s===-1||e.splice(s,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},CC=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},SC=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},lo=function(e){return e?.key==="Tab"||e?.keyCode===9},RC=function(e){return lo(e)&&!e.shiftKey},PC=function(e){return lo(e)&&e.shiftKey},Op=function(e){return setTimeout(e,0)},ji=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},_a=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},kC=[],OC=function(e,n){var r=n?.document||document,s=n?.trapStack||kC,i=Pp({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:RC,isKeyBackward:PC},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,c=function(g,F,te){return g&&g[F]!==void 0?g[F]:i[te||F]},u=function(g,F){var te=typeof F?.composedPath=="function"?F.composedPath():void 0;return o.containerGroups.findIndex(function(le){var ae=le.container,oe=le.tabbableNodes;return ae.contains(g)||te?.includes(ae)||oe.find(function(fe){return fe===g})})},h=function(g){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=F.hasFallback,le=te===void 0?!1:te,ae=F.params,oe=ae===void 0?[]:ae,fe=i[g];if(typeof fe=="function"&&(fe=fe.apply(void 0,bC(oe))),fe===!0&&(fe=void 0),!fe){if(fe===void 0||fe===!1)return fe;throw new Error("`".concat(g,"` was specified but was not a node, or did not return a node"))}var we=fe;if(typeof fe=="string"){try{we=r.querySelector(fe)}catch(be){throw new Error("`".concat(g,'` appears to be an invalid selector; error="').concat(be.message,'"'))}if(!we&&!le)throw new Error("`".concat(g,"` as selector refers to no known node"))}return we},d=function(){var g=h("initialFocus",{hasFallback:!0});if(g===!1)return!1;if(g===void 0||g&&!nu(g,i.tabbableOptions))if(u(r.activeElement)>=0)g=r.activeElement;else{var F=o.tabbableGroups[0],te=F&&F.firstTabbableNode;g=te||h("fallbackFocus")}else g===null&&(g=h("fallbackFocus"));if(!g)throw new Error("Your focus-trap needs to have at least one focusable element");return g},m=function(){if(o.containerGroups=o.containers.map(function(g){var F=mC(g,i.tabbableOptions),te=gC(g,i.tabbableOptions),le=F.length>0?F[0]:void 0,ae=F.length>0?F[F.length-1]:void 0,oe=te.find(function(be){return Ds(be)}),fe=te.slice().reverse().find(function(be){return Ds(be)}),we=!!F.find(function(be){return as(be)>0});return{container:g,tabbableNodes:F,focusableNodes:te,posTabIndexesFound:we,firstTabbableNode:le,lastTabbableNode:ae,firstDomTabbableNode:oe,lastDomTabbableNode:fe,nextTabbableNode:function(Re){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,He=F.indexOf(Re);return He<0?st?te.slice(te.indexOf(Re)+1).find(function(ht){return Ds(ht)}):te.slice(0,te.indexOf(Re)).reverse().find(function(ht){return Ds(ht)}):F[He+(st?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(g){return g.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(g){return g.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},_=function(g){var F=g.activeElement;if(F)return F.shadowRoot&&F.shadowRoot.activeElement!==null?_(F.shadowRoot):F},R=function(g){if(g!==!1&&g!==_(document)){if(!g||!g.focus){R(d());return}g.focus({preventScroll:!!i.preventScroll}),o.mostRecentlyFocusedNode=g,CC(g)&&g.select()}},P=function(g){var F=h("setReturnFocus",{params:[g]});return F||(F===!1?!1:g)},k=function(g){var F=g.target,te=g.event,le=g.isBackward,ae=le===void 0?!1:le;F=F||_a(te),m();var oe=null;if(o.tabbableGroups.length>0){var fe=u(F,te),we=fe>=0?o.containerGroups[fe]:void 0;if(fe<0)ae?oe=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:oe=o.tabbableGroups[0].firstTabbableNode;else if(ae){var be=o.tabbableGroups.findIndex(function(M){var ee=M.firstTabbableNode;return F===ee});if(be<0&&(we.container===F||nu(F,i.tabbableOptions)&&!Ds(F,i.tabbableOptions)&&!we.nextTabbableNode(F,!1))&&(be=fe),be>=0){var Re=be===0?o.tabbableGroups.length-1:be-1,st=o.tabbableGroups[Re];oe=as(F)>=0?st.lastTabbableNode:st.lastDomTabbableNode}else lo(te)||(oe=we.nextTabbableNode(F,!1))}else{var He=o.tabbableGroups.findIndex(function(M){var ee=M.lastTabbableNode;return F===ee});if(He<0&&(we.container===F||nu(F,i.tabbableOptions)&&!Ds(F,i.tabbableOptions)&&!we.nextTabbableNode(F))&&(He=fe),He>=0){var ht=He===o.tabbableGroups.length-1?0:He+1,Qe=o.tabbableGroups[ht];oe=as(F)>=0?Qe.firstTabbableNode:Qe.firstDomTabbableNode}else lo(te)||(oe=we.nextTabbableNode(F))}}else oe=h("fallbackFocus");return oe},V=function(g){var F=_a(g);if(!(u(F,g)>=0)){if(ji(i.clickOutsideDeactivates,g)){l.deactivate({returnFocus:i.returnFocusOnDeactivate});return}ji(i.allowOutsideClick,g)||g.preventDefault()}},L=function(g){var F=_a(g),te=u(F,g)>=0;if(te||F instanceof Document)te&&(o.mostRecentlyFocusedNode=F);else{g.stopImmediatePropagation();var le,ae=!0;if(o.mostRecentlyFocusedNode)if(as(o.mostRecentlyFocusedNode)>0){var oe=u(o.mostRecentlyFocusedNode),fe=o.containerGroups[oe].tabbableNodes;if(fe.length>0){var we=fe.findIndex(function(be){return be===o.mostRecentlyFocusedNode});we>=0&&(i.isKeyForward(o.recentNavEvent)?we+1<fe.length&&(le=fe[we+1],ae=!1):we-1>=0&&(le=fe[we-1],ae=!1))}}else o.containerGroups.some(function(be){return be.tabbableNodes.some(function(Re){return as(Re)>0})})||(ae=!1);else ae=!1;ae&&(le=k({target:o.mostRecentlyFocusedNode,isBackward:i.isKeyBackward(o.recentNavEvent)})),R(le||o.mostRecentlyFocusedNode||d())}o.recentNavEvent=void 0},H=function(g){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=g;var te=k({event:g,isBackward:F});te&&(lo(g)&&g.preventDefault(),R(te))},G=function(g){(i.isKeyForward(g)||i.isKeyBackward(g))&&H(g,i.isKeyBackward(g))},Y=function(g){SC(g)&&ji(i.escapeDeactivates,g)!==!1&&(g.preventDefault(),l.deactivate())},Z=function(g){var F=_a(g);u(F,g)>=0||ji(i.clickOutsideDeactivates,g)||ji(i.allowOutsideClick,g)||(g.preventDefault(),g.stopImmediatePropagation())},I=function(){if(o.active)return kp.activateTrap(s,l),o.delayInitialFocusTimer=i.delayInitialFocus?Op(function(){R(d())}):R(d()),r.addEventListener("focusin",L,!0),r.addEventListener("mousedown",V,{capture:!0,passive:!1}),r.addEventListener("touchstart",V,{capture:!0,passive:!1}),r.addEventListener("click",Z,{capture:!0,passive:!1}),r.addEventListener("keydown",G,{capture:!0,passive:!1}),r.addEventListener("keydown",Y),l},v=function(){if(o.active)return r.removeEventListener("focusin",L,!0),r.removeEventListener("mousedown",V,!0),r.removeEventListener("touchstart",V,!0),r.removeEventListener("click",Z,!0),r.removeEventListener("keydown",G,!0),r.removeEventListener("keydown",Y),l},E=function(g){var F=g.some(function(te){var le=Array.from(te.removedNodes);return le.some(function(ae){return ae===o.mostRecentlyFocusedNode})});F&&R(d())},S=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(E):void 0,A=function(){S&&(S.disconnect(),o.active&&!o.paused&&o.containers.map(function(g){S.observe(g,{subtree:!0,childList:!0})}))};return l={get active(){return o.active},get paused(){return o.paused},activate:function(g){if(o.active)return this;var F=c(g,"onActivate"),te=c(g,"onPostActivate"),le=c(g,"checkCanFocusTrap");le||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=_(r),F?.();var ae=function(){le&&m(),I(),A(),te?.()};return le?(le(o.containers.concat()).then(ae,ae),this):(ae(),this)},deactivate:function(g){if(!o.active)return this;var F=Pp({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},g);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,v(),o.active=!1,o.paused=!1,A(),kp.deactivateTrap(s,l);var te=c(F,"onDeactivate"),le=c(F,"onPostDeactivate"),ae=c(F,"checkCanReturnFocus"),oe=c(F,"returnFocus","returnFocusOnDeactivate");te?.();var fe=function(){Op(function(){oe&&R(P(o.nodeFocusedBeforeActivation)),le?.()})};return oe&&ae?(ae(P(o.nodeFocusedBeforeActivation)).then(fe,fe),this):(fe(),this)},pause:function(g){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,g)):this},unpause:function(g){return o.active?(o.manuallyPaused=!1,s[s.length-1]!==this?this:this._setPausedState(!1,g)):this},updateContainerElements:function(g){var F=[].concat(g).filter(Boolean);return o.containers=F.map(function(te){return typeof te=="string"?r.querySelector(te):te}),o.active&&m(),A(),this}},Object.defineProperties(l,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(g,F){if(o.paused===g)return this;if(o.paused=g,g){var te=c(F,"onPause"),le=c(F,"onPostPause");te?.(),v(),A(),le?.()}else{var ae=c(F,"onUnpause"),oe=c(F,"onPostUnpause");ae?.(),m(),I(),A(),oe?.()}return this}}}),l.updateContainerElements(e),l};function NC(t,e={}){let n;const{immediate:r,...s}=e,i=rn(!1),o=rn(!1),l=m=>n&&n.activate(m),c=m=>n&&n.deactivate(m),u=()=>{n&&(n.pause(),o.value=!0)},h=()=>{n&&(n.unpause(),o.value=!1)},d=Q(()=>{const m=$e(t);return ao(m).map(_=>{const R=$e(_);return typeof R=="string"?R:er(R)}).filter(dy)});return ze(d,m=>{if(m.length)if(!n)n=OC(m,{...s,onActivate(){i.value=!0,e.onActivate&&e.onActivate()},onDeactivate(){i.value=!1,e.onDeactivate&&e.onDeactivate()}}),r&&l();else{const _=n?.active;n?.updateContainerElements(m),!_&&r&&l()}},{flush:"post"}),yn(()=>c()),{hasFocus:i,isPaused:o,activate:l,deactivate:c,pause:u,unpause:h}}const DC=({element:t,isActive:e,noTrap:n,fallbackFocus:r,focus:s},i={allowOutsideClick:!0,fallbackFocus:r.ref.value??void 0,escapeDeactivates:!1,clickOutsideDeactivates:!1,initialFocus:s})=>{const o=Wt(ps(e)),l=Wt(ps(n)),c=()=>!t.value?.querySelectorAll(`a, button, input, select, textarea, [tabindex]:not([tabindex="-1"]):not(.${r.classSelector})`)?.length,u=Fe(!1);Ur(()=>{u.value=c(),py(t,()=>{u.value=c()},{childList:!0,subtree:!0})});const h=NC(t,i);return ze(o,async d=>{d&&l.value===!1?h.activate():h.deactivate()}),ze(l,d=>{d===!0&&h.deactivate()}),{needsFallback:Wt(u)}},VC=CA(QA);let ya="";const ns=new Map,LC=(t,e)=>{const n=Wt(ps(t)),r=p_(),s=Q(()=>!$e(e)),i=VC(typeof document<"u"?document.body:null,n.value&&s.value);Ur(()=>{typeof document>"u"||(ns.set(r,!1),ze([n,s],([o,l])=>{const c=window.innerWidth-document.documentElement.clientWidth,u=Array.from(ns.values()).some(m=>m===!0),h=o&&l;ns.set(r,h),h&&!u&&!i.value&&(i.value=!0,c>0&&(ya=document.body.style.paddingRight,document.body.style.paddingRight=`${c+ya}px`));const d=Array.from(ns.values()).some(m=>m===!0);u&&!d&&(ns.set(r,!1),i.value=!1,document.body.style.paddingRight=ya)},{immediate:!0}))}),ql(()=>{ns.delete(r),Array.from(ns.values()).some(l=>l===!0)||(document.body.style.paddingRight=ya,i.value=!1)})},xC=(t=[])=>{const{activeElement:e}=document;return e&&!t?.some(n=>n===e)?e:null},QD=(t,e={})=>{const n=r=>r===xC();try{t.focus(e)}catch(r){console.error(r)}return n(t)},Ay=t=>(t?.()??[]).length===0,YD=t=>{if(t.getAttribute("display")==="none")return!1;const e=t.getBoundingClientRect();return!!(e&&e.height>0&&e.width>0)},Np=t=>{if(typeof window>"u")return 1055;const e=t??document.body,n=window.getComputedStyle(e).getPropertyValue("--bs-modal-zindex").trim(),r=Number.parseInt(n,10);return Number.isFinite(r)?r:1055};function MC(t,e=Cy("injectSelf")){const{provides:n}=e;if(n&&t in n)return n[t]}function Cy(t,e){const n=Tn();if(!n)throw new Error(`[Bvn] ${t} must be called from inside a setup function`);return n}const FC=(t="")=>t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase(),Dp=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);function Sy(t={},e={},n){const r={};for(const s in t)r[s]=t[s];for(const s in e){const i=t[s],o=e[s];if(Dp(i)&&Dp(o)){r[s]=Sy(i,o);continue}r[s]=o}return r}const BC=(t,e)=>typeof t.props?.[e]<"u"||typeof t.props?.[FC(e)]<"u";function UC(t={},e){const n=wt(ka,Fe({})),r=Cy("useDefaults");if(e=e??r.type.name??r.type.__name,!e)throw new Error("[Bvn] Could not determine component name");const s=Q(()=>n.value?.[t._as??e]),i=new Proxy(t,{get(c,u){const h=Reflect.get(c,u);return u==="class"||u==="style"?[s.value?.[u],h].filter(d=>d!=null):typeof u=="string"&&!BC(r.vnode,u)?s.value?.[u]??n.value?.global?.[u]??h:h}}),o=rn();L_(()=>{if(s.value){const c=Object.entries(s.value).filter(([u])=>u.startsWith(u[0].toUpperCase()));o.value=c.length?Object.fromEntries(c):void 0}else o.value=void 0});function l(){const c=MC(ka,r);ro(ka,Q(()=>o.value?Sy(c?.value??{},o.value):c?.value))}return{props:i,provideSubDefaults:l}}function pi(t,e){const{props:n,provideSubDefaults:r}=UC(t,e);return r(),n}const Oa=t=>Q(()=>{let e=$e(t);return e={variant:e.variant??null,bgVariant:e.bgVariant??null,textVariant:e.textVariant??null,borderVariant:e.borderVariant??null},{[`text-bg-${e.variant}`]:e.variant!==null,[`text-${e.textVariant}`]:e.textVariant!==null,[`bg-${e.bgVariant}`]:e.bgVariant!==null,[`border-${e.borderVariant}`]:e.borderVariant!==null}}),$C={key:0,class:"visually-hidden"},jC=gn({__name:"BSpinner",props:{label:{default:void 0},role:{default:"status"},small:{type:Boolean,default:!1},tag:{default:"span"},type:{default:"border"},variant:{default:null}},setup(t){const n=pi(t,"BSpinner"),r=T_(),s=Oa(Q(()=>({textVariant:n.variant}))),i=Q(()=>[`spinner-${n.type}`,s.value,{[`spinner-${n.type}-sm`]:n.small}]),o=Q(()=>!Ay(r.label));return(l,c)=>(Ne(),Ft(hi(z(n).tag),{class:gt(i.value),role:z(n).label||o.value?z(n).role:null,"aria-hidden":z(n).label||o.value?null:!0},{default:qt(()=>[z(n).label||o.value?(Ne(),vt("span",$C,[$t(l.$slots,"label",{},()=>[ls(zn(z(n).label),1)])])):Xt("",!0)]),_:3},8,["class","role","aria-hidden"]))}}),JD=(t,e)=>Object.keys(t).filter(n=>!e.map(r=>r.toString()).includes(n)).reduce((n,r)=>({...n,[r]:t[r]}),{}),qC=(t,e)=>[...e].reduce((n,r)=>(n[r]=t[r],n),{}),XD=(t,e,n)=>{const r=e.split(/[.[\]]/g);let s=t;for(const i of r){if(s===null||s===void 0)return n;i.trim()!==""&&(s=s[i])}return s===void 0?n:s},ZD=(t,e,n)=>{const r=c=>{if((d=>d==null||typeof d!="object"&&typeof d!="function")(c))return c;if(typeof c=="function")return c.bind({});const h=new c.constructor;return Object.getOwnPropertyNames(c).forEach(d=>{h[d]=c[d]}),h},s=(c,u)=>{const h=u;if(c==null)return h;const d=Number.parseInt(c);return Number.isNaN(d)?h:d};if(!t)return{};if(!e||n===void 0)return t;const i=e.split(/[.[\]]/g).filter(c=>!!c.trim()),o=c=>{if(i.length>1){const u=i.shift(),h=s(i[0],null)!==null;c[u]=c[u]===void 0?h?[]:{}:c[u],o(c[u])}else c[i[0]]=n},l=r(t);return o(l),l},HC=(t,e)=>{if(t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s)||!HC(t[s],e[s]))return!1;return!0},eV="ArrowDown",tV="End",nV="Home",rV="ArrowUp",Ry=/_/g,Py=/([a-z])([A-Z])/g,sV=/^[0-9]*\.?[0-9]+$/,GC=/(\s|^)(\w)/g,WC=/(\s|^)(\w)/,iV=t=>t.replace(Ry," ").replace(Py,(e,n,r)=>`${n} ${r}`).replace(WC,(e,n,r)=>n+r.toUpperCase()),Vp=t=>t.replace(Ry," ").replace(Py,(e,n,r)=>`${n} ${r}`).replace(GC,(e,n,r)=>n+r.toUpperCase()),oV=t=>{const e=t.trim();return e.charAt(0).toUpperCase()+e.slice(1)},zC=t=>t.replace(/-./g,e=>e.charAt(1).toUpperCase()).replace(/\b\w/g,e=>e.toUpperCase()).replace(/\s+/g,""),KC=t=>!!(t.href||t.to),QC=(t,e)=>{const n=Wt(ps(e)),r=Wt(ps(t)),s=Q(()=>KC(r.value)),i=Q(()=>s.value?qC(r.value,n.value??["active","activeClass","append","exactActiveClass","href","rel","replace","routerComponentName","target","to","variant","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover"]):{});return{computedLink:s,computedLinkProps:i}},YC=({to:t,disabled:e,href:n,replace:r,routerComponentName:s})=>{const i=Tn(),o=i?.appContext?.app?.config?.globalProperties?.$router,l=i?.appContext?.app?.config?.globalProperties?.$route,c=hi("RouterLink"),u=c&&typeof c!="string"&&"useLink"in c?c.useLink:null,h=Q(()=>$e(t)||""),d=Wt(ps(r)),m=Q(()=>zC($e(s))),_=Q(()=>!(i?.appContext?.app?.component(m.value)!==void 0)||$e(e)||!h.value?"a":m.value),R=Q(()=>_.value==="RouterLink"),P=Q(()=>R.value&&typeof i?.appContext?.app?.$nuxt<"u"),k=Q(()=>_.value!=="a"&&!R.value&&!P.value),V=Q(()=>R.value||P.value),L=Q(()=>({to:h.value,replace:d.value})),H=u?.({to:h,replace:d}),G=Q(()=>V.value?H:null),Y=Q(()=>{if(G.value?.href.value)return G.value.href.value;const Z="#",I=$e(n);if(I)return I;if(typeof h.value=="string")return h.value||Z;const v=h.value;if(v!==void 0&&"path"in v){const E=v.path||"",S=v.query?`?${Object.keys(v.query).map(T=>`${T}=${v.query?.[T]}`).join("=")}`:"",A=!v.hash||v.hash.charAt(0)==="#"?v.hash||"":`#${v.hash}`;return`${E}${S}${A}`||Z}return Z});return{isNonStandardTag:k,tag:_,isRouterLink:R,isNuxtLink:P,computedHref:Y,routerName:m,router:o,route:l,link:G,linkProps:L}},ky=t=>Q(()=>{const e=$e(t);return{[`link-${e.variant}`]:e.variant!==null,[`link-opacity-${e.opacity}`]:e.opacity!==void 0,[`link-opacity-${e.opacityHover}-hover`]:e.opacityHover!==void 0,[`link-underline-${e.underlineVariant}`]:e.underlineVariant!==null,[`link-offset-${e.underlineOffset}`]:e.underlineOffset!==void 0,[`link-offset-${e.underlineOffsetHover}-hover`]:e.underlineOffsetHover!==void 0,"link-underline":e.underlineVariant===null&&(e.underlineOpacity!==void 0||e.underlineOpacityHover!==void 0),[`link-underline-opacity-${e.underlineOpacity}`]:e.underlineOpacity!==void 0,[`link-underline-opacity-${e.underlineOpacityHover}-hover`]:e.underlineOpacityHover!==void 0,"icon-link":e.icon===!0}}),Lp="active",JC=gn({__name:"BLink",props:{active:{type:Boolean,default:void 0},activeClass:{default:"router-link-active"},disabled:{type:Boolean,default:!1},exactActiveClass:{default:"router-link-exact-active"},href:{default:void 0},icon:{type:Boolean,default:!1},noRel:{type:Boolean,default:!1},opacity:{default:void 0},opacityHover:{default:void 0},prefetch:{type:Boolean,default:void 0},prefetchOn:{default:void 0},noPrefetch:{type:Boolean,default:void 0},prefetchedClass:{default:void 0},rel:{default:void 0},replace:{type:Boolean,default:!1},routerComponentName:{default:"router-link"},routerTag:{default:"a"},stretched:{type:Boolean,default:!1},target:{default:void 0},to:{default:void 0},underlineOffset:{default:void 0},underlineOffsetHover:{default:void 0},underlineOpacity:{default:void 0},underlineOpacityHover:{default:void 0},underlineVariant:{default:null},variant:{default:null}},emits:["click"],setup(t,{emit:e}){const r=pi(t,"BLink"),s=e,i=Gb(),{computedHref:o,tag:l,link:c,isNuxtLink:u,isRouterLink:h,linkProps:d,isNonStandardTag:m}=YC({routerComponentName:()=>r.routerComponentName,disabled:()=>r.disabled,to:()=>r.to,replace:()=>r.replace,href:()=>r.href}),_=wt(TA,null),R=wt(bA,null),P=ky(r),k=Q(()=>[P.value,i.class,V.value,{[Lp]:r.active,[r.activeClass]:c.value?.isActive.value||!1,[r.exactActiveClass]:c.value?.isExactActive.value||!1,"stretched-link":r.stretched===!0}]),V=Q(()=>({[Lp]:r.active,disabled:r.disabled})),L=I=>{if(r.disabled){I.preventDefault(),I.stopImmediatePropagation();return}(_?.isNav?.value===!0&&R===null||R!==null&&R.noAutoClose?.value!==!0)&&_?.hide?.(),s("click",I)},H=Q(()=>r.target==="_blank"?!r.rel&&r.noRel?"noopener":r.rel:void 0),G=Q(()=>r.disabled?"-1":typeof i.tabindex>"u"?null:i.tabindex),Y=Q(()=>({prefetch:r.prefetch,noPrefetch:r.noPrefetch,prefetchOn:r.prefetchOn,prefetchedClass:r.prefetchedClass,...d.value})),Z=Q(()=>({...h.value?d.value:void 0,...u.value||m.value?Y.value:void 0}));return(I,v)=>(Ne(),Ft(hi(z(l)),hn({class:k.value,target:z(r).target,href:z(o),rel:H.value,tabindex:G.value,"aria-disabled":z(r).disabled?!0:null},Z.value,{onClick:v[0]||(v[0]=E=>{L(E),z(c)?.navigate(E)})}),{default:qt(()=>[$t(I.$slots,"default")]),_:3},16,["class","target","href","rel","tabindex","aria-disabled"]))}}),ru=gn({__name:"BButton",props:Qa({loading:{type:Boolean,default:!1},loadingFill:{type:Boolean,default:!1},loadingText:{default:"Loading..."},pill:{type:Boolean,default:!1},size:{default:"md"},squared:{type:Boolean,default:!1},tag:{default:"button"},type:{default:"button"},variant:{default:"secondary"},active:{type:Boolean,default:!1},activeClass:{default:void 0},disabled:{type:Boolean,default:void 0},exactActiveClass:{default:void 0},href:{default:void 0},icon:{type:Boolean,default:!1},noRel:{type:Boolean},opacity:{default:void 0},opacityHover:{default:void 0},prefetch:{type:Boolean},prefetchOn:{},noPrefetch:{type:Boolean},prefetchedClass:{},rel:{default:void 0},replace:{type:Boolean,default:void 0},routerComponentName:{default:void 0},routerTag:{default:void 0},stretched:{type:Boolean,default:!1},target:{default:void 0},to:{default:void 0},underlineOffset:{default:void 0},underlineOffsetHover:{default:void 0},underlineOpacity:{default:void 0},underlineOpacityHover:{default:void 0},underlineVariant:{default:null}},{pressed:{type:Boolean,default:void 0},pressedModifiers:{}}),emits:Qa(["click"],["update:pressed"]),setup(t,{emit:e}){const r=pi(t,"BButton"),s=e,i=Ms("_element"),o=M_(t,"pressed"),{computedLink:l,computedLinkProps:c}=QC(r,["active-class","exact-active-class","replace","routerComponentName","routerTag"]),u=Q(()=>typeof o.value=="boolean"),h=Q(()=>r.tag==="button"&&r.href===void 0&&r.to===void 0),d=Q(()=>r.to!==void 0),m=Q(()=>r.href!==void 0?!1:!h.value),_=Q(()=>d.value?c.value:[]),R=Q(()=>r.href==="#"&&r.disabled?!0:m.value?r.disabled:null),P=Q(()=>r.variant?.startsWith("link")||!1),k=Q(()=>r.variant?.startsWith("link-")||!1),V=ky(Q(()=>({...P.value?{icon:r.icon,opacity:r.opacity,opacityHover:r.opacityHover,underlineOffset:r.underlineOffset,underlineOffsetHover:r.underlineOffsetHover,underlineOpacity:r.underlineOpacity,underlineOpacityHover:r.underlineOpacityHover,underlineVariant:r.underlineVariant,variant:k.value===!0?r.variant?.slice(5):null}:void 0}))),L=Q(()=>[P.value===!0&&l.value===!1?V.value:void 0,[`btn-${r.size}`],{[`btn-${r.variant}`]:r.variant!==null&&k.value===!1,active:r.active||o.value,"rounded-pill":r.pill,"rounded-0":r.squared,disabled:r.disabled}]),H=Q(()=>d.value?JC:r.href?"a":r.tag),G=Y=>{if(r.disabled){Y.preventDefault(),Y.stopPropagation();return}s("click",Y),u.value&&(o.value=!o.value)};return my([" ","enter"],Y=>{r.href==="#"&&(Y.preventDefault(),i.value?.click())},{target:i}),(Y,Z)=>(Ne(),Ft(hi(H.value),hn({ref:"_element",class:"btn"},_.value,{class:L.value,"aria-disabled":R.value,"aria-pressed":u.value?o.value:null,autocomplete:u.value?"off":null,disabled:h.value?z(r).disabled:null,href:z(r).href,rel:z(l)?z(r).rel:null,role:m.value||z(l)?"button":null,target:z(l)?z(r).target:null,type:h.value?z(r).type:null,to:h.value?null:z(r).to,onClick:G}),{default:qt(()=>[z(r).loading?$t(Y.$slots,"loading",{key:0},()=>[z(r).loadingFill?Xt("",!0):(Ne(),vt(Ut,{key:0},[ls(zn(z(r).loadingText),1)],64)),$t(Y.$slots,"loading-spinner",{},()=>[at(jC,{small:z(r).size!=="lg",label:z(r).loadingFill?z(r).loadingText:void 0},null,8,["small","label"])])]):$t(Y.$slots,"default",{key:1})]),_:3},16,["class","aria-disabled","aria-pressed","autocomplete","disabled","href","rel","role","target","type","to"]))}}),XC=["type","disabled","aria-label"],ZC=gn({__name:"BCloseButton",props:{ariaLabel:{default:"Close"},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const r=pi(t,"BCloseButton"),s=e;return(i,o)=>(Ne(),vt("button",{type:z(r).type,class:"btn-close",disabled:z(r).disabled,"aria-label":z(r).ariaLabel,onClick:o[0]||(o[0]=l=>s("click",l))},null,8,XC))}}),eS=(t,e)=>{const n=p_();return Q(()=>$e(t)||kh(n||"",e))};class al{cancelable=!0;componentId=null;_defaultPrevented=!1;eventType="";nativeEvent=null;_preventDefault;relatedTarget=null;target=null;get defaultPrevented(){return this._defaultPrevented}set defaultPrevented(e){this._defaultPrevented=e}get preventDefault(){return this._preventDefault}set preventDefault(e){this._preventDefault=e}constructor(e,n={}){if(!e)throw new TypeError(`Failed to construct '${this.constructor.name}'. 1 argument required, ${arguments.length} given.`);Object.assign(this,al.Defaults,n,{eventType:e}),this._preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)}}static get Defaults(){return{cancelable:!0,componentId:null,eventType:"",nativeEvent:null,relatedTarget:null,target:null}}}class tS extends al{trigger=null;ok=void 0;constructor(e,n={}){super(e,n),Object.assign(this,al.Defaults,n,{eventType:e})}static get Defaults(){return{...super.Defaults,trigger:null,ok:void 0}}}const xp={name:"fade",enterActiveClass:"",enterFromClass:"showing",enterToClass:"",leaveActiveClass:"",leaveFromClass:"",leaveToClass:"showing",css:!0},nS=(t,e,n,r,s,i={transitionProps:{},showFn:()=>{},hideFn:()=>{}})=>{let o=!1;const l=!!t.value&&!e.initialAnimation||e.visible||!1,c=Fe(l),u=Fe(l),h=Fe(l);let d=typeof t.value!="boolean";ze(t,()=>{if(d=typeof t.value!="boolean",o){o=!1;return}t.value?Z():v("modelValue",!0)});const m=Fe(l),_=Fe(!1),R=Q(()=>e.noAnimation||e.noFade||m.value||!1);let P=!1;Ur(()=>{if(P=!0,!e.show&&l){const w=k("show",{cancelable:!0});if(n("show",w),w.defaultPrevented){n("show-prevented",k("show-prevented"));return}m.value=!0,t.value||(o=!0,t.value=!0),u.value=!0,h.value=!0,Re.value=!0,Ee.value=!0,b.value=!0,c.value=!0,i.showFn?.()}else(e.show||t.value&&e.initialAnimation)&&Z()}),ze(()=>e.visible,w=>{m.value=!0,qn(()=>{w&&(Re.value=!0),w?Z():v("visible-prop",!0)})}),ze(()=>e.show,w=>{w?Z():v("show-prop",!0)}),ms(r,"bv-toggle",()=>{t.value=!t.value});const k=(w,D={})=>new tS(w,{cancelable:!1,target:r?.value||null,relatedTarget:null,trigger:null,...D,componentId:s?.value});let V,L,H,G,Y;const Z=(w=!1)=>{if(c.value&&!L&&!G)return Promise.resolve(!0);if(Y=w,c.value&&!L&&G)return G;G=new Promise(B=>{H=B});const D=k("show",{cancelable:!0});return n("show",D),D.defaultPrevented?(n("show-prevented",k("show-prevented")),Re.value&&(Re.value=!1),t.value&&!d&&(o=!0,qn(()=>{t.value=!1})),H?.("show-prevented"),G):(L&&(clearTimeout(L),L=void 0),u.value=!0,h.value=!0,requestAnimationFrame(()=>{if(m.value||e.delay===void 0){if(!P)return;V=void 0,c.value=!0,i.showFn?.(),t.value||(o=!0,qn(()=>{t.value=!0}));return}V=setTimeout(()=>{P&&(V=void 0,c.value=!0,i.showFn?.(),t.value||(o=!0,qn(()=>{t.value=!0})))},typeof e.delay=="number"?e.delay:e.delay?.show||0)}),G)};let I;const v=(w,D)=>{if(!c.value&&!V)return Promise.resolve("");G||(G=new Promise(K=>{H=K})),typeof w!="string"&&(w=void 0),I=w;const B=k("hide",{cancelable:!0,trigger:w}),x=k(w||"ignore",{cancelable:!0,trigger:w});return w==="backdrop"&&e.noCloseOnBackdrop||w==="esc"&&e.noCloseOnEsc?(n("hide-prevented",k("hide-prevented",{trigger:w})),H?.("hide-prevented"),G):(V&&(clearTimeout(V),V=void 0),w&&!D&&n(w,x),n("hide",B),B.defaultPrevented||x.defaultPrevented?(n("hide-prevented",k("hide-prevented",{trigger:w})),t.value||qn(()=>{o=!0,t.value=!0}),H?.("hide-prevented"),G):(ne.value=!1,V&&(clearTimeout(V),V=void 0,_.value||(u.value=!1),h.value=!1),L=setTimeout(()=>{P&&(L=void 0,we.value=!0,c.value=!1,i.hideFn?.(),t.value&&(o=!0,t.value=d?0:!1))},m.value?0:typeof e.delay=="number"?e.delay:e.delay?.hide||0),G))},E=Cp(w=>v(w),500),S=Cp(()=>Z(),500),A=(w=!1)=>{const D=k("toggle",{cancelable:!0});return n("toggle",D),D.defaultPrevented?(n("toggle-prevented",k("toggle-prevented")),Promise.resolve("toggle-prevented")):c.value?v("toggle-function",!0):Z(w)},T=()=>{const w=k("toggle",{cancelable:!0});if(n("toggle",w),w.defaultPrevented){n("toggle-prevented",k("toggle-prevented"));return}c.value?v("toggle-trigger",!0):Z()},g=[],F=(w,D)=>{g.push({trigger:w,el:D}),D.addEventListener(w,T),ae(D)},te=(w,D,B=!0)=>{const x=g.findIndex(K=>K?.trigger===w&&K.el===D);x>-1&&(g.splice(x,1),D.removeEventListener(w,T),B&&(D.removeAttribute("aria-expanded"),D.classList.remove("collapsed"),D.classList.remove("not-collapsed")))},le=wt(hy,void 0)?.register({id:s.value,toggle:A,show:Z,hide:v,value:Wt(c),registerTrigger:F,unregisterTrigger:te,component:Tn()}),ae=w=>{w.setAttribute("aria-expanded",t.value?"true":"false"),w.classList.toggle("collapsed",!t.value),w.classList.toggle("not-collapsed",!!t.value)};ze(t,()=>{g.forEach(w=>{ae(w.el)})}),ze(s,(w,D)=>{le?.updateId(w,D)}),wh(()=>{le?.unregister(),g.forEach(w=>{w.el.removeEventListener(w.trigger,T)})}),ql(()=>{P=!1,clearTimeout(V),clearTimeout(L),V=void 0,L=void 0});const oe=Fe(!1),fe=()=>{e.lazy===!0&&(oe.value=!0)},we=Fe(!1),be=Fe(l),Re=Fe(l),st=w=>{i.transitionProps?.onBeforeEnter?.(w),e.transitionProps?.onBeforeEnter?.(w),be.value=!0},He=w=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{Re.value=!0})}),i.transitionProps?.onEnter?.(w),e.transitionProps?.onEnter?.(w)},ht=w=>{fe(),i.transitionProps?.onAfterEnter?.(w),e.transitionProps?.onAfterEnter?.(w),m.value&&requestAnimationFrame(()=>{m.value=!1}),_.value&&(_.value=!1),requestAnimationFrame(()=>{ne.value=!0,qn(()=>{n("shown",k("shown",{cancelable:!1}))})}),Y||(H?.(!0),G=void 0,H=void 0)},Qe=w=>{we.value||(we.value=!0),i.transitionProps?.onBeforeLeave?.(w),e.transitionProps?.onBeforeLeave?.(w),ne.value=!1},M=w=>{Re.value=!1,i.transitionProps?.onLeave?.(w),e.transitionProps?.onLeave?.(w)},ee=w=>{n("hidden",k("hidden",{trigger:I,cancelable:!1})),i.transitionProps?.onAfterLeave?.(w),e.transitionProps?.onAfterLeave?.(w),we.value=!1,be.value=!1,m.value&&requestAnimationFrame(()=>{m.value=!1}),requestAnimationFrame(()=>{_.value||(u.value=!1)}),H?.(I||""),G=void 0,H=void 0,I=void 0},X=Q(()=>_.value===!0||be.value===!0||e.lazy===!1||e.lazy===!0&&oe.value===!0&&e.unmountLazy===!1),ne=Fe(!1),Ee=Fe(!1),b=Fe(!1),C={...i.transitionProps,onBeforeEnter:st,onEnter:He,onAfterEnter:ht,onBeforeLeave:Qe,onLeave:M,onAfterLeave:ee};return{showRef:c,renderRef:u,renderBackdropRef:h,isVisible:Re,isActive:be,trapActive:ne,show:Z,hide:v,toggle:A,throttleHide:E,throttleShow:S,buildTriggerableEvent:k,computedNoAnimation:R,localNoAnimation:m,localTemporaryHide:_,isLeaving:we,transitionProps:{...xp,...e.transitionProps,...C},lazyLoadCompleted:oe,markLazyLoadCompleted:fe,contentShowing:X,backdropReady:b,backdropVisible:Ee,backdropTransitionProps:{...xp,onBeforeEnter:()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{Ee.value=!0})}),b.value=!1},onAfterEnter:()=>{b.value=!0},onBeforeLeave:()=>{Ee.value=!1},onAfterLeave:()=>{b.value=!1,requestAnimationFrame(()=>{h.value=!1})}}}},rS=(t,e=typeof document<"u"?document:void 0)=>{if(t)return typeof t=="string"?typeof e>"u"||typeof document>"u"?void 0:document.getElementById(t)??e.querySelector(t)??void 0:t.$el??t},aV=t=>typeof t=="string"?Vp(t):t.label!==void 0?t.label:typeof t.key=="string"?Vp(t.key):t.key,lV=Object.freeze(Object.keys({bordered:0,borderless:0,borderVariant:0,captionTop:0,dark:0,fixed:0,hover:0,id:0,noBorderCollapse:0,outlined:0,responsive:0,small:0,stacked:0,stickyHeader:0,striped:0,stripedColumns:0,variant:0,tableAttrs:0,tableClass:0})),cV=Object.freeze(Object.keys({align:0,caption:0,detailsTdClass:0,fieldColumnClass:0,fields:0,footClone:0,footRowVariant:0,footVariant:0,headRowVariant:0,headVariant:0,items:0,labelStacked:0,modelValue:0,primaryKey:0,tbodyClass:0,tbodyTrAttrs:0,tbodyTrClass:0,tfootClass:0,tfootTrClass:0,theadClass:0,theadTrClass:0})),uV=(t,e)=>t.stacked&&t.labelStacked!==!0?{"data-label":e}:void 0,su="modal-open",sS=()=>{const t=wt(fy),e=r=>{t?.removeStack(r),t?.removeRegistry(r)},n=zA("updateHTMLAttrs",(r,s,i)=>{const o=typeof r=="string"?window?.document.querySelector(r):er(r);o&&(s==="class"?o.classList.toggle(su,i===su):o.setAttribute(s,i))});return yn(()=>{t?.countStack.value===0&&n("body","class","")}),ze(()=>t?.countStack.value,r=>{r!==void 0&&n("body","class",r>0?su:"")}),{...t,dispose:e}},iS=(t,e)=>{const{pushRegistry:n,pushStack:r,removeStack:s,stack:i,dispose:o,countStack:l}=sS(),c=Tn();if(!c||c.type.__name!=="BModal")throw new Error("useModalManager must only use in BModal component");n?.(c),yn(()=>{o(c)});const u=(h,d)=>{h?r?.(c):d&&!h&&s?.(c)};return u(e,e),ze(t,u),{activePosition:Q(()=>i?.value.findIndex(h=>$e(h.exposed?.id)===$e(c.exposed?.id))),activeModalCount:l,stackWithoutSelf:Q(()=>i?.value.filter(h=>$e(h.exposed?.id)!==$e(c.exposed?.id))??[])}},oS=["id","aria-labelledby","aria-describedby"],aS=["id"],Mp="modal-fallback-focus",lS=gn({inheritAttrs:!1,__name:"BModal",props:Qa({focus:{type:[String,Boolean,Object,null],default:void 0},backdropFirst:{type:Boolean,default:!1},body:{default:void 0},bodyAttrs:{default:void 0},bodyBgVariant:{default:null},bodyClass:{default:null},bodyScrolling:{type:Boolean,default:!1},bodyTextVariant:{default:null},bodyVariant:{default:null},busy:{type:Boolean,default:!1},buttonSize:{default:"md"},cancelClass:{default:void 0},cancelDisabled:{type:Boolean,default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{type:Boolean,default:!1},contentClass:{default:void 0},dialogClass:{default:void 0},footerBgVariant:{default:null},footerBorderVariant:{default:null},footerClass:{default:void 0},footerTextVariant:{default:null},footerVariant:{default:null},fullscreen:{type:[Boolean,String],default:!1},headerAttrs:{default:void 0},headerBgVariant:{default:null},headerBorderVariant:{default:null},headerClass:{default:void 0},headerCloseClass:{default:void 0},headerCloseLabel:{default:"Close"},headerCloseVariant:{default:"secondary"},headerTextVariant:{default:null},headerVariant:{default:null},noBackdrop:{type:Boolean,default:!1},noFooter:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1},noHeaderClose:{type:Boolean,default:!1},id:{default:void 0},modalClass:{default:void 0},noCloseOnBackdrop:{type:Boolean,default:!1},noCloseOnEsc:{type:Boolean,default:!1},noTrap:{type:Boolean,default:!1},noStacking:{type:Boolean},okClass:{default:void 0},okDisabled:{type:Boolean,default:!1},okOnly:{type:Boolean,default:!1},okTitle:{default:"OK"},okVariant:{default:"primary"},scrollable:{type:Boolean,default:!1},size:{default:"md"},title:{default:void 0},titleClass:{default:void 0},titleVisuallyHidden:{type:Boolean,default:!1},titleTag:{default:"h5"},teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:"body"},initialAnimation:{type:Boolean,default:!1},noAnimation:{type:Boolean},noFade:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},show:{type:Boolean,default:!1},transProps:{default:void 0},visible:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Qa(["backdrop","close","esc","hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(t,{expose:e,emit:n}){const s=pi(t,"BModal"),i=n,o=T_(),l=eS(()=>s.id,"modal"),c=M_(t,"modelValue"),u=Ms("_element"),h=Ms("_fallbackFocusElement"),d=Ms("_okButton"),m=Ms("_cancelButton"),_=Ms("_closeButton"),R=()=>s.focus&&typeof s.focus!="boolean"?s.focus==="ok"?d:s.focus==="close"?_:s.focus==="cancel"?m:rS(s.focus,u.value??void 0)??u.value:u;let P=null;const k=()=>{if(s.noTrap&&s.focus!==!1){P=document.activeElement,P===u.value&&(P=null);const U=er(R());if(!U)return;U?.focus(),U.tagName&&U.tagName.toLowerCase()==="input"&&typeof U.select=="function"&&U.select()}},V=()=>{s.noTrap&&s.focus!==!1&&P&&(P?.focus(),P=null)},{showRef:L,renderRef:H,renderBackdropRef:G,hide:Y,show:Z,toggle:I,computedNoAnimation:v,transitionProps:E,backdropTransitionProps:S,isLeaving:A,isVisible:T,trapActive:g,contentShowing:F,backdropReady:te,backdropVisible:le}=nS(c,s,i,u,l,{transitionProps:{onAfterEnter:k,onAfterLeave:V}}),{needsFallback:ae}=DC({element:u,isActive:g,noTrap:()=>s.noTrap,fallbackFocus:{ref:h,classSelector:Mp},focus:()=>s.focus===!1?!1:er(R())??void 0});my("Escape",()=>{Y("esc")},{target:u}),LC(L,()=>s.bodyScrolling);const oe=Q(()=>!Ay(o["header-close"])),fe=Q(()=>[s.dialogClass,{"modal-fullscreen":s.fullscreen===!0,[`modal-fullscreen-${s.fullscreen}-down`]:typeof s.fullscreen=="string",[`modal-${s.size}`]:s.size!=="md","modal-dialog-centered":s.centered,"modal-dialog-scrollable":s.scrollable}]),we=Oa(()=>({bgVariant:s.bodyBgVariant,textVariant:s.bodyTextVariant,variant:s.bodyVariant})),be=Q(()=>[s.bodyClass,we.value]),Re=Oa(()=>({bgVariant:s.headerBgVariant,textVariant:s.headerTextVariant,variant:s.headerVariant,borderVariant:s.headerBorderVariant})),st=Q(()=>[s.headerClass,Re.value]),He=Q(()=>({variant:oe.value?s.headerCloseVariant:void 0,class:s.headerCloseClass})),ht=Oa(()=>({bgVariant:s.footerBgVariant,textVariant:s.footerTextVariant,variant:s.footerVariant,borderVariant:s.footerBorderVariant})),Qe=Q(()=>[s.footerClass,ht.value]),M=Q(()=>[s.titleClass,{"visually-hidden":s.titleVisuallyHidden}]),ee=Q(()=>s.cancelDisabled||s.busy),X=Q(()=>s.okDisabled||s.busy),{activePosition:ne,activeModalCount:Ee,stackWithoutSelf:b}=iS(L,c.value),C=Q(()=>({[`stack-position-${ne?.value??0}`]:!0,[`stack-inverse-position-${(Ee?.value??1)-1-(ne?.value??0)}`]:!0}));ze(b,(U,j)=>{U.length>j.length&&L.value===!0&&s.noStacking===!0&&Y()});const w=Fe(Np(u.value??(typeof document<"u"?document.body:void 0)));Ur(()=>{ze(H,U=>{U&&qn(()=>{u.value&&(w.value=Np(u.value))})},{immediate:!0})});const D=Q(()=>L.value||A.value?w.value-((Ee?.value??0)*2-(ne?.value??0)*2):w.value),B=Q(()=>({"z-index":D.value,"--b-position":ne?.value??0,"--b-inverse-position":(Ee?.value??1)-1-(ne?.value??0),"--b-count":Ee?.value??0})),x=Q(()=>({"z-index":D.value-1,"--b-position":ne?.value??0,"--b-inverse-position":(Ee?.value??1)-1-(ne?.value??0),"--b-count":Ee?.value??0})),K=Q(()=>({id:l.value,cancel:()=>{Y("cancel")},close:()=>{Y("close")},hide:Y,show:Z,toggle:I,ok:()=>{Y("ok")},active:L.value,visible:L.value}));return e({hide:Y,id:l,show:Z,toggle:I,visible:L}),(U,j)=>(Ne(),Ft(eC,{to:z(s).teleportTo,disabled:z(s).teleportDisabled},{default:qt(()=>[z(H)||z(F)?(Ne(),Ft($d,hn({key:0},z(E),{appear:c.value||z(s).visible}),{default:qt(()=>[wd(ot("div",hn({id:z(l),ref:"_element",class:["modal",[z(s).modalClass,{fade:!z(v),show:z(T),...C.value}]],role:"dialog","aria-labelledby":z(s).noHeader?void 0:`${z(l)}-label`,"aria-describedby":`${z(l)}-body`,tabindex:"-1"},U.$attrs,{style:[B.value,{display:"block"}],onMousedown:j[4]||(j[4]=sI(W=>z(Y)("backdrop"),["left","self"]))}),[ot("div",{class:gt(["modal-dialog",fe.value])},[z(F)?(Ne(),vt("div",{key:0,class:gt(["modal-content",z(s).contentClass])},[z(s).noHeader?Xt("",!0):(Ne(),vt("div",hn({key:0,class:["modal-header",st.value]},z(s).headerAttrs),[$t(U.$slots,"header",Fn(_r(K.value)),()=>[(Ne(),Ft(hi(z(s).titleTag),{id:`${z(l)}-label`,class:gt(["modal-title",M.value])},{default:qt(()=>[$t(U.$slots,"title",Fn(_r(K.value)),()=>[ls(zn(z(s).title),1)])]),_:3},8,["id","class"])),z(s).noHeaderClose?Xt("",!0):(Ne(),vt(Ut,{key:0},[oe.value?(Ne(),Ft(ru,hn({key:0,ref:"_closeButton"},He.value,{onClick:j[0]||(j[0]=W=>z(Y)("close"))}),{default:qt(()=>[$t(U.$slots,"header-close",Fn(_r(K.value)))]),_:3},16)):(Ne(),Ft(ZC,hn({key:1,ref:"_closeButton","aria-label":z(s).headerCloseLabel},He.value,{onClick:j[1]||(j[1]=W=>z(Y)("close"))}),null,16,["aria-label"]))],64))])],16)),ot("div",hn({id:`${z(l)}-body`,class:["modal-body",be.value]},z(s).bodyAttrs),[$t(U.$slots,"default",Fn(_r(K.value)),()=>[ls(zn(z(s).body),1)])],16,aS),z(s).noFooter?Xt("",!0):(Ne(),vt("div",{key:1,class:gt(["modal-footer",Qe.value])},[$t(U.$slots,"footer",Fn(_r(K.value)),()=>[$t(U.$slots,"cancel",Fn(_r(K.value)),()=>[z(s).okOnly?Xt("",!0):(Ne(),Ft(ru,{key:0,ref:"_cancelButton",disabled:ee.value,size:z(s).buttonSize,variant:z(s).cancelVariant,class:gt(z(s).cancelClass),onClick:j[2]||(j[2]=W=>z(Y)("cancel"))},{default:qt(()=>[ls(zn(z(s).cancelTitle),1)]),_:1},8,["disabled","size","variant","class"]))]),$t(U.$slots,"ok",Fn(_r(K.value)),()=>[at(ru,{ref:"_okButton",disabled:X.value,size:z(s).buttonSize,variant:z(s).okVariant,class:gt(z(s).okClass),onClick:j[3]||(j[3]=W=>z(Y)("ok"))},{default:qt(()=>[ls(zn(z(s).okTitle),1)]),_:1},8,["disabled","size","variant","class"])])])],2))],2)):Xt("",!0)],2),z(ae)?(Ne(),vt("div",{key:0,ref:"_fallbackFocusElement",class:gt(Mp),tabindex:"0",style:{width:"0",height:"0",overflow:"hidden"}},null,512)):Xt("",!0)],16,oS),[[Kd,z(L)&&(z(te)&&z(s).backdropFirst||!z(s).backdropFirst)]])]),_:3},16,["appear"])):Xt("",!0),z(s).noBackdrop?Xt("",!0):$t(U.$slots,"backdrop",Fn(hn({key:1},K.value)),()=>[z(G)?(Ne(),Ft($d,Fn(hn({key:0},z(S))),{default:qt(()=>[wd(ot("div",{class:gt(["modal-backdrop",{fade:!z(v),show:z(le)||z(v),...C.value}]),style:Mo(x.value),onClick:j[5]||(j[5]=W=>z(Y)("backdrop"))},null,6),[[Kd,z(L)||z(A)&&z(s).backdropFirst&&!z(v)]])]),_:1},16)):Xt("",!0)])]),_:3},8,["to","disabled"]))}}),cS=()=>{const t=Fe(new Map);return{register:({id:n,component:r,value:s,toggle:i,show:o,hide:l,registerTrigger:c,unregisterTrigger:u})=>(t.value.set(n,{id:n,component:r,value:Wt(s),toggle:i,show:o,hide:l,registerTrigger:c,unregisterTrigger:u}),{unregister(){t.value.delete(n)},updateId(h,d){const m=t.value.get(d);m&&(t.value.set(h,{...m,id:h}),t.value.delete(d))}}),values:t}},uS=gn({__name:"BContainer",props:{fluid:{type:[Boolean,String],default:!1},gutterX:{default:void 0},gutterY:{default:void 0},tag:{default:"div"}},setup(t){const n=pi(t,"BContainer"),r=Q(()=>({container:n.fluid===!1,"container-fluid":n.fluid===!0,[`container-${n.fluid}`]:typeof n.fluid=="string",[`gx-${n.gutterX}`]:n.gutterX!==void 0,[`gy-${n.gutterY}`]:n.gutterY!==void 0}));return(s,i)=>(Ne(),Ft(hi(z(n).tag),{class:gt(r.value)},{default:qt(()=>[$t(s.$slots,"default")]),_:3},8,["class"]))}}),Fp="bootstrap-vue-next",Bp=(t,e)=>{const{all:n,...r}=t,s={};n&&e.forEach(o=>{s[o]=n});const i={...s,...r};return Object.entries(i).filter(([o,l])=>!!l&&e.includes(o)).map(([o])=>o)},iu=new Set,Up=new Set;Object.assign(({aliases:t={},directives:e=!0,components:n=!0}={})=>{const s=Bp(typeof n=="boolean"?{all:n}:n,JA).reduce((c,u)=>(c.set(u,`${Fp}${_y[u]}`),c),new Map),o=Bp(typeof e=="boolean"?{all:e}:e,XA).reduce((c,u)=>{const h=u.toLowerCase().startsWith("v")?u:`v${u}`;return c.set(h,`${Fp}${yy[h]}`),c},new Map);return[{type:"component",resolve(c){const u=s.get(c),h=s.get(t[c]);if(h){const d=t[c];return iu.add(d),{name:d,from:h}}if(u)return iu.add(c),{name:c,from:u}}},{type:"directive",resolve(c){const u=`v${c}`,h=o.get(u);if(h)return Up.add(u),{name:u,from:h}}}]},{__usedComponents:iu,__usedDirectives:Up});const hS={install(t,e){const s=typeof e?.rtl=="boolean"?!1:e?.rtl?.rtlInitial??!1,i=typeof e?.rtl=="boolean"?void 0:e?.rtl?.localeInitial??void 0,o=Fe(s),l=Fe(i);t.provide(wA,{isRtl:o,locale:l})}},fS={install(t){const{register:e,values:n}=cS();t.provide(hy,{register:e,values:n});const r=Fe({[wp]:[]}),s=(R=wp)=>{r.value[R]=[]};t.provide(IA,{items:r,reset:s});const i=Fe(new Map),o=Q(()=>i.value.size),l=Q(()=>[...i.value.values()]),c=Q(()=>l.value[l.value.length-1]),u=R=>{i.value.set(R.uid,R)},h=R=>{i.value.delete(R.uid)},d=Fe(new Map),m=R=>{d.value.set(R.uid,R)},_=R=>{d.value.delete(R.uid)};t.provide(fy,{countStack:o,lastStack:c,registry:Q(()=>d.value),stack:l,pushStack:u,removeStack:h,pushRegistry:m,removeRegistry:_})}},dS={install(t){const e=YA();t.provide(AA,e)}},pS=(t={})=>({install(e){(t.registries??!0)===!0&&e.use(fS,t),((t.rtl??!0)===!0||typeof t.rtl=="object")&&e.use(hS,t),(t.orchestrator??!0)===!0&&e.use(dS);const n=t?.components??{};e.provide(ka,Fe(n))}});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Oy="store";function mS(t){return t===void 0&&(t=null),wt(t!==null?t:Oy)}function mi(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function gS(t){return t!==null&&typeof t=="object"}function _S(t){return t&&typeof t.then=="function"}function yS(t,e){return function(){return t(e)}}function Ny(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function Dy(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Jl(t,n,[],t._modules.root,!0),Oh(t,n,e)}function Oh(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},l={},c=Ng(!0);c.run(function(){mi(i,function(u,h){o[h]=yS(u,t),l[h]=Q(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return l[h].value},enumerable:!0})})}),t._state=Fo({data:e}),t._scope=c,t.strict&&wS(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function Jl(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var l=Nh(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){l[c]=r.state})}var u=r.context=vS(t,o,n);r.forEachMutation(function(h,d){var m=o+d;ES(t,m,h,u)}),r.forEachAction(function(h,d){var m=h.root?d:o+d,_=h.handler||h;TS(t,m,_,u)}),r.forEachGetter(function(h,d){var m=o+d;bS(t,m,h,u)}),r.forEachChild(function(h,d){Jl(t,e,n.concat(d),h,s)})}function vS(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,l){var c=ll(i,o,l),u=c.payload,h=c.options,d=c.type;return(!h||!h.root)&&(d=e+d),t.dispatch(d,u)},commit:r?t.commit:function(i,o,l){var c=ll(i,o,l),u=c.payload,h=c.options,d=c.type;(!h||!h.root)&&(d=e+d),t.commit(d,u,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return Vy(t,e)}},state:{get:function(){return Nh(t.state,n)}}}),s}function Vy(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function ES(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function TS(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var l=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return _S(l)||(l=Promise.resolve(l)),t._devtoolHook?l.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):l})}function bS(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function wS(t){ze(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Nh(t,e){return e.reduce(function(n,r){return n[r]},t)}function ll(t,e,n){return gS(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var IS="vuex bindings",$p="vuex:mutations",ou="vuex:actions",Vs="vuex",AS=0;function CS(t,e){_I({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[IS]},function(n){n.addTimelineLayer({id:$p,label:"Vuex Mutations",color:jp}),n.addTimelineLayer({id:ou,label:"Vuex Actions",color:jp}),n.addInspector({id:Vs,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Vs)if(r.filter){var s=[];Fy(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[My(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Vs){var s=r.nodeId;Vy(e,s),r.state=PS(OS(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Vs){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Vs),n.sendInspectorState(Vs),n.addTimelineEvent({layerId:$p,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=AS++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:ou,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:ou,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var jp=8702998,SS=6710886,RS=16777215,Ly={label:"namespaced",textColor:RS,backgroundColor:SS};function xy(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function My(t,e){return{id:e||"root",label:xy(e),tags:t.namespaced?[Ly]:[],children:Object.keys(t._children).map(function(n){return My(t._children[n],e+n+"/")})}}function Fy(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[Ly]:[]}),Object.keys(e._children).forEach(function(s){Fy(t,e._children[s],n,r+s+"/")})}function PS(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=kS(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?xy(o):o,editable:!1,value:Bu(function(){return i[o]})}})}return s}function kS(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=Bu(function(){return t[n]})}else e[n]=Bu(function(){return t[n]})}),e}function OS(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function Bu(t){try{return t()}catch(e){return e}}var bn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},By={namespaced:{configurable:!0}};By.namespaced.get=function(){return!!this._rawModule.namespaced};bn.prototype.addChild=function(e,n){this._children[e]=n};bn.prototype.removeChild=function(e){delete this._children[e]};bn.prototype.getChild=function(e){return this._children[e]};bn.prototype.hasChild=function(e){return e in this._children};bn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};bn.prototype.forEachChild=function(e){mi(this._children,e)};bn.prototype.forEachGetter=function(e){this._rawModule.getters&&mi(this._rawModule.getters,e)};bn.prototype.forEachAction=function(e){this._rawModule.actions&&mi(this._rawModule.actions,e)};bn.prototype.forEachMutation=function(e){this._rawModule.mutations&&mi(this._rawModule.mutations,e)};Object.defineProperties(bn.prototype,By);var ws=function(e){this.register([],e,!1)};ws.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};ws.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};ws.prototype.update=function(e){Uy([],this.root,e)};ws.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new bn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&mi(n.modules,function(l,c){s.register(e.concat(c),l,r)})};ws.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};ws.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function Uy(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;Uy(t.concat(r),e.getChild(r),n.modules[r])}}function NS(t){return new Kt(t)}var Kt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ws(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,l=this,c=l.dispatch,u=l.commit;this.dispatch=function(m,_){return c.call(o,m,_)},this.commit=function(m,_,R){return u.call(o,m,_,R)},this.strict=s;var h=this._modules.root.state;Jl(this,h,[],this._modules.root),Oh(this,h),r.forEach(function(d){return d(n)})},Dh={state:{configurable:!0}};Kt.prototype.install=function(e,n){e.provide(n||Oy,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&CS(e,this)};Dh.state.get=function(){return this._state.data};Dh.state.set=function(t){};Kt.prototype.commit=function(e,n,r){var s=this,i=ll(e,n,r),o=i.type,l=i.payload,c={type:o,payload:l},u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(d){d(l)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};Kt.prototype.dispatch=function(e,n){var r=this,s=ll(e,n),i=s.type,o=s.payload,l={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(l,r.state)})}catch{}var u=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,d){u.then(function(m){try{r._actionSubscribers.filter(function(_){return _.after}).forEach(function(_){return _.after(l,r.state)})}catch{}h(m)},function(m){try{r._actionSubscribers.filter(function(_){return _.error}).forEach(function(_){return _.error(l,r.state,m)})}catch{}d(m)})})}};Kt.prototype.subscribe=function(e,n){return Ny(e,this._subscribers,n)};Kt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return Ny(r,this._actionSubscribers,n)};Kt.prototype.watch=function(e,n,r){var s=this;return ze(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Kt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Kt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Jl(this,this.state,e,this._modules.get(e),r.preserveState),Oh(this,this.state)};Kt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=Nh(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),Dy(this)};Kt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Kt.prototype.hotUpdate=function(e){this._modules.update(e),Dy(this,!0)};Kt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Kt.prototype,Dh);function Xl(){const t=mS();return{get user(){return t.state.auth.user},get loading(){return t.state.auth.loading},get error(){return t.state.auth.error},get authReady(){return t.state.auth.authReady},get profile(){return t.state.auth.profile},get justLoggedInAt(){return t.state.auth.justLoggedInAt},get sessionOrigin(){return t.state.auth.sessionOrigin},get isAuthReady(){return t.getters["auth/isAuthReady"]},get isAuthenticated(){return t.getters["auth/isAuthenticated"]},get currentUser(){return t.getters["auth/currentUser"]},get currentRole(){return t.getters["auth/currentRole"]},get isAdmin(){return t.getters["auth/isAdmin"]},get isLoading(){return t.getters["auth/isLoading"]},get getError(){return t.getters["auth/getError"]},initAuthStateListener(){return t.dispatch("auth/initAuthStateListener")},registerUser(e,n){return t.dispatch("auth/registerUser",{email:e,password:n})},loginUser(e,n){return t.dispatch("auth/loginUser",{email:e,password:n})},logoutUser(){return t.dispatch("auth/logoutUser")},fetchUserProfile(e){return t.dispatch("auth/fetchUserProfile",e)},updateUserRole(e){return t.dispatch("auth/updateUserRole",e)},clearError(){t.commit("auth/clearError")},resetJustLogged(){t.commit("auth/resetJustLogged")}}}const DS=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},VS={name:"NavBar",setup(){const t=Xl(),e=EA(),n=Q(()=>t.isAuthenticated),r=Q(()=>t.currentUser),s=Q(()=>t.isLoading),i=Q(()=>t.isAdmin);return{isAuthenticated:n,currentUser:r,isLoading:s,isAdmin:i,handleLogout:async()=>{(await t.logoutUser()).success&&e.push("/login")},navigateToAdmin:()=>{console.log("Navegando a /admin..."),console.log("Usuario autenticado:",n.value),console.log("Ruta actual:",e.currentRoute.value.path),e.push("/admin").then(()=>{console.log("Navegacin completada a:",e.currentRoute.value.path)}).catch(c=>{console.error("Error en navegacin:",c)})}}}},LS={class:"modern-navbar"},xS={class:"navbar-container"},MS={key:0,class:"navbar-nav"},FS={key:1,class:"navbar-guest"},BS={key:2,class:"navbar-user"},US={class:"user-info"},$S={class:"user-email","data-cy":"user-email"},jS=["disabled"],qS={key:0,class:"loading-spinner"},HS={key:1};function GS(t,e,n,r,s,i){return Ne(),vt("nav",LS,[ot("div",xS,[ot("div",{class:"navbar-brand",onClick:e[0]||(e[0]=o=>t.$router.push("/"))},[...e[7]||(e[7]=[ot("div",{class:"brand-icon"},"AW",-1),ot("span",{class:"brand-text"},"AdWeb Online",-1)])]),r.isAuthenticated?(Ne(),vt("div",MS,[ot("button",{class:gt(["nav-link",{active:t.$route.path==="/"}]),onClick:e[1]||(e[1]=o=>t.$router.push("/"))}," Inicio ",2),ot("button",{class:gt(["nav-link",{active:t.$route.path==="/my-courses"}]),onClick:e[2]||(e[2]=o=>t.$router.push("/my-courses"))}," Mis Cursos ",2),r.isAdmin?(Ne(),vt("button",{key:0,class:gt(["nav-link",{active:t.$route.path.startsWith("/admin")}]),onClick:e[3]||(e[3]=o=>t.$router.push("/admin"))}," Administrar ",2)):Xt("",!0)])):(Ne(),vt("div",FS,[ot("button",{class:"guest-btn ghost",onClick:e[4]||(e[4]=o=>t.$router.push("/login"))}," Iniciar sesin "),ot("button",{class:"guest-btn solid",onClick:e[5]||(e[5]=o=>t.$router.push("/register"))}," Registrarme ")])),r.isAuthenticated?(Ne(),vt("div",BS,[ot("div",US,[e[8]||(e[8]=ot("div",{class:"user-avatar"},null,-1)),ot("span",$S,zn(r.currentUser?.email),1)]),ot("button",{class:"logout-btn",onClick:e[6]||(e[6]=(...o)=>r.handleLogout&&r.handleLogout(...o)),disabled:r.isLoading,"data-cy":"logout-btn"},[r.isLoading?(Ne(),vt("span",qS)):(Ne(),vt("span",HS,"Salir"))],8,jS)])):Xt("",!0)])])}const WS=DS(VS,[["render",GS],["__scopeId","data-v-a9cd37d8"]]);function zS(){const t=Xl(),e=Fe(!1),n="Sesin iniciada",r=Q(()=>t.currentUser?.email||"usuario"),s=Q(()=>`Bienvenido, ${r.value}. Ingreso detectado por onAuthStateChanged.`);ze(()=>t.justLoggedInAt,o=>{o&&t.sessionOrigin==="onAuthStateChanged"&&(e.value=!0)});function i(){e.value=!1,t.resetJustLogged()}return{showWelcome:e,toastTitle:n,toastBody:s,onToastHidden:i}}const KS={id:"app"},QS={key:0,class:"py-5 text-center text-muted"},YS={class:"mb-0"},JS="Sesin iniciada",XS={__name:"App",setup(t){const e=Xl(),{showWelcome:n,toastBody:r,onToastHidden:s}=zS();return Ur(()=>{e.isAuthReady||e.initAuthStateListener()}),(i,o)=>(Ne(),vt("div",KS,[at(WS),at(z(uS),null,{default:qt(()=>[z(e).isAuthReady?(Ne(),Ft(z(cy),{key:1})):(Ne(),vt("div",QS," Cargando sesin "))]),_:1}),at(z(lS),{modelValue:z(n),"onUpdate:modelValue":o[0]||(o[0]=l=>et(n)?n.value=l:null),title:JS,"ok-only":"","ok-title":"Entendido",onHidden:z(s)},{default:qt(()=>[ot("p",YS,zn(z(r)),1)]),_:1},8,["modelValue","onHidden"])]))}},ZS="modulepreload",e0=function(t){return"/examenmodulo7/"+t},qp={},Ls=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(n.map(u=>{if(u=e0(u),u in qp)return;qp[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":ZS,h||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((_,R)=>{m.addEventListener("load",_),m.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},$y=yA({history:KI("/examenmodulo7/"),routes:[{path:"/",name:"home",component:()=>Ls(()=>import("./HomeView-Lr1JcAiq.js"),__vite__mapDeps([0,1,2,3,4])),meta:{requiresAuth:!0}},{path:"/login",name:"login",component:()=>Ls(()=>import("./LoginView-B16T8Fiz.js"),__vite__mapDeps([5,6])),meta:{requiresGuest:!0}},{path:"/register",name:"register",component:()=>Ls(()=>import("./RegisterView-Cevhqim9.js"),__vite__mapDeps([7,8,3,9,10])),meta:{requiresGuest:!0}},{path:"/admin",name:"admin",component:()=>Ls(()=>import("./AdminView-7-gEeTD8.js"),__vite__mapDeps([11,8,3,9,12,1,13,14,15])),meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/edit/:id",name:"edit-course",component:()=>Ls(()=>import("./EditCourseView-DrYi7QfY.js"),__vite__mapDeps([16,8,3,9,1,12,13,17])),meta:{requiresAuth:!0,requiresAdmin:!0},props:!0},{path:"/my-courses",name:"my-courses",component:()=>Ls(()=>import("./MyCoursesView-CqhOKKq9.js"),__vite__mapDeps([18,8,3,14,2,19])),meta:{requiresAuth:!0}}]});$y.beforeEach(async(t,e)=>{const n=Xl();n.isAuthReady||await n.initAuthStateListener();const r=t.matched.some(o=>o.meta?.requiresAuth),s=t.matched.some(o=>o.meta?.requiresGuest),i=t.matched.some(o=>o.meta?.requiresAdmin);return r&&!n.isAuthenticated?t.name!=="login"?{name:"login",query:{redirect:t.fullPath},replace:!0}:!0:s&&n.isAuthenticated?t.name!=="home"?{name:"home",replace:!0}:!0:i&&!n.isAdmin?{name:"home",replace:!0}:!0});const t0=()=>{};var Hp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},n0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,_=u&63;c||(_=64,o||(m=64)),r.push(n[h],n[d],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||d==null)throw new r0;const m=i<<2|l>>4;if(r.push(m),u!==64){const _=l<<4&240|u>>2;if(r.push(_),d!==64){const R=u<<6&192|d;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s0=function(t){const e=jy(t);return qy.encodeByteArray(e,!0)},cl=function(t){return s0(t).replace(/\./g,"")},Hy=function(t){try{return qy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=()=>i0().__FIREBASE_DEFAULTS__,a0=()=>{if(typeof process>"u"||typeof Hp>"u")return;const t=Hp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hy(t[1]);return e&&JSON.parse(e)},Zl=()=>{try{return t0()||o0()||a0()||l0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gy=t=>Zl()?.emulatorHosts?.[t],c0=t=>{const e=Gy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wy=()=>Zl()?.config,zy=t=>Zl()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ky(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[cl(JSON.stringify(n)),cl(JSON.stringify(o)),""].join(".")}const co={};function f0(){const t={prod:[],emulator:[]};for(const e of Object.keys(co))co[e]?t.emulator.push(e):t.prod.push(e);return t}function d0(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gp=!1;function Qy(t,e){if(typeof window>"u"||typeof document>"u"||!gi(window.location.host)||co[t]===e||co[t]||Gp)return;co[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=f0().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Gp=!0,o()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=d0(r),_=n("text"),R=document.getElementById(_)||document.createElement("span"),P=n("learnmore"),k=document.getElementById(P)||document.createElement("a"),V=n("preprendIcon"),L=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const H=m.element;l(H),h(k,P);const G=u();c(L,V),H.append(L,R,k,G),document.body.appendChild(H)}i?(R.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function m0(){const t=Zl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function y0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v0(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E0(){return!m0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T0(){try{return typeof indexedDB=="object"}catch{return!1}}function b0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=w0,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?I0(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ar(s,l,r)}}function I0(t,e){return t.replace(A0,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const A0=/\{\$([^}]+)}/g;function C0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _s(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Wp(i)&&Wp(o)){if(!_s(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function S0(t,e){const n=new R0(t,e);return n.subscribe.bind(n)}class R0{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");P0(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=au),s.error===void 0&&(s.error=au),s.complete===void 0&&(s.complete=au);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P0(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function au(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t){return t&&t._delegate?t._delegate:t}class ys{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new u0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N0(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O0(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O0(t){return t===ss?void 0:t}function N0(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new k0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const V0={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},L0=Ae.INFO,x0={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},M0=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=x0[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vh{constructor(e){this.name=e,this._logLevel=L0,this._logHandler=M0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const F0=(t,e)=>e.some(n=>t instanceof n);let zp,Kp;function B0(){return zp||(zp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U0(){return Kp||(Kp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yy=new WeakMap,Uu=new WeakMap,Jy=new WeakMap,lu=new WeakMap,Lh=new WeakMap;function $0(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Cr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yy.set(n,t)}).catch(()=>{}),Lh.set(e,t),e}function j0(t){if(Uu.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Uu.set(t,e)}let $u={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q0(t){$u=t($u)}function H0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cu(this),e,...n);return Jy.set(r,e.sort?e.sort():[e]),Cr(r)}:U0().includes(t)?function(...e){return t.apply(cu(this),e),Cr(Yy.get(this))}:function(...e){return Cr(t.apply(cu(this),e))}}function G0(t){return typeof t=="function"?H0(t):(t instanceof IDBTransaction&&j0(t),F0(t,B0())?new Proxy(t,$u):t)}function Cr(t){if(t instanceof IDBRequest)return $0(t);if(lu.has(t))return lu.get(t);const e=G0(t);return e!==t&&(lu.set(t,e),Lh.set(e,t)),e}const cu=t=>Lh.get(t);function W0(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Cr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Cr(o.result),c.oldVersion,c.newVersion,Cr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const z0=["get","getKey","getAll","getAllKeys","count"],K0=["put","add","delete","clear"],uu=new Map;function Qp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uu.get(e))return uu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=K0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||z0.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return uu.set(e,i),i}q0(t=>({...t,get:(e,n,r)=>Qp(e,n)||t.get(e,n,r),has:(e,n)=>!!Qp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y0(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y0(t){return t.getComponent()?.type==="VERSION"}const ju="@firebase/app",Yp="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Vh("@firebase/app"),J0="@firebase/app-compat",X0="@firebase/analytics-compat",Z0="@firebase/analytics",eR="@firebase/app-check-compat",tR="@firebase/app-check",nR="@firebase/auth",rR="@firebase/auth-compat",sR="@firebase/database",iR="@firebase/data-connect",oR="@firebase/database-compat",aR="@firebase/functions",lR="@firebase/functions-compat",cR="@firebase/installations",uR="@firebase/installations-compat",hR="@firebase/messaging",fR="@firebase/messaging-compat",dR="@firebase/performance",pR="@firebase/performance-compat",mR="@firebase/remote-config",gR="@firebase/remote-config-compat",_R="@firebase/storage",yR="@firebase/storage-compat",vR="@firebase/firestore",ER="@firebase/ai",TR="@firebase/firestore-compat",bR="firebase",wR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu="[DEFAULT]",IR={[ju]:"fire-core",[J0]:"fire-core-compat",[Z0]:"fire-analytics",[X0]:"fire-analytics-compat",[tR]:"fire-app-check",[eR]:"fire-app-check-compat",[nR]:"fire-auth",[rR]:"fire-auth-compat",[sR]:"fire-rtdb",[iR]:"fire-data-connect",[oR]:"fire-rtdb-compat",[aR]:"fire-fn",[lR]:"fire-fn-compat",[cR]:"fire-iid",[uR]:"fire-iid-compat",[hR]:"fire-fcm",[fR]:"fire-fcm-compat",[dR]:"fire-perf",[pR]:"fire-perf-compat",[mR]:"fire-rc",[gR]:"fire-rc-compat",[_R]:"fire-gcs",[yR]:"fire-gcs-compat",[vR]:"fire-fst",[TR]:"fire-fst-compat",[ER]:"fire-vertex","fire-js":"fire-js",[bR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new Map,AR=new Map,Hu=new Map;function Jp(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function si(t){const e=t.name;if(Hu.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;Hu.set(e,t);for(const n of ul.values())Jp(n,t);for(const n of AR.values())Jp(n,t);return!0}function xh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new $o("app","Firebase",CR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=wR;function Xy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qu,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Sr.create("bad-app-name",{appName:String(s)});if(n||(n=Wy()),!n)throw Sr.create("no-options");const i=ul.get(s);if(i){if(_s(n,i.options)&&_s(r,i.config))return i;throw Sr.create("duplicate-app",{appName:s})}const o=new D0(s);for(const c of Hu.values())o.addComponent(c);const l=new SR(n,r,o);return ul.set(s,l),l}function Zy(t=qu){const e=ul.get(t);if(!e&&t===qu&&Wy())return Xy();if(!e)throw Sr.create("no-app",{appName:t});return e}function Rr(t,e,n){let r=IR[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(o.join(" "));return}si(new ys(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebase-heartbeat-database",PR=1,Co="firebase-heartbeat-store";let hu=null;function ev(){return hu||(hu=W0(RR,PR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Co)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),hu}async function kR(t){try{const n=(await ev()).transaction(Co),r=await n.objectStore(Co).get(tv(t));return await n.done,r}catch(e){if(e instanceof ar)tr.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e?.message});tr.warn(n.message)}}}async function Xp(t,e){try{const r=(await ev()).transaction(Co,"readwrite");await r.objectStore(Co).put(e,tv(t)),await r.done}catch(n){if(n instanceof ar)tr.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n?.message});tr.warn(r.message)}}}function tv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=1024,NR=30;class DR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>NR){const s=xR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){tr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zp(),{heartbeatsToSend:n,unsentEntries:r}=VR(this._heartbeatsCache.heartbeats),s=cl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return tr.warn(e),""}}}function Zp(){return new Date().toISOString().substring(0,10)}function VR(t,e=OR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),em(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),em(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T0()?b0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function em(t){return cl(JSON.stringify({version:2,heartbeats:t})).length}function xR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){si(new ys("platform-logger",e=>new Q0(e),"PRIVATE")),si(new ys("heartbeat",e=>new DR(e),"PRIVATE")),Rr(ju,Yp,t),Rr(ju,Yp,"esm2020"),Rr("fire-js","")}MR("");function nv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FR=nv,rv=new $o("auth","Firebase",nv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Vh("@firebase/auth");function BR(t,...e){hl.logLevel<=Ae.WARN&&hl.warn(`Auth (${_i}): ${t}`,...e)}function Na(t,...e){hl.logLevel<=Ae.ERROR&&hl.error(`Auth (${_i}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,...e){throw Mh(t,...e)}function On(t,...e){return Mh(t,...e)}function sv(t,e,n){const r={...FR(),[e]:n};return new $o("auth","Firebase",r).create(e,{appName:t.name})}function Yn(t){return sv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rv.create(t,...e)}function me(t,e,...n){if(!t)throw Mh(e,...n)}function Kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Na(e),new Error(e)}function nr(t,e){t||Kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(){return typeof self<"u"&&self.location?.href||""}function UR(){return tm()==="http:"||tm()==="https:"}function tm(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UR()||_0()||"connection"in navigator)?navigator.onLine:!0}function jR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.shortDelay=e,this.longDelay=n,nr(n>e,"Short delay should be less than long delay!"),this.isMobile=p0()||y0()}get(){return $R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e){nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GR=new qo(3e4,6e4);function jr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qr(t,e,n,r,s={}){return ov(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=jo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return g0()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&gi(t.emulatorConfig.host)&&(u.credentials="include"),iv.fetch()(await av(t,t.config.apiHost,n,l),u)})}async function ov(t,e,n){t._canInitEmulator=!1;const r={...qR,...e};try{const s=new zR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw va(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw va(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw va(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw va(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sv(t,h,u);vn(t,h)}}catch(s){if(s instanceof ar)throw s;vn(t,"network-request-failed",{message:String(s)})}}async function Ho(t,e,n,r,s={}){const i=await qr(t,e,n,r,s);return"mfaPendingCredential"in i&&vn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function av(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Fh(t.config,s):`${t.config.apiScheme}://${s}`;return HR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function WR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),GR.get())})}}function va(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=On(t,e,r);return s.customData._tokenResponse=n,s}function nm(t){return t!==void 0&&t.enterprise!==void 0}class KR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function QR(t,e){return qr(t,"GET","/v2/recaptchaConfig",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(t,e){return qr(t,"POST","/v1/accounts:delete",e)}async function fl(t,e){return qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JR(t,e=!1){const n=ut(t),r=await n.getIdToken(e),s=Bh(r);me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:uo(fu(s.auth_time)),issuedAtTime:uo(fu(s.iat)),expirationTime:uo(fu(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function fu(t){return Number(t)*1e3}function Bh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Na("JWT malformed, contained fewer than 3 sections"),null;try{const s=Hy(n);return s?JSON.parse(s):(Na("Failed to decode base64 JWT payload"),null)}catch(s){return Na("Caught error parsing JWT payload as JSON",s?.toString()),null}}function rm(t){const e=Bh(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&XR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uo(this.lastLoginAt),this.creationTime=uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t){const e=t.auth,n=await t.getIdToken(),r=await So(t,fl(e,{idToken:n}));me(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?lv(s.providerUserInfo):[],o=tP(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Wu(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function eP(t){const e=ut(t);await dl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tP(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function lv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(t,e){const n=await ov(t,{},async()=>{const r=jo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await av(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&gi(t.emulatorConfig.host)&&(c.credentials="include"),iv.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rP(t,e){return qr(t,"POST","/v2/accounts:revokeToken",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=rm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await nP(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Xs;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xs,this.toJSON())}_performRefresh(){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new ZR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await So(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JR(this,e)}reload(){return eP(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(Yn(this.auth));const e=await this.getIdToken();return await So(this,YR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:_,providerData:R,stsTokenManager:P}=n;me(d&&P,e,"internal-error");const k=Xs.fromJSON(this.name,P);me(typeof d=="string",e,"internal-error"),gr(r,e.name),gr(s,e.name),me(typeof m=="boolean",e,"internal-error"),me(typeof _=="boolean",e,"internal-error"),gr(i,e.name),gr(o,e.name),gr(l,e.name),gr(c,e.name),gr(u,e.name),gr(h,e.name);const V=new fn({uid:d,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:k,createdAt:u,lastLoginAt:h});return R&&Array.isArray(R)&&(V.providerData=R.map(L=>({...L}))),c&&(V._redirectEventId=c),V}static async _fromIdTokenResponse(e,n,r=!1){const s=new Xs;s.updateFromServerResponse(n);const i=new fn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await dl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?lv(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,l=new Xs;l.updateFromIdToken(r);const c=new fn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Wu(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm=new Map;function Qn(t){nr(t instanceof Function,"Expected a class definition");let e=sm.get(t);return e?(nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cv.type="NONE";const im=cv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t,e,n){return`firebase:${t}:${e}:${n}`}class Zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Da(this.userKey,s.apiKey,i),this.fullPersistenceKey=Da("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fl(this.auth,{idToken:e}).catch(()=>{});return n?fn._fromGetAccountInfoResponse(this.auth,n,e):null}return fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zs(Qn(im),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Qn(im);const o=Da(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const m=await fl(e,{idToken:h}).catch(()=>{});if(!m)break;d=await fn._fromGetAccountInfoResponse(e,m,h)}else d=fn._fromJSON(e,h);u!==i&&(l=d),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Zs(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Zs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mv(e))return"Blackberry";if(gv(e))return"Webos";if(hv(e))return"Safari";if((e.includes("chrome/")||fv(e))&&!e.includes("edge/"))return"Chrome";if(pv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function uv(t=Vt()){return/firefox\//i.test(t)}function hv(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fv(t=Vt()){return/crios\//i.test(t)}function dv(t=Vt()){return/iemobile/i.test(t)}function pv(t=Vt()){return/android/i.test(t)}function mv(t=Vt()){return/blackberry/i.test(t)}function gv(t=Vt()){return/webos/i.test(t)}function Uh(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sP(t=Vt()){return Uh(t)&&!!window.navigator?.standalone}function iP(){return v0()&&document.documentMode===10}function _v(t=Vt()){return Uh(t)||pv(t)||gv(t)||mv(t)||/windows phone/i.test(t)||dv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e=[]){let n;switch(t){case"Browser":n=om(Vt());break;case"Worker":n=`${om(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_i}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e={}){return qr(t,"GET","/v2/passwordPolicy",jr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=6;class cP{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new am(this),this.idTokenSubscription=new am(this),this.beforeStateQueue=new oP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fl(this,{idToken:e}),r=await fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(on(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(Yn(this));const n=e?ut(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(Yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(Yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aP(this),n=new cP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $o("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rP(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(on(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&BR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Is(t){return ut(t)}class am{constructor(e){this.auth=e,this.observer=null,this.addObserver=S0(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hP(t){ec=t}function vv(t){return ec.loadJS(t)}function fP(){return ec.recaptchaEnterpriseScript}function dP(){return ec.gapiScript}function pP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class mP{constructor(){this.enterprise=new gP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const _P="recaptcha-enterprise",Ev="NO_RECAPTCHA";class yP{constructor(e){this.type=_P,this.auth=Is(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{QR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new KR(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;nm(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Ev)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mP().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&nm(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=fP();c.length!==0&&(c+=l),vv(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function lm(t,e,n,r=!1,s=!1){const i=new yP(t);let o;if(s)o=Ev;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function zu(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await lm(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await lm(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t,e){const n=xh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(_s(i,e??{}))return s;vn(s,"already-initialized")}return n.initialize({options:e})}function EP(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Qn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function TP(t,e,n){const r=Is(t);me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Tv(e),{host:o,port:l}=bP(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),me(_s(u,r.config.emulator)&&_s(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,gi(o)?(Ky(`${i}//${o}${c}`),Qy("Auth",!0)):wP()}function Tv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bP(t){const e=Tv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:cm(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:cm(o)}}}function cm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,n){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}}async function IP(t,e){return qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(t,e){return Ho(t,"POST","/v1/accounts:signInWithPassword",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(t,e){return Ho(t,"POST","/v1/accounts:signInWithEmailLink",jr(t,e))}async function SP(t,e){return Ho(t,"POST","/v1/accounts:signInWithEmailLink",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends $h{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ro(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ro(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zu(e,n,"signInWithPassword",AP);case"emailLink":return CP(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zu(e,r,"signUpPassword",IP);case"emailLink":return SP(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ei(t,e){return Ho(t,"POST","/v1/accounts:signInWithIdp",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="http://localhost";class vs extends $h{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new vs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ei(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ei(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ei(e,n)}buildRequest(){const e={requestUri:RP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kP(t){const e=Hi(Gi(t)).link,n=e?Hi(Gi(e)).deep_link_id:null,r=Hi(Gi(t)).deep_link_id;return(r?Hi(Gi(r)).link:null)||r||n||e||t}class jh{constructor(e){const n=Hi(Gi(e)),r=n.apiKey??null,s=n.oobCode??null,i=PP(n.mode??null);me(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=kP(e);try{return new jh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.providerId=yi.PROVIDER_ID}static credential(e,n){return Ro._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jh.parseLink(n);return me(r,"argument-error"),Ro._fromEmailAndCode(e,r.code,r.tenantId)}}yi.PROVIDER_ID="password";yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends bv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Go{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Go{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vs._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return br.credential(n,r)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Go{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Go{constructor(){super("twitter.com")}static credential(e,n){return vs._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(t,e){return Ho(t,"POST","/v1/accounts:signUp",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await fn._fromIdTokenResponse(e,r,s),o=um(r);return new Es({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=um(r);return new Es({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function um(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends ar{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,pl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new pl(e,n,r,s)}}function wv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?pl._fromErrorAndOperation(t,i,e,r):i})}async function NP(t,e,n=!1){const r=await So(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(t,e,n=!1){const{auth:r}=t;if(on(r.app))return Promise.reject(Yn(r));const s="reauthenticate";try{const i=await So(t,wv(r,s,e,t),n);me(i.idToken,r,"internal-error");const o=Bh(i.idToken);me(o,r,"internal-error");const{sub:l}=o;return me(t.uid===l,r,"user-mismatch"),Es._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&vn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iv(t,e,n=!1){if(on(t.app))return Promise.reject(Yn(t));const r="signIn",s=await wv(t,r,e),i=await Es._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function VP(t,e){return Iv(Is(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Av(t){const e=Is(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LP(t,e,n){if(on(t.app))return Promise.reject(Yn(t));const r=Is(t),o=await zu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OP).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Av(t),c}),l=await Es._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function xP(t,e,n){return on(t.app)?Promise.reject(Yn(t)):VP(ut(t),yi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Av(t),r})}function MP(t,e,n,r){return ut(t).onIdTokenChanged(e,n,r)}function FP(t,e,n){return ut(t).beforeAuthStateChanged(e,n)}function BP(t,e,n,r){return ut(t).onAuthStateChanged(e,n,r)}function UP(t){return ut(t).signOut()}const ml="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ml,"1"),this.storage.removeItem(ml),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=1e3,jP=10;class Sv extends Cv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_v(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);iP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$P)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sv.type="LOCAL";const qP=Sv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv extends Cv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Rv.type="SESSION";const Pv=Rv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new tc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await HP(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=qh("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function WP(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function zP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KP(){return navigator?.serviceWorker?.controller||null}function QP(){return kv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="firebaseLocalStorageDb",YP=1,gl="firebaseLocalStorage",Nv="fbase_key";class Wo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nc(t,e){return t.transaction([gl],e?"readwrite":"readonly").objectStore(gl)}function JP(){const t=indexedDB.deleteDatabase(Ov);return new Wo(t).toPromise()}function Ku(){const t=indexedDB.open(Ov,YP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(gl,{keyPath:Nv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(gl)?e(r):(r.close(),await JP(),e(await Ku()))})})}async function hm(t,e,n){const r=nc(t,!0).put({[Nv]:e,value:n});return new Wo(r).toPromise()}async function XP(t,e){const n=nc(t,!1).get(e),r=await new Wo(n).toPromise();return r===void 0?null:r.value}function fm(t,e){const n=nc(t,!0).delete(e);return new Wo(n).toPromise()}const ZP=800,ek=3;class Dv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ku(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ek)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tc._getInstance(QP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await zP(),!this.activeServiceWorker)return;this.sender=new GP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ku();return await hm(e,ml,"1"),await fm(e,ml),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hm(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=nc(s,!1).getAll();return new Wo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dv.type="LOCAL";const tk=Dv;new qo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t,e){return e?Qn(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends $h{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ei(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ei(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rk(t){return Iv(t.auth,new Hh(t),t.bypassAuthState)}function sk(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),DP(n,new Hh(t),t.bypassAuthState)}async function ik(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),NP(n,new Hh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rk;case"linkViaPopup":case"linkViaRedirect":return ik;case"reauthViaPopup":case"reauthViaRedirect":return sk;default:vn(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new qo(2e3,1e4);class qs extends Vv{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=qh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ok.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="pendingRedirect",Va=new Map;class lk extends Vv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Va.get(this.auth._key());if(!e){try{const r=await ck(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Va.set(this.auth._key(),e)}return this.bypassAuthState||Va.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ck(t,e){const n=fk(e),r=hk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function uk(t,e){Va.set(t._key(),e)}function hk(t){return Qn(t._redirectPersistence)}function fk(t){return Da(ak,t.config.apiKey,t.name)}async function dk(t,e,n=!1){if(on(t.app))return Promise.reject(Yn(t));const r=Is(t),s=nk(r,e),o=await new lk(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=600*1e3;class mk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Lv(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(On(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pk&&this.cachedEventUids.clear(),this.cachedEventUids.has(dm(e))}saveEventToCache(e){this.cachedEventUids.add(dm(e)),this.lastProcessedEventTime=Date.now()}}function dm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Lv({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function gk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t,e={}){return qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vk=/^https?/;async function Ek(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _k(t);for(const n of e)try{if(Tk(n))return}catch{}vn(t,"unauthorized-domain")}function Tk(t){const e=Gu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vk.test(n))return!1;if(yk.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new qo(3e4,6e4);function pm(){const t=Nn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wk(t){return new Promise((e,n)=>{function r(){pm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pm(),n(On(t,"network-request-failed"))},timeout:bk.get()})}if(Nn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Nn().gapi?.load)r();else{const s=pP("iframefcb");return Nn()[s]=()=>{gapi.load?r():n(On(t,"network-request-failed"))},vv(`${dP()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw La=null,e})}let La=null;function Ik(t){return La=La||wk(t),La}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new qo(5e3,15e3),Ck="__/auth/iframe",Sk="emulator/auth/iframe",Rk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kk(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fh(e,Sk):`https://${t.config.authDomain}/${Ck}`,r={apiKey:e.apiKey,appName:t.name,v:_i},s=Pk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${jo(r).slice(1)}`}async function Ok(t){const e=await Ik(t),n=Nn().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:kk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=On(t,"network-request-failed"),l=Nn().setTimeout(()=>{i(o)},Ak.get());function c(){Nn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dk=500,Vk=600,Lk="_blank",xk="http://localhost";class mm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mk(t,e,n,r=Dk,s=Vk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...Nk,width:r.toString(),height:s.toString(),top:i,left:o},u=Vt().toLowerCase();n&&(l=fv(u)?Lk:n),uv(u)&&(e=e||xk,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[_,R])=>`${m}${_}=${R},`,"");if(sP(u)&&l!=="_self")return Fk(e||"",l),new mm(null);const d=window.open(e||"",l,h);me(d,t,"popup-blocked");try{d.focus()}catch{}return new mm(d)}function Fk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="__/auth/handler",Uk="emulator/auth/handler",$k=encodeURIComponent("fac");async function gm(t,e,n,r,s,i){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_i,eventId:s};if(e instanceof bv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",C0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Go){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${$k}=${encodeURIComponent(c)}`:"";return`${jk(t)}?${jo(l).slice(1)}${u}`}function jk({config:t}){return t.emulator?Fh(t,Uk):`https://${t.authDomain}/${Bk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="webStorageSupport";class qk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pv,this._completeRedirectFn=dk,this._overrideRedirectResult=uk}async _openPopup(e,n,r,s){nr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await gm(e,n,r,Gu(),s);return Mk(e,i,qh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await gm(e,n,r,Gu(),s);return WP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(nr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ok(e),r=new mk(e);return n.register("authEvent",s=>(me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(du,{type:du},s=>{const i=s?.[0]?.[du];i!==void 0&&n(!!i),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ek(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _v()||hv()||Uh()}}const Hk=qk;var _m="@firebase/auth",ym="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zk(t){si(new ys("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yv(t)},u=new uP(r,s,i,c);return EP(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),si(new ys("auth-internal",e=>{const n=Is(e.getProvider("auth").getImmediate());return(r=>new Gk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(_m,ym,Wk(t)),Rr(_m,ym,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=300,Qk=zy("authIdTokenMaxAge")||Kk;let vm=null;const Yk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Qk)return;const s=n?.token;vm!==s&&(vm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Jk(t=Zy()){const e=xh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vP(t,{popupRedirectResolver:Hk,persistence:[tk,qP,Pv]}),r=zy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Yk(i.toString());FP(n,o,()=>o(n.currentUser)),MP(n,l=>o(l))}}const s=Gy("auth");return s&&TP(n,`http://${s}`),n}function Xk(){return document.getElementsByTagName("head")?.[0]??document}hP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=On("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Xk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zk("Browser");var Em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,xv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function E(){}E.prototype=v.prototype,I.F=v.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(S,A,T){for(var g=Array(arguments.length-2),F=2;F<arguments.length;F++)g[F-2]=arguments[F];return v.prototype[A].apply(S,g)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,v,E){E||(E=0);const S=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)S[A]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(A=0;A<16;++A)S[A]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=I.g[0],E=I.g[1],A=I.g[2];let T=I.g[3],g;g=v+(T^E&(A^T))+S[0]+3614090360&4294967295,v=E+(g<<7&4294967295|g>>>25),g=T+(A^v&(E^A))+S[1]+3905402710&4294967295,T=v+(g<<12&4294967295|g>>>20),g=A+(E^T&(v^E))+S[2]+606105819&4294967295,A=T+(g<<17&4294967295|g>>>15),g=E+(v^A&(T^v))+S[3]+3250441966&4294967295,E=A+(g<<22&4294967295|g>>>10),g=v+(T^E&(A^T))+S[4]+4118548399&4294967295,v=E+(g<<7&4294967295|g>>>25),g=T+(A^v&(E^A))+S[5]+1200080426&4294967295,T=v+(g<<12&4294967295|g>>>20),g=A+(E^T&(v^E))+S[6]+2821735955&4294967295,A=T+(g<<17&4294967295|g>>>15),g=E+(v^A&(T^v))+S[7]+4249261313&4294967295,E=A+(g<<22&4294967295|g>>>10),g=v+(T^E&(A^T))+S[8]+1770035416&4294967295,v=E+(g<<7&4294967295|g>>>25),g=T+(A^v&(E^A))+S[9]+2336552879&4294967295,T=v+(g<<12&4294967295|g>>>20),g=A+(E^T&(v^E))+S[10]+4294925233&4294967295,A=T+(g<<17&4294967295|g>>>15),g=E+(v^A&(T^v))+S[11]+2304563134&4294967295,E=A+(g<<22&4294967295|g>>>10),g=v+(T^E&(A^T))+S[12]+1804603682&4294967295,v=E+(g<<7&4294967295|g>>>25),g=T+(A^v&(E^A))+S[13]+4254626195&4294967295,T=v+(g<<12&4294967295|g>>>20),g=A+(E^T&(v^E))+S[14]+2792965006&4294967295,A=T+(g<<17&4294967295|g>>>15),g=E+(v^A&(T^v))+S[15]+1236535329&4294967295,E=A+(g<<22&4294967295|g>>>10),g=v+(A^T&(E^A))+S[1]+4129170786&4294967295,v=E+(g<<5&4294967295|g>>>27),g=T+(E^A&(v^E))+S[6]+3225465664&4294967295,T=v+(g<<9&4294967295|g>>>23),g=A+(v^E&(T^v))+S[11]+643717713&4294967295,A=T+(g<<14&4294967295|g>>>18),g=E+(T^v&(A^T))+S[0]+3921069994&4294967295,E=A+(g<<20&4294967295|g>>>12),g=v+(A^T&(E^A))+S[5]+3593408605&4294967295,v=E+(g<<5&4294967295|g>>>27),g=T+(E^A&(v^E))+S[10]+38016083&4294967295,T=v+(g<<9&4294967295|g>>>23),g=A+(v^E&(T^v))+S[15]+3634488961&4294967295,A=T+(g<<14&4294967295|g>>>18),g=E+(T^v&(A^T))+S[4]+3889429448&4294967295,E=A+(g<<20&4294967295|g>>>12),g=v+(A^T&(E^A))+S[9]+568446438&4294967295,v=E+(g<<5&4294967295|g>>>27),g=T+(E^A&(v^E))+S[14]+3275163606&4294967295,T=v+(g<<9&4294967295|g>>>23),g=A+(v^E&(T^v))+S[3]+4107603335&4294967295,A=T+(g<<14&4294967295|g>>>18),g=E+(T^v&(A^T))+S[8]+1163531501&4294967295,E=A+(g<<20&4294967295|g>>>12),g=v+(A^T&(E^A))+S[13]+2850285829&4294967295,v=E+(g<<5&4294967295|g>>>27),g=T+(E^A&(v^E))+S[2]+4243563512&4294967295,T=v+(g<<9&4294967295|g>>>23),g=A+(v^E&(T^v))+S[7]+1735328473&4294967295,A=T+(g<<14&4294967295|g>>>18),g=E+(T^v&(A^T))+S[12]+2368359562&4294967295,E=A+(g<<20&4294967295|g>>>12),g=v+(E^A^T)+S[5]+4294588738&4294967295,v=E+(g<<4&4294967295|g>>>28),g=T+(v^E^A)+S[8]+2272392833&4294967295,T=v+(g<<11&4294967295|g>>>21),g=A+(T^v^E)+S[11]+1839030562&4294967295,A=T+(g<<16&4294967295|g>>>16),g=E+(A^T^v)+S[14]+4259657740&4294967295,E=A+(g<<23&4294967295|g>>>9),g=v+(E^A^T)+S[1]+2763975236&4294967295,v=E+(g<<4&4294967295|g>>>28),g=T+(v^E^A)+S[4]+1272893353&4294967295,T=v+(g<<11&4294967295|g>>>21),g=A+(T^v^E)+S[7]+4139469664&4294967295,A=T+(g<<16&4294967295|g>>>16),g=E+(A^T^v)+S[10]+3200236656&4294967295,E=A+(g<<23&4294967295|g>>>9),g=v+(E^A^T)+S[13]+681279174&4294967295,v=E+(g<<4&4294967295|g>>>28),g=T+(v^E^A)+S[0]+3936430074&4294967295,T=v+(g<<11&4294967295|g>>>21),g=A+(T^v^E)+S[3]+3572445317&4294967295,A=T+(g<<16&4294967295|g>>>16),g=E+(A^T^v)+S[6]+76029189&4294967295,E=A+(g<<23&4294967295|g>>>9),g=v+(E^A^T)+S[9]+3654602809&4294967295,v=E+(g<<4&4294967295|g>>>28),g=T+(v^E^A)+S[12]+3873151461&4294967295,T=v+(g<<11&4294967295|g>>>21),g=A+(T^v^E)+S[15]+530742520&4294967295,A=T+(g<<16&4294967295|g>>>16),g=E+(A^T^v)+S[2]+3299628645&4294967295,E=A+(g<<23&4294967295|g>>>9),g=v+(A^(E|~T))+S[0]+4096336452&4294967295,v=E+(g<<6&4294967295|g>>>26),g=T+(E^(v|~A))+S[7]+1126891415&4294967295,T=v+(g<<10&4294967295|g>>>22),g=A+(v^(T|~E))+S[14]+2878612391&4294967295,A=T+(g<<15&4294967295|g>>>17),g=E+(T^(A|~v))+S[5]+4237533241&4294967295,E=A+(g<<21&4294967295|g>>>11),g=v+(A^(E|~T))+S[12]+1700485571&4294967295,v=E+(g<<6&4294967295|g>>>26),g=T+(E^(v|~A))+S[3]+2399980690&4294967295,T=v+(g<<10&4294967295|g>>>22),g=A+(v^(T|~E))+S[10]+4293915773&4294967295,A=T+(g<<15&4294967295|g>>>17),g=E+(T^(A|~v))+S[1]+2240044497&4294967295,E=A+(g<<21&4294967295|g>>>11),g=v+(A^(E|~T))+S[8]+1873313359&4294967295,v=E+(g<<6&4294967295|g>>>26),g=T+(E^(v|~A))+S[15]+4264355552&4294967295,T=v+(g<<10&4294967295|g>>>22),g=A+(v^(T|~E))+S[6]+2734768916&4294967295,A=T+(g<<15&4294967295|g>>>17),g=E+(T^(A|~v))+S[13]+1309151649&4294967295,E=A+(g<<21&4294967295|g>>>11),g=v+(A^(E|~T))+S[4]+4149444226&4294967295,v=E+(g<<6&4294967295|g>>>26),g=T+(E^(v|~A))+S[11]+3174756917&4294967295,T=v+(g<<10&4294967295|g>>>22),g=A+(v^(T|~E))+S[2]+718787259&4294967295,A=T+(g<<15&4294967295|g>>>17),g=E+(T^(A|~v))+S[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(A+(g<<21&4294967295|g>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.v=function(I,v){v===void 0&&(v=I.length);const E=v-this.blockSize,S=this.C;let A=this.h,T=0;for(;T<v;){if(A==0)for(;T<=E;)s(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<v;)if(S[A++]=I.charCodeAt(T++),A==this.blockSize){s(this,S),A=0;break}}else for(;T<v;)if(S[A++]=I[T++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;v=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=v&255,v/=256;for(this.v(I),I=Array(16),v=0,E=0;E<4;++E)for(let S=0;S<32;S+=8)I[v++]=this.g[E]>>>S&255;return I};function i(I,v){var E=l;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=v(I)}function o(I,v){this.h=v;const E=[];let S=!0;for(let A=I.length-1;A>=0;A--){const T=I[A]|0;S&&T==v||(E[A]=T,S=!1)}this.g=E}var l={};function c(I){return-128<=I&&I<128?i(I,function(v){return new o([v|0],v<0?-1:0)}):new o([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(I<0)return k(u(-I));const v=[];let E=1;for(let S=0;I>=E;S++)v[S]=I/E|0,E*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return k(h(I.substring(1),v));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(v,8));let S=d;for(let T=0;T<I.length;T+=8){var A=Math.min(8,I.length-T);const g=parseInt(I.substring(T,T+A),v);A<8?(A=u(Math.pow(v,A)),S=S.j(A).add(u(g))):(S=S.j(E),S=S.add(u(g)))}return S}var d=c(0),m=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-k(this).m();let I=0,v=1;for(let E=0;E<this.g.length;E++){const S=this.i(E);I+=(S>=0?S:4294967296+S)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R(this))return"0";if(P(this))return"-"+k(this).toString(I);const v=u(Math.pow(I,6));var E=this;let S="";for(;;){const A=G(E,v).g;E=V(E,A.j(v));let T=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=A,R(E))return T+S;for(;T.length<6;)T="0"+T;S=T+S}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function R(I){if(I.h!=0)return!1;for(let v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function P(I){return I.h==-1}t.l=function(I){return I=V(this,I),P(I)?-1:R(I)?0:1};function k(I){const v=I.g.length,E=[];for(let S=0;S<v;S++)E[S]=~I.g[S];return new o(E,~I.h).add(m)}t.abs=function(){return P(this)?k(this):this},t.add=function(I){const v=Math.max(this.g.length,I.g.length),E=[];let S=0;for(let A=0;A<=v;A++){let T=S+(this.i(A)&65535)+(I.i(A)&65535),g=(T>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);S=g>>>16,T&=65535,g&=65535,E[A]=g<<16|T}return new o(E,E[E.length-1]&-2147483648?-1:0)};function V(I,v){return I.add(k(v))}t.j=function(I){if(R(this)||R(I))return d;if(P(this))return P(I)?k(this).j(k(I)):k(k(this).j(I));if(P(I))return k(this.j(k(I)));if(this.l(_)<0&&I.l(_)<0)return u(this.m()*I.m());const v=this.g.length+I.g.length,E=[];for(var S=0;S<2*v;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<I.g.length;A++){const T=this.i(S)>>>16,g=this.i(S)&65535,F=I.i(A)>>>16,te=I.i(A)&65535;E[2*S+2*A]+=g*te,L(E,2*S+2*A),E[2*S+2*A+1]+=T*te,L(E,2*S+2*A+1),E[2*S+2*A+1]+=g*F,L(E,2*S+2*A+1),E[2*S+2*A+2]+=T*F,L(E,2*S+2*A+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new o(E,0)};function L(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function H(I,v){this.g=I,this.h=v}function G(I,v){if(R(v))throw Error("division by zero");if(R(I))return new H(d,d);if(P(I))return v=G(k(I),v),new H(k(v.g),k(v.h));if(P(v))return v=G(I,k(v)),new H(k(v.g),v.h);if(I.g.length>30){if(P(I)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,S=v;S.l(I)<=0;)E=Y(E),S=Y(S);var A=Z(E,1),T=Z(S,1);for(S=Z(S,2),E=Z(E,2);!R(S);){var g=T.add(S);g.l(I)<=0&&(A=A.add(E),T=g),S=Z(S,1),E=Z(E,1)}return v=V(I,A.j(v)),new H(A,v)}for(A=d;I.l(v)>=0;){for(E=Math.max(1,Math.floor(I.m()/v.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),T=u(E),g=T.j(v);P(g)||g.l(I)>0;)E-=S,T=u(E),g=T.j(v);R(T)&&(T=m),A=A.add(T),I=V(I,g)}return new H(A,I)}t.B=function(I){return G(this,I).h},t.and=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let S=0;S<v;S++)E[S]=this.i(S)&I.i(S);return new o(E,this.h&I.h)},t.or=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let S=0;S<v;S++)E[S]=this.i(S)|I.i(S);return new o(E,this.h|I.h)},t.xor=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let S=0;S<v;S++)E[S]=this.i(S)^I.i(S);return new o(E,this.h^I.h)};function Y(I){const v=I.g.length+1,E=[];for(let S=0;S<v;S++)E[S]=I.i(S)<<1|I.i(S-1)>>>31;return new o(E,I.h)}function Z(I,v){const E=v>>5;v%=32;const S=I.g.length-E,A=[];for(let T=0;T<S;T++)A[T]=v>0?I.i(T+E)>>>v|I.i(T+E+1)<<32-v:I.i(T+E);return new o(A,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Pr=o}).apply(typeof Em<"u"?Em:typeof self<"u"?self:typeof window<"u"?window:{});var Ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mv,Wi,Fv,xa,Qu,Bv,Uv,$v;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ea=="object"&&Ea];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,f){if(f)e:{var p=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var O=a[y];if(!(O in p))break e;p=p[O]}a=a[a.length-1],y=p[a],f=f(y),f!=y&&f!=null&&e(p,a,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(f){var p=[],y;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&p.push([y,f[y]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,p){return a.call.apply(a.bind,arguments)}function u(a,f,p){return u=c,u.apply(null,arguments)}function h(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function d(a,f){function p(){}p.prototype=f.prototype,a.Z=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(y,O,N){for(var J=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)J[Te-2]=arguments[Te];return f.prototype[O].apply(y,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const f=a.length;if(f>0){const p=Array(f);for(let y=0;y<f;y++)p[y]=a[y];return p}return[]}function R(a,f){for(let y=1;y<arguments.length;y++){const O=arguments[y];var p=typeof O;if(p=p!="object"?p:O?Array.isArray(O)?"array":p:"null",p=="array"||p=="object"&&typeof O.length=="number"){p=a.length||0;const N=O.length||0;a.length=p+N;for(let J=0;J<N;J++)a[p+J]=O[J]}else a.push(O)}}class P{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(a){o.setTimeout(()=>{throw a},0)}function V(){var a=I;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class L{constructor(){this.h=this.g=null}add(f,p){const y=H.get();y.set(f,p),this.h?this.h.next=y:this.g=y,this.h=y}}var H=new P(()=>new G,a=>a.reset());class G{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Z=!1,I=new L,v=()=>{const a=Promise.resolve(void 0);Y=()=>{a.then(E)}};function E(){for(var a;a=V();){try{a.h.call(a.g)}catch(p){k(p)}var f=H;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}Z=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,f),o.removeEventListener("test",p,f)}catch{}return a})();function g(a){return/^[\s\xa0]*$/.test(a)}function F(a,f){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}d(F,A),F.prototype.init=function(a,f){const p=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),le=0;function ae(a,f,p,y,O){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!y,this.ha=O,this.key=++le,this.da=this.fa=!1}function oe(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function fe(a,f,p){for(const y in a)f.call(p,a[y],y,a)}function we(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function be(a){const f={};for(const p in a)f[p]=a[p];return f}const Re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(a,f){let p,y;for(let O=1;O<arguments.length;O++){y=arguments[O];for(p in y)a[p]=y[p];for(let N=0;N<Re.length;N++)p=Re[N],Object.prototype.hasOwnProperty.call(y,p)&&(a[p]=y[p])}}function He(a){this.src=a,this.g={},this.h=0}He.prototype.add=function(a,f,p,y,O){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const J=Qe(a,f,y,O);return J>-1?(f=a[J],p||(f.fa=!1)):(f=new ae(f,this.src,N,!!y,O),f.fa=p,a.push(f)),f};function ht(a,f){const p=f.type;if(p in a.g){var y=a.g[p],O=Array.prototype.indexOf.call(y,f,void 0),N;(N=O>=0)&&Array.prototype.splice.call(y,O,1),N&&(oe(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Qe(a,f,p,y){for(let O=0;O<a.length;++O){const N=a[O];if(!N.da&&N.listener==f&&N.capture==!!p&&N.ha==y)return O}return-1}var M="closure_lm_"+(Math.random()*1e6|0),ee={};function X(a,f,p,y,O){if(Array.isArray(f)){for(let N=0;N<f.length;N++)X(a,f[N],p,y,O);return null}return p=K(p),a&&a[te]?a.J(f,p,l(y)?!!y.capture:!1,O):ne(a,f,p,!1,y,O)}function ne(a,f,p,y,O,N){if(!f)throw Error("Invalid event type");const J=l(O)?!!O.capture:!!O;let Te=B(a);if(Te||(a[M]=Te=new He(a)),p=Te.add(f,p,y,J,N),p.proxy)return p;if(y=Ee(),p.proxy=y,y.src=a,y.listener=p,a.addEventListener)T||(O=J),O===void 0&&(O=!1),a.addEventListener(f.toString(),y,O);else if(a.attachEvent)a.attachEvent(w(f.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ee(){function a(p){return f.call(a.src,a.listener,p)}const f=D;return a}function b(a,f,p,y,O){if(Array.isArray(f))for(var N=0;N<f.length;N++)b(a,f[N],p,y,O);else y=l(y)?!!y.capture:!!y,p=K(p),a&&a[te]?(a=a.i,N=String(f).toString(),N in a.g&&(f=a.g[N],p=Qe(f,p,y,O),p>-1&&(oe(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete a.g[N],a.h--)))):a&&(a=B(a))&&(f=a.g[f.toString()],a=-1,f&&(a=Qe(f,p,y,O)),(p=a>-1?f[a]:null)&&C(p))}function C(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[te])ht(f.i,a);else{var p=a.type,y=a.proxy;f.removeEventListener?f.removeEventListener(p,y,a.capture):f.detachEvent?f.detachEvent(w(p),y):f.addListener&&f.removeListener&&f.removeListener(y),(p=B(f))?(ht(p,a),p.h==0&&(p.src=null,f[M]=null)):oe(a)}}}function w(a){return a in ee?ee[a]:ee[a]="on"+a}function D(a,f){if(a.da)a=!0;else{f=new F(f,this);const p=a.listener,y=a.ha||a.src;a.fa&&C(a),a=p.call(y,f)}return a}function B(a){return a=a[M],a instanceof He?a:null}var x="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(a){return typeof a=="function"?a:(a[x]||(a[x]=function(f){return a.handleEvent(f)}),a[x])}function U(){S.call(this),this.i=new He(this),this.M=this,this.G=null}d(U,S),U.prototype[te]=!0,U.prototype.removeEventListener=function(a,f,p,y){b(this,a,f,p,y)};function j(a,f){var p,y=a.G;if(y)for(p=[];y;y=y.G)p.push(y);if(a=a.M,y=f.type||f,typeof f=="string")f=new A(f,a);else if(f instanceof A)f.target=f.target||a;else{var O=f;f=new A(y,a),st(f,O)}O=!0;let N,J;if(p)for(J=p.length-1;J>=0;J--)N=f.g=p[J],O=W(N,y,!0,f)&&O;if(N=f.g=a,O=W(N,y,!0,f)&&O,O=W(N,y,!1,f)&&O,p)for(J=0;J<p.length;J++)N=f.g=p[J],O=W(N,y,!1,f)&&O}U.prototype.N=function(){if(U.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const p=a.g[f];for(let y=0;y<p.length;y++)oe(p[y]);delete a.g[f],a.h--}}this.G=null},U.prototype.J=function(a,f,p,y){return this.i.add(String(a),f,!1,p,y)},U.prototype.K=function(a,f,p,y){return this.i.add(String(a),f,!0,p,y)};function W(a,f,p,y){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let N=0;N<f.length;++N){const J=f[N];if(J&&!J.da&&J.capture==p){const Te=J.listener,it=J.ha||J.src;J.fa&&ht(a.i,J),O=Te.call(it,y)!==!1&&O}}return O&&!y.defaultPrevented}function de(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function re(a){a.g=de(()=>{a.g=null,a.i&&(a.i=!1,re(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class he extends S{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(a){S.call(this),this.h=a,this.g={}}d(pe,S);var Ie=[];function Me(a){fe(a.g,function(f,p){this.g.hasOwnProperty(p)&&C(f)},a),a.g={}}pe.prototype.N=function(){pe.Z.N.call(this),Me(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=o.JSON.stringify,At=o.JSON.parse,Ct=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Qt(){}function Yt(){}var un={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ss(){A.call(this,"d")}d(Ss,A);function mt(){A.call(this,"c")}d(mt,A);var ft={},wi=null;function zr(){return wi=wi||new U}ft.Ia="serverreachability";function kf(a){A.call(this,ft.Ia,a)}d(kf,A);function Ii(a){const f=zr();j(f,new kf(f))}ft.STAT_EVENT="statevent";function Of(a,f){A.call(this,ft.STAT_EVENT,a),this.stat=f}d(Of,A);function Lt(a){const f=zr();j(f,new Of(f,a))}ft.Ja="timingevent";function Nf(a,f){A.call(this,ft.Ja,a),this.size=f}d(Nf,A);function Ai(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function Ci(){this.g=!0}Ci.prototype.ua=function(){this.g=!1};function pT(a,f,p,y,O,N){a.info(function(){if(a.g)if(N){var J="",Te=N.split("&");for(let Ue=0;Ue<Te.length;Ue++){var it=Te[Ue].split("=");if(it.length>1){const dt=it[0];it=it[1];const In=dt.split("_");J=In.length>=2&&In[1]=="type"?J+(dt+"="+it+"&"):J+(dt+"=redacted&")}}}else J=null;else J=N;return"XMLHTTP REQ ("+y+") [attempt "+O+"]: "+f+`
`+p+`
`+J})}function mT(a,f,p,y,O,N,J){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+O+"]: "+f+`
`+p+`
`+N+" "+J})}function Rs(a,f,p,y){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+_T(a,p)+(y?" "+y:"")})}function gT(a,f){a.info(function(){return"TIMEOUT: "+f})}Ci.prototype.info=function(){};function _T(a,f){if(!a.g)return f;if(!f)return null;try{const N=JSON.parse(f);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var p=N[a];if(!(p.length<2)){var y=p[1];if(Array.isArray(y)&&!(y.length<1)){var O=y[0];if(O!="noop"&&O!="stop"&&O!="close")for(let J=1;J<y.length;J++)y[J]=""}}}}return ke(N)}catch{return f}}var ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Df={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vf;function Ac(){}d(Ac,Qt),Ac.prototype.g=function(){return new XMLHttpRequest},Vf=new Ac;function Si(a){return encodeURIComponent(String(a))}function yT(a){var f=1;a=a.split(":");const p=[];for(;f>0&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function lr(a,f,p,y){this.j=a,this.i=f,this.l=p,this.S=y||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Lf}function Lf(){this.i=null,this.g="",this.h=!1}var xf={},Cc={};function Sc(a,f,p){a.M=1,a.A=na(wn(f)),a.u=p,a.R=!0,Mf(a,null)}function Mf(a,f){a.F=Date.now(),ta(a),a.B=wn(a.A);var p=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),Yf(p.i,"t",y),a.C=0,p=a.j.L,a.h=new Lf,a.g=pd(a.j,p?f:null,!a.u),a.P>0&&(a.O=new he(u(a.Y,a,a.g),a.P)),f=a.V,p=a.g,y=a.ba;var O="readystatechange";Array.isArray(O)||(O&&(Ie[0]=O.toString()),O=Ie);for(let N=0;N<O.length;N++){const J=X(p,O[N],y||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=a.J?be(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),Ii(),pT(a.i,a.v,a.B,a.l,a.S,a.u)}lr.prototype.ba=function(a){a=a.target;const f=this.O;f&&hr(a)==3?f.j():this.Y(a)},lr.prototype.Y=function(a){try{if(a==this.g)e:{const Te=hr(this.g),it=this.g.ya(),Ue=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||rd(this.g)))){this.K||Te!=4||it==7||(it==8||Ue<=0?Ii(3):Ii(2)),Rc(this);var f=this.g.ca();this.X=f;var p=vT(this);if(this.o=f==200,mT(this.i,this.v,this.B,this.l,this.S,Te,f),this.o){if(this.U&&!this.L){t:{if(this.g){var y,O=this.g;if((y=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(y)){var N=y;break t}}N=null}if(a=N)Rs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pc(this,a);else{this.o=!1,this.m=3,Lt(12),Kr(this),Ri(this);break e}}if(this.R){a=!0;let dt;for(;!this.K&&this.C<p.length;)if(dt=ET(this,p),dt==Cc){Te==4&&(this.m=4,Lt(14),a=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==xf){this.m=4,Lt(15),Rs(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else Rs(this.i,this.l,dt,null),Pc(this,dt);if(Ff(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||p.length!=0||this.h.h||(this.m=1,Lt(16),a=!1),this.o=this.o&&a,!a)Rs(this.i,this.l,p,"[Invalid Chunked Response]"),Kr(this),Ri(this);else if(p.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Mc(J),J.P=!0,Lt(11))}}else Rs(this.i,this.l,p,null),Pc(this,p);Te==4&&Kr(this),this.o&&!this.K&&(Te==4?ud(this.j,this):(this.o=!1,ta(this)))}else VT(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),Kr(this),Ri(this)}}}catch{}finally{}};function vT(a){if(!Ff(a))return a.g.la();const f=rd(a.g);if(f==="")return"";let p="";const y=f.length,O=hr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Kr(a),Ri(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<y;N++)a.h.h=!0,p+=a.h.i.decode(f[N],{stream:!(O&&N==y-1)});return f.length=0,a.h.g+=p,a.C=0,a.h.g}function Ff(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function ET(a,f){var p=a.C,y=f.indexOf(`
`,p);return y==-1?Cc:(p=Number(f.substring(p,y)),isNaN(p)?xf:(y+=1,y+p>f.length?Cc:(f=f.slice(y,y+p),a.C=y+p,f)))}lr.prototype.cancel=function(){this.K=!0,Kr(this)};function ta(a){a.T=Date.now()+a.H,Bf(a,a.H)}function Bf(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ai(u(a.aa,a),f)}function Rc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}lr.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(gT(this.i,this.B),this.M!=2&&(Ii(),Lt(17)),Kr(this),this.m=2,Ri(this)):Bf(this,this.T-a)};function Ri(a){a.j.I==0||a.K||ud(a.j,a)}function Kr(a){Rc(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Me(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function Pc(a,f){try{var p=a.j;if(p.I!=0&&(p.g==a||kc(p.h,a))){if(!a.L&&kc(p.h,a)&&p.I==3){try{var y=p.Ba.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var O=y;if(O[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)aa(p),ia(p);else break e;xc(p),Lt(18)}}else p.xa=O[1],0<p.xa-p.K&&O[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Ai(u(p.Va,p),6e3));jf(p.h)<=1&&p.ta&&(p.ta=void 0)}else Yr(p,11)}else if((a.L||p.g==a)&&aa(p),!g(f))for(O=p.Ba.g.parse(f),f=0;f<O.length;f++){let Ue=O[f];const dt=Ue[0];if(!(dt<=p.K))if(p.K=dt,Ue=Ue[1],p.I==2)if(Ue[0]=="c"){p.M=Ue[1],p.ba=Ue[2];const In=Ue[3];In!=null&&(p.ka=In,p.j.info("VER="+p.ka));const Jr=Ue[4];Jr!=null&&(p.za=Jr,p.j.info("SVER="+p.za));const fr=Ue[5];fr!=null&&typeof fr=="number"&&fr>0&&(y=1.5*fr,p.O=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const dr=a.g;if(dr){const ca=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ca){var N=y.h;N.g||ca.indexOf("spdy")==-1&&ca.indexOf("quic")==-1&&ca.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Oc(N,N.h),N.h=null))}if(y.G){const Fc=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Fc&&(y.wa=Fc,Ge(y.J,y.G,Fc))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),y=p;var J=a;if(y.na=dd(y,y.L?y.ba:null,y.W),J.L){qf(y.h,J);var Te=J,it=y.O;it&&(Te.H=it),Te.D&&(Rc(Te),ta(Te)),y.g=J}else ld(y);p.i.length>0&&oa(p)}else Ue[0]!="stop"&&Ue[0]!="close"||Yr(p,7);else p.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Yr(p,7):Lc(p):Ue[0]!="noop"&&p.l&&p.l.qa(Ue),p.A=0)}}Ii(4)}catch{}}var TT=class{constructor(a,f){this.g=a,this.map=f}};function Uf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $f(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jf(a){return a.h?1:a.g?a.g.size:0}function kc(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Oc(a,f){a.g?a.g.add(f):a.h=f}function qf(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}Uf.prototype.cancel=function(){if(this.i=Hf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Hf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.G);return f}return _(a.i)}var Gf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bT(a,f){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const y=a[p].indexOf("=");let O,N=null;y>=0?(O=a[p].substring(0,y),N=a[p].substring(y+1)):O=a[p],f(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function cr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof cr?(this.l=a.l,Pi(this,a.j),this.o=a.o,this.g=a.g,ki(this,a.u),this.h=a.h,Nc(this,Jf(a.i)),this.m=a.m):a&&(f=String(a).match(Gf))?(this.l=!1,Pi(this,f[1]||"",!0),this.o=Oi(f[2]||""),this.g=Oi(f[3]||"",!0),ki(this,f[4]),this.h=Oi(f[5]||"",!0),Nc(this,f[6]||"",!0),this.m=Oi(f[7]||"")):(this.l=!1,this.i=new Di(null,this.l))}cr.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(Ni(f,Wf,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Ni(f,Wf,!0),"@"),a.push(Si(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Ni(p,p.charAt(0)=="/"?AT:IT,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Ni(p,ST)),a.join("")},cr.prototype.resolve=function(a){const f=wn(this);let p=!!a.j;p?Pi(f,a.j):p=!!a.o,p?f.o=a.o:p=!!a.g,p?f.g=a.g:p=a.u!=null;var y=a.h;if(p)ki(f,a.u);else if(p=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var O=f.h.lastIndexOf("/");O!=-1&&(y=f.h.slice(0,O+1)+y)}if(O=y,O==".."||O==".")y="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){y=O.lastIndexOf("/",0)==0,O=O.split("/");const N=[];for(let J=0;J<O.length;){const Te=O[J++];Te=="."?y&&J==O.length&&N.push(""):Te==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),y&&J==O.length&&N.push("")):(N.push(Te),y=!0)}y=N.join("/")}else y=O}return p?f.h=y:p=a.i.toString()!=="",p?Nc(f,Jf(a.i)):p=!!a.m,p&&(f.m=a.m),f};function wn(a){return new cr(a)}function Pi(a,f,p){a.j=p?Oi(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function ki(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function Nc(a,f,p){f instanceof Di?(a.i=f,RT(a.i,a.l)):(p||(f=Ni(f,CT)),a.i=new Di(f,a.l))}function Ge(a,f,p){a.i.set(f,p)}function na(a){return Ge(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Oi(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ni(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,wT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function wT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Wf=/[#\/\?@]/g,IT=/[#\?:]/g,AT=/[#\?]/g,CT=/[#\?@]/g,ST=/#/g;function Di(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Qr(a){a.g||(a.g=new Map,a.h=0,a.i&&bT(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Di.prototype,t.add=function(a,f){Qr(this),this.i=null,a=Ps(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function zf(a,f){Qr(a),f=Ps(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Kf(a,f){return Qr(a),f=Ps(a,f),a.g.has(f)}t.forEach=function(a,f){Qr(this),this.g.forEach(function(p,y){p.forEach(function(O){a.call(f,O,y,this)},this)},this)};function Qf(a,f){Qr(a);let p=[];if(typeof f=="string")Kf(a,f)&&(p=p.concat(a.g.get(Ps(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)p=p.concat(a[f]);return p}t.set=function(a,f){return Qr(this),this.i=null,a=Ps(this,a),Kf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=Qf(this,a),a.length>0?String(a[0]):f):f};function Yf(a,f,p){zf(a,f),p.length>0&&(a.i=null,a.g.set(Ps(a,f),_(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let y=0;y<f.length;y++){var p=f[y];const O=Si(p);p=Qf(this,p);for(let N=0;N<p.length;N++){let J=O;p[N]!==""&&(J+="="+Si(p[N])),a.push(J)}}return this.i=a.join("&")};function Jf(a){const f=new Di;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function Ps(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function RT(a,f){f&&!a.j&&(Qr(a),a.i=null,a.g.forEach(function(p,y){const O=y.toLowerCase();y!=O&&(zf(this,y),Yf(this,O,p))},a)),a.j=f}function PT(a,f){const p=new Ci;if(o.Image){const y=new Image;y.onload=h(ur,p,"TestLoadImage: loaded",!0,f,y),y.onerror=h(ur,p,"TestLoadImage: error",!1,f,y),y.onabort=h(ur,p,"TestLoadImage: abort",!1,f,y),y.ontimeout=h(ur,p,"TestLoadImage: timeout",!1,f,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else f(!1)}function kT(a,f){const p=new Ci,y=new AbortController,O=setTimeout(()=>{y.abort(),ur(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:y.signal}).then(N=>{clearTimeout(O),N.ok?ur(p,"TestPingServer: ok",!0,f):ur(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),ur(p,"TestPingServer: error",!1,f)})}function ur(a,f,p,y,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),y(p)}catch{}}function OT(){this.g=new Ct}function Dc(a){this.i=a.Sb||null,this.h=a.ab||!1}d(Dc,Qt),Dc.prototype.g=function(){return new ra(this.i,this.h)};function ra(a,f){U.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ra,U),t=ra.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,Li(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Vi(this):Li(this),this.readyState==3&&Xf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Vi(this))},t.Na=function(a){this.g&&(this.response=a,Vi(this))},t.ga=function(){this.g&&Vi(this)};function Vi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Li(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function Li(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Zf(a){let f="";return fe(a,function(p,y){f+=y,f+=":",f+=p,f+=`\r
`}),f}function Vc(a,f,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Zf(p),typeof a=="string"?p!=null&&Si(p):Ge(a,f,p))}function Je(a){U.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Je,U);var NT=/^https?$/i,DT=["POST","PUT"];t=Je.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vf.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(N){ed(this,N);return}if(a=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var O in y)p.set(O,y[O]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const N of y.keys())p.set(N,y.get(N));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),O=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(DT,f,void 0)>=0)||y||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,J]of p)this.g.setRequestHeader(N,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){ed(this,N)}};function ed(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,td(a),sa(a)}function td(a){a.A||(a.A=!0,j(a,"complete"),j(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,j(this,"complete"),j(this,"abort"),sa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sa(this,!0)),Je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?nd(this):this.Xa())},t.Xa=function(){nd(this)};function nd(a){if(a.h&&typeof i<"u"){if(a.v&&hr(a)==4)setTimeout(a.Ca.bind(a),0);else if(j(a,"readystatechange"),hr(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var y;if(y=N===0){let J=String(a.D).match(Gf)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),y=!NT.test(J?J.toLowerCase():"")}p=y}if(p)j(a,"complete"),j(a,"success");else{a.o=6;try{var O=hr(a)>2?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.ca()+"]",td(a)}}finally{sa(a)}}}}function sa(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,f||j(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function hr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return hr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),At(f)}};function rd(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function VT(a){const f={};a=(a.g&&hr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(g(a[y]))continue;var p=yT(a[y]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const N=f[O]||[];f[O]=N,N.push(p)}we(f,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function sd(a){this.za=0,this.i=[],this.j=new Ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,a),this.Za=xi("retryDelaySeedMs",1e4,a),this.Ta=xi("forwardChannelMaxRetries",2,a),this.va=xi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Uf(a&&a.concurrentRequestLimit),this.Ba=new OT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=sd.prototype,t.ka=8,t.I=1,t.connect=function(a,f,p,y){Lt(0),this.W=a,this.H=f||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.J=dd(this,null,this.W),oa(this)};function Lc(a){if(id(a),a.I==3){var f=a.V++,p=wn(a.J);if(Ge(p,"SID",a.M),Ge(p,"RID",f),Ge(p,"TYPE","terminate"),Mi(a,p),f=new lr(a,a.j,f),f.M=2,f.A=na(wn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=f.A,p=!0),p||(f.g=pd(f.j,null),f.g.ea(f.A)),f.F=Date.now(),ta(f)}fd(a)}function ia(a){a.g&&(Mc(a),a.g.cancel(),a.g=null)}function id(a){ia(a),a.v&&(o.clearTimeout(a.v),a.v=null),aa(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function oa(a){if(!$f(a.h)&&!a.m){a.m=!0;var f=a.Ea;Y||v(),Z||(Y(),Z=!0),I.add(f,a),a.D=0}}function LT(a,f){return jf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ai(u(a.Ea,a,f),hd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const O=new lr(this,this.j,a);let N=this.o;if(this.U&&(N?(N=be(N),st(N,this.U)):N=this.U),this.u!==null||this.R||(O.J=N,N=null),this.S)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,f>4096){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=ad(this,O,f),p=wn(this.J),Ge(p,"RID",a),Ge(p,"CVER",22),this.G&&Ge(p,"X-HTTP-Session-Id",this.G),Mi(this,p),N&&(this.R?f="headers="+Si(Zf(N))+"&"+f:this.u&&Vc(p,this.u,N)),Oc(this.h,O),this.Ra&&Ge(p,"TYPE","init"),this.S?(Ge(p,"$req",f),Ge(p,"SID","null"),O.U=!0,Sc(O,p,null)):Sc(O,p,f),this.I=2}}else this.I==3&&(a?od(this,a):this.i.length==0||$f(this.h)||od(this))};function od(a,f){var p;f?p=f.l:p=a.V++;const y=wn(a.J);Ge(y,"SID",a.M),Ge(y,"RID",p),Ge(y,"AID",a.K),Mi(a,y),a.u&&a.o&&Vc(y,a.u,a.o),p=new lr(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),f&&(a.i=f.G.concat(a.i)),f=ad(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Oc(a.h,p),Sc(p,y,f)}function Mi(a,f){a.H&&fe(a.H,function(p,y){Ge(f,y,p)}),a.l&&fe({},function(p,y){Ge(f,y,p)})}function ad(a,f,p){p=Math.min(a.i.length,p);const y=a.l?u(a.l.Ka,a.l,a):null;e:{var O=a.i;let Te=-1;for(;;){const it=["count="+p];Te==-1?p>0?(Te=O[0].g,it.push("ofs="+Te)):Te=0:it.push("ofs="+Te);let Ue=!0;for(let dt=0;dt<p;dt++){var N=O[dt].g;const In=O[dt].map;if(N-=Te,N<0)Te=Math.max(0,O[dt].g-100),Ue=!1;else try{N="req"+N+"_"||"";try{var J=In instanceof Map?In:Object.entries(In);for(const[Jr,fr]of J){let dr=fr;l(fr)&&(dr=ke(fr)),it.push(N+Jr+"="+encodeURIComponent(dr))}}catch(Jr){throw it.push(N+"type="+encodeURIComponent("_badmap")),Jr}}catch{y&&y(In)}}if(Ue){J=it.join("&");break e}}J=void 0}return a=a.i.splice(0,p),f.G=a,J}function ld(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;Y||v(),Z||(Y(),Z=!0),I.add(f,a),a.A=0}}function xc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ai(u(a.Da,a),hd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,cd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ai(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),ia(this),cd(this))};function Mc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function cd(a){a.g=new lr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=wn(a.na);Ge(f,"RID","rpc"),Ge(f,"SID",a.M),Ge(f,"AID",a.K),Ge(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ge(f,"TO",a.ia),Ge(f,"TYPE","xmlhttp"),Mi(a,f),a.u&&a.o&&Vc(f,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=na(wn(f)),p.u=null,p.R=!0,Mf(p,a)}t.Va=function(){this.C!=null&&(this.C=null,ia(this),xc(this),Lt(19))};function aa(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function ud(a,f){var p=null;if(a.g==f){aa(a),Mc(a),a.g=null;var y=2}else if(kc(a.h,f))p=f.G,qf(a.h,f),y=1;else return;if(a.I!=0){if(f.o)if(y==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var O=a.D;y=zr(),j(y,new Nf(y,p)),oa(a)}else ld(a);else if(O=f.m,O==3||O==0&&f.X>0||!(y==1&&LT(a,f)||y==2&&xc(a)))switch(p&&p.length>0&&(f=a.h,f.i=f.i.concat(p)),O){case 1:Yr(a,5);break;case 4:Yr(a,10);break;case 3:Yr(a,6);break;default:Yr(a,2)}}}function hd(a,f){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*f}function Yr(a,f){if(a.j.info("Error code "+f),f==2){var p=u(a.bb,a),y=a.Ua;const O=!y;y=new cr(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Pi(y,"https"),na(y),O?PT(y.toString(),p):kT(y.toString(),p)}else Lt(2);a.I=0,a.l&&a.l.pa(f),fd(a),id(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function fd(a){if(a.I=0,a.ja=[],a.l){const f=Hf(a.h);(f.length!=0||a.i.length!=0)&&(R(a.ja,f),R(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function dd(a,f,p){var y=p instanceof cr?wn(p):new cr(p);if(y.g!="")f&&(y.g=f+"."+y.g),ki(y,y.u);else{var O=o.location;y=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const N=new cr(null);y&&Pi(N,y),f&&(N.g=f),O&&ki(N,O),p&&(N.h=p),y=N}return p=a.G,f=a.wa,p&&f&&Ge(y,p,f),Ge(y,"VER",a.ka),Mi(a,y),y}function pd(a,f,p){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Je(new Dc({ab:p})):new Je(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function md(){}t=md.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function la(){}la.prototype.g=function(a,f){return new Jt(a,f)};function Jt(a,f){U.call(this),this.g=new sd(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!g(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!g(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new ks(this)}d(Jt,U),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Lc(this.g)},Jt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=ke(a),a=p);f.i.push(new TT(f.Ya++,a)),f.I==3&&oa(f)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Lc(this.g),delete this.g,Jt.Z.N.call(this)};function gd(a){Ss.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const p in f){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}d(gd,Ss);function _d(){mt.call(this),this.status=1}d(_d,mt);function ks(a){this.g=a}d(ks,md),ks.prototype.ra=function(){j(this.g,"a")},ks.prototype.qa=function(a){j(this.g,new gd(a))},ks.prototype.pa=function(a){j(this.g,new _d)},ks.prototype.oa=function(){j(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,$v=function(){return new la},Uv=function(){return zr()},Bv=ft,Qu={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,xa=ea,Df.COMPLETE="complete",Fv=Df,Yt.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",U.prototype.listen=U.prototype.J,Wi=Yt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,Mv=Je}).apply(typeof Ea<"u"?Ea:typeof self<"u"?self:typeof window<"u"?window:{});const Tm="@firebase/firestore",bm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Vh("@firebase/firestore");function Bs(){return Ts.logLevel}function ie(t,...e){if(Ts.logLevel<=Ae.DEBUG){const n=e.map(Gh);Ts.debug(`Firestore (${vi}): ${t}`,...n)}}function rr(t,...e){if(Ts.logLevel<=Ae.ERROR){const n=e.map(Gh);Ts.error(`Firestore (${vi}): ${t}`,...n)}}function ii(t,...e){if(Ts.logLevel<=Ae.WARN){const n=e.map(Gh);Ts.warn(`Firestore (${vi}): ${t}`,...n)}}function Gh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,jv(t,r,n)}function jv(t,e,n){let r=`FIRESTORE (${vi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw rr(r),new Error(r)}function xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||jv(e,s,r)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Pt.UNAUTHENTICATED)))}shutdown(){}}class e1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class t1{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jn,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jn)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new qv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new Pt(e)}}class n1{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class r1{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new n1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Pt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,on(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=i=>{i.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wm(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=i1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function Yu(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return pu(s)===pu(i)?Ce(s,i):pu(s)?1:-1}return Ce(t.length,e.length)}const o1=55296,a1=57343;function pu(t){const e=t.charCodeAt(0);return e>=o1&&e<=a1}function oi(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="__name__";class Sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Sn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const r=Sn.isNumericId(e),s=Sn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Sn.extractNumericId(e).compare(Sn.extractNumericId(n)):Yu(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}}class qe extends Sn{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new qe(n)}static emptyPath(){return new qe([])}}const l1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Sn{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return l1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Im}static keyField(){return new Tt([Im])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new se($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new se($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(qe.fromString(e))}static fromName(e){return new ue(qe.fromString(e).popFirst(5))}static empty(){return new ue(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e,n){if(!n)throw new se($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function c1(t,e,n,r){if(e===!0&&r===!0)throw new se($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Am(t){if(!ue.isDocumentKey(t))throw new se($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cm(t){if(ue.isDocumentKey(t))throw new se($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function rc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rc(t);throw new se($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function zo(t,e){if(!Gv(t))throw new se($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new se($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-62135596800,Rm=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Rm);return new We(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Sm)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rm}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zo(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:rt("string",We._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new We(0,0))}static max(){return new ye(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=-1;function u1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Dr(s,ue.empty(),e)}function h1(t){return new Dr(t.readTime,t.key,Po)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(ye.min(),ue.empty(),Po)}static max(){return new Dr(ye.max(),ue.empty(),Po)}}function f1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==d1)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):q.reject(n)}static resolve(e){return new q(((n,r)=>{n(e)}))}static reject(e){return new q(((n,r)=>{r(e)}))}static waitFor(e){return new q(((n,r)=>{let s=0,i=0,o=!1;e.forEach((l=>{++s,l.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next((s=>s?q.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new q(((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next((h=>{o[u]=h,++l,l===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new q(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function m1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ti(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=-1;function ic(t){return t==null}function _l(t){return t===0&&1/t==-1/0}function g1(t){return typeof t=="number"&&Number.isInteger(t)&&!_l(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="";function _1(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Pm(e)),e=y1(t.get(n),e);return Pm(e)}function y1(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Wv:n+="";break;default:n+=i}}return n}function Pm(t){return t+Wv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ta(this.root,e,this.comparator,!0)}}class Ta{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_t.RED,this.left=s??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Om(this.data.getIterator())}getIteratorFrom(e){return new Om(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class Om{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new tn([])}unionWith(e){let n=new lt(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Kv("Invalid base64 string: "+i):i}})(e);return new It(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const v1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=v1.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="server_timestamp",Yv="__type__",Jv="__previous_value__",Xv="__local_write_time__";function Kh(t){return(t?.mapValue?.fields||{})[Yv]?.stringValue===Qv}function oc(t){const e=t.mapValue.fields[Jv];return Kh(e)?oc(e):e}function ko(t){const e=Vr(t.mapValue.fields[Xv].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const yl="(default)";class Oo{constructor(e,n){this.projectId=e,this.database=n||yl}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database===yl}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="__type__",T1="__max__",ba={mapValue:{}},eE="__vector__",vl="value";function xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kh(t)?4:w1(t)?9007199254740991:b1(t)?10:11:ge(28295,{value:t})}function Mn(t,e){if(t===e)return!0;const n=xr(t);if(n!==xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ko(t).isEqual(ko(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Vr(s.timestampValue),l=Vr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Lr(s.bytesValue).isEqual(Lr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ze(s.geoPointValue.latitude)===Ze(i.geoPointValue.latitude)&&Ze(s.geoPointValue.longitude)===Ze(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ze(s.integerValue)===Ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ze(s.doubleValue),l=Ze(i.doubleValue);return o===l?_l(o)===_l(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return oi(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(km(o)!==km(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Mn(o[c],l[c])))return!1;return!0})(t,e);default:return ge(52216,{left:t})}}function No(t,e){return(t.values||[]).find((n=>Mn(n,e)))!==void 0}function ai(t,e){if(t===e)return 0;const n=xr(t),r=xr(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=Ze(i.integerValue||i.doubleValue),c=Ze(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return Nm(t.timestampValue,e.timestampValue);case 4:return Nm(ko(t),ko(e));case 5:return Yu(t.stringValue,e.stringValue);case 6:return(function(i,o){const l=Lr(i),c=Lr(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ce(l[u],c[u]);if(h!==0)return h}return Ce(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Ce(Ze(i.latitude),Ze(o.latitude));return l!==0?l:Ce(Ze(i.longitude),Ze(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Dm(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const l=i.fields||{},c=o.fields||{},u=l[vl]?.arrayValue,h=c[vl]?.arrayValue,d=Ce(u?.values?.length||0,h?.values?.length||0);return d!==0?d:Dm(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===ba.mapValue&&o===ba.mapValue)return 0;if(i===ba.mapValue)return 1;if(o===ba.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const m=Yu(c[d],h[d]);if(m!==0)return m;const _=ai(l[c[d]],u[h[d]]);if(_!==0)return _}return Ce(c.length,h.length)})(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function Nm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Vr(t),r=Vr(e),s=Ce(n.seconds,r.seconds);return s!==0?s:Ce(n.nanos,r.nanos)}function Dm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ai(n[s],r[s]);if(i)return i}return Ce(n.length,r.length)}function li(t){return Ju(t)}function Ju(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Vr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Lr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ue.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ju(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ju(n.fields[o])}`;return s+"}"})(t.mapValue):ge(61005,{value:t})}function Ma(t){switch(xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oc(t);return e?16+Ma(e):16;case 5:return 2*t.stringValue.length;case 6:return Lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Ma(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Hr(r.fields,((i,o)=>{s+=i.length+Ma(o)})),s})(t.mapValue);default:throw ge(13486,{value:t})}}function Vm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xu(t){return!!t&&"integerValue"in t}function Qh(t){return!!t&&"arrayValue"in t}function Lm(t){return!!t&&"nullValue"in t}function xm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fa(t){return!!t&&"mapValue"in t}function b1(t){return(t?.mapValue?.fields||{})[Zv]?.stringValue===eE}function ho(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ho(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ho(t.arrayValue.values[n]);return e}return{...t}}function w1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===T1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ho(n)}setAll(e){let n=Tt.emptyPath(),r={},s=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ho(o):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Gt(ho(this.value))}}function tE(t){const e=[];return Hr(t.fields,((n,r)=>{const s=new Tt([n]);if(Fa(r)){const i=tE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ot(e,0,ye.min(),ye.min(),ye.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ot(e,1,n,ye.min(),r,s,0)}static newNoDocument(e,n){return new Ot(e,2,n,ye.min(),ye.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,ye.min(),ye.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.position=e,this.inclusive=n}}function Mm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),n.key):r=ai(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n="asc"){this.field=e,this.dir=n}}function I1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{}class nt extends nE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C1(e,n,r):n==="array-contains"?new P1(e,r):n==="in"?new k1(e,r):n==="not-in"?new O1(e,r):n==="array-contains-any"?new N1(e,r):new nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new S1(e,r):new R1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ai(n,this.value)):n!==null&&xr(this.value)===xr(n)&&this.matchesComparison(ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends nE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new En(e,n)}matches(e){return rE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rE(t){return t.op==="and"}function sE(t){return A1(t)&&rE(t)}function A1(t){for(const e of t.filters)if(e instanceof En)return!1;return!0}function Zu(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+li(t.value);if(sE(t))return t.filters.map((e=>Zu(e))).join(",");{const e=t.filters.map((n=>Zu(n))).join(",");return`${t.op}(${e})`}}function iE(t,e){return t instanceof nt?(function(r,s){return s instanceof nt&&r.op===s.op&&r.field.isEqual(s.field)&&Mn(r.value,s.value)})(t,e):t instanceof En?(function(r,s){return s instanceof En&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,l)=>i&&iE(o,s.filters[l])),!0):!1})(t,e):void ge(19439)}function oE(t){return t instanceof nt?(function(n){return`${n.field.canonicalString()} ${n.op} ${li(n.value)}`})(t):t instanceof En?(function(n){return n.op.toString()+" {"+n.getFilters().map(oE).join(" ,")+"}"})(t):"Filter"}class C1 extends nt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class S1 extends nt{constructor(e,n){super(e,"in",n),this.keys=aE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class R1 extends nt{constructor(e,n){super(e,"not-in",n),this.keys=aE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function aE(t,e){return(e.arrayValue?.values||[]).map((n=>ue.fromName(n.referenceValue)))}class P1 extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qh(n)&&No(n.arrayValue,this.value)}}class k1 extends nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&No(this.value.arrayValue,n)}}class O1 extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(No(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!No(this.value.arrayValue,n)}}class N1 extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>No(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Bm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new D1(t,e,n,r,s,i,o)}function Yh(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Zu(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),ic(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>li(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>li(r))).join(",")),e.Te=n}return e.Te}function Jh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fm(t.startAt,e.startAt)&&Fm(t.endAt,e.endAt)}function eh(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function V1(t,e,n,r,s,i,o,l){return new Ko(t,e,n,r,s,i,o,l)}function ac(t){return new Ko(t)}function Um(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lE(t){return t.collectionGroup!==null}function fo(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new lt(Tt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(l=l.add(u.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Tl(i,r))})),n.has(Tt.keyField().canonicalString())||e.Ie.push(new Tl(Tt.keyField(),r))}return e.Ie}function Dn(t){const e=ve(t);return e.Ee||(e.Ee=L1(e,fo(t))),e.Ee}function L1(t,e){if(t.limitType==="F")return Bm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Tl(s.field,i)}));const n=t.endAt?new El(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new El(t.startAt.position,t.startAt.inclusive):null;return Bm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function th(t,e){const n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bl(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lc(t,e){return Jh(Dn(t),Dn(e))&&t.limitType===e.limitType}function cE(t){return`${Yh(Dn(t))}|lt:${t.limitType}`}function Us(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>oE(s))).join(", ")}]`),ic(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>li(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>li(s))).join(",")),`Target(${r})`})(Dn(t))}; limitType=${t.limitType})`}function cc(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ue.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of fo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,l,c){const u=Mm(o,l,c);return o.inclusive?u<=0:u<0})(r.startAt,fo(r),s)||r.endAt&&!(function(o,l,c){const u=Mm(o,l,c);return o.inclusive?u>=0:u>0})(r.endAt,fo(r),s))})(t,e)}function x1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uE(t){return(e,n)=>{let r=!1;for(const s of fo(t)){const i=M1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function M1(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):(function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ai(c,u):ge(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return zv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=new Ye(ue.comparator);function sr(){return F1}const hE=new Ye(ue.comparator);function zi(...t){let e=hE;for(const n of t)e=e.insert(n.key,n);return e}function fE(t){let e=hE;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function cs(){return po()}function dE(){return po()}function po(){return new As((t=>t.toString()),((t,e)=>t.isEqual(e)))}const B1=new Ye(ue.comparator),U1=new lt(ue.comparator);function Se(...t){let e=U1;for(const n of t)e=e.add(n);return e}const $1=new lt(Ce);function j1(){return $1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_l(e)?"-0":e}}function pE(t){return{integerValue:""+t}}function q1(t,e){return g1(e)?pE(e):Xh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this._=void 0}}function H1(t,e,n){return t instanceof Do?(function(s,i){const o={fields:{[Yv]:{stringValue:Qv},[Xv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Kh(i)&&(i=oc(i)),i&&(o.fields[Jv]=i),{mapValue:o}})(n,e):t instanceof Vo?gE(t,e):t instanceof Lo?_E(t,e):(function(s,i){const o=mE(s,i),l=$m(o)+$m(s.Ae);return Xu(o)&&Xu(s.Ae)?pE(l):Xh(s.serializer,l)})(t,e)}function G1(t,e,n){return t instanceof Vo?gE(t,e):t instanceof Lo?_E(t,e):n}function mE(t,e){return t instanceof wl?(function(r){return Xu(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Do extends uc{}class Vo extends uc{constructor(e){super(),this.elements=e}}function gE(t,e){const n=yE(e);for(const r of t.elements)n.some((s=>Mn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Lo extends uc{constructor(e){super(),this.elements=e}}function _E(t,e){let n=yE(e);for(const r of t.elements)n=n.filter((s=>!Mn(s,r)));return{arrayValue:{values:n}}}class wl extends uc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $m(t){return Ze(t.integerValue||t.doubleValue)}function yE(t){return Qh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.field=e,this.transform=n}}function z1(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Vo&&s instanceof Vo||r instanceof Lo&&s instanceof Lo?oi(r.elements,s.elements,Mn):r instanceof wl&&s instanceof wl?Mn(r.Ae,s.Ae):r instanceof Do&&s instanceof Do})(t.transform,e.transform)}class K1{constructor(e,n){this.version=e,this.transformResults=n}}class cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ba(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hc{}function vE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zh(t.key,cn.none()):new Qo(t.key,t.data,cn.none());{const n=t.data,r=Gt.empty();let s=new lt(Tt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gr(t.key,r,new tn(s.toArray()),cn.none())}}function Q1(t,e,n){t instanceof Qo?(function(s,i,o){const l=s.value.clone(),c=qm(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof Gr?(function(s,i,o){if(!Ba(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=qm(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(EE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function mo(t,e,n,r){return t instanceof Qo?(function(i,o,l,c){if(!Ba(i.precondition,o))return l;const u=i.value.clone(),h=Hm(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Gr?(function(i,o,l,c){if(!Ba(i.precondition,o))return l;const u=Hm(i.fieldTransforms,c,o),h=o.data;return h.setAll(EE(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,l){return Ba(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function Y1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=mE(r.transform,s||null);i!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,i))}return n||null}function jm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oi(r,s,((i,o)=>z1(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qo extends hc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gr extends hc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function EE(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function qm(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,G1(o,l,n[s]))}return r}function Hm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,H1(i,o,e))}return r}class Zh extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J1 extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Q1(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dE();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=vE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ye.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Se())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,((n,r)=>jm(n,r)))&&oi(this.baseMutations,e.baseMutations,((n,r)=>jm(n,r)))}}class ef{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return B1})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ef(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,Pe;function tO(t){switch(t){case $.OK:return ge(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function TE(t){if(t===void 0)return rr("GRPC error has no .code"),$.UNKNOWN;switch(t){case tt.OK:return $.OK;case tt.CANCELLED:return $.CANCELLED;case tt.UNKNOWN:return $.UNKNOWN;case tt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case tt.INTERNAL:return $.INTERNAL;case tt.UNAVAILABLE:return $.UNAVAILABLE;case tt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case tt.NOT_FOUND:return $.NOT_FOUND;case tt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case tt.ABORTED:return $.ABORTED;case tt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case tt.DATA_LOSS:return $.DATA_LOSS;default:return ge(39323,{code:t})}}(Pe=tt||(tt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new Pr([4294967295,4294967295],0);function Gm(t){const e=nO().encode(t),n=new xv;return n.update(e),new Uint8Array(n.digest())}function Wm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([s,i],0)]}class tf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ki(`Invalid padding: ${n}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Pr.fromNumber(r)));return s.compare(rO)===1&&(s=new Pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Gm(e),[r,s]=Wm(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new tf(i,s,n);return r.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=Gm(e),[r,s]=Wm(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ki extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Yo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fc(ye.min(),s,new Ye(Ce),sr(),Se())}}class Yo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yo(r,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class bE{constructor(e,n){this.targetId=e,this.Ce=n}}class wE{constructor(e,n,r=It.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zm{constructor(){this.ve=0,this.Fe=Km(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Se(),n=Se(),r=Se();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge(38017,{changeType:i})}})),new Yo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Km()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sO{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=wa(),this.He=wa(),this.Ye=new Ye(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(eh(i))if(r===0){const o=new ue(i.path);this.et(n,o,Ot.newNoDocument(o,ye.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Lr(r).toUint8Array()}catch(c){if(c instanceof Kv)return ii("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new tf(o,s,i)}catch(c){return ii(c instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&eh(l.target)){const c=new ue(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ot.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Se();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new fc(e,n,this.Ye,this.je,r);return this.je=sr(),this.Je=wa(),this.He=wa(),this.Ye=new Ye(Ce),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new zm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new lt(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new lt(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zm),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wa(){return new Ye(ue.comparator)}function Km(){return new Ye(ue.comparator)}const iO={asc:"ASCENDING",desc:"DESCENDING"},oO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aO={and:"AND",or:"OR"};class lO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nh(t,e){return t.useProto3Json||ic(e)?e:{value:e}}function Il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cO(t,e){return Il(t,e.toTimestamp())}function Vn(t){return xe(!!t,49232),ye.fromTimestamp((function(n){const r=Vr(n);return new We(r.seconds,r.nanos)})(t))}function nf(t,e){return rh(t,e).canonicalString()}function rh(t,e){const n=(function(s){return new qe(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function AE(t){const e=qe.fromString(t);return xe(kE(e),10190,{key:e.toString()}),e}function sh(t,e){return nf(t.databaseId,e.path)}function mu(t,e){const n=AE(e);if(n.get(1)!==t.databaseId.projectId)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(SE(n))}function CE(t,e){return nf(t.databaseId,e)}function uO(t){const e=AE(t);return e.length===4?qe.emptyPath():SE(e)}function ih(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SE(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Qm(t,e,n){return{name:sh(t,e),fields:n.value.mapValue.fields}}function hO(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(xe(h===void 0||typeof h=="string",58123),It.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),It.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(u){const h=u.code===void 0?$.UNKNOWN:TE(u.code);return new se(h,u.message||"")})(o);n=new wE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mu(t,r.document.name),i=Vn(r.document.updateTime),o=r.document.createTime?Vn(r.document.createTime):ye.min(),l=new Gt({mapValue:{fields:r.document.fields}}),c=Ot.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ua(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mu(t,r.document),i=r.readTime?Vn(r.readTime):ye.min(),o=Ot.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ua([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mu(t,r.document),i=r.removedTargetIds||[];n=new Ua([],i,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new eO(s,i),l=r.targetId;n=new bE(l,o)}}return n}function fO(t,e){let n;if(e instanceof Qo)n={update:Qm(t,e.key,e.value)};else if(e instanceof Zh)n={delete:sh(t,e.key)};else if(e instanceof Gr)n={update:Qm(t,e.key,e.data),updateMask:TO(e.fieldMask)};else{if(!(e instanceof J1))return ge(16599,{Vt:e.type});n={verify:sh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const l=o.transform;if(l instanceof Do)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:cO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)})(t,e.precondition)),n}function dO(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?Vn(s.updateTime):Vn(i);return o.isEqual(ye.min())&&(o=Vn(i)),new K1(o,s.transformResults||[])})(n,e)))):[]}function pO(t,e){return{documents:[CE(t,e.path)]}}function mO(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CE(t,s);const i=(function(u){if(u.length!==0)return PE(En.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(m){return{field:$s(m.field),direction:yO(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=nh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function gO(t){let e=uO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const m=RE(d);return m instanceof En&&sE(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((m=>(function(R){return new Tl(js(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(m)))})(n.orderBy));let l=null;n.limit&&(l=(function(d){let m;return m=typeof d=="object"?d.value:d,ic(m)?null:m})(n.limit));let c=null;n.startAt&&(c=(function(d){const m=!!d.before,_=d.values||[];return new El(_,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const m=!d.before,_=d.values||[];return new El(_,m)})(n.endAt)),V1(e,s,o,i,l,"F",c,u)}function _O(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=js(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=js(n.unaryFilter.field);return nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=js(n.unaryFilter.field);return nt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=js(n.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(t):t.fieldFilter!==void 0?(function(n){return nt.create(js(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return En.create(n.compositeFilter.filters.map((r=>RE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(n.compositeFilter.op))})(t):ge(30097,{filter:t})}function yO(t){return iO[t]}function vO(t){return oO[t]}function EO(t){return aO[t]}function $s(t){return{fieldPath:t.canonicalString()}}function js(t){return Tt.fromServerFormat(t.fieldPath)}function PE(t){return t instanceof nt?(function(n){if(n.op==="=="){if(xm(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(Lm(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xm(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(Lm(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:vO(n.op),value:n.value}}})(t):t instanceof En?(function(n){const r=n.getFilters().map((s=>PE(s)));return r.length===1?r[0]:{compositeFilter:{op:EO(n.op),filters:r}}})(t):ge(54877,{filter:t})}function TO(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function kE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r,s,i=ye.min(),o=ye.min(),l=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.yt=e}}function wO(t){const e=gO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.Cn=new AO}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Dr.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class AO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OE=41943040;class jt{static withCacheSize(e){return new jt(e,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(OE,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ci(0)}static cr(){return new ci(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LruGarbageCollector",CO=1048576;function Xm([t,e],[n,r]){const s=Ce(t,n);return s===0?Ce(e,r):s}class SO{constructor(e){this.Ir=e,this.buffer=new lt(Xm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(Jm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ti(n)?ie(Jm,"Ignoring IndexedDB error during garbage collection: ",n):await Ei(n)}await this.Vr(3e5)}))}}class PO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return q.resolve(sc.ce);const r=new SO(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Ym)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ym):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,l=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),Bs()<=Ae.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function kO(t,e){return new PO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.changes=new As((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&mo(r.mutation,s,tn.empty(),We.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Se()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Se()){const s=cs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=zi();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=cs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Se())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,r,s){let i=sr();const o=po(),l=(function(){return po()})();return n.forEach(((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Gr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),mo(h.mutation,u,h.mutation.getFieldMask(),We.now())):o.set(u.key,tn.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>l.set(u,new NO(h,o.get(u)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=po();let s=new Ye(((o,l)=>o-l)),i=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||tn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const d=(s.get(l.batchId)||Se()).add(c);s=s.insert(l.batchId,d)}))})).next((()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=dE();h.forEach((m=>{if(!i.has(m)){const _=vE(n.get(m),r.get(m));_!==null&&d.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return q.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(cs());let l=Po,c=i;return o.next((u=>q.forEach(u,((h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{c=c.insert(h,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,c,u,Se()))).next((h=>({batchId:l,changes:fE(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next((r=>{let s=zi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=zi();return this.indexManager.getCollectionParents(e,i).next((l=>q.forEach(l,(c=>{const u=(function(d,m){return new Ko(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ot.newInvalidDocument(h)))}));let l=zi();return o.forEach(((c,u)=>{const h=i.get(c);h!==void 0&&mo(h.mutation,u,tn.empty(),We.now()),cc(n,u)&&(l=l.insert(c,u))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Vn(s.createTime)}})(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:wO(s.bundledQuery),readTime:Vn(s.readTime)}})(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this.overlays=new Ye(ue.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cs();return q.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=cs(),i=n.length+1,o=new ue(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ye(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=cs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=cs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>l.set(u,h))),!(l.size()>=s)););return q.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Z1(n,r));let i=this.qr.get(n);i===void 0&&(i=Se(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this.Qr=new lt(pt.$r),this.Ur=new lt(pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new pt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new pt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ue(new qe([])),r=new pt(n,e),s=new pt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new qe([])),r=new pt(n,e),s=new pt(n,e+1);let i=Se();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new pt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new lt(pt.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new X1(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new pt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?zh:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),s=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const l=this.Xr(o.Yr);i.push(l)})),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(Ce);return n.forEach((s=>{const i=new pt(s,0),o=new pt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{r=r.add(l.Yr)}))})),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ue.isDocumentKey(i)||(i=i.child(""));const o=new pt(new ue(i),0);let l=new lt(Ce);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)}),o),q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,(s=>{const i=new pt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new pt(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.ri=e,this.docs=(function(){return new Ye(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ot.newInvalidDocument(s))})),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=sr();const o=n.path,l=new ue(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||f1(h1(h),r)<=0||(s.has(h.key)||cc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return q.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new BO(this)}getSize(e){return q.resolve(this.size)}}class BO extends OO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.persistence=e,this.si=new As((n=>Yh(n)),Jh),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new rf,this.targetCount=0,this.ai=ci.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ci(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)})),q.waitFor(i).next((()=>s))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.ui={},this.overlays={},this.ci=new sc(0),this.li=!1,this.li=!0,this.hi=new xO,this.referenceDelegate=e(this),this.Pi=new UO(this),this.indexManager=new IO,this.remoteDocumentCache=(function(s){return new FO(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new bO(n),this.Ii=new VO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new MO(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new $O(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return q.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class $O extends p1{constructor(e){super(),this.currentSequenceNumber=e}}class sf{constructor(e){this.persistence=e,this.Ri=new rf,this.Vi=null}static mi(e){return new sf(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(r=>{const s=ue.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,ye.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Al{constructor(e,n){this.persistence=e,this.pi=new As((r=>_1(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=kO(this,n)}static mi(e,n){return new Al(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return q.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?q.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((l=>{l||(r++,i.removeEntry(o,ye.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ma(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Se(),s=Se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new of(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return E0()?8:m1(Vt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new jO;return this.Ss(e,n,o).next((l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Bs()<=Ae.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Bs()<=Ae.DEBUG&&ie("QueryEngine","Query:",Us(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Bs()<=Ae.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):q.resolve())}ys(e,n){if(Um(n))return q.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=bl(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Se(...i);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,bl(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,r,s){return Um(n)||s.isEqual(ye.min())?q.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?q.resolve(null):(Bs()<=Ae.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Us(n)),this.vs(e,o,n,u1(s,Po)).next((l=>l)))}))}Ds(e,n){let r=new lt(uE(e));return n.forEach(((s,i)=>{cc(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Bs()<=Ae.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Us(n)),this.ps.getDocumentsMatchingQuery(e,n,Dr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="LocalStore",HO=3e8;class GO{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ye(Ce),this.xs=new As((i=>Yh(i)),Jh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function WO(t,e,n,r){return new GO(t,e,n,r)}async function DE(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],l=[];let c=Se();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:l})))}))}))}function zO(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,u,h){const d=u.batch,m=d.keys();let _=q.resolve();return m.forEach((R=>{_=_.next((()=>h.getEntry(c,R))).next((P=>{const k=u.docVersions.get(R);xe(k!==null,48541),P.version.compareTo(k)<0&&(d.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(c,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=Se();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function VE(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function KO(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach(((h,d)=>{const m=s.get(d);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(It.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(d,_),(function(P,k,V){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=HO?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(m,_,h)&&l.push(n.Pi.updateTargetData(i,_))}));let c=sr(),u=Se();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),l.push(QO(i,o,e.documentUpdates).next((h=>{c=h.ks,u=h.qs}))),!r.isEqual(ye.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(h)}return q.waitFor(l).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,u))).next((()=>c))})).then((i=>(n.Ms=s,i)))}function QO(t,e,n){let r=Se(),s=Se();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=sr();return n.forEach(((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ie(af,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)})),{ks:o,qs:s}}))}function YO(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=zh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function JO(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new Ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function oh(t,e,n){const r=ve(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Ti(o))throw o;ie(af,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Zm(t,e,n){const r=ve(t);let s=ye.min(),i=Se();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,h){const d=ve(c),m=d.xs.get(h);return m!==void 0?q.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,h)})(r,o,Dn(e)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ye.min(),n?i:Se()))).next((l=>(XO(r,x1(e),l),{documents:l,Qs:i})))))}function XO(t,e,n){let r=t.Os.get(e)||ye.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class eg{constructor(){this.activeTargetIds=j1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZO{constructor(){this.Mo=new eg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new eg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="ConnectivityMonitor";class ng{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(tg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(tg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia=null;function ah(){return Ia===null?Ia=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ia++,"0x"+Ia.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu="RestConnection",tN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===yl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=ah(),l=this.zo(e,n.toUriEncodedString());ie(gu,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=gi(u);return this.Jo(e,l,c,r,h).then((d=>(ie(gu,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw ii(gu,`RPC '${e}' ${o} failed with error: `,d,"url: ",l,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=tN[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class sN extends nN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=ah();return new Promise(((l,c)=>{const u=new Mv;u.setWithCredentials(!0),u.listenOnce(Fv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case xa.NO_ERROR:const d=u.getResponseJson();ie(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),l(d);break;case xa.TIMEOUT:ie(St,`RPC '${e}' ${o} timed out`),c(new se($.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:const m=u.getStatus();if(ie(St,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_?.error;if(R&&R.status&&R.message){const P=(function(V){const L=V.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(L)>=0?L:$.UNKNOWN})(R.status);c(new se(P,R.message))}else c(new se($.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new se($.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ie(St,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);ie(St,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=ah(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$v(),l=Uv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");ie(St,`Creating RPC '${e}' stream ${s}: ${h}`,c);const d=o.createWebChannel(h,c);this.I_(d);let m=!1,_=!1;const R=new rN({Yo:k=>{_?ie(St,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(m||(ie(St,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),ie(St,`RPC '${e}' stream ${s} sending:`,k),d.send(k))},Zo:()=>d.close()}),P=(k,V,L)=>{k.listen(V,(H=>{try{L(H)}catch(G){setTimeout((()=>{throw G}),0)}}))};return P(d,Wi.EventType.OPEN,(()=>{_||(ie(St,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),P(d,Wi.EventType.CLOSE,(()=>{_||(_=!0,ie(St,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(d))})),P(d,Wi.EventType.ERROR,(k=>{_||(_=!0,ii(St,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),R.a_(new se($.UNAVAILABLE,"The operation could not be completed")))})),P(d,Wi.EventType.MESSAGE,(k=>{if(!_){const V=k.data[0];xe(!!V,16349);const L=V,H=L?.error||L[0]?.error;if(H){ie(St,`RPC '${e}' stream ${s} received error:`,H);const G=H.status;let Y=(function(v){const E=tt[v];if(E!==void 0)return TE(E)})(G),Z=H.message;Y===void 0&&(Y=$.INTERNAL,Z="Unknown error status: "+G+" with message "+H.message),_=!0,R.a_(new se(Y,Z)),d.close()}else ie(St,`RPC '${e}' stream ${s} received:`,V),R.u_(V)}})),P(l,Bv.STAT_EVENT,(k=>{k.stat===Qu.PROXY?ie(St,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Qu.NOPROXY&&ie(St,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _u(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){return new lO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="PersistentStream";class xE{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new se($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(rg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ie(rg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iN extends xE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=hO(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?Vn(o.readTime):ye.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ih(this.serializer),n.addTarget=(function(i,o){let l;const c=o.target;if(l=eh(c)?{documents:pO(i,c)}:{query:mO(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=IE(i,o.resumeToken);const u=nh(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ye.min())>0){l.readTime=Il(i,o.snapshotVersion.toTimestamp());const u=nh(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l})(this.serializer,e);const r=_O(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ih(this.serializer),n.removeTarget=e,this.q_(n)}}class oN extends xE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dO(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ih(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>fO(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{}class lN extends aN{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,rh(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se($.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,rh(n,r),s,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se($.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class cN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="RemoteStore";class uN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Cs(this)&&(ie(bs,"Restarting streams for network reachability change."),await(async function(c){const u=ve(c);u.Ea.add(4),await Jo(u),u.Ra.set("Unknown"),u.Ea.delete(4),await pc(u)})(this))}))})),this.Ra=new cN(r,s)}}async function pc(t){if(Cs(t))for(const e of t.da)await e(!0)}async function Jo(t){for(const e of t.da)await e(!1)}function ME(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hf(n)?uf(n):bi(n).O_()&&cf(n,e))}function lf(t,e){const n=ve(t),r=bi(n);n.Ia.delete(e),r.O_()&&FE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Cs(n)&&n.Ra.set("Unknown"))}function cf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bi(t).Y_(e)}function FE(t,e){t.Va.Ue(e),bi(t).Z_(e)}function uf(t){t.Va=new sO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bi(t).start(),t.Ra.ua()}function hf(t){return Cs(t)&&!bi(t).x_()&&t.Ia.size>0}function Cs(t){return ve(t).Ea.size===0}function BE(t){t.Va=void 0}async function hN(t){t.Ra.set("Online")}async function fN(t){t.Ia.forEach(((e,n)=>{cf(t,e)}))}async function dN(t,e){BE(t),hf(t)?(t.Ra.ha(e),uf(t)):t.Ra.set("Unknown")}async function pN(t,e,n){if(t.Ra.set("Online"),e instanceof wE&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))})(t,e)}catch(r){ie(bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cl(t,r)}else if(e instanceof Ua?t.Va.Ze(e):e instanceof bE?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const r=await VE(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),FE(i,c);const d=new Ar(h.target,c,u,h.sequenceNumber);cf(i,d)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){ie(bs,"Failed to raise snapshot:",r),await Cl(t,r)}}async function Cl(t,e,n){if(!Ti(e))throw e;t.Ea.add(1),await Jo(t),t.Ra.set("Offline"),n||(n=()=>VE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ie(bs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pc(t)}))}function UE(t,e){return e().catch((n=>Cl(t,n,e)))}async function mc(t){const e=ve(t),n=Mr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zh;for(;mN(e);)try{const s=await YO(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,gN(e,s)}catch(s){await Cl(e,s)}$E(e)&&jE(e)}function mN(t){return Cs(t)&&t.Ta.length<10}function gN(t,e){t.Ta.push(e);const n=Mr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function $E(t){return Cs(t)&&!Mr(t).x_()&&t.Ta.length>0}function jE(t){Mr(t).start()}async function _N(t){Mr(t).ra()}async function yN(t){const e=Mr(t);for(const n of t.Ta)e.ea(n.mutations)}async function vN(t,e,n){const r=t.Ta.shift(),s=ef.from(r,e,n);await UE(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await mc(t)}async function EN(t,e){e&&Mr(t).X_&&await(async function(r,s){if((function(o){return tO(o)&&o!==$.ABORTED})(s.code)){const i=r.Ta.shift();Mr(r).B_(),await UE(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await mc(r)}})(t,e),$E(t)&&jE(t)}async function sg(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ie(bs,"RemoteStore received new credentials");const r=Cs(n);n.Ea.add(3),await Jo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pc(n)}async function TN(t,e){const n=ve(t);e?(n.Ea.delete(2),await pc(n)):e||(n.Ea.add(2),await Jo(n),n.Ra.set("Unknown"))}function bi(t){return t.ma||(t.ma=(function(n,r,s){const i=ve(n);return i.sa(),new iN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:hN.bind(null,t),t_:fN.bind(null,t),r_:dN.bind(null,t),H_:pN.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),hf(t)?uf(t):t.Ra.set("Unknown")):(await t.ma.stop(),BE(t))}))),t.ma}function Mr(t){return t.fa||(t.fa=(function(n,r,s){const i=ve(n);return i.sa(),new oN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_N.bind(null,t),r_:EN.bind(null,t),ta:yN.bind(null,t),na:vN.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await mc(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(bs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new ff(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function df(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Ti(t))return new se($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{static emptySet(e){return new ti(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=zi(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ti)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ti;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.ga=new Ye(ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ui{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new ui(e,n,ti.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wN{constructor(){this.queries=og(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ve(n),i=s.queries;s.queries=og(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new se($.ABORTED,"Firestore shutting down"))}}function og(){return new As((t=>cE(t)),lc)}async function pf(t,e){const n=ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new bN,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=df(o,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&gf(n)}async function mf(t,e){const n=ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IN(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&gf(n)}function AN(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function gf(t){t.Ca.forEach((e=>{e.next()}))}var lh,ag;(ag=lh||(lh={})).Ma="default",ag.Cache="cache";class _f{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.key=e}}class HE{constructor(e){this.key=e}}class CN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Se(),this.mutatedKeys=Se(),this.eu=uE(e),this.tu=new ti(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ig,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,d)=>{const m=s.get(h),_=cc(this.query,d)?d:null,R=!!m&&this.mutatedKeys.has(m.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;m&&_?m.data.isEqual(_.data)?R!==P&&(r.track({type:3,doc:_}),k=!0):this.su(m,_)||(r.track({type:2,doc:_}),k=!0,(c&&this.eu(_,c)>0||u&&this.eu(_,u)<0)&&(l=!0)):!m&&_?(r.track({type:0,doc:_}),k=!0):m&&!_&&(r.track({type:1,doc:m}),k=!0,(c||u)&&(l=!0)),k&&(_?(o=o.add(_),i=P?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(_,R){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:k})}};return P(_)-P(R)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new ui(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ig,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Se(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new HE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new qE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ui.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yf="SyncEngine";class SN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RN{constructor(e){this.key=e,this.hu=!1}}class PN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new As((l=>cE(l)),lc),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(ue.comparator),this.Au=new Map,this.Ru=new rf,this.Vu={},this.mu=new Map,this.fu=ci.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kN(t,e,n=!0){const r=YE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await GE(r,e,n,!0),s}async function ON(t,e){const n=YE(t);await GE(n,e,!0,!1)}async function GE(t,e,n,r){const s=await JO(t.localStore,Dn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await NN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&ME(t.remoteStore,s),l}async function NN(t,e,n,r,s){t.pu=(d,m,_)=>(async function(P,k,V,L){let H=k.view.ru(V);H.Cs&&(H=await Zm(P.localStore,k.query,!1).then((({documents:I})=>k.view.ru(I,H))));const G=L&&L.targetChanges.get(k.targetId),Y=L&&L.targetMismatches.get(k.targetId)!=null,Z=k.view.applyChanges(H,P.isPrimaryClient,G,Y);return cg(P,k.targetId,Z.au),Z.snapshot})(t,d,m,_);const i=await Zm(t.localStore,e,!0),o=new CN(e,i.Qs),l=o.ru(i.documents),c=Yo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);cg(t,n,u.au);const h=new SN(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function DN(t,e,n){const r=ve(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!lc(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await oh(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&lf(r.remoteStore,s.targetId),ch(r,s.targetId)})).catch(Ei)):(ch(r,s.targetId),await oh(r.localStore,s.targetId,!0))}async function VN(t,e){const n=ve(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lf(n.remoteStore,r.targetId))}async function LN(t,e,n){const r=jN(t);try{const s=await(function(o,l){const c=ve(o),u=We.now(),h=l.reduce(((_,R)=>_.add(R.key)),Se());let d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let R=sr(),P=Se();return c.Ns.getEntries(_,h).next((k=>{R=k,R.forEach(((V,L)=>{L.isValidDocument()||(P=P.add(V))}))})).next((()=>c.localDocuments.getOverlayedDocuments(_,R))).next((k=>{d=k;const V=[];for(const L of l){const H=Y1(L,d.get(L.key).overlayedDocument);H!=null&&V.push(new Gr(L.key,H,tE(H.value.mapValue),cn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,V,l)})).next((k=>{m=k;const V=k.applyToLocalDocumentSet(d,P);return c.documentOverlayCache.saveOverlays(_,k.batchId,V)}))})).then((()=>({batchId:m.batchId,changes:fE(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ye(Ce)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await Xo(r,s.changes),await mc(r.remoteStore)}catch(s){const i=df(s,"Failed to persist write");n.reject(i)}}async function WE(t,e){const n=ve(t);try{const r=await KO(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?xe(o.hu,14607):s.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))})),await Xo(n,r,e)}catch(r){await Ei(r)}}function lg(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)})),(function(o,l){const c=ve(o);c.onlineState=l;let u=!1;c.queries.forEach(((h,d)=>{for(const m of d.Sa)m.va(l)&&(u=!0)})),u&&gf(c)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xN(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ye(ue.comparator);o=o.insert(i,Ot.newNoDocument(i,ye.min()));const l=Se().add(i),c=new fc(ye.min(),new Map,new Ye(Ce),o,l);await WE(r,c),r.du=r.du.remove(i),r.Au.delete(e),vf(r)}else await oh(r.localStore,e,!1).then((()=>ch(r,e,n))).catch(Ei)}async function MN(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await zO(n.localStore,e);KE(n,r,null),zE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xo(n,s)}catch(s){await Ei(s)}}async function FN(t,e,n){const r=ve(t);try{const s=await(function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next((d=>(xe(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>c.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);KE(r,e,n),zE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xo(r,s)}catch(s){await Ei(s)}}function zE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function KE(t,e,n){const r=ve(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function ch(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||QE(t,r)}))}function QE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(lf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),vf(t))}function cg(t,e,n){for(const r of n)r instanceof qE?(t.Ru.addReference(r.key,e),BN(t,r)):r instanceof HE?(ie(yf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||QE(t,r.key)):ge(19791,{wu:r})}function BN(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ie(yf,"New document in limbo: "+n),t.Eu.add(r),vf(t))}function vf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(qe.fromString(e)),r=t.fu.next();t.Au.set(r,new RN(n)),t.du=t.du.insert(n,r),ME(t.remoteStore,new Ar(Dn(ac(n.path)),r,"TargetPurposeLimboResolution",sc.ce))}}async function Xo(t,e,n){const r=ve(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{o.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=of.As(c.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(c,u){const h=ve(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>q.forEach(u,(m=>q.forEach(m.Es,(_=>h.persistence.referenceDelegate.addReference(d,m.targetId,_))).next((()=>q.forEach(m.ds,(_=>h.persistence.referenceDelegate.removeReference(d,m.targetId,_)))))))))}catch(d){if(!Ti(d))throw d;ie(af,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const _=h.Ms.get(m),R=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(m,P)}}})(r.localStore,i))}async function UN(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ie(yf,"User change. New user:",e.toKey());const r=await DE(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new se($.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xo(n,r.Ls)}}function $N(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return Se().add(r.key);{let s=Se();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function YE(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$N.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xN.bind(null,e),e.Pu.H_=IN.bind(null,e.eventManager),e.Pu.yu=AN.bind(null,e.eventManager),e}function jN(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FN.bind(null,e),e}class Sl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return WO(this.persistence,new qO,e.initialUser,this.serializer)}Cu(e){return new NE(sf.mi,this.serializer)}Du(e){return new ZO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sl.provider={build:()=>new Sl};class qN extends Sl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof Al,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RO(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new NE((r=>Al.mi(r,n)),this.serializer)}}class uh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UN.bind(null,this.syncEngine),await TN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wN})()}createDatastore(e){const n=dc(e.databaseInfo.databaseId),r=(function(i){return new sN(i)})(e.databaseInfo);return(function(i,o,l,c){return new lN(i,o,l,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,l){return new uN(r,s,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>lg(this.syncEngine,n,0)),(function(){return ng.v()?new ng:new eN})())}createSyncEngine(e,n){return(function(s,i,o,l,c,u,h){const d=new PN(s,i,o,l,c,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ve(n);ie(bs,"RemoteStore shutting down."),r.Ea.add(5),await Jo(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}uh.provider={build:()=>new uh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class HN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Pt.UNAUTHENTICATED,this.clientId=Wh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{ie(Fr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ie(Fr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=df(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yu(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Fr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await DE(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ug(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GN(t);ie(Fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>sg(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>sg(e.remoteStore,s))),t._onlineComponents=e}async function GN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Fr,"Using user provided OfflineComponentProvider");try{await yu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await yu(t,new Sl)}}else ie(Fr,"Using default OfflineComponentProvider"),await yu(t,new qN(void 0));return t._offlineComponents}async function JE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Fr,"Using user provided OnlineComponentProvider"),await ug(t,t._uninitializedComponentsProvider._online)):(ie(Fr,"Using default OnlineComponentProvider"),await ug(t,new uh))),t._onlineComponents}function WN(t){return JE(t).then((e=>e.syncEngine))}async function Rl(t){const e=await JE(t),n=e.eventManager;return n.onListen=kN.bind(null,e.syncEngine),n.onUnlisten=DN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ON.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VN.bind(null,e.syncEngine),n}function zN(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,l,c,u){const h=new Ef({next:m=>{h.Nu(),o.enqueueAndForget((()=>mf(i,d)));const _=m.docs.has(l);!_&&m.fromCache?u.reject(new se($.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&c&&c.source==="server"?u.reject(new se($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new _f(ac(l.path),h,{includeMetadataChanges:!0,qa:!0});return pf(i,d)})(await Rl(t),t.asyncQueue,e,n,r))),r.promise}function KN(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,l,c,u){const h=new Ef({next:m=>{h.Nu(),o.enqueueAndForget((()=>mf(i,d))),m.fromCache&&c.source==="server"?u.reject(new se($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new _f(l,h,{includeMetadataChanges:!0,qa:!0});return pf(i,d)})(await Rl(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firestore.googleapis.com",fg=!0;class dg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZE,this.ssl=fg}else this.host=e.host,this.ssl=e.ssl??fg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CO)throw new se($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Zk;switch(r.type){case"firstParty":return new r1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=hg.get(n);r&&(ie("ComponentProvider","Removing Datastore"),hg.delete(n),r.terminate())})(this),Promise.resolve()}}function QN(t,e,n,r={}){t=zt(t,gc);const s=gi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Ky(`https://${l}`),Qy("Firestore",!0)),i.host!==ZE&&i.host!==l&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!_s(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Pt.MOCK_USER;else{u=h0(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new se($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Pt(d)}t._authCredentials=new e1(new qv(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wr(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zo(n,Xe._jsonSchema))return new Xe(e,r||null,new ue(qe.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:rt("string",Xe._jsonSchemaVersion),referencePath:rt("string")};class kr extends Wr{constructor(e,n,r){super(e,n,ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new ue(e))}withConverter(e){return new kr(this.firestore,e,this._path)}}function us(t,e,...n){if(t=ut(t),Hv("collection","path",e),t instanceof gc){const r=qe.fromString(e,...n);return Cm(r),new kr(t,null,r)}{if(!(t instanceof Xe||t instanceof kr))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return Cm(r),new kr(t.firestore,null,r)}}function Pn(t,e,...n){if(t=ut(t),arguments.length===1&&(e=Wh.newId()),Hv("doc","path",e),t instanceof gc){const r=qe.fromString(e,...n);return Am(r),new Xe(t,null,new ue(r))}{if(!(t instanceof Xe||t instanceof kr))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return Am(r),new Xe(t.firestore,t instanceof kr?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="AsyncQueue";class mg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LE(this,"async_queue_retry"),this._c=()=>{const r=_u();r&&ie(pg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_u();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_u();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Jn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ti(e))throw e;ie(pg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",gg(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ff.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:gg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class ir extends gc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mg,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mg(e),this._firestoreClient=void 0,await e}}}function YN(t,e){const n=typeof t=="object"?t:Zy(),r=typeof t=="string"?t:yl,s=xh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=c0("firestore");i&&QN(s,...i)}return s}function _c(t){if(t._terminated)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JN(t),t._firestoreClient}function JN(t){const e=t._freezeSettings(),n=(function(s,i,o,l){return new E1(s,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,XE(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new HN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._byteString=e}static fromBase64String(e){try{return new an(It.fromBase64String(e))}catch(n){throw new se($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new an(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:an._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zo(e,an._jsonSchema))return an.fromBase64String(e.bytes)}}an._jsonSchemaVersion="firestore/bytes/1.0",an._jsonSchema={type:rt("string",an._jsonSchemaVersion),bytes:rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ln._jsonSchemaVersion}}static fromJSON(e){if(zo(e,Ln._jsonSchema))return new Ln(e.latitude,e.longitude)}}Ln._jsonSchemaVersion="firestore/geoPoint/1.0",Ln._jsonSchema={type:rt("string",Ln._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zo(e,xn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new xn(e.vectorValues);throw new se($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xn._jsonSchemaVersion="firestore/vectorValue/1.0",xn._jsonSchema={type:rt("string",xn._jsonSchemaVersion),vectorValues:rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=/^__.*__$/;class ZN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qo(e,this.data,n,this.fieldTransforms)}}class eT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class Tf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tT(this.Ac)&&XN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dc(e)}Cc(e,n,r,s=!1){return new Tf({Ac:e,methodName:n,Dc:r,path:Tt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ec(t){const e=t._freezeSettings(),n=dc(t._databaseId);return new eD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nT(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);wf("Data must be an object, but it was:",o,r);const l=rT(r,o);let c,u;if(i.merge)c=new tn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=hh(e,d,n);if(!o.contains(m))throw new se($.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);iT(h,m)||h.push(m)}c=new tn(h),u=o.fieldTransforms.filter((d=>c.covers(d.field)))}else c=null,u=o.fieldTransforms;return new ZN(new Gt(l),c,u)}class Tc extends vc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tc}}class bf extends vc{_toFieldTransform(e){return new W1(e.path,new Do)}isEqual(e){return e instanceof bf}}function tD(t,e,n,r){const s=t.Cc(1,e,n);wf("Data must be an object, but it was:",s,r);const i=[],o=Gt.empty();Hr(r,((c,u)=>{const h=If(e,c,n);u=ut(u);const d=s.yc(h);if(u instanceof Tc)i.push(h);else{const m=Zo(u,d);m!=null&&(i.push(h),o.set(h,m))}}));const l=new tn(i);return new eT(o,l,s.fieldTransforms)}function nD(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[hh(e,r,n)],c=[s];if(i.length%2!=0)throw new se($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(hh(e,i[m])),c.push(i[m+1]);const u=[],h=Gt.empty();for(let m=l.length-1;m>=0;--m)if(!iT(u,l[m])){const _=l[m];let R=c[m];R=ut(R);const P=o.yc(_);if(R instanceof Tc)u.push(_);else{const k=Zo(R,P);k!=null&&(u.push(_),h.set(_,k))}}const d=new tn(u);return new eT(h,d,o.fieldTransforms)}function rD(t,e,n,r=!1){return Zo(n,t.Cc(r?4:3,e))}function Zo(t,e){if(sT(t=ut(t)))return wf("Unsupported field value:",e,t),rT(t,e);if(t instanceof vc)return(function(r,s){if(!tT(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const l of r){let c=Zo(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return q1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=We.fromDate(r);return{timestampValue:Il(s.serializer,i)}}if(r instanceof We){const i=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Il(s.serializer,i)}}if(r instanceof Ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof an)return{bytesValue:IE(s.serializer,r._byteString)};if(r instanceof Xe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof xn)return(function(o,l){return{mapValue:{fields:{[Zv]:{stringValue:eE},[vl]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Xh(l.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${rc(r)}`)})(t,e)}function rT(t,e){const n={};return zv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,((r,s)=>{const i=Zo(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function sT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Ln||t instanceof an||t instanceof Xe||t instanceof vc||t instanceof xn)}function wf(t,e,n){if(!sT(n)||!Gv(n)){const r=rc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function hh(t,e,n){if((e=ut(e))instanceof yc)return e._internalPath;if(typeof e=="string")return If(t,e);throw Pl("Field path arguments must be of type string or ",t,!1,void 0,n)}const sD=new RegExp("[~\\*/\\[\\]]");function If(t,e,n){if(e.search(sD)>=0)throw Pl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yc(...e.split("."))._internalPath}catch{throw Pl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new se($.INVALID_ARGUMENT,l+t+c)}function iT(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Af("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iD extends oT{data(){return super.data()}}function Af(t,e){return typeof e=="string"?If(t,e):e instanceof yc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cf{}class lT extends Cf{}function oD(t,e,...n){let r=[];e instanceof Cf&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((c=>c instanceof Sf)).length,l=i.filter((c=>c instanceof bc)).length;if(o>1||o>0&&l>0)throw new se($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class bc extends lT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bc(e,n,r)}_apply(e){const n=this._parse(e);return cT(e._query,n),new Wr(e.firestore,e.converter,th(e._query,n))}_parse(e){const n=Ec(e.firestore);return(function(i,o,l,c,u,h,d){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Eg(d,h);const R=[];for(const P of d)R.push(vg(c,i,P));m={arrayValue:{values:R}}}else m=vg(c,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Eg(d,h),m=rD(l,o,d,h==="in"||h==="not-in");return nt.create(u,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yg(t,e,n){const r=e,s=Af("where",t);return bc._create(s,r,n)}class Sf extends Cf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sf(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)cT(o,c),o=th(o,c)})(e._query,n),new Wr(e.firestore,e.converter,th(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rf extends lT{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Rf(e,n,r)}_apply(e){return new Wr(e.firestore,e.converter,bl(e._query,this._limit,this._limitType))}}function aD(t){return Rf._create("limit",t,"F")}function vg(t,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new se($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lE(e)&&n.indexOf("/")!==-1)throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!ue.isDocumentKey(r))throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vm(t,new ue(r))}if(n instanceof Xe)return Vm(t,n._key);throw new se($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rc(n)}.`)}function Eg(t,e){if(!Array.isArray(t)||t.length===0)throw new se($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cT(t,e){const n=(function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lD{convertValue(e,n="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[vl].arrayValue?.values?.map((r=>Ze(r.doubleValue)));return new xn(n)}convertGeoPoint(e){return new Ln(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=oc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ko(e));default:return null}}convertTimestamp(e){const n=Vr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);xe(kE(r),9688,{name:e});const s=new Oo(r.get(1),r.get(3)),i=new ue(r.popFirst(5));return s.isEqual(n)||rr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Qi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fs extends oT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $a(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Af("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fs._jsonSchemaVersion="firestore/documentSnapshot/1.0",fs._jsonSchema={type:rt("string",fs._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class $a extends fs{data(e={}){return super.data(e)}}class ds{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new $a(this._firestore,this._userDataWriter,r.key,r,new Qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((l=>{const c=new $a(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Qi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new $a(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Qi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:cD(l.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ds._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){t=zt(t,Xe);const e=zt(t.firestore,ir);return zN(_c(e),t._key).then((n=>hT(e,t,n)))}ds._jsonSchemaVersion="firestore/querySnapshot/1.0",ds._jsonSchema={type:rt("string",ds._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class Pf extends lD{constructor(e){super(),this.firestore=e}convertBytes(e){return new an(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function fh(t){t=zt(t,Wr);const e=zt(t.firestore,ir),n=_c(e),r=new Pf(e);return aT(t._query),KN(n,t._query).then((s=>new ds(e,r,t,s)))}function Tg(t,e,n){t=zt(t,Xe);const r=zt(t.firestore,ir),s=uT(t.converter,e);return wc(r,[nT(Ec(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,cn.none())])}function Hs(t,e,n,...r){t=zt(t,Xe);const s=zt(t.firestore,ir),i=Ec(s);let o;return o=typeof(e=ut(e))=="string"||e instanceof yc?nD(i,"updateDoc",t._key,e,n,r):tD(i,"updateDoc",t._key,e),wc(s,[o.toMutation(t._key,cn.exists(!0))])}function hD(t){return wc(zt(t.firestore,ir),[new Zh(t._key,cn.none())])}function dh(t,e){const n=zt(t.firestore,ir),r=Pn(t),s=uT(t.converter,e);return wc(n,[nT(Ec(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,cn.exists(!1))]).then((()=>r))}function fD(t,...e){t=ut(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_g(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_g(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let i,o,l;if(t instanceof Xe)o=zt(t.firestore,ir),l=ac(t._key.path),i={next:c=>{e[r]&&e[r](hT(o,t,c))},error:e[r+1],complete:e[r+2]};else{const c=zt(t,Wr);o=zt(c.firestore,ir),l=c._query;const u=new Pf(o);i={next:h=>{e[r]&&e[r](new ds(o,u,c,h))},error:e[r+1],complete:e[r+2]},aT(t._query)}return(function(u,h,d,m){const _=new Ef(m),R=new _f(h,_,d);return u.asyncQueue.enqueueAndForget((async()=>pf(await Rl(u),R))),()=>{_.Nu(),u.asyncQueue.enqueueAndForget((async()=>mf(await Rl(u),R)))}})(_c(o),l,s,i)}function wc(t,e){return(function(r,s){const i=new Jn;return r.asyncQueue.enqueueAndForget((async()=>LN(await WN(r),s,i))),i.promise})(_c(t),e)}function hT(t,e,n){const r=n.docs.get(e._key),s=new Pf(t);return new fs(t,s,e._key,r,new Qi(n.hasPendingWrites,n.fromCache),e.converter)}function Zt(){return new bf("serverTimestamp")}(function(e,n=!0){(function(s){vi=s})(_i),si(new ys("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ir(new t1(r.getProvider("auth-internal")),new s1(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(u.options.projectId,h)})(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Rr(Tm,bm,e),Rr(Tm,bm,"esm2020")})();var dD="firebase",pD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(dD,pD,"app");const mD={apiKey:"AIzaSyAfQkjP5FypLOx4pHf9WrkV3V_6nGkxG2o",authDomain:"examenmodulo7.firebaseapp.com",projectId:"examenmodulo7",storageBucket:"examenmodulo7.firebasestorage.app",messagingSenderId:"925742124353",appId:"1:925742124353:web:2432f4d1ca9e36b2b765c0"},fT=Xy(mD),Yi=Jk(fT),yt=YN(fT);console.log("Firebase inicializado correctamente");console.log("Auth:",Yi);console.log("Firestore:",yt);const gD=new Set(["admin.catalogo@adweb.com","admin.ventas@adweb.com"]),vu=t=>{if(!t)return t;const e=(t.email||"").toLowerCase();return gD.has(e)&&t.role!=="admin"?{...t,role:"admin",roleSource:"seeded"}:t};let Aa=null;const _D=()=>({user:null,loading:!1,error:null,authReady:!1,justLoggedInAt:null,sessionOrigin:null,lastToastTs:0,profile:null}),yD={isAuthenticated:t=>!!t.user,currentUser:t=>t.user,isLoading:t=>t.loading,getError:t=>t.error,isAuthReady:t=>t.authReady,currentProfile:t=>t.profile,currentRole:t=>t.profile?.role||"user",isAdmin:(t,e)=>e.currentRole==="admin"},vD={setUser(t,e){t.user=e},setLoading(t,e){t.loading=e},setError(t,e){t.error=e},setAuthReady(t,e){t.authReady=e},setJustLoggedInAt(t,e){t.justLoggedInAt=e},setSessionOrigin(t,e){t.sessionOrigin=e},setLastToastTs(t,e){t.lastToastTs=e},clearError(t){t.error=null},resetJustLogged(t){t.justLoggedInAt=null},setProfile(t,e){t.profile=e}},ED={async fetchUserProfile({commit:t},e){if(!e)return t("setProfile",null),null;const n=Pn(yt,"userProfiles",e.uid),r=await uD(n);if(!r.exists()){const i={uid:e.uid,email:(e.email||"").toLowerCase(),role:"user",createdAt:Zt(),updatedAt:Zt()};await Tg(n,i);const o=vu(i);return t("setProfile",o),o}const s=vu(r.data());return t("setProfile",s),s},async updateUserRole(t,{uid:e,role:n}){const r=Pn(yt,"userProfiles",e);await Hs(r,{role:n,updatedAt:Zt()})},initAuthStateListener({state:t,commit:e,dispatch:n}){return Aa||(e("setLoading",!0),Aa=new Promise(r=>{let s=!0;BP(Yi,async i=>{const o=t.user;if(e("setUser",i),i?await n("fetchUserProfile",i):e("setProfile",null),o==null&&i!=null){const l=i.uid,c=i.metadata?.lastSignInTime||"",u=`welcomed:${l}`;if((typeof window<"u"?window.localStorage.getItem(u):null)!==c){e("setSessionOrigin","onAuthStateChanged");const d=Date.now();d-t.lastToastTs>1e3&&(e("setJustLoggedInAt",d),e("setLastToastTs",d)),typeof window<"u"&&window.localStorage.setItem(u,c)}}s&&(e("setAuthReady",!0),e("setLoading",!1),s=!1,r(i))})}),Aa)},async registerUser({commit:t},{email:e,password:n}){t("setLoading",!0),t("clearError");try{t("setSessionOrigin","manual");const s=(await LP(Yi,e,n)).user;t("setUser",s);const i={uid:s.uid,email:(s.email||e).toLowerCase(),role:"user",createdAt:Zt(),updatedAt:Zt()};await Tg(Pn(yt,"userProfiles",s.uid),i);const o=vu({uid:s.uid,email:(s.email||e).toLowerCase(),role:"user"});return t("setProfile",o),{success:!0,user:s}}catch(r){const s=r?.message||"Ocurri un error al registrar usuario";return t("setError",s),{success:!1,error:s}}finally{t("setLoading",!1)}},async loginUser({commit:t},{email:e,password:n}){t("setLoading",!0),t("clearError");try{t("setSessionOrigin","manual");const r=await xP(Yi,e,n);return t("setUser",r.user),await dispatch("fetchUserProfile",r.user),{success:!0,user:r.user}}catch(r){const s=r?.message||"Ocurri un error al iniciar sesin";return t("setError",s),{success:!1,error:s}}finally{t("setLoading",!1)}},async logoutUser({commit:t}){t("setLoading",!0),t("clearError");try{return await UP(Yi),t("setUser",null),t("setSessionOrigin",null),t("setProfile",null),t("resetJustLogged"),{success:!0}}catch(e){const n=e?.message||"Ocurri un error al cerrar sesin";return t("setError",n),{success:!1,error:n}}finally{t("setLoading",!1)}}},TD={namespaced:!0,state:_D,getters:yD,mutations:vD,actions:ED},bD=()=>({courses:[],loading:!1,error:null,unsubscribe:null}),wD={allCourses:t=>t.courses,activeCourses:t=>t.courses.filter(e=>e.estado),getCourseByCode:t=>e=>t.courses.find(n=>n.codigo===e),isLoading:t=>t.loading,getError:t=>t.error,hasListener:t=>typeof t.unsubscribe=="function"},ID={setCourses(t,e){t.courses=e},setLoading(t,e){t.loading=e},setError(t,e){t.error=e},setUnsubscribe(t,e){t.unsubscribe=e},addCourseLocal(t,e){t.courses=[e,...t.courses]},updateCourseLocal(t,{id:e,data:n}){const r=t.courses.findIndex(s=>s.id===e);r!==-1&&t.courses.splice(r,1,{...t.courses[r],...n})},deleteCourseLocal(t,e){t.courses=t.courses.filter(n=>n.id!==e)},clearError(t){t.error=null}},AD={initCoursesListener({state:t,commit:e}){if(t.unsubscribe)return t.unsubscribe;e("setLoading",!0);const n=us(yt,"courses"),r=fD(n,s=>{const i=s.docs.map(o=>({id:o.id,...o.data()}));e("setCourses",i),e("setLoading",!1)},s=>{e("setError",s?.message||"Error al escuchar los cursos"),e("setLoading",!1)});return e("setUnsubscribe",r),r},stopListener({state:t,commit:e}){if(t.unsubscribe&&typeof t.unsubscribe=="function")try{t.unsubscribe()}finally{e("setUnsubscribe",null)}},async fetchCourses({commit:t}){t("setLoading",!0),t("clearError");try{const e=us(yt,"courses"),r=(await fh(e)).docs.map(s=>({id:s.id,...s.data()}));t("setCourses",r)}catch(e){t("setError",e?.message||"Error al obtener los cursos")}finally{t("setLoading",!1)}},async addCourse({state:t,commit:e},n){e("setLoading",!0),e("clearError");try{const r=us(yt,"courses"),s=await dh(r,n);return t.unsubscribe||e("addCourseLocal",{id:s.id,...n}),{success:!0,id:s.id}}catch(r){const s=r?.message||"Error al agregar el curso";return e("setError",s),{success:!1,error:s}}finally{e("setLoading",!1)}},async updateCourse({state:t,commit:e},{courseId:n,courseData:r}){e("setLoading",!0),e("clearError");try{const s=Pn(yt,"courses",n);return await Hs(s,r),t.unsubscribe||e("updateCourseLocal",{id:n,data:r}),{success:!0}}catch(s){const i=s?.message||"Error al actualizar el curso";return e("setError",i),{success:!1,error:i}}finally{e("setLoading",!1)}},async deleteCourse({state:t,commit:e},n){e("setLoading",!0),e("clearError");try{const r=Pn(yt,"courses",n);return await hD(r),t.unsubscribe||e("deleteCourseLocal",n),{success:!0}}catch(r){const s=r?.message||"Error al eliminar el curso";return e("setError",s),{success:!1,error:s}}finally{e("setLoading",!1)}},clearError({commit:t}){t("clearError")}},CD={namespaced:!0,state:bD,getters:wD,mutations:ID,actions:AD},SD=()=>({cart:null,cartLoading:!1,cartError:null,userCourses:[],coursesLoading:!1,coursesError:null}),RD={cartItems:t=>t.cart?.items||[],cartItemsCount:(t,e)=>e.cartItems.length,cartTotal:(t,e)=>e.cartItems.reduce((n,r)=>n+(r.precio||0),0),hasItemsInCart:(t,e)=>e.cartItemsCount>0,userCourses:t=>t.userCourses},PD={setCart(t,e){t.cart=e},setCartLoading(t,e){t.cartLoading=e},setCartError(t,e){t.cartError=e},setUserCourses(t,e){t.userCourses=e},setCoursesLoading(t,e){t.coursesLoading=e},setCoursesError(t,e){t.coursesError=e}};async function Eu({rootGetters:t}){const e=t["auth/currentUser"];if(!e)throw new Error("Debes iniciar sesin para usar el carrito");return e}const kD={async ensureCart({state:t,commit:e,rootGetters:n}){const r=await Eu({rootGetters:n});if(t.cart&&t.cart.userId===r.uid&&t.cart.status==="pending")return t.cart;e("setCartLoading",!0),e("setCartError",null);try{const s=oD(us(yt,"orders"),yg("userId","==",r.uid),yg("status","==","pending"),aD(1)),i=await fh(s);if(i.empty){const c={userId:r.uid,status:"pending",items:[],createdAt:Zt(),updatedAt:Zt()},u=await dh(us(yt,"orders"),c),h={...c,id:u.id,items:[]};return e("setCart",h),{...h,id:u.id}}const o=i.docs[0],l={id:o.id,...o.data()};return e("setCart",l),l}catch(s){throw console.error("[orders] ensureCart error",s),e("setCartError",s?.message||"No fue posible obtener el carrito"),s}finally{e("setCartLoading",!1)}},async addCourseToCart({commit:t,dispatch:e},n){if(!n||!n.id)return{success:!1,error:"Curso invlido"};const r=await e("ensureCart"),s=Array.isArray(r.items)?[...r.items]:[];if(s.some(o=>o.courseId===n.id))return{success:!0,duplicated:!0};const i={courseId:n.id,nombre:n.nombre,codigo:n.codigo,precio:Number(n.precio)||0};s.push(i);try{return await Hs(Pn(yt,"orders",r.id),{items:s,updatedAt:Zt()}),t("setCart",{...r,items:s}),{success:!0}}catch(o){return console.error("[orders] addCourseToCart error",o),t("setCartError",o?.message||"No fue posible agregar el curso al carrito"),{success:!1,error:o?.message}}},async removeCourseFromCart({state:t,commit:e},n){if(!t.cart?.id)return;const r=(t.cart.items||[]).filter(s=>s.courseId!==n);try{await Hs(Pn(yt,"orders",t.cart.id),{items:r,updatedAt:Zt()}),e("setCart",{...t.cart,items:r})}catch(s){console.error("[orders] removeCourseFromCart error",s),e("setCartError","No fue posible quitar el curso del carrito")}},async clearCart({state:t,commit:e}){if(t.cart?.id)try{await Hs(Pn(yt,"orders",t.cart.id),{items:[],updatedAt:Zt()}),e("setCart",{...t.cart,items:[]})}catch(n){console.error("[orders] clearCart error",n),e("setCartError","No fue posible limpiar el carrito")}},async checkoutCart({state:t,commit:e,dispatch:n,rootGetters:r}){if(!t.cart?.id)return{success:!1,error:"No hay carrito activo"};if(!t.cart.items||t.cart.items.length===0)return{success:!1,error:"Agrega cursos antes de finalizar"};const s=await Eu({rootGetters:r}),i=t.cart.items.reduce((o,l)=>o+(l.precio||0),0);try{await Hs(Pn(yt,"orders",t.cart.id),{status:"completed",total:i,completedAt:Zt(),updatedAt:Zt()});const o=us(yt,"userCourses",s.uid,"courses");for(const l of t.cart.items)await dh(o,{...l,purchasedAt:Zt(),orderId:t.cart.id,userId:s.uid});return e("setCart",null),await n("ensureCart"),await n("fetchUserCourses"),{success:!0,total:i}}catch(o){return console.error("[orders] checkoutCart error",o),e("setCartError",o?.message||"No fue posible finalizar la compra"),{success:!1,error:o?.message}}},async fetchUserCourses({commit:t,rootGetters:e}){const n=await Eu({rootGetters:e});t("setCoursesLoading",!0),t("setCoursesError",null);try{const r=us(yt,"userCourses",n.uid,"courses"),i=(await fh(r)).docs.map(o=>({id:o.id,...o.data()}));return t("setUserCourses",i),i}catch(r){return console.error("[orders] fetchUserCourses error",r),t("setCoursesError",r?.message||"No fue posible obtener tus cursos"),[]}finally{t("setCoursesLoading",!1)}}},OD={namespaced:!0,state:SD,getters:RD,mutations:PD,actions:kD},dT=NS({modules:{auth:TD,courses:CD,orders:OD}}),Ic=aI(XS);Ic.use(dT);Ic.use($y);Ic.use(pS());dT.dispatch("auth/initAuthStateListener");Ic.mount("#app");export{BD as $,gt as A,EA as B,sI as C,wd as D,LD as E,Ut as F,ru as G,ro as H,$D as I,jC as J,lS as K,oD as L,us as M,yg as N,fh as O,yt as P,MD as Q,$e as R,Wt as S,ps as T,Qa as U,T_ as V,Gb as W,M_ as X,eS as Y,wt as Z,JC as _,QC as a,Ms as a0,zD as a1,Ay as a2,xD as a3,Mo as a4,HD as a5,YD as a6,qn as a7,UD as a8,Kl as a9,WD as aA,nS as aB,L_ as aC,ZC as aD,$d as aE,FD as aF,JD as aG,mS as aa,GD as ab,Fn as ac,QD as ad,oV as ae,jD as af,Vb as ag,sV as ah,_r as ai,iV as aj,uV as ak,ZD as al,qC as am,cV as an,lV as ao,VD as ap,aV as aq,XD as ar,qD as as,Kd as at,eV as au,rV as av,nV as aw,tV as ax,HC as ay,KD as az,Oa as b,Q as c,gn as d,Ft as e,at as f,z as g,hi as h,ls as i,DS as j,ND as k,ot as l,hn as m,Fe as n,Ne as o,Ur as p,ql as q,$t as r,ze as s,zn as t,pi as u,vt as v,qt as w,Xt as x,DD as y,Xl as z};
