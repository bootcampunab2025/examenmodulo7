import{d as $,u as N,a as L,c as y,_ as A,b as D,e as x,o as l,w as v,f as _,m as I,g as u,r as V,h as w,i as c,t as r,j as H,k as m,l as t,n as P,p as E,q as S,s as f,v as h,F as O,x as T,y as F,z as q,A as j}from"./index-CRZrPRAq.js";import{_ as R,u as z}from"./courses-G8dxDpfp.js";import{_ as M,a as U,b as W,c as G,d as J}from"./BCard.vue_vue_type_script_setup_true_lang-BAaV9t2h-DzWkc57T.js";const K=$({__name:"BBadge",props:{dotIndicator:{type:Boolean,default:!1},pill:{type:Boolean,default:!1},placement:{default:void 0},tag:{default:"span"},active:{type:Boolean,default:void 0},activeClass:{default:void 0},disabled:{type:Boolean,default:void 0},exactActiveClass:{default:void 0},href:{default:void 0},icon:{type:Boolean,default:void 0},noRel:{type:Boolean},opacity:{default:void 0},opacityHover:{default:void 0},prefetch:{type:Boolean},prefetchOn:{},noPrefetch:{type:Boolean},prefetchedClass:{},rel:{default:void 0},replace:{type:Boolean,default:void 0},routerComponentName:{default:void 0},stretched:{type:Boolean,default:!1},target:{default:void 0},to:{default:void 0},underlineOffset:{default:void 0},underlineOffsetHover:{default:void 0},underlineOpacity:{default:void 0},underlineOpacityHover:{default:void 0},underlineVariant:{default:void 0},variant:{default:"secondary"},bgVariant:{default:null},textVariant:{default:null}},setup(i){const s=N(i,"BBadge"),{computedLink:a,computedLinkProps:p}=L(s,["active","activeClass","append","disabled","href","rel","replace","routerComponentName","target","to","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover","icon"]),g=y(()=>a.value?A:s.tag),B=y(()=>{const n=s.placement??(s.dotIndicator?"top-end":void 0);return["position-absolute","translate-middle",{"start-0 top-0":n==="top-start","start-0 top-50":n==="start","start-0 top-100":n==="bottom-start","start-50 top-0":n==="top","start-50 top-100":n==="bottom","start-100 top-0":n==="top-end","start-100 top-50":n==="end","start-100 top-100":n==="bottom-end"}]}),C=D(s),b=y(()=>[C.value,s.placement!==void 0||s.dotIndicator===!0?B.value:void 0,{active:s.active,disabled:s.disabled,"rounded-pill":s.pill,"p-2 border border-light rounded-circle":s.dotIndicator,"text-decoration-none":a.value}]);return(n,o)=>(l(),x(w(g.value),I({class:["badge",b.value]},u(p)),{default:v(()=>[_(R,I({skip:u(s).dotIndicator!==!0,tag:"span"},u(s).dotIndicator?{class:"visually-hidden"}:{}),{default:v(()=>[V(n.$slots,"default")]),_:3},16,["skip"])]),_:3},16,["class"]))}}),Q=$({__name:"BCardText",props:{tag:{default:"p"},text:{default:void 0}},setup(i){const s=N(i,"BCardText");return(a,p)=>(l(),x(w(u(s).tag),{class:"card-text"},{default:v(()=>[V(a.$slots,"default",{},()=>[c(r(u(s).text),1)])]),_:3}))}}),X={name:"CourseCard",components:{BCard:J,BCardImg:G,BCardBody:W,BCardTitle:U,BCardText:Q,BBadge:K,BProgressBar:M},props:{course:{type:Object,required:!0}},setup(i){return{inscriptionPercentage:y(()=>i.course.cupos===0?0:Math.round(i.course.inscritos/i.course.cupos*100)),formatPrice:a=>new Intl.NumberFormat("es-CL",{style:"decimal",minimumFractionDigits:0}).format(a)}}},Y={class:"d-flex justify-content-between align-items-start gap-2 mb-2"},Z={class:"mt-auto"},ee={class:"text-muted"},te=["disabled"];function se(i,e,s,a,p,g){const B=m("BCardImg"),C=m("BCardTitle"),b=m("BBadge"),n=m("BCardText"),o=m("BProgressBar"),d=m("BCardBody"),k=m("BCard");return l(),x(k,{class:"course-card h-100"},{default:v(()=>[_(B,{src:s.course.img,alt:s.course.nombre,top:"",class:"course-image"},null,8,["src","alt"]),_(d,{class:"d-flex flex-column"},{default:v(()=>[t("div",Y,[_(C,{class:"mb-0"},{default:v(()=>[c(r(s.course.nombre),1)]),_:1}),_(b,{variant:s.course.estado?"success":"secondary"},{default:v(()=>[c(r(s.course.estado?"Disponible":"Inactivo"),1)]),_:1},8,["variant"])]),_(n,{class:"flex-grow-1"},{default:v(()=>[e[1]||(e[1]=t("strong",null,"C贸digo:",-1)),c(" "+r(s.course.codigo),1),e[2]||(e[2]=t("br",null,null,-1)),e[3]||(e[3]=t("strong",null,"Descripci贸n:",-1)),c(" "+r(s.course.descripcion),1),e[4]||(e[4]=t("br",null,null,-1)),e[5]||(e[5]=t("strong",null,"Duraci贸n:",-1)),c(" "+r(s.course.duracion),1),e[6]||(e[6]=t("br",null,null,-1)),e[7]||(e[7]=t("strong",null,"Precio:",-1)),c(" $"+r(a.formatPrice(s.course.precio)),1),e[8]||(e[8]=t("br",null,null,-1)),e[9]||(e[9]=t("strong",null,"Cupos:",-1)),c(" "+r(s.course.cupos),1),e[10]||(e[10]=t("br",null,null,-1)),e[11]||(e[11]=t("strong",null,"Inscritos:",-1)),c(" "+r(s.course.inscritos),1)]),_:1}),t("div",Z,[_(o,{value:a.inscriptionPercentage,max:100,class:"mb-2",height:"8px"},null,8,["value"]),t("small",ee,r(a.inscriptionPercentage)+"% de cupos ocupados ",1),t("button",{class:"enroll-btn",disabled:!s.course.estado,onClick:e[0]||(e[0]=Be=>i.$emit("enroll",s.course))},r(s.course.estado?"Inscribirme":"No disponible"),9,te)])]),_:1})]),_:1})}const oe=H(X,[["render",se],["__scopeId","data-v-cd1b31cc"]]),ne={class:"home-container"},ae={class:"content-wrapper"},re={key:0,class:"loading-section"},le={key:1,class:"error-section"},ie={class:"error-content"},de={key:2},ue={class:"filters-section"},ce={class:"filters-container"},pe={class:"filter-buttons"},fe=["onClick"],ve={key:0,class:"courses-grid"},me={key:1,class:"no-courses-section"},_e={class:"no-courses-content"},ge={class:"no-courses-text"},Ce={__name:"HomeView",setup(i){const e=z(),s=F(),a=q(),p=P("all"),g=P(null),B=[{text:"Todos",value:"all"},{text:"Solo Activos",value:"active"}],C=y(()=>p.value==="active"?e.activeCourses:e.allCourses);E(()=>{g.value=e.initCoursesListener()}),S(()=>{g.value&&g.value()});const b=n=>{const o={name:"admin",query:{highlightedCourse:n.id}};if(!s.isAuthenticated){a.push({name:"login",query:{redirect:a.resolve(o).href}});return}a.push(o)};return(n,o)=>(l(),f("div",ne,[o[5]||(o[5]=t("div",{class:"hero-section"},[t("div",{class:"hero-content"},[t("h1",{class:"hero-title"},"Bienvenido a AdWeb Online"),t("p",{class:"hero-subtitle"}," Plataforma de cursos de programaci贸n y desarrollo web ")])],-1)),t("div",ae,[u(e).isLoading?(l(),f("div",re,[...o[1]||(o[1]=[t("div",{class:"loading-spinner-large"},null,-1),t("p",{class:"loading-text"},"Cargando cursos...",-1)])])):h("",!0),u(e).getError?(l(),f("div",le,[t("div",ie,[t("div",null,[o[2]||(o[2]=t("h4",null,"Error al cargar los cursos",-1)),t("p",null,r(u(e).getError),1)])])])):h("",!0),!u(e).isLoading&&!u(e).getError?(l(),f("div",de,[t("div",ue,[t("div",ce,[o[3]||(o[3]=t("h3",{class:"filters-title"}," Filtrar cursos: ",-1)),t("div",pe,[(l(),f(O,null,T(B,d=>t("button",{key:d.value,class:j(["filter-btn",{active:p.value===d.value}]),onClick:k=>p.value=d.value},r(d.text),11,fe)),64))])])]),C.value.length>0?(l(),f("div",ve,[(l(!0),f(O,null,T(C.value,d=>(l(),x(oe,{key:d.id,course:d,onEnroll:b},null,8,["course"]))),128))])):(l(),f("div",me,[t("div",_e,[o[4]||(o[4]=t("h4",{class:"no-courses-title"},"No hay cursos disponibles",-1)),t("p",ge,r(p.value==="active"?"No hay cursos activos en este momento.":"No se encontraron cursos."),1),t("button",{class:"add-course-btn",onClick:o[0]||(o[0]=d=>n.$router.push("/admin"))}," Agregar Cursos ")])]))])):h("",!0)])]))}},he=H(Ce,[["__scopeId","data-v-165d96e1"]]);export{he as default};
