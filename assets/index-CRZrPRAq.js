const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-DGuWBdrT.js","assets/courses-G8dxDpfp.js","assets/BCard.vue_vue_type_script_setup_true_lang-BAaV9t2h-DzWkc57T.js","assets/HomeView-C70lDU-5.css","assets/LoginView-CLmNsapE.js","assets/LoginView-EOD9WSD1.css","assets/RegisterView-CkEX-1i_.js","assets/BFormInput.vue_vue_type_script_setup_true_lang-B9E5yJEs-D2xcDSvY.js","assets/RegisterView-CrVO5LIr.css","assets/AdminView-E8t8Asw2.js","assets/CourseForm-rrynGJvb.js","assets/CourseForm-D47y8cO3.css","assets/AdminView-DzYGjVeg.css","assets/EditCourseView-CsxW1uQx.js","assets/EditCourseView-BZ_7jVEv.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function eh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ne={},Bs=[],An=()=>{},Zg=()=>!1,bl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),th=t=>t.startsWith("onUpdate:"),ct=Object.assign,nh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},dT=Object.prototype.hasOwnProperty,Le=(t,e)=>dT.call(t,e),ce=Array.isArray,Us=t=>ko(t)==="[object Map]",wl=t=>ko(t)==="[object Set]",ed=t=>ko(t)==="[object Date]",_e=t=>typeof t=="function",Ge=t=>typeof t=="string",hn=t=>typeof t=="symbol",Be=t=>t!==null&&typeof t=="object",em=t=>(Be(t)||_e(t))&&_e(t.then)&&_e(t.catch),tm=Object.prototype.toString,ko=t=>tm.call(t),pT=t=>ko(t).slice(8,-1),nm=t=>ko(t)==="[object Object]",rh=t=>Ge(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ki=eh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Il=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},gT=/-\w/g,Xt=Il(t=>t.replace(gT,e=>e.slice(1).toUpperCase())),mT=/\B([A-Z])/g,Lr=Il(t=>t.replace(mT,"-$1").toLowerCase()),Al=Il(t=>t.charAt(0).toUpperCase()+t.slice(1)),Sc=Il(t=>t?`on${Al(t)}`:""),Ht=(t,e)=>!Object.is(t,e),va=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},rm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},au=t=>{const e=parseFloat(t);return isNaN(e)?t:e},_T=t=>{const e=Ge(t)?Number(t):NaN;return isNaN(e)?t:e};let td;const Sl=()=>td||(td=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Oo(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ge(r)?TT(r):Oo(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ge(t)||Be(t))return t}const yT=/;(?![^(]*\))/g,vT=/:([^]+)/,ET=/\/\*[^]*?\*\//g;function TT(t){const e={};return t.replace(ET,"").split(yT).forEach(n=>{if(n){const r=n.split(vT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function St(t){let e="";if(Ge(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const r=St(t[n]);r&&(e+=r+" ")}else if(Be(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Ln(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ge(e)&&(t.class=St(e)),n&&(t.style=Oo(n)),t}const bT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wT=eh(bT);function sm(t){return!!t||t===""}function IT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Cl(t[r],e[r]);return n}function Cl(t,e){if(t===e)return!0;let n=ed(t),r=ed(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=hn(t),r=hn(e),n||r)return t===e;if(n=ce(t),r=ce(e),n||r)return n&&r?IT(t,e):!1;if(n=Be(t),r=Be(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Cl(t[o],e[o]))return!1}}return String(t)===String(e)}function im(t,e){return t.findIndex(n=>Cl(n,e))}const om=t=>!!(t&&t.__v_isRef===!0),qn=t=>Ge(t)?t:t==null?"":ce(t)||Be(t)&&(t.toString===tm||!_e(t.toString))?om(t)?qn(t.value):JSON.stringify(t,am,2):String(t),am=(t,e)=>om(e)?am(t,e.value):Us(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Cc(r,i)+" =>"]=s,n),{})}:wl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Cc(n))}:hn(e)?Cc(e):Be(e)&&!ce(e)&&!nm(e)?String(e):e,Cc=(t,e="")=>{var n;return hn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let At;class lm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=At,!e&&At&&(this.index=(At.scopes||(At.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=At;try{return At=this,e()}finally{At=n}}}on(){++this._on===1&&(this.prevScope=At,At=this)}off(){this._on>0&&--this._on===0&&(At=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function cm(t){return new lm(t)}function um(){return At}function AT(t,e=!1){At&&At.cleanups.push(t)}let je;const Rc=new WeakSet;class hm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,At&&At.active&&At.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rc.has(this)&&(Rc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||dm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nd(this),pm(this);const e=je,n=cn;je=this,cn=!0;try{return this.fn()}finally{gm(this),je=e,cn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)oh(e);this.deps=this.depsTail=void 0,nd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){lu(this)&&this.run()}get dirty(){return lu(this)}}let fm=0,Wi,Gi;function dm(t,e=!1){if(t.flags|=8,e){t.next=Gi,Gi=t;return}t.next=Wi,Wi=t}function sh(){fm++}function ih(){if(--fm>0)return;if(Gi){let e=Gi;for(Gi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Wi;){let e=Wi;for(Wi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function pm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function gm(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),oh(r),ST(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function lu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(mm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function mm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===uo)||(t.globalVersion=uo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!lu(t))))return;t.flags|=2;const e=t.dep,n=je,r=cn;je=t,cn=!0;try{pm(t);const s=t.fn(t._value);(e.version===0||Ht(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{je=n,cn=r,gm(t),t.flags&=-3}}function oh(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)oh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function ST(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let cn=!0;const _m=[];function Gn(){_m.push(cn),cn=!1}function Qn(){const t=_m.pop();cn=t===void 0?!0:t}function nd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=je;je=void 0;try{e()}finally{je=n}}}let uo=0;class CT{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!je||!cn||je===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==je)n=this.activeLink=new CT(je,this),je.deps?(n.prevDep=je.depsTail,je.depsTail.nextDep=n,je.depsTail=n):je.deps=je.depsTail=n,ym(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=je.depsTail,n.nextDep=void 0,je.depsTail.nextDep=n,je.depsTail=n,je.deps===n&&(je.deps=r)}return n}trigger(e){this.version++,uo++,this.notify(e)}notify(e){sh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ih()}}}function ym(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)ym(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const La=new WeakMap,is=Symbol(""),cu=Symbol(""),ho=Symbol("");function Rt(t,e,n){if(cn&&je){let r=La.get(t);r||La.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Rl),s.map=r,s.key=n),s.track()}}function jn(t,e,n,r,s,i){const o=La.get(t);if(!o){uo++;return}const l=c=>{c&&c.trigger()};if(sh(),e==="clear")o.forEach(l);else{const c=ce(t),u=c&&rh(n);if(c&&n==="length"){const h=Number(r);o.forEach((d,g)=>{(g==="length"||g===ho||!hn(g)&&g>=h)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(ho)),e){case"add":c?u&&l(o.get("length")):(l(o.get(is)),Us(t)&&l(o.get(cu)));break;case"delete":c||(l(o.get(is)),Us(t)&&l(o.get(cu)));break;case"set":Us(t)&&l(o.get(is));break}}ih()}function RT(t,e){const n=La.get(t);return n&&n.get(e)}function Ss(t){const e=Oe(t);return e===t?e:(Rt(e,"iterate",ho),sn(t)?e:e.map(_t))}function Pl(t){return Rt(t=Oe(t),"iterate",ho),t}const PT={__proto__:null,[Symbol.iterator](){return Pc(this,Symbol.iterator,_t)},concat(...t){return Ss(this).concat(...t.map(e=>ce(e)?Ss(e):e))},entries(){return Pc(this,"entries",t=>(t[1]=_t(t[1]),t))},every(t,e){return xn(this,"every",t,e,void 0,arguments)},filter(t,e){return xn(this,"filter",t,e,n=>n.map(_t),arguments)},find(t,e){return xn(this,"find",t,e,_t,arguments)},findIndex(t,e){return xn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return xn(this,"findLast",t,e,_t,arguments)},findLastIndex(t,e){return xn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return xn(this,"forEach",t,e,void 0,arguments)},includes(...t){return kc(this,"includes",t)},indexOf(...t){return kc(this,"indexOf",t)},join(t){return Ss(this).join(t)},lastIndexOf(...t){return kc(this,"lastIndexOf",t)},map(t,e){return xn(this,"map",t,e,void 0,arguments)},pop(){return Ni(this,"pop")},push(...t){return Ni(this,"push",t)},reduce(t,...e){return rd(this,"reduce",t,e)},reduceRight(t,...e){return rd(this,"reduceRight",t,e)},shift(){return Ni(this,"shift")},some(t,e){return xn(this,"some",t,e,void 0,arguments)},splice(...t){return Ni(this,"splice",t)},toReversed(){return Ss(this).toReversed()},toSorted(t){return Ss(this).toSorted(t)},toSpliced(...t){return Ss(this).toSpliced(...t)},unshift(...t){return Ni(this,"unshift",t)},values(){return Pc(this,"values",_t)}};function Pc(t,e,n){const r=Pl(t),s=r[e]();return r!==t&&!sn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const kT=Array.prototype;function xn(t,e,n,r,s,i){const o=Pl(t),l=o!==t&&!sn(t),c=o[e];if(c!==kT[e]){const d=c.apply(t,i);return l?_t(d):d}let u=n;o!==t&&(l?u=function(d,g){return n.call(this,_t(d),g,t)}:n.length>2&&(u=function(d,g){return n.call(this,d,g,t)}));const h=c.call(o,u,r);return l&&s?s(h):h}function rd(t,e,n,r){const s=Pl(t);let i=n;return s!==t&&(sn(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,_t(l),c,t)}),s[e](i,...r)}function kc(t,e,n){const r=Oe(t);Rt(r,"iterate",ho);const s=r[e](...n);return(s===-1||s===!1)&&ah(n[0])?(n[0]=Oe(n[0]),r[e](...n)):s}function Ni(t,e,n=[]){Gn(),sh();const r=Oe(t)[e].apply(t,n);return ih(),Qn(),r}const OT=eh("__proto__,__v_isRef,__isVue"),vm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(hn));function NT(t){hn(t)||(t=String(t));const e=Oe(this);return Rt(e,"has",t),e.hasOwnProperty(t)}class Em{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Sm:Am:i?Im:wm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ce(e);if(!s){let c;if(o&&(c=PT[n]))return c;if(n==="hasOwnProperty")return NT}const l=Reflect.get(e,n,Ze(e)?e:r);if((hn(n)?vm.has(n):OT(n))||(s||Rt(e,"get",n),i))return l;if(Ze(l)){const c=o&&rh(n)?l:l.value;return s&&Be(c)?zt(c):c}return Be(l)?s?zt(l):No(l):l}}class Tm extends Em{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=Cr(i);if(!sn(r)&&!Cr(r)&&(i=Oe(i),r=Oe(r)),!ce(e)&&Ze(i)&&!Ze(r))return c||(i.value=r),!0}const o=ce(e)&&rh(n)?Number(n)<e.length:Le(e,n),l=Reflect.set(e,n,r,Ze(e)?e:s);return e===Oe(s)&&(o?Ht(r,i)&&jn(e,"set",n,r):jn(e,"add",n,r)),l}deleteProperty(e,n){const r=Le(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&jn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!hn(n)||!vm.has(n))&&Rt(e,"has",n),r}ownKeys(e){return Rt(e,"iterate",ce(e)?"length":is),Reflect.ownKeys(e)}}class bm extends Em{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const DT=new Tm,VT=new bm,LT=new Tm(!0),xT=new bm(!0),uu=t=>t,ra=t=>Reflect.getPrototypeOf(t);function MT(t,e,n){return function(...r){const s=this.__v_raw,i=Oe(s),o=Us(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?uu:e?xa:_t;return!e&&Rt(i,"iterate",c?cu:is),{next(){const{value:d,done:g}=u.next();return g?{value:d,done:g}:{value:l?[h(d[0]),h(d[1])]:h(d),done:g}},[Symbol.iterator](){return this}}}}function sa(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function FT(t,e){const n={get(s){const i=this.__v_raw,o=Oe(i),l=Oe(s);t||(Ht(s,l)&&Rt(o,"get",s),Rt(o,"get",l));const{has:c}=ra(o),u=e?uu:t?xa:_t;if(c.call(o,s))return u(i.get(s));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Rt(Oe(s),"iterate",is),s.size},has(s){const i=this.__v_raw,o=Oe(i),l=Oe(s);return t||(Ht(s,l)&&Rt(o,"has",s),Rt(o,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const o=this,l=o.__v_raw,c=Oe(l),u=e?uu:t?xa:_t;return!t&&Rt(c,"iterate",is),l.forEach((h,d)=>s.call(i,u(h),u(d),o))}};return ct(n,t?{add:sa("add"),set:sa("set"),delete:sa("delete"),clear:sa("clear")}:{add(s){!e&&!sn(s)&&!Cr(s)&&(s=Oe(s));const i=Oe(this);return ra(i).has.call(i,s)||(i.add(s),jn(i,"add",s,s)),this},set(s,i){!e&&!sn(i)&&!Cr(i)&&(i=Oe(i));const o=Oe(this),{has:l,get:c}=ra(o);let u=l.call(o,s);u||(s=Oe(s),u=l.call(o,s));const h=c.call(o,s);return o.set(s,i),u?Ht(i,h)&&jn(o,"set",s,i):jn(o,"add",s,i),this},delete(s){const i=Oe(this),{has:o,get:l}=ra(i);let c=o.call(i,s);c||(s=Oe(s),c=o.call(i,s)),l&&l.call(i,s);const u=i.delete(s);return c&&jn(i,"delete",s,void 0),u},clear(){const s=Oe(this),i=s.size!==0,o=s.clear();return i&&jn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=MT(s,t,e)}),n}function kl(t,e){const n=FT(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Le(n,s)&&s in r?n:r,s,i)}const BT={get:kl(!1,!1)},UT={get:kl(!1,!0)},$T={get:kl(!0,!1)},jT={get:kl(!0,!0)},wm=new WeakMap,Im=new WeakMap,Am=new WeakMap,Sm=new WeakMap;function HT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qT(t){return t.__v_skip||!Object.isExtensible(t)?0:HT(pT(t))}function No(t){return Cr(t)?t:Ol(t,!1,DT,BT,wm)}function Cm(t){return Ol(t,!1,LT,UT,Im)}function zt(t){return Ol(t,!0,VT,$T,Am)}function zT(t){return Ol(t,!0,xT,jT,Sm)}function Ol(t,e,n,r,s){if(!Be(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=qT(t);if(i===0)return t;const o=s.get(t);if(o)return o;const l=new Proxy(t,i===2?r:n);return s.set(t,l),l}function $s(t){return Cr(t)?$s(t.__v_raw):!!(t&&t.__v_isReactive)}function Cr(t){return!!(t&&t.__v_isReadonly)}function sn(t){return!!(t&&t.__v_isShallow)}function ah(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function KT(t){return!Le(t,"__v_skip")&&Object.isExtensible(t)&&rm(t,"__v_skip",!0),t}const _t=t=>Be(t)?No(t):t,xa=t=>Be(t)?zt(t):t;function Ze(t){return t?t.__v_isRef===!0:!1}function Fe(t){return Rm(t,!1)}function Zt(t){return Rm(t,!0)}function Rm(t,e){return Ze(t)?t:new WT(t,e)}class WT{constructor(e,n){this.dep=new Rl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Oe(e),this._value=n?e:_t(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||sn(e)||Cr(e);e=r?e:Oe(e),Ht(e,n)&&(this._rawValue=e,this._value=r?e:_t(e),this.dep.trigger())}}function W(t){return Ze(t)?t.value:t}function $e(t){return _e(t)?t():W(t)}const GT={get:(t,e,n)=>e==="__v_raw"?t:W(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ze(s)&&!Ze(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Pm(t){return $s(t)?t:new Proxy(t,GT)}class QT{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Rl,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function km(t){return new QT(t)}class YT{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return RT(Oe(this._object),this._key)}}class JT{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ls(t,e,n){return Ze(t)?t:_e(t)?new JT(t):Be(t)&&arguments.length>1?XT(t,e,n):Fe(t)}function XT(t,e,n){const r=t[e];return Ze(r)?r:new YT(t,e,n)}class ZT{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Rl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=uo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&je!==this)return dm(this,!0),!0}get value(){const e=this.dep.track();return mm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function eb(t,e,n=!1){let r,s;return _e(t)?r=t:(r=t.get,s=t.set),new ZT(r,s,n)}const ia={},Ma=new WeakMap;let Xr;function tb(t,e=!1,n=Xr){if(n){let r=Ma.get(n);r||Ma.set(n,r=[]),r.push(t)}}function nb(t,e,n=Ne){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:l,call:c}=n,u=q=>s?q:sn(q)||s===!1||s===0?Hn(q,1):Hn(q);let h,d,g,_,R=!1,P=!1;if(Ze(t)?(d=()=>t.value,R=sn(t)):$s(t)?(d=()=>u(t),R=!0):ce(t)?(P=!0,R=t.some(q=>$s(q)||sn(q)),d=()=>t.map(q=>{if(Ze(q))return q.value;if($s(q))return u(q);if(_e(q))return c?c(q,2):q()})):_e(t)?e?d=c?()=>c(t,2):t:d=()=>{if(g){Gn();try{g()}finally{Qn()}}const q=Xr;Xr=h;try{return c?c(t,3,[_]):t(_)}finally{Xr=q}}:d=An,e&&s){const q=d,Q=s===!0?1/0:s;d=()=>Hn(q(),Q)}const k=um(),V=()=>{h.stop(),k&&k.active&&nh(k.effects,h)};if(i&&e){const q=e;e=(...Q)=>{q(...Q),V()}}let L=P?new Array(t.length).fill(ia):ia;const H=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const Q=h.run();if(s||R||(P?Q.some((Z,I)=>Ht(Z,L[I])):Ht(Q,L))){g&&g();const Z=Xr;Xr=h;try{const I=[Q,L===ia?void 0:P&&L[0]===ia?[]:L,_];L=Q,c?c(e,3,I):e(...I)}finally{Xr=Z}}}else h.run()};return l&&l(H),h=new hm(d),h.scheduler=o?()=>o(H,!1):H,_=q=>tb(q,!1,h),g=h.onStop=()=>{const q=Ma.get(h);if(q){if(c)c(q,4);else for(const Q of q)Q();Ma.delete(h)}},e?r?H(!0):L=h.run():o?o(H.bind(null,!0),!0):h.run(),V.pause=h.pause.bind(h),V.resume=h.resume.bind(h),V.stop=V,V}function Hn(t,e=1/0,n){if(e<=0||!Be(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Ze(t))Hn(t.value,e,n);else if(ce(t))for(let r=0;r<t.length;r++)Hn(t[r],e,n);else if(wl(t)||Us(t))t.forEach(r=>{Hn(r,e,n)});else if(nm(t)){for(const r in t)Hn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Hn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Do(t,e,n,r){try{return r?t(...r):t()}catch(s){Nl(s,e,n)}}function fn(t,e,n,r){if(_e(t)){const s=Do(t,e,n,r);return s&&em(s)&&s.catch(i=>{Nl(i,e,n)}),s}if(ce(t)){const s=[];for(let i=0;i<t.length;i++)s.push(fn(t[i],e,n,r));return s}}function Nl(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ne;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,c,u)===!1)return}l=l.parent}if(i){Gn(),Do(i,null,10,[t,c,u]),Qn();return}}rb(t,n,s,r,o)}function rb(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Ft=[];let bn=-1;const js=[];let dr=null,ks=0;const Om=Promise.resolve();let Fa=null;function Un(t){const e=Fa||Om;return t?e.then(this?t.bind(this):t):e}function sb(t){let e=bn+1,n=Ft.length;for(;e<n;){const r=e+n>>>1,s=Ft[r],i=fo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function lh(t){if(!(t.flags&1)){const e=fo(t),n=Ft[Ft.length-1];!n||!(t.flags&2)&&e>=fo(n)?Ft.push(t):Ft.splice(sb(e),0,t),t.flags|=1,Nm()}}function Nm(){Fa||(Fa=Om.then(Vm))}function ib(t){ce(t)?js.push(...t):dr&&t.id===-1?dr.splice(ks+1,0,t):t.flags&1||(js.push(t),t.flags|=1),Nm()}function sd(t,e,n=bn+1){for(;n<Ft.length;n++){const r=Ft[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ft.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Dm(t){if(js.length){const e=[...new Set(js)].sort((n,r)=>fo(n)-fo(r));if(js.length=0,dr){dr.push(...e);return}for(dr=e,ks=0;ks<dr.length;ks++){const n=dr[ks];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}dr=null,ks=0}}const fo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Vm(t){try{for(bn=0;bn<Ft.length;bn++){const e=Ft[bn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Do(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;bn<Ft.length;bn++){const e=Ft[bn];e&&(e.flags&=-2)}bn=-1,Ft.length=0,Dm(),Fa=null,(Ft.length||js.length)&&Vm()}}let vt=null,Lm=null;function Ba(t){const e=vt;return vt=t,Lm=t&&t.type.__scopeId||null,e}function jt(t,e=vt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&qa(-1);const i=Ba(e);let o;try{o=t(...s)}finally{Ba(i),r._d&&qa(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function id(t,e){if(vt===null)return t;const n=Bl(vt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,l,c=Ne]=e[s];i&&(_e(i)&&(i={mounted:i,updated:i}),i.deep&&Hn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Wr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(Gn(),fn(c,n,8,[t.el,l,t,e]),Qn())}}const xm=Symbol("_vte"),Mm=t=>t.__isTeleport,Qi=t=>t&&(t.disabled||t.disabled===""),od=t=>t&&(t.defer||t.defer===""),ad=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ld=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,hu=(t,e)=>{const n=t&&t.to;return Ge(n)?e?e(n):null:n},Fm={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,l,c,u){const{mc:h,pc:d,pbc:g,o:{insert:_,querySelector:R,createText:P,createComment:k}}=u,V=Qi(e.props);let{shapeFlag:L,children:H,dynamicChildren:q}=e;if(t==null){const Q=e.el=P(""),Z=e.anchor=P("");_(Q,n,r),_(Z,n,r);const I=(E,C)=>{L&16&&h(H,E,C,s,i,o,l,c)},v=()=>{const E=e.target=hu(e.props,R),C=Bm(E,e,P,_);E&&(o!=="svg"&&ad(E)?o="svg":o!=="mathml"&&ld(E)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(E),V||(I(E,C),Ea(e,!1)))};V&&(I(n,Z),Ea(e,!0)),od(e.props)?(e.el.__isMounted=!1,xt(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(od(e.props)&&t.el.__isMounted===!1){xt(()=>{Fm.process(t,e,n,r,s,i,o,l,c,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const Q=e.anchor=t.anchor,Z=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=Qi(t.props),E=v?n:Z,C=v?Q:I;if(o==="svg"||ad(Z)?o="svg":(o==="mathml"||ld(Z))&&(o="mathml"),q?(g(t.dynamicChildren,q,E,s,i,o,l),fh(t,e,!0)):c||d(t,e,E,C,s,i,o,l,!1),V)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):oa(e,n,Q,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const A=e.target=hu(e.props,R);A&&oa(e,A,null,u,0)}else v&&oa(e,Z,I,u,1);Ea(e,V)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:l,anchor:c,targetStart:u,targetAnchor:h,target:d,props:g}=t;if(d&&(s(u),s(h)),i&&s(c),o&16){const _=i||!Qi(g);for(let R=0;R<l.length;R++){const P=l[R];r(P,e,n,_,!!P.dynamicChildren)}}},move:oa,hydrate:ob};function oa(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:l,shapeFlag:c,children:u,props:h}=t,d=i===2;if(d&&r(o,e,n),(!d||Qi(h))&&c&16)for(let g=0;g<u.length;g++)s(u[g],e,n,2);d&&r(l,e,n)}function ob(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:l,querySelector:c,insert:u,createText:h}},d){function g(P,k,V,L){k.anchor=d(o(P),k,l(P),n,r,s,i),k.targetStart=V,k.targetAnchor=L}const _=e.target=hu(e.props,c),R=Qi(e.props);if(_){const P=_._lpa||_.firstChild;if(e.shapeFlag&16)if(R)g(t,e,P,P&&o(P));else{e.anchor=o(t);let k=P;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,_._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||Bm(_,e,h,u),d(P&&o(P),e,_,n,r,s,i)}Ea(e,R)}else R&&e.shapeFlag&16&&g(t,e,t,o(t));return e.anchor&&o(e.anchor)}const ab=Fm;function Ea(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Bm(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[xm]=i,t&&(r(s,t),r(i,t)),i}const $n=Symbol("_leaveCb"),aa=Symbol("_enterCb");function lb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xr(()=>{t.isMounted=!0}),ch(()=>{t.isUnmounting=!0}),t}const en=[Function,Array],Um={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:en,onEnter:en,onAfterEnter:en,onEnterCancelled:en,onBeforeLeave:en,onLeave:en,onAfterLeave:en,onLeaveCancelled:en,onBeforeAppear:en,onAppear:en,onAfterAppear:en,onAppearCancelled:en},$m=t=>{const e=t.subTree;return e.component?$m(e.component):e},cb={name:"BaseTransition",props:Um,setup(t,{slots:e}){const n=_n(),r=lb();return()=>{const s=e.default&&qm(e.default(),!0);if(!s||!s.length)return;const i=jm(s),o=Oe(t),{mode:l}=o;if(r.isLeaving)return Oc(i);const c=cd(i);if(!c)return Oc(i);let u=fu(c,o,r,n,d=>u=d);c.type!==Ot&&po(c,u);let h=n.subTree&&cd(n.subTree);if(h&&h.type!==Ot&&!es(h,c)&&$m(n).type!==Ot){let d=fu(h,o,r,n);if(po(h,d),l==="out-in"&&c.type!==Ot)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},Oc(i);l==="in-out"&&c.type!==Ot?d.delayLeave=(g,_,R)=>{const P=Hm(r,h);P[String(h.key)]=h,g[$n]=()=>{_(),g[$n]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{R(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function jm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Ot){e=n;break}}return e}const ub=cb;function Hm(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function fu(t,e,n,r,s){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:g,onLeave:_,onAfterLeave:R,onLeaveCancelled:P,onBeforeAppear:k,onAppear:V,onAfterAppear:L,onAppearCancelled:H}=e,q=String(t.key),Q=Hm(n,t),Z=(E,C)=>{E&&fn(E,r,9,C)},I=(E,C)=>{const A=C[1];Z(E,C),ce(E)?E.every(T=>T.length<=1)&&A():E.length<=1&&A()},v={mode:o,persisted:l,beforeEnter(E){let C=c;if(!n.isMounted)if(i)C=k||c;else return;E[$n]&&E[$n](!0);const A=Q[q];A&&es(t,A)&&A.el[$n]&&A.el[$n](),Z(C,[E])},enter(E){let C=u,A=h,T=d;if(!n.isMounted)if(i)C=V||u,A=L||h,T=H||d;else return;let m=!1;const F=E[aa]=te=>{m||(m=!0,te?Z(T,[E]):Z(A,[E]),v.delayedLeave&&v.delayedLeave(),E[aa]=void 0)};C?I(C,[E,F]):F()},leave(E,C){const A=String(t.key);if(E[aa]&&E[aa](!0),n.isUnmounting)return C();Z(g,[E]);let T=!1;const m=E[$n]=F=>{T||(T=!0,C(),F?Z(P,[E]):Z(R,[E]),E[$n]=void 0,Q[A]===t&&delete Q[A])};Q[A]=t,_?I(_,[E,m]):m()},clone(E){const C=fu(E,e,n,r,s);return s&&s(C),C}};return v}function Oc(t){if(Dl(t))return t=Rr(t),t.children=null,t}function cd(t){if(!Dl(t))return Mm(t.type)&&t.children?jm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&_e(n.default))return n.default()}}function po(t,e){t.shapeFlag&6&&t.component?(t.transition=e,po(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function qm(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Bt?(o.patchFlag&128&&s++,r=r.concat(qm(o.children,e,l))):(e||o.type!==Ot)&&r.push(l!=null?Rr(o,{key:l}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function dn(t,e){return _e(t)?ct({name:t.name},e,{setup:t}):t}function zm(){const t=_n();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Km(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Os(t){const e=_n(),n=Zt(null);if(e){const s=e.refs===Ne?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}const Ua=new WeakMap;function Yi(t,e,n,r,s=!1){if(ce(t)){t.forEach((R,P)=>Yi(R,e&&(ce(e)?e[P]:e),n,r,s));return}if(Hs(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Yi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Bl(r.component):r.el,o=s?null:i,{i:l,r:c}=t,u=e&&e.r,h=l.refs===Ne?l.refs={}:l.refs,d=l.setupState,g=Oe(d),_=d===Ne?Zg:R=>Le(g,R);if(u!=null&&u!==c){if(ud(e),Ge(u))h[u]=null,_(u)&&(d[u]=null);else if(Ze(u)){u.value=null;const R=e;R.k&&(h[R.k]=null)}}if(_e(c))Do(c,l,12,[o,h]);else{const R=Ge(c),P=Ze(c);if(R||P){const k=()=>{if(t.f){const V=R?_(c)?d[c]:h[c]:c.value;if(s)ce(V)&&nh(V,i);else if(ce(V))V.includes(i)||V.push(i);else if(R)h[c]=[i],_(c)&&(d[c]=h[c]);else{const L=[i];c.value=L,t.k&&(h[t.k]=L)}}else R?(h[c]=o,_(c)&&(d[c]=o)):P&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const V=()=>{k(),Ua.delete(t)};V.id=-1,Ua.set(t,V),xt(V,n)}else ud(t),k()}}}function ud(t){const e=Ua.get(t);e&&(e.flags|=8,Ua.delete(t))}Sl().requestIdleCallback;Sl().cancelIdleCallback;const Hs=t=>!!t.type.__asyncLoader,Dl=t=>t.type.__isKeepAlive;function hb(t,e){Wm(t,"a",e)}function fb(t,e){Wm(t,"da",e)}function Wm(t,e,n=Nt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Vl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Dl(s.parent.vnode)&&db(r,e,n,s),s=s.parent}}function db(t,e,n,r){const s=Vl(e,t,r,!0);Ll(()=>{nh(r[e],s)},n)}function Vl(t,e,n=Nt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Gn();const l=Vo(n),c=fn(e,n,t,o);return l(),Qn(),c});return r?s.unshift(i):s.push(i),i}}const tr=t=>(e,n=Nt)=>{(!_o||t==="sp")&&Vl(t,(...r)=>e(...r),n)},pb=tr("bm"),xr=tr("m"),gb=tr("bu"),mb=tr("u"),ch=tr("bum"),Ll=tr("um"),_b=tr("sp"),yb=tr("rtg"),vb=tr("rtc");function Eb(t,e=Nt){Vl("ec",t,e)}const Gm="components";function sD(t,e){return Ym(Gm,t,!0,e)||t}const Qm=Symbol.for("v-ndc");function ii(t){return Ge(t)?Ym(Gm,t,!1)||t:t||Qm}function Ym(t,e,n=!0,r=!1){const s=vt||Nt;if(s){const i=s.type;{const l=iw(i,!1);if(l&&(l===e||l===Xt(e)||l===Al(Xt(e))))return i}const o=hd(s[t]||i[t],e)||hd(s.appContext[t],e);return!o&&r?i:o}}function hd(t,e){return t&&(t[e]||t[Xt(e)]||t[Al(Xt(e))])}function iD(t,e,n,r){let s;const i=n,o=ce(t);if(o||Ge(t)){const l=o&&$s(t);let c=!1,u=!1;l&&(c=!sn(t),u=Cr(t),t=Pl(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(c?u?xa(_t(t[h])):_t(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,i)}else if(Be(t))if(t[Symbol.iterator])s=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);s=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];s[c]=e(t[h],h,c,i)}}else s=[];return s}function oD(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(ce(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function Ut(t,e,n={},r,s){if(vt.ce||vt.parent&&Hs(vt.parent)&&vt.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),De(),Mt(Bt,null,[ot("slot",n,r&&r())],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),De();const o=i&&Jm(i(n)),l=n.key||o&&o.key,c=Mt(Bt,{key:(l&&!hn(l)?l:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Jm(t){return t.some(e=>mo(e)?!(e.type===Ot||e.type===Bt&&!Jm(e.children)):!0)?t:null}const du=t=>t?E_(t)?Bl(t):du(t.parent):null,Ji=ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>du(t.parent),$root:t=>du(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>t_(t),$forceUpdate:t=>t.f||(t.f=()=>{lh(t.update)}),$nextTick:t=>t.n||(t.n=Un.bind(t.proxy)),$watch:t=>Hb.bind(t)}),Nc=(t,e)=>t!==Ne&&!t.__isScriptSetup&&Le(t,e),Tb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Nc(r,e))return o[e]=1,r[e];if(s!==Ne&&Le(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Le(u,e))return o[e]=3,i[e];if(n!==Ne&&Le(n,e))return o[e]=4,n[e];pu&&(o[e]=0)}}const h=Ji[e];let d,g;if(h)return e==="$attrs"&&Rt(t.attrs,"get",""),h(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==Ne&&Le(n,e))return o[e]=4,n[e];if(g=c.config.globalProperties,Le(g,e))return g[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Nc(s,e)?(s[e]=n,!0):r!==Ne&&Le(r,e)?(r[e]=n,!0):Le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},l){let c,u;return!!(n[l]||t!==Ne&&l[0]!=="$"&&Le(t,l)||Nc(e,l)||(c=i[0])&&Le(c,l)||Le(r,l)||Le(Ji,l)||Le(s.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Xm(){return Zm().slots}function bb(){return Zm().attrs}function Zm(t){const e=_n();return e.setupContext||(e.setupContext=b_(e))}function $a(t){return ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function ja(t,e){return!t||!e?t||e:ce(t)&&ce(e)?t.concat(e):ct({},$a(t),$a(e))}let pu=!0;function wb(t){const e=t_(t),n=t.proxy,r=t.ctx;pu=!1,e.beforeCreate&&fd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:d,mounted:g,beforeUpdate:_,updated:R,activated:P,deactivated:k,beforeDestroy:V,beforeUnmount:L,destroyed:H,unmounted:q,render:Q,renderTracked:Z,renderTriggered:I,errorCaptured:v,serverPrefetch:E,expose:C,inheritAttrs:A,components:T,directives:m,filters:F}=e;if(u&&Ib(u,r,null),o)for(const oe in o){const ie=o[oe];_e(ie)&&(r[oe]=ie.bind(n))}if(s){const oe=s.call(n,n);Be(oe)&&(t.data=No(oe))}if(pu=!0,i)for(const oe in i){const ie=i[oe],fe=_e(ie)?ie.bind(n,n):_e(ie.get)?ie.get.bind(n,n):An,we=!_e(ie)&&_e(ie.set)?ie.set.bind(n):An,be=Y({get:fe,set:we});Object.defineProperty(r,oe,{enumerable:!0,configurable:!0,get:()=>be.value,set:Re=>be.value=Re})}if(l)for(const oe in l)e_(l[oe],r,n,oe);if(c){const oe=_e(c)?c.call(n):c;Reflect.ownKeys(oe).forEach(ie=>{Xi(ie,oe[ie])})}h&&fd(h,t,"c");function le(oe,ie){ce(ie)?ie.forEach(fe=>oe(fe.bind(n))):ie&&oe(ie.bind(n))}if(le(pb,d),le(xr,g),le(gb,_),le(mb,R),le(hb,P),le(fb,k),le(Eb,v),le(vb,Z),le(yb,I),le(ch,L),le(Ll,q),le(_b,E),ce(C))if(C.length){const oe=t.exposed||(t.exposed={});C.forEach(ie=>{Object.defineProperty(oe,ie,{get:()=>n[ie],set:fe=>n[ie]=fe,enumerable:!0})})}else t.exposed||(t.exposed={});Q&&t.render===An&&(t.render=Q),A!=null&&(t.inheritAttrs=A),T&&(t.components=T),m&&(t.directives=m),E&&Km(t)}function Ib(t,e,n=An){ce(t)&&(t=gu(t));for(const r in t){const s=t[r];let i;Be(s)?"default"in s?i=Et(s.from||r,s.default,!0):i=Et(s.from||r):i=Et(s),Ze(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function fd(t,e,n){fn(ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function e_(t,e,n,r){let s=r.includes(".")?d_(n,r):()=>n[r];if(Ge(t)){const i=e[t];_e(i)&&We(s,i)}else if(_e(t))We(s,t.bind(n));else if(Be(t))if(ce(t))t.forEach(i=>e_(i,e,n,r));else{const i=_e(t.handler)?t.handler.bind(n):e[t.handler];_e(i)&&We(s,i,t)}}function t_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Ha(c,u,o,!0)),Ha(c,e,o)),Be(e)&&i.set(e,c),c}function Ha(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Ha(t,i,n,!0),s&&s.forEach(o=>Ha(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const l=Ab[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const Ab={data:dd,props:pd,emits:pd,methods:Fi,computed:Fi,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:Fi,directives:Fi,watch:Cb,provide:dd,inject:Sb};function dd(t,e){return e?t?function(){return ct(_e(t)?t.call(this,this):t,_e(e)?e.call(this,this):e)}:e:t}function Sb(t,e){return Fi(gu(t),gu(e))}function gu(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function Fi(t,e){return t?ct(Object.create(null),t,e):e}function pd(t,e){return t?ce(t)&&ce(e)?[...new Set([...t,...e])]:ct(Object.create(null),$a(t),$a(e??{})):e}function Cb(t,e){if(!t)return e;if(!e)return t;const n=ct(Object.create(null),t);for(const r in e)n[r]=Lt(t[r],e[r]);return n}function n_(){return{app:null,config:{isNativeTag:Zg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Rb=0;function Pb(t,e){return function(r,s=null){_e(r)||(r=ct({},r)),s!=null&&!Be(s)&&(s=null);const i=n_(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:Rb++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:aw,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&_e(h.install)?(o.add(h),h.install(u,...d)):_e(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,g){if(!c){const _=u._ceVNode||ot(r,s);return _.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(_,h,g),c=!0,u._container=h,h.__vue_app__=u,Bl(_.component)}},onUnmount(h){l.push(h)},unmount(){c&&(fn(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=qs;qs=u;try{return h()}finally{qs=d}}};return u}}let qs=null;function Xi(t,e){if(Nt){let n=Nt.provides;const r=Nt.parent&&Nt.parent.provides;r===n&&(n=Nt.provides=Object.create(r)),n[t]=e}}function Et(t,e,n=!1){const r=_n();if(r||qs){let s=qs?qs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&_e(e)?e.call(r&&r.proxy):e}}const r_={},s_=()=>Object.create(r_),i_=t=>Object.getPrototypeOf(t)===r_;function kb(t,e,n,r=!1){const s={},i=s_();t.propsDefaults=Object.create(null),o_(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Cm(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Ob(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,l=Oe(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let g=h[d];if(Ml(t.emitsOptions,g))continue;const _=e[g];if(c)if(Le(i,g))_!==i[g]&&(i[g]=_,u=!0);else{const R=Xt(g);s[R]=mu(c,l,R,_,t,!1)}else _!==i[g]&&(i[g]=_,u=!0)}}}else{o_(t,e,s,i)&&(u=!0);let h;for(const d in l)(!e||!Le(e,d)&&((h=Lr(d))===d||!Le(e,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=mu(c,l,d,void 0,t,!0)):delete s[d]);if(i!==l)for(const d in i)(!e||!Le(e,d))&&(delete i[d],u=!0)}u&&jn(t.attrs,"set","")}function o_(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Ki(c))continue;const u=e[c];let h;s&&Le(s,h=Xt(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:Ml(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Oe(n),u=l||Ne;for(let h=0;h<i.length;h++){const d=i[h];n[d]=mu(s,c,d,u[d],t,!Le(u,d))}}return o}function mu(t,e,n,r,s,i){const o=t[n];if(o!=null){const l=Le(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&_e(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Vo(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===Lr(n))&&(r=!0))}return r}const Nb=new WeakMap;function a_(t,e,n=!1){const r=n?Nb:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},l=[];let c=!1;if(!_e(t)){const h=d=>{c=!0;const[g,_]=a_(d,e,!0);ct(o,g),_&&l.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Be(t)&&r.set(t,Bs),Bs;if(ce(i))for(let h=0;h<i.length;h++){const d=Xt(i[h]);gd(d)&&(o[d]=Ne)}else if(i)for(const h in i){const d=Xt(h);if(gd(d)){const g=i[h],_=o[d]=ce(g)||_e(g)?{type:g}:ct({},g),R=_.type;let P=!1,k=!0;if(ce(R))for(let V=0;V<R.length;++V){const L=R[V],H=_e(L)&&L.name;if(H==="Boolean"){P=!0;break}else H==="String"&&(k=!1)}else P=_e(R)&&R.name==="Boolean";_[0]=P,_[1]=k,(P||Le(_,"default"))&&l.push(d)}}const u=[o,l];return Be(t)&&r.set(t,u),u}function gd(t){return t[0]!=="$"&&!Ki(t)}const uh=t=>t==="_"||t==="_ctx"||t==="$stable",hh=t=>ce(t)?t.map(In):[In(t)],Db=(t,e,n)=>{if(e._n)return e;const r=jt((...s)=>hh(e(...s)),n);return r._c=!1,r},l_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(uh(s))continue;const i=t[s];if(_e(i))e[s]=Db(s,i,r);else if(i!=null){const o=hh(i);e[s]=()=>o}}},c_=(t,e)=>{const n=hh(e);t.slots.default=()=>n},u_=(t,e,n)=>{for(const r in e)(n||!uh(r))&&(t[r]=e[r])},Vb=(t,e,n)=>{const r=t.slots=s_();if(t.vnode.shapeFlag&32){const s=e._;s?(u_(r,e,n),n&&rm(r,"_",s,!0)):l_(e,r)}else e&&c_(t,e)},Lb=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ne;if(r.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:u_(s,e,n):(i=!e.$stable,l_(e,s)),o=e}else e&&(c_(t,e),o={default:1});if(i)for(const l in s)!uh(l)&&o[l]==null&&delete s[l]},xt=Yb;function xb(t){return Mb(t)}function Mb(t,e){const n=Sl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:g,setScopeId:_=An,insertStaticContent:R}=t,P=(b,S,w,D=null,B=null,x=null,G=void 0,U=null,$=!!S.dynamicChildren)=>{if(b===S)return;b&&!es(b,S)&&(D=M(b),Re(b,B,x,!0),b=null),S.patchFlag===-2&&($=!1,S.dynamicChildren=null);const{type:K,ref:de,shapeFlag:re}=S;switch(K){case Fl:k(b,S,w,D);break;case Ot:V(b,S,w,D);break;case Vc:b==null&&L(S,w,D,G);break;case Bt:T(b,S,w,D,B,x,G,U,$);break;default:re&1?Q(b,S,w,D,B,x,G,U,$):re&6?m(b,S,w,D,B,x,G,U,$):(re&64||re&128)&&K.process(b,S,w,D,B,x,G,U,$,ne)}de!=null&&B?Yi(de,b&&b.ref,x,S||b,!S):de==null&&b&&b.ref!=null&&Yi(b.ref,null,x,b,!0)},k=(b,S,w,D)=>{if(b==null)r(S.el=l(S.children),w,D);else{const B=S.el=b.el;S.children!==b.children&&u(B,S.children)}},V=(b,S,w,D)=>{b==null?r(S.el=c(S.children||""),w,D):S.el=b.el},L=(b,S,w,D)=>{[b.el,b.anchor]=R(b.children,S,w,D,b.el,b.anchor)},H=({el:b,anchor:S},w,D)=>{let B;for(;b&&b!==S;)B=g(b),r(b,w,D),b=B;r(S,w,D)},q=({el:b,anchor:S})=>{let w;for(;b&&b!==S;)w=g(b),s(b),b=w;s(S)},Q=(b,S,w,D,B,x,G,U,$)=>{S.type==="svg"?G="svg":S.type==="math"&&(G="mathml"),b==null?Z(S,w,D,B,x,G,U,$):E(b,S,B,x,G,U,$)},Z=(b,S,w,D,B,x,G,U)=>{let $,K;const{props:de,shapeFlag:re,transition:ue,dirs:pe}=b;if($=b.el=o(b.type,x,de&&de.is,de),re&8?h($,b.children):re&16&&v(b.children,$,null,D,B,Dc(b,x),G,U),pe&&Wr(b,null,D,"created"),I($,b,b.scopeId,G,D),de){for(const Me in de)Me!=="value"&&!Ki(Me)&&i($,Me,null,de[Me],x,D);"value"in de&&i($,"value",null,de.value,x),(K=de.onVnodeBeforeMount)&&Tn(K,D,b)}pe&&Wr(b,null,D,"beforeMount");const Ie=Fb(B,ue);Ie&&ue.beforeEnter($),r($,S,w),((K=de&&de.onVnodeMounted)||Ie||pe)&&xt(()=>{K&&Tn(K,D,b),Ie&&ue.enter($),pe&&Wr(b,null,D,"mounted")},B)},I=(b,S,w,D,B)=>{if(w&&_(b,w),D)for(let x=0;x<D.length;x++)_(b,D[x]);if(B){let x=B.subTree;if(S===x||__(x.type)&&(x.ssContent===S||x.ssFallback===S)){const G=B.vnode;I(b,G,G.scopeId,G.slotScopeIds,B.parent)}}},v=(b,S,w,D,B,x,G,U,$=0)=>{for(let K=$;K<b.length;K++){const de=b[K]=U?pr(b[K]):In(b[K]);P(null,de,S,w,D,B,x,G,U)}},E=(b,S,w,D,B,x,G)=>{const U=S.el=b.el;let{patchFlag:$,dynamicChildren:K,dirs:de}=S;$|=b.patchFlag&16;const re=b.props||Ne,ue=S.props||Ne;let pe;if(w&&Gr(w,!1),(pe=ue.onVnodeBeforeUpdate)&&Tn(pe,w,S,b),de&&Wr(S,b,w,"beforeUpdate"),w&&Gr(w,!0),(re.innerHTML&&ue.innerHTML==null||re.textContent&&ue.textContent==null)&&h(U,""),K?C(b.dynamicChildren,K,U,w,D,Dc(S,B),x):G||ie(b,S,U,null,w,D,Dc(S,B),x,!1),$>0){if($&16)A(U,re,ue,w,B);else if($&2&&re.class!==ue.class&&i(U,"class",null,ue.class,B),$&4&&i(U,"style",re.style,ue.style,B),$&8){const Ie=S.dynamicProps;for(let Me=0;Me<Ie.length;Me++){const ke=Ie[Me],bt=re[ke],wt=ue[ke];(wt!==bt||ke==="value")&&i(U,ke,bt,wt,B,w)}}$&1&&b.children!==S.children&&h(U,S.children)}else!G&&K==null&&A(U,re,ue,w,B);((pe=ue.onVnodeUpdated)||de)&&xt(()=>{pe&&Tn(pe,w,S,b),de&&Wr(S,b,w,"updated")},D)},C=(b,S,w,D,B,x,G)=>{for(let U=0;U<S.length;U++){const $=b[U],K=S[U],de=$.el&&($.type===Bt||!es($,K)||$.shapeFlag&198)?d($.el):w;P($,K,de,null,D,B,x,G,!0)}},A=(b,S,w,D,B)=>{if(S!==w){if(S!==Ne)for(const x in S)!Ki(x)&&!(x in w)&&i(b,x,S[x],null,B,D);for(const x in w){if(Ki(x))continue;const G=w[x],U=S[x];G!==U&&x!=="value"&&i(b,x,U,G,B,D)}"value"in w&&i(b,"value",S.value,w.value,B)}},T=(b,S,w,D,B,x,G,U,$)=>{const K=S.el=b?b.el:l(""),de=S.anchor=b?b.anchor:l("");let{patchFlag:re,dynamicChildren:ue,slotScopeIds:pe}=S;pe&&(U=U?U.concat(pe):pe),b==null?(r(K,w,D),r(de,w,D),v(S.children||[],w,de,B,x,G,U,$)):re>0&&re&64&&ue&&b.dynamicChildren?(C(b.dynamicChildren,ue,w,B,x,G,U),(S.key!=null||B&&S===B.subTree)&&fh(b,S,!0)):ie(b,S,w,de,B,x,G,U,$)},m=(b,S,w,D,B,x,G,U,$)=>{S.slotScopeIds=U,b==null?S.shapeFlag&512?B.ctx.activate(S,w,D,G,$):F(S,w,D,B,x,G,$):te(b,S,$)},F=(b,S,w,D,B,x,G)=>{const U=b.component=tw(b,D,B);if(Dl(b)&&(U.ctx.renderer=ne),nw(U,!1,G),U.asyncDep){if(B&&B.registerDep(U,le,G),!b.el){const $=U.subTree=ot(Ot);V(null,$,S,w),b.placeholder=$.el}}else le(U,b,S,w,B,x,G)},te=(b,S,w)=>{const D=S.component=b.component;if(Gb(b,S,w))if(D.asyncDep&&!D.asyncResolved){oe(D,S,w);return}else D.next=S,D.update();else S.el=b.el,D.vnode=S},le=(b,S,w,D,B,x,G)=>{const U=()=>{if(b.isMounted){let{next:re,bu:ue,u:pe,parent:Ie,vnode:Me}=b;{const Gt=h_(b);if(Gt){re&&(re.el=Me.el,oe(b,re,G)),Gt.asyncDep.then(()=>{b.isUnmounted||U()});return}}let ke=re,bt;Gr(b,!1),re?(re.el=Me.el,oe(b,re,G)):re=Me,ue&&va(ue),(bt=re.props&&re.props.onVnodeBeforeUpdate)&&Tn(bt,Ie,re,Me),Gr(b,!0);const wt=_d(b),Wt=b.subTree;b.subTree=wt,P(Wt,wt,d(Wt.el),M(Wt),b,B,x),re.el=wt.el,ke===null&&Qb(b,wt.el),pe&&xt(pe,B),(bt=re.props&&re.props.onVnodeUpdated)&&xt(()=>Tn(bt,Ie,re,Me),B)}else{let re;const{el:ue,props:pe}=S,{bm:Ie,m:Me,parent:ke,root:bt,type:wt}=b,Wt=Hs(S);Gr(b,!1),Ie&&va(Ie),!Wt&&(re=pe&&pe.onVnodeBeforeMount)&&Tn(re,ke,S),Gr(b,!0);{bt.ce&&bt.ce._def.shadowRoot!==!1&&bt.ce._injectChildStyle(wt);const Gt=b.subTree=_d(b);P(null,Gt,w,D,b,B,x),S.el=Gt.el}if(Me&&xt(Me,B),!Wt&&(re=pe&&pe.onVnodeMounted)){const Gt=S;xt(()=>Tn(re,ke,Gt),B)}(S.shapeFlag&256||ke&&Hs(ke.vnode)&&ke.vnode.shapeFlag&256)&&b.a&&xt(b.a,B),b.isMounted=!0,S=w=D=null}};b.scope.on();const $=b.effect=new hm(U);b.scope.off();const K=b.update=$.run.bind($),de=b.job=$.runIfDirty.bind($);de.i=b,de.id=b.uid,$.scheduler=()=>lh(de),Gr(b,!0),K()},oe=(b,S,w)=>{S.component=b;const D=b.vnode.props;b.vnode=S,b.next=null,Ob(b,S.props,D,w),Lb(b,S.children,w),Gn(),sd(b),Qn()},ie=(b,S,w,D,B,x,G,U,$=!1)=>{const K=b&&b.children,de=b?b.shapeFlag:0,re=S.children,{patchFlag:ue,shapeFlag:pe}=S;if(ue>0){if(ue&128){we(K,re,w,D,B,x,G,U,$);return}else if(ue&256){fe(K,re,w,D,B,x,G,U,$);return}}pe&8?(de&16&&Qe(K,B,x),re!==K&&h(w,re)):de&16?pe&16?we(K,re,w,D,B,x,G,U,$):Qe(K,B,x,!0):(de&8&&h(w,""),pe&16&&v(re,w,D,B,x,G,U,$))},fe=(b,S,w,D,B,x,G,U,$)=>{b=b||Bs,S=S||Bs;const K=b.length,de=S.length,re=Math.min(K,de);let ue;for(ue=0;ue<re;ue++){const pe=S[ue]=$?pr(S[ue]):In(S[ue]);P(b[ue],pe,w,null,B,x,G,U,$)}K>de?Qe(b,B,x,!0,!1,re):v(S,w,D,B,x,G,U,$,re)},we=(b,S,w,D,B,x,G,U,$)=>{let K=0;const de=S.length;let re=b.length-1,ue=de-1;for(;K<=re&&K<=ue;){const pe=b[K],Ie=S[K]=$?pr(S[K]):In(S[K]);if(es(pe,Ie))P(pe,Ie,w,null,B,x,G,U,$);else break;K++}for(;K<=re&&K<=ue;){const pe=b[re],Ie=S[ue]=$?pr(S[ue]):In(S[ue]);if(es(pe,Ie))P(pe,Ie,w,null,B,x,G,U,$);else break;re--,ue--}if(K>re){if(K<=ue){const pe=ue+1,Ie=pe<de?S[pe].el:D;for(;K<=ue;)P(null,S[K]=$?pr(S[K]):In(S[K]),w,Ie,B,x,G,U,$),K++}}else if(K>ue)for(;K<=re;)Re(b[K],B,x,!0),K++;else{const pe=K,Ie=K,Me=new Map;for(K=Ie;K<=ue;K++){const gt=S[K]=$?pr(S[K]):In(S[K]);gt.key!=null&&Me.set(gt.key,K)}let ke,bt=0;const wt=ue-Ie+1;let Wt=!1,Gt=0;const on=new Array(wt);for(K=0;K<wt;K++)on[K]=0;for(K=pe;K<=re;K++){const gt=b[K];if(bt>=wt){Re(gt,B,x,!0);continue}let ht;if(gt.key!=null)ht=Me.get(gt.key);else for(ke=Ie;ke<=ue;ke++)if(on[ke-Ie]===0&&es(gt,S[ke])){ht=ke;break}ht===void 0?Re(gt,B,x,!0):(on[ht-Ie]=K+1,ht>=Gt?Gt=ht:Wt=!0,P(gt,S[ht],w,null,B,x,G,U,$),bt++)}const bs=Wt?Bb(on):Bs;for(ke=bs.length-1,K=wt-1;K>=0;K--){const gt=Ie+K,ht=S[gt],_i=S[gt+1],jr=gt+1<de?_i.el||_i.placeholder:D;on[K]===0?P(null,ht,w,jr,B,x,G,U,$):Wt&&(ke<0||K!==bs[ke]?be(ht,w,jr,2):ke--)}}},be=(b,S,w,D,B=null)=>{const{el:x,type:G,transition:U,children:$,shapeFlag:K}=b;if(K&6){be(b.component.subTree,S,w,D);return}if(K&128){b.suspense.move(S,w,D);return}if(K&64){G.move(b,S,w,ne);return}if(G===Bt){r(x,S,w);for(let re=0;re<$.length;re++)be($[re],S,w,D);r(b.anchor,S,w);return}if(G===Vc){H(b,S,w);return}if(D!==2&&K&1&&U)if(D===0)U.beforeEnter(x),r(x,S,w),xt(()=>U.enter(x),B);else{const{leave:re,delayLeave:ue,afterLeave:pe}=U,Ie=()=>{b.ctx.isUnmounted?s(x):r(x,S,w)},Me=()=>{x._isLeaving&&x[$n](!0),re(x,()=>{Ie(),pe&&pe()})};ue?ue(x,Ie,Me):Me()}else r(x,S,w)},Re=(b,S,w,D=!1,B=!1)=>{const{type:x,props:G,ref:U,children:$,dynamicChildren:K,shapeFlag:de,patchFlag:re,dirs:ue,cacheIndex:pe}=b;if(re===-2&&(B=!1),U!=null&&(Gn(),Yi(U,null,w,b,!0),Qn()),pe!=null&&(S.renderCache[pe]=void 0),de&256){S.ctx.deactivate(b);return}const Ie=de&1&&ue,Me=!Hs(b);let ke;if(Me&&(ke=G&&G.onVnodeBeforeUnmount)&&Tn(ke,S,b),de&6)ut(b.component,w,D);else{if(de&128){b.suspense.unmount(w,D);return}Ie&&Wr(b,null,S,"beforeUnmount"),de&64?b.type.remove(b,S,w,ne,D):K&&!K.hasOnce&&(x!==Bt||re>0&&re&64)?Qe(K,S,w,!1,!0):(x===Bt&&re&384||!B&&de&16)&&Qe($,S,w),D&&nt(b)}(Me&&(ke=G&&G.onVnodeUnmounted)||Ie)&&xt(()=>{ke&&Tn(ke,S,b),Ie&&Wr(b,null,S,"unmounted")},w)},nt=b=>{const{type:S,el:w,anchor:D,transition:B}=b;if(S===Bt){He(w,D);return}if(S===Vc){q(b);return}const x=()=>{s(w),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(b.shapeFlag&1&&B&&!B.persisted){const{leave:G,delayLeave:U}=B,$=()=>G(w,x);U?U(b.el,x,$):$()}else x()},He=(b,S)=>{let w;for(;b!==S;)w=g(b),s(b),b=w;s(S)},ut=(b,S,w)=>{const{bum:D,scope:B,job:x,subTree:G,um:U,m:$,a:K}=b;md($),md(K),D&&va(D),B.stop(),x&&(x.flags|=8,Re(G,b,S,w)),U&&xt(U,S),xt(()=>{b.isUnmounted=!0},S)},Qe=(b,S,w,D=!1,B=!1,x=0)=>{for(let G=x;G<b.length;G++)Re(b[G],S,w,D,B)},M=b=>{if(b.shapeFlag&6)return M(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const S=g(b.anchor||b.el),w=S&&S[xm];return w?g(w):S};let ee=!1;const X=(b,S,w)=>{b==null?S._vnode&&Re(S._vnode,null,null,!0):P(S._vnode||null,b,S,null,null,null,w),S._vnode=b,ee||(ee=!0,sd(),Dm(),ee=!1)},ne={p:P,um:Re,m:be,r:nt,mt:F,mc:v,pc:ie,pbc:C,n:M,o:t};return{render:X,hydrate:void 0,createApp:Pb(X)}}function Dc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Gr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Fb(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function fh(t,e,n=!1){const r=t.children,s=e.children;if(ce(r)&&ce(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=pr(s[i]),l.el=o.el),!n&&l.patchFlag!==-2&&fh(o,l)),l.type===Fl&&l.patchFlag!==-1&&(l.el=o.el),l.type===Ot&&!l.el&&(l.el=o.el)}}function Bb(t){const e=t.slice(),n=[0];let r,s,i,o,l;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function h_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:h_(e)}function md(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ub=Symbol.for("v-scx"),$b=()=>Et(Ub);function f_(t,e){return xl(t,null,e)}function jb(t,e){return xl(t,null,{flush:"sync"})}function We(t,e,n){return xl(t,e,n)}function xl(t,e,n=Ne){const{immediate:r,deep:s,flush:i,once:o}=n,l=ct({},n),c=e&&r||!e&&i!=="post";let u;if(_o){if(i==="sync"){const _=$b();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!c){const _=()=>{};return _.stop=An,_.resume=An,_.pause=An,_}}const h=Nt;l.call=(_,R,P)=>fn(_,h,R,P);let d=!1;i==="post"?l.scheduler=_=>{xt(_,h&&h.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(_,R)=>{R?_():lh(_)}),l.augmentJob=_=>{e&&(_.flags|=4),d&&(_.flags|=2,h&&(_.id=h.uid,_.i=h))};const g=nb(t,e,l);return _o&&(u?u.push(g):c&&g()),g}function Hb(t,e,n){const r=this.proxy,s=Ge(t)?t.includes(".")?d_(r,t):()=>r[t]:t.bind(r,r);let i;_e(e)?i=e:(i=e.handler,n=e);const o=Vo(this),l=xl(s,i.bind(r),n);return o(),l}function d_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function p_(t,e,n=Ne){const r=_n(),s=Xt(e),i=Lr(e),o=g_(t,s),l=km((c,u)=>{let h,d=Ne,g;return jb(()=>{const _=t[s];Ht(h,_)&&(h=_,u())}),{get(){return c(),n.get?n.get(h):h},set(_){const R=n.set?n.set(_):_;if(!Ht(R,h)&&!(d!==Ne&&Ht(_,d)))return;const P=r.vnode.props;P&&(e in P||s in P||i in P)&&(`onUpdate:${e}`in P||`onUpdate:${s}`in P||`onUpdate:${i}`in P)||(h=_,u()),r.emit(`update:${e}`,R),Ht(_,R)&&Ht(_,d)&&!Ht(R,g)&&u(),d=_,g=R}}});return l[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?o||Ne:l,done:!1}:{done:!0}}}},l}const g_=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Xt(e)}Modifiers`]||t[`${Lr(e)}Modifiers`];function qb(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ne;let s=n;const i=e.startsWith("update:"),o=i&&g_(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Ge(h)?h.trim():h)),o.number&&(s=n.map(au)));let l,c=r[l=Sc(e)]||r[l=Sc(Xt(e))];!c&&i&&(c=r[l=Sc(Lr(e))]),c&&fn(c,t,6,s);const u=r[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,fn(u,t,6,s)}}const zb=new WeakMap;function m_(t,e,n=!1){const r=n?zb:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},l=!1;if(!_e(t)){const c=u=>{const h=m_(u,e,!0);h&&(l=!0,ct(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Be(t)&&r.set(t,null),null):(ce(i)?i.forEach(c=>o[c]=null):ct(o,i),Be(t)&&r.set(t,o),o)}function Ml(t,e){return!t||!bl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,Lr(e))||Le(t,e))}function _d(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:d,data:g,setupState:_,ctx:R,inheritAttrs:P}=t,k=Ba(t);let V,L;try{if(n.shapeFlag&4){const q=s||r,Q=q;V=In(u.call(Q,q,h,d,_,g,R)),L=l}else{const q=e;V=In(q.length>1?q(d,{attrs:l,slots:o,emit:c}):q(d,null)),L=e.props?l:Kb(l)}}catch(q){Zi.length=0,Nl(q,t,1),V=ot(Ot)}let H=V;if(L&&P!==!1){const q=Object.keys(L),{shapeFlag:Q}=H;q.length&&Q&7&&(i&&q.some(th)&&(L=Wb(L,i)),H=Rr(H,L,!1,!0))}return n.dirs&&(H=Rr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&po(H,n.transition),V=H,Ba(k),V}const Kb=t=>{let e;for(const n in t)(n==="class"||n==="style"||bl(n))&&((e||(e={}))[n]=t[n]);return e},Wb=(t,e)=>{const n={};for(const r in t)(!th(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Gb(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?yd(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const g=h[d];if(o[g]!==r[g]&&!Ml(u,g))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?yd(r,o,u):!0:!!o;return!1}function yd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Ml(n,i))return!0}return!1}function Qb({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const __=t=>t.__isSuspense;function Yb(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):ib(t)}const Bt=Symbol.for("v-fgt"),Fl=Symbol.for("v-txt"),Ot=Symbol.for("v-cmt"),Vc=Symbol.for("v-stc"),Zi=[];let Yt=null;function De(t=!1){Zi.push(Yt=t?null:[])}function Jb(){Zi.pop(),Yt=Zi[Zi.length-1]||null}let go=1;function qa(t,e=!1){go+=t,t<0&&Yt&&e&&(Yt.hasOnce=!0)}function y_(t){return t.dynamicChildren=go>0?Yt||Bs:null,Jb(),go>0&&Yt&&Yt.push(t),t}function Pt(t,e,n,r,s,i){return y_(st(t,e,n,r,s,i,!0))}function Mt(t,e,n,r,s){return y_(ot(t,e,n,r,s,!0))}function mo(t){return t?t.__v_isVNode===!0:!1}function es(t,e){return t.type===e.type&&t.key===e.key}const v_=({key:t})=>t??null,Ta=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ge(t)||Ze(t)||_e(t)?{i:vt,r:t,k:e,f:!!n}:t:null);function st(t,e=null,n=null,r=0,s=null,i=t===Bt?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&v_(e),ref:e&&Ta(e),scopeId:Lm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:vt};return l?(dh(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Ge(n)?8:16),go>0&&!o&&Yt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Yt.push(c),c}const ot=Xb;function Xb(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Qm)&&(t=Ot),mo(t)){const l=Rr(t,e,!0);return n&&dh(l,n),go>0&&!i&&Yt&&(l.shapeFlag&6?Yt[Yt.indexOf(t)]=l:Yt.push(l)),l.patchFlag=-2,l}if(ow(t)&&(t=t.__vccOpts),e){e=fr(e);let{class:l,style:c}=e;l&&!Ge(l)&&(e.class=St(l)),Be(c)&&(ah(c)&&!ce(c)&&(c=ct({},c)),e.style=Oo(c))}const o=Ge(t)?1:__(t)?128:Mm(t)?64:Be(t)?4:_e(t)?2:0;return st(t,e,n,r,s,o,i,!0)}function fr(t){return t?ah(t)||i_(t)?ct({},t):t:null}function Rr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?an(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&v_(u),ref:e&&e.ref?n&&i?ce(i)?i.concat(Ta(e)):[i,Ta(e)]:Ta(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Bt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Rr(t.ssContent),ssFallback:t.ssFallback&&Rr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&po(h,c.clone(h)),h}function rs(t=" ",e=0){return ot(Fl,null,t,e)}function tn(t="",e=!1){return e?(De(),Mt(Ot,null,t)):ot(Ot,null,t)}function In(t){return t==null||typeof t=="boolean"?ot(Ot):ce(t)?ot(Bt,null,t.slice()):mo(t)?pr(t):ot(Fl,null,String(t))}function pr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Rr(t)}function dh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),dh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!i_(e)?e._ctx=vt:s===3&&vt&&(vt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _e(e)?(e={default:e,_ctx:vt},n=32):(e=String(e),r&64?(n=16,e=[rs(e)]):n=8);t.children=e,t.shapeFlag|=n}function an(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=St([e.class,r.class]));else if(s==="style")e.style=Oo([e.style,r.style]);else if(bl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ce(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Tn(t,e,n,r=null){fn(t,e,7,[n,r])}const Zb=n_();let ew=0;function tw(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Zb,i={uid:ew++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new lm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:a_(r,s),emitsOptions:m_(r,s),emit:null,emitted:null,propsDefaults:Ne,inheritAttrs:r.inheritAttrs,ctx:Ne,data:Ne,props:Ne,attrs:Ne,slots:Ne,refs:Ne,setupState:Ne,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=qb.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const _n=()=>Nt||vt;let za,_u;{const t=Sl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};za=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),_u=e("__VUE_SSR_SETTERS__",n=>_o=n)}const Vo=t=>{const e=Nt;return za(t),t.scope.on(),()=>{t.scope.off(),za(e)}},vd=()=>{Nt&&Nt.scope.off(),za(null)};function E_(t){return t.vnode.shapeFlag&4}let _o=!1;function nw(t,e=!1,n=!1){e&&_u(e);const{props:r,children:s}=t.vnode,i=E_(t);kb(t,r,i,e),Vb(t,s,n||e);const o=i?rw(t,e):void 0;return e&&_u(!1),o}function rw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Tb);const{setup:r}=n;if(r){Gn();const s=t.setupContext=r.length>1?b_(t):null,i=Vo(t),o=Do(r,t,0,[t.props,s]),l=em(o);if(Qn(),i(),(l||t.sp)&&!Hs(t)&&Km(t),l){if(o.then(vd,vd),e)return o.then(c=>{Ed(t,c)}).catch(c=>{Nl(c,t,0)});t.asyncDep=o}else Ed(t,o)}else T_(t)}function Ed(t,e,n){_e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Be(e)&&(t.setupState=Pm(e)),T_(t)}function T_(t,e,n){const r=t.type;t.render||(t.render=r.render||An);{const s=Vo(t);Gn();try{wb(t)}finally{Qn(),s()}}}const sw={get(t,e){return Rt(t,"get",""),t[e]}};function b_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,sw),slots:t.slots,emit:t.emit,expose:e}}function Bl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Pm(KT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ji)return Ji[n](t)},has(e,n){return n in e||n in Ji}})):t.proxy}function iw(t,e=!0){return _e(t)?t.displayName||t.name:t.name||e&&t.__name}function ow(t){return _e(t)&&"__vccOpts"in t}const Y=(t,e)=>eb(t,e,_o);function Ul(t,e,n){try{qa(-1);const r=arguments.length;return r===2?Be(e)&&!ce(e)?mo(e)?ot(t,null,[e]):ot(t,e):ot(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&mo(n)&&(n=[n]),ot(t,e,n))}finally{qa(1)}}const aw="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let yu;const Td=typeof window<"u"&&window.trustedTypes;if(Td)try{yu=Td.createPolicy("vue",{createHTML:t=>t})}catch{}const w_=yu?t=>yu.createHTML(t):t=>t,lw="http://www.w3.org/2000/svg",cw="http://www.w3.org/1998/Math/MathML",Bn=typeof document<"u"?document:null,bd=Bn&&Bn.createElement("template"),uw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Bn.createElementNS(lw,t):e==="mathml"?Bn.createElementNS(cw,t):n?Bn.createElement(t,{is:n}):Bn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Bn.createTextNode(t),createComment:t=>Bn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Bn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{bd.innerHTML=w_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=bd.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},cr="transition",Di="animation",yo=Symbol("_vtc"),I_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},hw=ct({},Um,I_),fw=t=>(t.displayName="Transition",t.props=hw,t),wd=fw((t,{slots:e})=>Ul(ub,dw(t),e)),Qr=(t,e=[])=>{ce(t)?t.forEach(n=>n(...e)):t&&t(...e)},Id=t=>t?ce(t)?t.some(e=>e.length>1):t.length>1:!1;function dw(t){const e={};for(const T in t)T in I_||(e[T]=t[T]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,R=pw(s),P=R&&R[0],k=R&&R[1],{onBeforeEnter:V,onEnter:L,onEnterCancelled:H,onLeave:q,onLeaveCancelled:Q,onBeforeAppear:Z=V,onAppear:I=L,onAppearCancelled:v=H}=e,E=(T,m,F,te)=>{T._enterCancelled=te,Yr(T,m?h:l),Yr(T,m?u:o),F&&F()},C=(T,m)=>{T._isLeaving=!1,Yr(T,d),Yr(T,_),Yr(T,g),m&&m()},A=T=>(m,F)=>{const te=T?I:L,le=()=>E(m,T,F);Qr(te,[m,le]),Ad(()=>{Yr(m,T?c:i),Mn(m,T?h:l),Id(te)||Sd(m,r,P,le)})};return ct(e,{onBeforeEnter(T){Qr(V,[T]),Mn(T,i),Mn(T,o)},onBeforeAppear(T){Qr(Z,[T]),Mn(T,c),Mn(T,u)},onEnter:A(!1),onAppear:A(!0),onLeave(T,m){T._isLeaving=!0;const F=()=>C(T,m);Mn(T,d),T._enterCancelled?(Mn(T,g),Pd(T)):(Pd(T),Mn(T,g)),Ad(()=>{T._isLeaving&&(Yr(T,d),Mn(T,_),Id(q)||Sd(T,r,k,F))}),Qr(q,[T,F])},onEnterCancelled(T){E(T,!1,void 0,!0),Qr(H,[T])},onAppearCancelled(T){E(T,!0,void 0,!0),Qr(v,[T])},onLeaveCancelled(T){C(T),Qr(Q,[T])}})}function pw(t){if(t==null)return null;if(Be(t))return[Lc(t.enter),Lc(t.leave)];{const e=Lc(t);return[e,e]}}function Lc(t){return _T(t)}function Mn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[yo]||(t[yo]=new Set)).add(e)}function Yr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[yo];n&&(n.delete(e),n.size||(t[yo]=void 0))}function Ad(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let gw=0;function Sd(t,e,n,r){const s=t._endId=++gw,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=mw(t,e);if(!o)return r();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,g),i()},g=_=>{_.target===t&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},l+1),t.addEventListener(u,g)}function mw(t,e){const n=window.getComputedStyle(t),r=R=>(n[R]||"").split(", "),s=r(`${cr}Delay`),i=r(`${cr}Duration`),o=Cd(s,i),l=r(`${Di}Delay`),c=r(`${Di}Duration`),u=Cd(l,c);let h=null,d=0,g=0;e===cr?o>0&&(h=cr,d=o,g=i.length):e===Di?u>0&&(h=Di,d=u,g=c.length):(d=Math.max(o,u),h=d>0?o>u?cr:Di:null,g=h?h===cr?i.length:c.length:0);const _=h===cr&&/\b(?:transform|all)(?:,|$)/.test(r(`${cr}Property`).toString());return{type:h,timeout:d,propCount:g,hasTransform:_}}function Cd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Rd(n)+Rd(t[r])))}function Rd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Pd(t){return(t?t.ownerDocument:document).body.offsetHeight}function _w(t,e,n){const r=t[yo];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ka=Symbol("_vod"),A_=Symbol("_vsh"),kd={name:"show",beforeMount(t,{value:e},{transition:n}){t[Ka]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Vi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Vi(t,!0),r.enter(t)):r.leave(t,()=>{Vi(t,!1)}):Vi(t,e))},beforeUnmount(t,{value:e}){Vi(t,e)}};function Vi(t,e){t.style.display=e?t[Ka]:"none",t[A_]=!e}const yw=Symbol(""),vw=/(?:^|;)\s*display\s*:/;function Ew(t,e,n){const r=t.style,s=Ge(n);let i=!1;if(n&&!s){if(e)if(Ge(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&ba(r,l,"")}else for(const o in e)n[o]==null&&ba(r,o,"");for(const o in n)o==="display"&&(i=!0),ba(r,o,n[o])}else if(s){if(e!==n){const o=r[yw];o&&(n+=";"+o),r.cssText=n,i=vw.test(n)}}else e&&t.removeAttribute("style");Ka in t&&(t[Ka]=i?r.display:"",t[A_]&&(r.display="none"))}const Od=/\s*!important$/;function ba(t,e,n){if(ce(n))n.forEach(r=>ba(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Tw(t,e);Od.test(n)?t.setProperty(Lr(r),n.replace(Od,""),"important"):t[r]=n}}const Nd=["Webkit","Moz","ms"],xc={};function Tw(t,e){const n=xc[e];if(n)return n;let r=Xt(e);if(r!=="filter"&&r in t)return xc[e]=r;r=Al(r);for(let s=0;s<Nd.length;s++){const i=Nd[s]+r;if(i in t)return xc[e]=i}return e}const Dd="http://www.w3.org/1999/xlink";function Vd(t,e,n,r,s,i=wT(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Dd,e.slice(6,e.length)):t.setAttributeNS(Dd,e,n):n==null||i&&!sm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":hn(n)?String(n):n)}function Ld(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?w_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=sm(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function ts(t,e,n,r){t.addEventListener(e,n,r)}function bw(t,e,n,r){t.removeEventListener(e,n,r)}const xd=Symbol("_vei");function ww(t,e,n,r,s=null){const i=t[xd]||(t[xd]={}),o=i[e];if(r&&o)o.value=r;else{const[l,c]=Iw(e);if(r){const u=i[e]=Cw(r,s);ts(t,l,u,c)}else o&&(bw(t,l,o,c),i[e]=void 0)}}const Md=/(?:Once|Passive|Capture)$/;function Iw(t){let e;if(Md.test(t)){e={};let r;for(;r=t.match(Md);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Lr(t.slice(2)),e]}let Mc=0;const Aw=Promise.resolve(),Sw=()=>Mc||(Aw.then(()=>Mc=0),Mc=Date.now());function Cw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;fn(Rw(r,n.value),e,5,[r])};return n.value=t,n.attached=Sw(),n}function Rw(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Fd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Pw=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?_w(t,r,o):e==="style"?Ew(t,n,r):bl(e)?th(e)||ww(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):kw(t,e,r,o))?(Ld(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Vd(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ge(r))?Ld(t,Xt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Vd(t,e,r,o))};function kw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Fd(e)&&_e(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Fd(e)&&Ge(n)?!1:e in t}const Wa=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ce(e)?n=>va(e,n):e};function Ow(t){t.target.composing=!0}function Bd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const zs=Symbol("_assign"),aD={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[zs]=Wa(s);const i=r||s.props&&s.props.type==="number";ts(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),i&&(l=au(l)),t[zs](l)}),n&&ts(t,"change",()=>{t.value=t.value.trim()}),e||(ts(t,"compositionstart",Ow),ts(t,"compositionend",Bd),ts(t,"change",Bd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[zs]=Wa(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?au(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},lD={deep:!0,created(t,e,n){t[zs]=Wa(n),ts(t,"change",()=>{const r=t._modelValue,s=Nw(t),i=t.checked,o=t[zs];if(ce(r)){const l=im(r,s),c=l!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const u=[...r];u.splice(l,1),o(u)}}else if(wl(r)){const l=new Set(r);i?l.add(s):l.delete(s),o(l)}else o(S_(t,i))})},mounted:Ud,beforeUpdate(t,e,n){t[zs]=Wa(n),Ud(t,e,n)}};function Ud(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(ce(e))s=im(e,r.props.value)>-1;else if(wl(e))s=e.has(r.props.value);else{if(e===n)return;s=Cl(e,S_(t,!0))}t.checked!==s&&(t.checked=s)}function Nw(t){return"_value"in t?t._value:t.value}function S_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Dw=["ctrl","shift","alt","meta"],Vw={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Dw.some(n=>t[`${n}Key`]&&!e.includes(n))},Lw=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const l=Vw[e[o]];if(l&&l(s,e))return}return t(s,...i)}))},xw=ct({patchProp:Pw},uw);let $d;function Mw(){return $d||($d=xb(xw))}const Fw=((...t)=>{const e=Mw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Uw(r);if(!s)return;const i=e._component;!_e(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Bw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function Bw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Uw(t){return Ge(t)?document.querySelector(t):t}function $w(){return C_().__VUE_DEVTOOLS_GLOBAL_HOOK__}function C_(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const jw=typeof Proxy=="function",Hw="devtools-plugin:setup",qw="plugin:settings:set";let Cs,vu;function zw(){var t;return Cs!==void 0||(typeof window<"u"&&window.performance?(Cs=!0,vu=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(Cs=!0,vu=globalThis.perf_hooks.performance):Cs=!1),Cs}function Kw(){return zw()?vu.now():Date.now()}class Ww{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const l=e.settings[o];r[o]=l.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),l=JSON.parse(o);Object.assign(i,l)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return Kw()}},n&&n.on(qw,(o,l)=>{o===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(o,l)=>this.target?this.target.on[l]:(...c)=>{this.onQueue.push({method:l,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...c)=>(this.targetQueue.push({method:l,args:c,resolve:()=>{}}),this.fallbacks[l](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:l,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Gw(t,e){const n=t,r=C_(),s=$w(),i=jw&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(Hw,t,e);else{const o=i?new Ww(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ns=typeof document<"u";function R_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Qw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&R_(t.default)}const Ve=Object.assign;function Fc(t,e){const n={};for(const r in e){const s=e[r];n[r]=pn(s)?s.map(t):t(s)}return n}const eo=()=>{},pn=Array.isArray,P_=/#/g,Yw=/&/g,Jw=/\//g,Xw=/=/g,Zw=/\?/g,k_=/\+/g,eI=/%5B/g,tI=/%5D/g,O_=/%5E/g,nI=/%60/g,N_=/%7B/g,rI=/%7C/g,D_=/%7D/g,sI=/%20/g;function ph(t){return encodeURI(""+t).replace(rI,"|").replace(eI,"[").replace(tI,"]")}function iI(t){return ph(t).replace(N_,"{").replace(D_,"}").replace(O_,"^")}function Eu(t){return ph(t).replace(k_,"%2B").replace(sI,"+").replace(P_,"%23").replace(Yw,"%26").replace(nI,"`").replace(N_,"{").replace(D_,"}").replace(O_,"^")}function oI(t){return Eu(t).replace(Xw,"%3D")}function aI(t){return ph(t).replace(P_,"%23").replace(Zw,"%3F")}function lI(t){return t==null?"":aI(t).replace(Jw,"%2F")}function vo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const cI=/\/$/,uI=t=>t.replace(cI,"");function Bc(t,e,n="/"){let r,s={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),s=t(i)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=pI(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:vo(o)}}function hI(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function jd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function fI(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ys(e.matched[r],n.matched[s])&&V_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ys(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function V_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!dI(t[n],e[n]))return!1;return!0}function dI(t,e){return pn(t)?Hd(t,e):pn(e)?Hd(e,t):t===e}function Hd(t,e){return pn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function pI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const ur={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Eo;(function(t){t.pop="pop",t.push="push"})(Eo||(Eo={}));var to;(function(t){t.back="back",t.forward="forward",t.unknown=""})(to||(to={}));function gI(t){if(!t)if(Ns){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),uI(t)}const mI=/^[^#]+#/;function _I(t,e){return t.replace(mI,"#")+e}function yI(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const $l=()=>({left:window.scrollX,top:window.scrollY});function vI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=yI(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function qd(t,e){return(history.state?history.state.position-e:-1)+t}const Tu=new Map;function EI(t,e){Tu.set(t,e)}function TI(t){const e=Tu.get(t);return Tu.delete(t),e}let bI=()=>location.protocol+"//"+location.host;function L_(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let l=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),jd(c,"")}return jd(n,t)+r+s}function wI(t,e,n,r){let s=[],i=[],o=null;const l=({state:g})=>{const _=L_(t,location),R=n.value,P=e.value;let k=0;if(g){if(n.value=_,e.value=g,o&&o===R){o=null;return}k=P?g.position-P.position:0}else r(_);s.forEach(V=>{V(n.value,R,{delta:k,type:Eo.pop,direction:k?k>0?to.forward:to.back:to.unknown})})};function c(){o=n.value}function u(g){s.push(g);const _=()=>{const R=s.indexOf(g);R>-1&&s.splice(R,1)};return i.push(_),_}function h(){const{history:g}=window;g.state&&g.replaceState(Ve({},g.state,{scroll:$l()}),"")}function d(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:d}}function zd(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?$l():null}}function II(t){const{history:e,location:n}=window,r={value:L_(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=t.indexOf("#"),g=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:bI()+t+c;try{e[h?"replaceState":"pushState"](u,"",g),s.value=u}catch(_){console.error(_),n[h?"replace":"assign"](g)}}function o(c,u){const h=Ve({},e.state,zd(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,h,!0),r.value=c}function l(c,u){const h=Ve({},s.value,e.state,{forward:c,scroll:$l()});i(h.current,h,!0);const d=Ve({},zd(r.value,c,null),{position:h.position+1},u);i(c,d,!1),r.value=c}return{location:r,state:s,push:l,replace:o}}function AI(t){t=gI(t);const e=II(t),n=wI(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ve({location:"",base:t,go:r,createHref:_I.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function SI(t){return typeof t=="string"||t&&typeof t=="object"}function x_(t){return typeof t=="string"||typeof t=="symbol"}const M_=Symbol("");var Kd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Kd||(Kd={}));function Js(t,e){return Ve(new Error,{type:t,[M_]:!0},e)}function Fn(t,e){return t instanceof Error&&M_ in t&&(e==null||!!(t.type&e))}const Wd="[^/]+?",CI={sensitive:!1,strict:!1,start:!0,end:!0},RI=/[.+*?^${}()[\]/\\]/g;function PI(t,e){const n=Ve({},CI,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const g=u[d];let _=40+(n.sensitive?.25:0);if(g.type===0)d||(s+="/"),s+=g.value.replace(RI,"\\$&"),_+=40;else if(g.type===1){const{value:R,repeatable:P,optional:k,regexp:V}=g;i.push({name:R,repeatable:P,optional:k});const L=V||Wd;if(L!==Wd){_+=10;try{new RegExp(`(${L})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${R}" (${L}): `+q.message)}}let H=P?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;d||(H=k&&u.length<2?`(?:/${H})`:"/"+H),k&&(H+="?"),s+=H,_+=20,k&&(_+=-8),P&&(_+=-20),L===".*"&&(_+=-50)}h.push(_)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function l(u){const h=u.match(o),d={};if(!h)return null;for(let g=1;g<h.length;g++){const _=h[g]||"",R=i[g-1];d[R.name]=_&&R.repeatable?_.split("/"):_}return d}function c(u){let h="",d=!1;for(const g of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const _ of g)if(_.type===0)h+=_.value;else if(_.type===1){const{value:R,repeatable:P,optional:k}=_,V=R in u?u[R]:"";if(pn(V)&&!P)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const L=pn(V)?V.join("/"):V;if(!L)if(k)g.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${R}"`);h+=L}}return h||"/"}return{re:o,score:r,keys:i,parse:l,stringify:c}}function kI(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function F_(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=kI(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Gd(r))return 1;if(Gd(s))return-1}return s.length-r.length}function Gd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const OI={type:0,value:""},NI=/[a-zA-Z0-9_]/;function DI(t){if(!t)return[[]];if(t==="/")return[[OI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let l=0,c,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function g(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&d(),o()):c===":"?(d(),n=1):g();break;case 4:g(),n=r;break;case 1:c==="("?n=2:NI.test(c)?g():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}function VI(t,e,n){const r=PI(DI(t.path),n),s=Ve(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function LI(t,e){const n=[],r=new Map;e=Xd({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,g,_){const R=!_,P=Yd(d);P.aliasOf=_&&_.record;const k=Xd(e,d),V=[P];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const Q of q)V.push(Yd(Ve({},P,{components:_?_.record.components:P.components,path:Q,aliasOf:_?_.record:P})))}let L,H;for(const q of V){const{path:Q}=q;if(g&&Q[0]!=="/"){const Z=g.record.path,I=Z[Z.length-1]==="/"?"":"/";q.path=g.record.path+(Q&&I+Q)}if(L=VI(q,g,k),_?_.alias.push(L):(H=H||L,H!==L&&H.alias.push(L),R&&d.name&&!Jd(L)&&o(d.name)),B_(L)&&c(L),P.children){const Z=P.children;for(let I=0;I<Z.length;I++)i(Z[I],L,_&&_.children[I])}_=_||L}return H?()=>{o(H)}:eo}function o(d){if(x_(d)){const g=r.get(d);g&&(r.delete(d),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(d);g>-1&&(n.splice(g,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function c(d){const g=FI(d,n);n.splice(g,0,d),d.record.name&&!Jd(d)&&r.set(d.record.name,d)}function u(d,g){let _,R={},P,k;if("name"in d&&d.name){if(_=r.get(d.name),!_)throw Js(1,{location:d});k=_.record.name,R=Ve(Qd(g.params,_.keys.filter(H=>!H.optional).concat(_.parent?_.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),d.params&&Qd(d.params,_.keys.map(H=>H.name))),P=_.stringify(R)}else if(d.path!=null)P=d.path,_=n.find(H=>H.re.test(P)),_&&(R=_.parse(P),k=_.record.name);else{if(_=g.name?r.get(g.name):n.find(H=>H.re.test(g.path)),!_)throw Js(1,{location:d,currentLocation:g});k=_.record.name,R=Ve({},g.params,d.params),P=_.stringify(R)}const V=[];let L=_;for(;L;)V.unshift(L.record),L=L.parent;return{name:k,path:P,params:R,matched:V,meta:MI(V)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:s}}function Qd(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Yd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:xI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function xI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Jd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function MI(t){return t.reduce((e,n)=>Ve(e,n.meta),{})}function Xd(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function FI(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;F_(t,e[i])<0?r=i:n=i+1}const s=BI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function BI(t){let e=t;for(;e=e.parent;)if(B_(e)&&F_(t,e)===0)return e}function B_({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function UI(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(k_," "),o=i.indexOf("="),l=vo(o<0?i:i.slice(0,o)),c=o<0?null:vo(i.slice(o+1));if(l in e){let u=e[l];pn(u)||(u=e[l]=[u]),u.push(c)}else e[l]=c}return e}function Zd(t){let e="";for(let n in t){const r=t[n];if(n=oI(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(pn(r)?r.map(i=>i&&Eu(i)):[r&&Eu(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function $I(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=pn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const jI=Symbol(""),ep=Symbol(""),jl=Symbol(""),gh=Symbol(""),bu=Symbol("");function Li(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function gr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const u=g=>{g===!1?c(Js(4,{from:n,to:e})):g instanceof Error?c(g):SI(g)?c(Js(2,{from:e,to:g})):(o&&r.enterCallbacks[s]===o&&typeof g=="function"&&o.push(g),l())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(g=>c(g))})}function Uc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(R_(c)){const h=(c.__vccOpts||c)[e];h&&i.push(gr(h,n,r,o,l,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=Qw(h)?h.default:h;o.mods[l]=h,o.components[l]=d;const _=(d.__vccOpts||d)[e];return _&&gr(_,n,r,o,l,s)()}))}}return i}function tp(t){const e=Et(jl),n=Et(gh),r=Y(()=>{const c=W(t.to);return e.resolve(c)}),s=Y(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const g=d.findIndex(Ys.bind(null,h));if(g>-1)return g;const _=np(c[u-2]);return u>1&&np(h)===_&&d[d.length-1].path!==_?d.findIndex(Ys.bind(null,c[u-2])):g}),i=Y(()=>s.value>-1&&WI(n.params,r.value.params)),o=Y(()=>s.value>-1&&s.value===n.matched.length-1&&V_(n.params,r.value.params));function l(c={}){if(KI(c)){const u=e[W(t.replace)?"replace":"push"](W(t.to)).catch(eo);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Y(()=>r.value.href),isActive:i,isExactActive:o,navigate:l}}function HI(t){return t.length===1?t[0]:t}const qI=dn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:tp,setup(t,{slots:e}){const n=No(tp(t)),{options:r}=Et(jl),s=Y(()=>({[rp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[rp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&HI(e.default(n));return t.custom?i:Ul("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),zI=qI;function KI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function WI(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!pn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function np(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const rp=(t,e,n)=>t??e??n,GI=dn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Et(bu),s=Y(()=>t.route||r.value),i=Et(ep,0),o=Y(()=>{let u=W(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),l=Y(()=>s.value.matched[o.value]);Xi(ep,Y(()=>o.value+1)),Xi(jI,l),Xi(bu,s);const c=Fe();return We(()=>[c.value,l.value,t.name],([u,h,d],[g,_,R])=>{h&&(h.instances[d]=u,_&&_!==h&&u&&u===g&&(h.leaveGuards.size||(h.leaveGuards=_.leaveGuards),h.updateGuards.size||(h.updateGuards=_.updateGuards))),u&&h&&(!_||!Ys(h,_)||!g)&&(h.enterCallbacks[d]||[]).forEach(P=>P(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=l.value,g=d&&d.components[h];if(!g)return sp(n.default,{Component:g,route:u});const _=d.props[h],R=_?_===!0?u.params:typeof _=="function"?_(u):_:null,k=Ul(g,Ve({},R,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return sp(n.default,{Component:k,route:u})||k}}});function sp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const U_=GI;function QI(t){const e=LI(t.routes,t),n=t.parseQuery||UI,r=t.stringifyQuery||Zd,s=t.history,i=Li(),o=Li(),l=Li(),c=Zt(ur);let u=ur;Ns&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Fc.bind(null,M=>""+M),d=Fc.bind(null,lI),g=Fc.bind(null,vo);function _(M,ee){let X,ne;return x_(M)?(X=e.getRecordMatcher(M),ne=ee):ne=M,e.addRoute(ne,X)}function R(M){const ee=e.getRecordMatcher(M);ee&&e.removeRoute(ee)}function P(){return e.getRoutes().map(M=>M.record)}function k(M){return!!e.getRecordMatcher(M)}function V(M,ee){if(ee=Ve({},ee||c.value),typeof M=="string"){const w=Bc(n,M,ee.path),D=e.resolve({path:w.path},ee),B=s.createHref(w.fullPath);return Ve(w,D,{params:g(D.params),hash:vo(w.hash),redirectedFrom:void 0,href:B})}let X;if(M.path!=null)X=Ve({},M,{path:Bc(n,M.path,ee.path).path});else{const w=Ve({},M.params);for(const D in w)w[D]==null&&delete w[D];X=Ve({},M,{params:d(w)}),ee.params=d(ee.params)}const ne=e.resolve(X,ee),Ee=M.hash||"";ne.params=h(g(ne.params));const b=hI(r,Ve({},M,{hash:iI(Ee),path:ne.path})),S=s.createHref(b);return Ve({fullPath:b,hash:Ee,query:r===Zd?$I(M.query):M.query||{}},ne,{redirectedFrom:void 0,href:S})}function L(M){return typeof M=="string"?Bc(n,M,c.value.path):Ve({},M)}function H(M,ee){if(u!==M)return Js(8,{from:ee,to:M})}function q(M){return I(M)}function Q(M){return q(Ve(L(M),{replace:!0}))}function Z(M){const ee=M.matched[M.matched.length-1];if(ee&&ee.redirect){const{redirect:X}=ee;let ne=typeof X=="function"?X(M):X;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=L(ne):{path:ne},ne.params={}),Ve({query:M.query,hash:M.hash,params:ne.path!=null?{}:M.params},ne)}}function I(M,ee){const X=u=V(M),ne=c.value,Ee=M.state,b=M.force,S=M.replace===!0,w=Z(X);if(w)return I(Ve(L(w),{state:typeof w=="object"?Ve({},Ee,w.state):Ee,force:b,replace:S}),ee||X);const D=X;D.redirectedFrom=ee;let B;return!b&&fI(r,ne,X)&&(B=Js(16,{to:D,from:ne}),be(ne,ne,!0,!1)),(B?Promise.resolve(B):C(D,ne)).catch(x=>Fn(x)?Fn(x,2)?x:we(x):ie(x,D,ne)).then(x=>{if(x){if(Fn(x,2))return I(Ve({replace:S},L(x.to),{state:typeof x.to=="object"?Ve({},Ee,x.to.state):Ee,force:b}),ee||D)}else x=T(D,ne,!0,S,Ee);return A(D,ne,x),x})}function v(M,ee){const X=H(M,ee);return X?Promise.reject(X):Promise.resolve()}function E(M){const ee=He.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(M):M()}function C(M,ee){let X;const[ne,Ee,b]=YI(M,ee);X=Uc(ne.reverse(),"beforeRouteLeave",M,ee);for(const w of ne)w.leaveGuards.forEach(D=>{X.push(gr(D,M,ee))});const S=v.bind(null,M,ee);return X.push(S),Qe(X).then(()=>{X=[];for(const w of i.list())X.push(gr(w,M,ee));return X.push(S),Qe(X)}).then(()=>{X=Uc(Ee,"beforeRouteUpdate",M,ee);for(const w of Ee)w.updateGuards.forEach(D=>{X.push(gr(D,M,ee))});return X.push(S),Qe(X)}).then(()=>{X=[];for(const w of b)if(w.beforeEnter)if(pn(w.beforeEnter))for(const D of w.beforeEnter)X.push(gr(D,M,ee));else X.push(gr(w.beforeEnter,M,ee));return X.push(S),Qe(X)}).then(()=>(M.matched.forEach(w=>w.enterCallbacks={}),X=Uc(b,"beforeRouteEnter",M,ee,E),X.push(S),Qe(X))).then(()=>{X=[];for(const w of o.list())X.push(gr(w,M,ee));return X.push(S),Qe(X)}).catch(w=>Fn(w,8)?w:Promise.reject(w))}function A(M,ee,X){l.list().forEach(ne=>E(()=>ne(M,ee,X)))}function T(M,ee,X,ne,Ee){const b=H(M,ee);if(b)return b;const S=ee===ur,w=Ns?history.state:{};X&&(ne||S?s.replace(M.fullPath,Ve({scroll:S&&w&&w.scroll},Ee)):s.push(M.fullPath,Ee)),c.value=M,be(M,ee,X,S),we()}let m;function F(){m||(m=s.listen((M,ee,X)=>{if(!ut.listening)return;const ne=V(M),Ee=Z(ne);if(Ee){I(Ve(Ee,{replace:!0,force:!0}),ne).catch(eo);return}u=ne;const b=c.value;Ns&&EI(qd(b.fullPath,X.delta),$l()),C(ne,b).catch(S=>Fn(S,12)?S:Fn(S,2)?(I(Ve(L(S.to),{force:!0}),ne).then(w=>{Fn(w,20)&&!X.delta&&X.type===Eo.pop&&s.go(-1,!1)}).catch(eo),Promise.reject()):(X.delta&&s.go(-X.delta,!1),ie(S,ne,b))).then(S=>{S=S||T(ne,b,!1),S&&(X.delta&&!Fn(S,8)?s.go(-X.delta,!1):X.type===Eo.pop&&Fn(S,20)&&s.go(-1,!1)),A(ne,b,S)}).catch(eo)}))}let te=Li(),le=Li(),oe;function ie(M,ee,X){we(M);const ne=le.list();return ne.length?ne.forEach(Ee=>Ee(M,ee,X)):console.error(M),Promise.reject(M)}function fe(){return oe&&c.value!==ur?Promise.resolve():new Promise((M,ee)=>{te.add([M,ee])})}function we(M){return oe||(oe=!M,F(),te.list().forEach(([ee,X])=>M?X(M):ee()),te.reset()),M}function be(M,ee,X,ne){const{scrollBehavior:Ee}=t;if(!Ns||!Ee)return Promise.resolve();const b=!X&&TI(qd(M.fullPath,0))||(ne||!X)&&history.state&&history.state.scroll||null;return Un().then(()=>Ee(M,ee,b)).then(S=>S&&vI(S)).catch(S=>ie(S,M,ee))}const Re=M=>s.go(M);let nt;const He=new Set,ut={currentRoute:c,listening:!0,addRoute:_,removeRoute:R,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:P,resolve:V,options:t,push:q,replace:Q,go:Re,back:()=>Re(-1),forward:()=>Re(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:le.add,isReady:fe,install(M){const ee=this;M.component("RouterLink",zI),M.component("RouterView",U_),M.config.globalProperties.$router=ee,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>W(c)}),Ns&&!nt&&c.value===ur&&(nt=!0,q(s.location).catch(Ee=>{}));const X={};for(const Ee in ur)Object.defineProperty(X,Ee,{get:()=>c.value[Ee],enumerable:!0});M.provide(jl,ee),M.provide(gh,Cm(X)),M.provide(bu,c);const ne=M.unmount;He.add(M),M.unmount=function(){He.delete(M),He.size<1&&(u=ur,m&&m(),m=null,c.value=ur,nt=!1,oe=!1),ne()}}};function Qe(M){return M.reduce((ee,X)=>ee.then(()=>E(X)),Promise.resolve())}return ut}function YI(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>Ys(u,l))?r.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>Ys(u,c))||s.push(c))}return[n,r,s]}function JI(){return Et(jl)}function cD(t){return Et(gh)}const $_="BootstrapVueNext__",mh=(t,e="")=>{const n=`${e}___`;return`${$_}ID__${t}__${e?n:""}`},Mr=t=>mh(t),oi=t=>mh(`${t}__registry`),uD=Mr("progress"),hD=Mr("checkboxGroup"),XI=Mr("collapse"),j_=oi("showHide"),ZI=Mr("navbar"),eA=oi("rtl"),ip=`${$_}global_breadcrumb`,tA=oi("breadcrumb"),H_=oi("modalManager"),wa=oi("defaults"),fD=Mr("inputGroup"),dD=Mr("buttonGroup"),nA=oi("orchestrator"),pD=Mr("formGroupPlugin"),gD=Mr("tableKeyboardNavigation");function gn(t){return um()?(AT(t),!0):!1}function rA(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=cm(!0),n=r.run(()=>t(...i))),gn(s),n)}function sA(t,e){if(typeof Symbol<"u"){const n={...t};return Object.defineProperty(n,Symbol.iterator,{enumerable:!1,value(){let r=0;return{next:()=>({value:e[r++],done:r>e.length})}}}),n}else return Object.assign([...e],t)}const Ga=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const q_=t=>t!=null,iA=Object.prototype.toString,oA=t=>iA.call(t)==="[object Object]",op=()=>+Date.now(),Qa=()=>{},ap=aA();function aA(){var t,e;return Ga&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function lA(...t){if(t.length!==1)return ls(...t);const e=t[0];return typeof e=="function"?zt(km(()=>({get:e,set:Qa}))):Fe(e)}function cA(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}function uA(...t){let e=0,n,r=!0,s=Qa,i,o,l,c,u;!Ze(t[0])&&typeof t[0]=="object"?{delay:o,trailing:l=!0,leading:c=!0,rejectOnCancel:u=!1}=t[0]:[o,l=!0,c=!0,u=!1]=t;const h=()=>{n&&(clearTimeout(n),n=void 0,s(),s=Qa)};return g=>{const _=$e(o),R=Date.now()-e,P=()=>i=g();return h(),_<=0?(e=Date.now(),P()):(R>_&&(c||!r)?(e=Date.now(),P()):l&&(i=new Promise((k,V)=>{s=u?V:k,n=setTimeout(()=>{e=Date.now(),r=!0,k(P()),h()},Math.max(0,_-R))})),!c&&!n&&(n=setTimeout(()=>r=!0,_)),r=!1,i)}}function no(t){return Array.isArray(t)?t:[t]}function hA(t){const e=Object.create(null);return n=>e[n]||(e[n]=t(n))}const fA=/-(\w)/g,dA=hA(t=>t.replace(fA,(e,n)=>n?n.toUpperCase():""));function lp(t,e=200,n=!1,r=!0,s=!1){return cA(uA(e,n,r,s),t)}function pA(t,e=1e3,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n;let i=null;const o=Zt(!1);function l(){i&&(clearInterval(i),i=null)}function c(){o.value=!1,l()}function u(){const h=$e(e);h<=0||(o.value=!0,s&&t(),l(),o.value&&(i=setInterval(t,h)))}if(r&&Ga&&u(),Ze(e)||typeof e=="function"){const h=We(e,()=>{o.value&&Ga&&u()});gn(h)}return gn(c),{isActive:zT(o),pause:c,resume:u}}function mD(t,e={}){const{method:n="parseFloat",radix:r,nanToZero:s}=e;return Y(()=>{let i=$e(t);return typeof n=="function"?i=n(i):typeof i=="string"&&(i=Number[n](i,r)),s&&Number.isNaN(i)&&(i=0),i})}function gA(t,e,n){return We(t,e,{...n,immediate:!0})}function _D(t={}){const{inheritAttrs:e=!0}=t,n=Zt(),r=dn({setup(i,{slots:o}){return()=>{n.value=o.default}}}),s=dn({inheritAttrs:e,props:t.props,setup(i,{attrs:o,slots:l}){return()=>{var c;n.value;const u=(c=n.value)==null?void 0:c.call(n,{...t.props==null?mA(o):i,$slots:l});return e&&u?.length===1?u[0]:u}}});return sA({define:r,reuse:s},[r,s])}function mA(t){const e={};for(const n in t)e[dA(n)]=t[n];return e}const ai=Ga?window:void 0;function Yn(t){var e;const n=$e(t);return(e=n?.$el)!=null?e:n}function cs(...t){const e=[],n=()=>{e.forEach(l=>l()),e.length=0},r=(l,c,u,h)=>(l.addEventListener(c,u,h),()=>l.removeEventListener(c,u,h)),s=Y(()=>{const l=no($e(t[0])).filter(c=>c!=null);return l.every(c=>typeof c!="string")?l:void 0}),i=gA(()=>{var l,c;return[(c=(l=s.value)==null?void 0:l.map(u=>Yn(u)))!=null?c:[ai].filter(u=>u!=null),no($e(s.value?t[1]:t[0])),no(W(s.value?t[2]:t[1])),$e(s.value?t[3]:t[2])]},([l,c,u,h])=>{if(n(),!l?.length||!c?.length||!u?.length)return;const d=oA(h)?{...h}:h;e.push(...l.flatMap(g=>c.flatMap(_=>u.map(R=>r(g,_,R,d)))))},{flush:"post"}),o=()=>{i(),n()};return gn(n),o}function _A(){const t=Zt(!1),e=_n();return e&&xr(()=>{t.value=!0},e),t}function yA(t){const e=_A();return Y(()=>(e.value,!!t()))}function z_(t,e,n={}){const{window:r=ai,...s}=n;let i;const o=yA(()=>r&&"MutationObserver"in r),l=()=>{i&&(i.disconnect(),i=void 0)},c=Y(()=>{const g=$e(t),_=no(g).map(Yn).filter(q_);return new Set(_)}),u=We(()=>c.value,g=>{l(),o.value&&g.size&&(i=new MutationObserver(e),g.forEach(_=>i.observe(_,s)))},{immediate:!0,flush:"post"}),h=()=>i?.takeRecords(),d=()=>{u(),l()};return gn(d),{isSupported:o,stop:d,takeRecords:h}}function vA(t,e,n={}){const{window:r=ai,document:s=r?.document,flush:i="sync"}=n;if(!r||!s)return Qa;let o;const l=h=>{o?.(),o=h},c=f_(()=>{const h=Yn(t);if(h){const{stop:d}=z_(s,g=>{g.map(R=>[...R.removedNodes]).flat().some(R=>R===h||R.contains(h))&&e(g)},{window:r,childList:!0,subtree:!0});l(d)}},{flush:i}),u=()=>{c(),l()};return gn(u),u}function EA(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function K_(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=ai,eventName:i="keydown",passive:o=!1,dedupe:l=!1}=r,c=EA(e);return cs(s,i,h=>{h.repeat&&$e(l)||c(h)&&n(h)},o)}function TA(t,e={}){const{immediate:n=!0,fpsLimit:r=void 0,window:s=ai,once:i=!1}=e,o=Zt(!1),l=Y(()=>r?1e3/$e(r):null);let c=0,u=null;function h(_){if(!o.value||!s)return;c||(c=_);const R=_-c;if(l.value&&R<l.value){u=s.requestAnimationFrame(h);return}if(c=_,t({delta:R,timestamp:_}),i){o.value=!1,u=null;return}u=s.requestAnimationFrame(h)}function d(){!o.value&&s&&(o.value=!0,c=0,u=s.requestAnimationFrame(h))}function g(){o.value=!1,u!=null&&s&&(s.cancelAnimationFrame(u),u=null)}return n&&d(),gn(g),{isActive:zt(o),pause:g,resume:d}}const la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ca="__vueuse_ssr_handlers__",bA=wA();function wA(){return ca in la||(la[ca]=la[ca]||{}),la[ca]}function IA(t,e){return bA[t]||e}function yD(t,e={}){const{delayEnter:n=0,delayLeave:r=0,triggerOnRemoval:s=!1,window:i=ai}=e,o=Zt(!1);let l;const c=u=>{const h=u?n:r;l&&(clearTimeout(l),l=void 0),h?l=setTimeout(()=>o.value=u,h):o.value=u};return i&&(cs(t,"mouseenter",()=>c(!0),{passive:!0}),cs(t,"mouseleave",()=>c(!1),{passive:!0}),s&&vA(Y(()=>Yn(t)),()=>c(!1))),o}function vD(t,e={}){const{initialValue:n=!1,focusVisible:r=!1,preventScroll:s=!1}=e,i=Zt(!1),o=Y(()=>Yn(t)),l={passive:!0};cs(o,"focus",u=>{var h,d;(!r||(d=(h=u.target).matches)!=null&&d.call(h,":focus-visible"))&&(i.value=!0)},l),cs(o,"blur",()=>i.value=!1,l);const c=Y({get:()=>i.value,set(u){var h,d;!u&&i.value?(h=o.value)==null||h.blur():u&&!i.value&&((d=o.value)==null||d.focus({preventScroll:s}))}});return We(o,()=>{c.value=n},{immediate:!0,flush:"post"}),{focused:c}}function $c(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function W_(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!n||n.tagName==="BODY"?!1:W_(n)}}function AA(t){const e=t||window.event,n=e.target;return W_(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const jc=new WeakMap;function SA(t,e=!1){const n=Zt(e);let r=null,s="";We(lA(t),l=>{const c=$c($e(l));if(c){const u=c;if(jc.get(u)||jc.set(u,u.style.overflow),u.style.overflow!=="hidden"&&(s=u.style.overflow),u.style.overflow==="hidden")return n.value=!0;if(n.value)return u.style.overflow="hidden"}},{immediate:!0});const i=()=>{const l=$c($e(t));!l||n.value||(ap&&(r=cs(l,"touchmove",c=>{AA(c)},{passive:!1})),l.style.overflow="hidden",n.value=!0)},o=()=>{const l=$c($e(t));!l||!n.value||(ap&&r?.(),l.style.overflow=s,jc.delete(l),n.value=!1)};return gn(o),Y({get(){return n.value},set(l){l?i():o()}})}function ED(t={}){const{controls:e=!1,offset:n=0,immediate:r=!0,interval:s="requestAnimationFrame",callback:i}=t,o=Zt(op()+n),l=()=>o.value=op()+n,c=i?()=>{l(),i(o.value)}:l,u=s==="requestAnimationFrame"?TA(c,{immediate:r}):pA(c,s,{immediate:r});return e?{timestamp:o,...u}:o}const CA=()=>({store:Fe([]),_isOrchestratorInstalled:Fe(!1),_isToastAppend:Fe(!1)}),G_={BAccordion:"/components/BAccordion",BAccordionItem:"/components/BAccordion",BAlert:"/components/BAlert",BApp:"/components/BApp",BAvatar:"/components/BAvatar",BAvatarGroup:"/components/BAvatar",BBadge:"/components/BBadge",BBreadcrumb:"/components/BBreadcrumb",BBreadcrumbItem:"/components/BBreadcrumb",BButton:"/components/BButton",BButtonGroup:"/components/BButton",BButtonToolbar:"/components/BButton",BCloseButton:"/components/BButton",BCard:"/components/BCard",BCardBody:"/components/BCard",BCardFooter:"/components/BCard",BCardGroup:"/components/BCard",BCardHeader:"/components/BCard",BCardImg:"/components/BCard",BCardSubtitle:"/components/BCard",BCardText:"/components/BCard",BCardTitle:"/components/BCard",BCarousel:"/components/BCarousel",BCarouselSlide:"/components/BCarousel",BCol:"/components/BContainer",BCollapse:"/components/BCollapse",BContainer:"/components/BContainer",BDropdown:"/components/BDropdown",BDropdownDivider:"/components/BDropdown",BDropdownForm:"/components/BDropdown",BDropdownGroup:"/components/BDropdown",BDropdownHeader:"/components/BDropdown",BDropdownItem:"/components/BDropdown",BDropdownItemButton:"/components/BDropdown",BDropdownText:"/components/BDropdown",BForm:"/components/BForm",BFormCheckbox:"/components/BFormCheckbox",BFormCheckboxGroup:"/components/BFormCheckbox",BFormDatalist:"/components/BForm",BFormFile:"/components/BFormFile",BFormFloatingLabel:"/components/BForm",BFormGroup:"/components/BFormGroup",BFormInput:"/components/BFormInput",BFormInvalidFeedback:"/components/BForm",BFormRadio:"/components/BFormRadio",BFormRadioGroup:"/components/BFormRadio",BFormRating:"/components/BFormRating",BFormRow:"/components/BForm",BFormSelect:"/components/BFormSelect",BFormSelectOption:"/components/BFormSelect",BFormSelectOptionGroup:"/components/BFormSelect",BFormSpinbutton:"/components/BFormSpinbutton",BFormTag:"/components/BFormTags",BFormTags:"/components/BFormTags",BFormText:"/components/BForm",BFormTextarea:"/components/BFormTextarea",BFormValidFeedback:"/components/BForm",BImg:"/components/BImg",BInput:"/components/BFormInput",BInputGroup:"/components/BInputGroup",BInputGroupText:"/components/BInputGroup",BListGroup:"/components/BListGroup",BListGroupItem:"/components/BListGroup",BModal:"/components/BModal",BModalOrchestrator:"/components/BModal",BNav:"/components/BNav",BNavForm:"/components/BNav",BNavItem:"/components/BNav",BNavItemDropdown:"/components/BNav",BNavText:"/components/BNav",BNavbar:"/components/BNavbar",BNavbarBrand:"/components/BNavbar",BNavbarNav:"/components/BNavbar",BNavbarToggle:"/components/BNavbar",BOffcanvas:"/components/BOffcanvas",BOverlay:"/components/BOverlay",BOrchestrator:"/components/BApp",BPagination:"/components/BPagination",BPlaceholder:"/components/BPlaceholder",BPlaceholderButton:"/components/BPlaceholder",BPlaceholderCard:"/components/BPlaceholder",BPlaceholderTable:"/components/BPlaceholder",BPlaceholderWrapper:"/components/BPlaceholder",BPopover:"/components/BPopover",BProgress:"/components/BProgress",BRow:"/components/BContainer",BSpinner:"/components/BSpinner",BTab:"/components/BTabs",BTabs:"/components/BTabs",BToast:"/components/BToast",BToastOrchestrator:"/components/BToast",BTooltip:"/components/BTooltip",BLink:"/components/BLink",BProgressBar:"/components/BProgress",BTableSimple:"/components/BTable",BTableLite:"/components/BTable",BTable:"/components/BTable",BTbody:"/components/BTable",BTd:"/components/BTable",BTh:"/components/BTable",BThead:"/components/BTable",BTfoot:"/components/BTable",BTr:"/components/BTable",BPopoverOrchestrator:"/components/BPopover"},RA=Object.freeze(Object.keys(G_)),Q_={vBColorMode:"/directives/BColorMode",vBModal:"/directives/BModal",vBPopover:"/directives/BPopover",vBScrollspy:"/directives/BScrollspy",vBToggle:"/directives/BToggle",vBTooltip:"/directives/BTooltip"},PA=Object.freeze(Object.keys(Q_)),kA={useBreadcrumb:"/composables/useBreadcrumb",useColorMode:"/composables/useColorMode",useModal:"/composables/useModal",useModalController:"/composables/useModal",useScrollLock:"/composables/useScrollLock",useScrollspy:"/composables/useScrollspy",useToast:"/composables/useToast",useToastController:"/composables/useToast",useToggle:"/composables/useToggle",usePopover:"/composables/usePopover",usePopoverController:"/composables/usePopover",useRegistry:"/composables/useRegistry",useProvideDefaults:"/composables/useProvideDefaults",useOrchestratorRegistry:"/composables/orchestratorShared"};Object.freeze(Object.keys(kA));const OA=dn({name:"ConditionalTeleport",inheritAttrs:!1,props:{to:{type:[String,Object],default:null},disabled:{type:Boolean,required:!0}},slots:Object,setup(t,{slots:e}){return()=>t.to?Ul(ab,{to:t.to,disabled:t.disabled||!t.to},[e.default?.({})]):e.default?.({})}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Y_=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ya=Y_.join(","),J_=typeof Element>"u",us=J_?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ja=!J_&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Xa=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},NA=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},X_=function(e,n,r){if(Xa(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Ya));return n&&us.call(e,Ya)&&s.unshift(e),s=s.filter(r),s},Z_=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Xa(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),c=l.length?l:o.children,u=t(c,!0,r);r.flatten?s.push.apply(s,u):s.push({scopeParent:o,candidates:u})}else{var h=us.call(o,Ya);h&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var d=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),g=!Xa(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(d&&g){var _=t(d===!0?o.children:d.children,!0,r);r.flatten?s.push.apply(s,_):s.push({scopeParent:o,candidates:_})}else i.unshift.apply(i,o.children)}}return s},ey=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ns=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||NA(e))&&!ey(e)?0:e.tabIndex},DA=function(e,n){var r=ns(e);return r<0&&n&&!ey(e)?0:r},VA=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},ty=function(e){return e.tagName==="INPUT"},LA=function(e){return ty(e)&&e.type==="hidden"},xA=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},MA=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},FA=function(e){if(!e.name)return!0;var n=e.form||Ja(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=MA(s,e.form);return!i||i===e},BA=function(e){return ty(e)&&e.type==="radio"},UA=function(e){return BA(e)&&!FA(e)},$A=function(e){var n,r=e&&Ja(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,l,c;for(i=!!((o=s)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(s)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!i&&s;){var u,h,d;r=Ja(s),s=(u=r)===null||u===void 0?void 0:u.host,i=!!((h=s)!==null&&h!==void 0&&(d=h.ownerDocument)!==null&&d!==void 0&&d.contains(s))}}return i},cp=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},jA=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=us.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(us.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var l=e;e;){var c=e.parentElement,u=Ja(e);if(c&&!c.shadowRoot&&s(c)===!0)return cp(e);e.assignedSlot?e=e.assignedSlot:!c&&u!==e.ownerDocument?e=u.host:e=c}e=l}if($A(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return cp(e);return!1},HA=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return us.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},Za=function(e,n){return!(n.disabled||Xa(n)||LA(n)||jA(n,e)||xA(n)||HA(n))},wu=function(e,n){return!(UA(n)||ns(n)<0||!Za(e,n))},qA=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},zA=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,l=o?s.scopeParent:s,c=DA(l,o),u=o?t(s.candidates):l;c===0?o?n.push.apply(n,u):n.push(l):r.push({documentOrder:i,tabIndex:c,item:s,isScope:o,content:u})}),r.sort(VA).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},KA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Z_([e],n.includeContainer,{filter:wu.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:qA}):r=X_(e,n.includeContainer,wu.bind(null,n)),zA(r)},WA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Z_([e],n.includeContainer,{filter:Za.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=X_(e,n.includeContainer,Za.bind(null,n)),r},Rs=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return us.call(e,Ya)===!1?!1:wu(n,e)},GA=Y_.concat("iframe").join(","),Hc=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return us.call(e,GA)===!1?!1:Za(n,e)};/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Iu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function QA(t){if(Array.isArray(t))return Iu(t)}function YA(t,e,n){return(e=tS(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JA(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function XA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function up(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?up(Object(n),!0).forEach(function(r){YA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):up(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZA(t){return QA(t)||JA(t)||nS(t)||XA()}function eS(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tS(t){var e=eS(t,"string");return typeof e=="symbol"?e:e+""}function nS(t,e){if(t){if(typeof t=="string")return Iu(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Iu(t,e):void 0}}var fp={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r._setPausedState(!0)}var s=e.indexOf(n);s===-1||e.splice(s,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},rS=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},sS=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},ro=function(e){return e?.key==="Tab"||e?.keyCode===9},iS=function(e){return ro(e)&&!e.shiftKey},oS=function(e){return ro(e)&&e.shiftKey},dp=function(e){return setTimeout(e,0)},xi=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},ua=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},aS=[],lS=function(e,n){var r=n?.document||document,s=n?.trapStack||aS,i=hp({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:iS,isKeyBackward:oS},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,c=function(m,F,te){return m&&m[F]!==void 0?m[F]:i[te||F]},u=function(m,F){var te=typeof F?.composedPath=="function"?F.composedPath():void 0;return o.containerGroups.findIndex(function(le){var oe=le.container,ie=le.tabbableNodes;return oe.contains(m)||te?.includes(oe)||ie.find(function(fe){return fe===m})})},h=function(m){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=F.hasFallback,le=te===void 0?!1:te,oe=F.params,ie=oe===void 0?[]:oe,fe=i[m];if(typeof fe=="function"&&(fe=fe.apply(void 0,ZA(ie))),fe===!0&&(fe=void 0),!fe){if(fe===void 0||fe===!1)return fe;throw new Error("`".concat(m,"` was specified but was not a node, or did not return a node"))}var we=fe;if(typeof fe=="string"){try{we=r.querySelector(fe)}catch(be){throw new Error("`".concat(m,'` appears to be an invalid selector; error="').concat(be.message,'"'))}if(!we&&!le)throw new Error("`".concat(m,"` as selector refers to no known node"))}return we},d=function(){var m=h("initialFocus",{hasFallback:!0});if(m===!1)return!1;if(m===void 0||m&&!Hc(m,i.tabbableOptions))if(u(r.activeElement)>=0)m=r.activeElement;else{var F=o.tabbableGroups[0],te=F&&F.firstTabbableNode;m=te||h("fallbackFocus")}else m===null&&(m=h("fallbackFocus"));if(!m)throw new Error("Your focus-trap needs to have at least one focusable element");return m},g=function(){if(o.containerGroups=o.containers.map(function(m){var F=KA(m,i.tabbableOptions),te=WA(m,i.tabbableOptions),le=F.length>0?F[0]:void 0,oe=F.length>0?F[F.length-1]:void 0,ie=te.find(function(be){return Rs(be)}),fe=te.slice().reverse().find(function(be){return Rs(be)}),we=!!F.find(function(be){return ns(be)>0});return{container:m,tabbableNodes:F,focusableNodes:te,posTabIndexesFound:we,firstTabbableNode:le,lastTabbableNode:oe,firstDomTabbableNode:ie,lastDomTabbableNode:fe,nextTabbableNode:function(Re){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,He=F.indexOf(Re);return He<0?nt?te.slice(te.indexOf(Re)+1).find(function(ut){return Rs(ut)}):te.slice(0,te.indexOf(Re)).reverse().find(function(ut){return Rs(ut)}):F[He+(nt?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(m){return m.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(m){return m.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},_=function(m){var F=m.activeElement;if(F)return F.shadowRoot&&F.shadowRoot.activeElement!==null?_(F.shadowRoot):F},R=function(m){if(m!==!1&&m!==_(document)){if(!m||!m.focus){R(d());return}m.focus({preventScroll:!!i.preventScroll}),o.mostRecentlyFocusedNode=m,rS(m)&&m.select()}},P=function(m){var F=h("setReturnFocus",{params:[m]});return F||(F===!1?!1:m)},k=function(m){var F=m.target,te=m.event,le=m.isBackward,oe=le===void 0?!1:le;F=F||ua(te),g();var ie=null;if(o.tabbableGroups.length>0){var fe=u(F,te),we=fe>=0?o.containerGroups[fe]:void 0;if(fe<0)oe?ie=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:ie=o.tabbableGroups[0].firstTabbableNode;else if(oe){var be=o.tabbableGroups.findIndex(function(M){var ee=M.firstTabbableNode;return F===ee});if(be<0&&(we.container===F||Hc(F,i.tabbableOptions)&&!Rs(F,i.tabbableOptions)&&!we.nextTabbableNode(F,!1))&&(be=fe),be>=0){var Re=be===0?o.tabbableGroups.length-1:be-1,nt=o.tabbableGroups[Re];ie=ns(F)>=0?nt.lastTabbableNode:nt.lastDomTabbableNode}else ro(te)||(ie=we.nextTabbableNode(F,!1))}else{var He=o.tabbableGroups.findIndex(function(M){var ee=M.lastTabbableNode;return F===ee});if(He<0&&(we.container===F||Hc(F,i.tabbableOptions)&&!Rs(F,i.tabbableOptions)&&!we.nextTabbableNode(F))&&(He=fe),He>=0){var ut=He===o.tabbableGroups.length-1?0:He+1,Qe=o.tabbableGroups[ut];ie=ns(F)>=0?Qe.firstTabbableNode:Qe.firstDomTabbableNode}else ro(te)||(ie=we.nextTabbableNode(F))}}else ie=h("fallbackFocus");return ie},V=function(m){var F=ua(m);if(!(u(F,m)>=0)){if(xi(i.clickOutsideDeactivates,m)){l.deactivate({returnFocus:i.returnFocusOnDeactivate});return}xi(i.allowOutsideClick,m)||m.preventDefault()}},L=function(m){var F=ua(m),te=u(F,m)>=0;if(te||F instanceof Document)te&&(o.mostRecentlyFocusedNode=F);else{m.stopImmediatePropagation();var le,oe=!0;if(o.mostRecentlyFocusedNode)if(ns(o.mostRecentlyFocusedNode)>0){var ie=u(o.mostRecentlyFocusedNode),fe=o.containerGroups[ie].tabbableNodes;if(fe.length>0){var we=fe.findIndex(function(be){return be===o.mostRecentlyFocusedNode});we>=0&&(i.isKeyForward(o.recentNavEvent)?we+1<fe.length&&(le=fe[we+1],oe=!1):we-1>=0&&(le=fe[we-1],oe=!1))}}else o.containerGroups.some(function(be){return be.tabbableNodes.some(function(Re){return ns(Re)>0})})||(oe=!1);else oe=!1;oe&&(le=k({target:o.mostRecentlyFocusedNode,isBackward:i.isKeyBackward(o.recentNavEvent)})),R(le||o.mostRecentlyFocusedNode||d())}o.recentNavEvent=void 0},H=function(m){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=m;var te=k({event:m,isBackward:F});te&&(ro(m)&&m.preventDefault(),R(te))},q=function(m){(i.isKeyForward(m)||i.isKeyBackward(m))&&H(m,i.isKeyBackward(m))},Q=function(m){sS(m)&&xi(i.escapeDeactivates,m)!==!1&&(m.preventDefault(),l.deactivate())},Z=function(m){var F=ua(m);u(F,m)>=0||xi(i.clickOutsideDeactivates,m)||xi(i.allowOutsideClick,m)||(m.preventDefault(),m.stopImmediatePropagation())},I=function(){if(o.active)return fp.activateTrap(s,l),o.delayInitialFocusTimer=i.delayInitialFocus?dp(function(){R(d())}):R(d()),r.addEventListener("focusin",L,!0),r.addEventListener("mousedown",V,{capture:!0,passive:!1}),r.addEventListener("touchstart",V,{capture:!0,passive:!1}),r.addEventListener("click",Z,{capture:!0,passive:!1}),r.addEventListener("keydown",q,{capture:!0,passive:!1}),r.addEventListener("keydown",Q),l},v=function(){if(o.active)return r.removeEventListener("focusin",L,!0),r.removeEventListener("mousedown",V,!0),r.removeEventListener("touchstart",V,!0),r.removeEventListener("click",Z,!0),r.removeEventListener("keydown",q,!0),r.removeEventListener("keydown",Q),l},E=function(m){var F=m.some(function(te){var le=Array.from(te.removedNodes);return le.some(function(oe){return oe===o.mostRecentlyFocusedNode})});F&&R(d())},C=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(E):void 0,A=function(){C&&(C.disconnect(),o.active&&!o.paused&&o.containers.map(function(m){C.observe(m,{subtree:!0,childList:!0})}))};return l={get active(){return o.active},get paused(){return o.paused},activate:function(m){if(o.active)return this;var F=c(m,"onActivate"),te=c(m,"onPostActivate"),le=c(m,"checkCanFocusTrap");le||g(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=_(r),F?.();var oe=function(){le&&g(),I(),A(),te?.()};return le?(le(o.containers.concat()).then(oe,oe),this):(oe(),this)},deactivate:function(m){if(!o.active)return this;var F=hp({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},m);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,v(),o.active=!1,o.paused=!1,A(),fp.deactivateTrap(s,l);var te=c(F,"onDeactivate"),le=c(F,"onPostDeactivate"),oe=c(F,"checkCanReturnFocus"),ie=c(F,"returnFocus","returnFocusOnDeactivate");te?.();var fe=function(){dp(function(){ie&&R(P(o.nodeFocusedBeforeActivation)),le?.()})};return ie&&oe?(oe(P(o.nodeFocusedBeforeActivation)).then(fe,fe),this):(fe(),this)},pause:function(m){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,m)):this},unpause:function(m){return o.active?(o.manuallyPaused=!1,s[s.length-1]!==this?this:this._setPausedState(!1,m)):this},updateContainerElements:function(m){var F=[].concat(m).filter(Boolean);return o.containers=F.map(function(te){return typeof te=="string"?r.querySelector(te):te}),o.active&&g(),A(),this}},Object.defineProperties(l,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(m,F){if(o.paused===m)return this;if(o.paused=m,m){var te=c(F,"onPause"),le=c(F,"onPostPause");te?.(),v(),A(),le?.()}else{var oe=c(F,"onUnpause"),ie=c(F,"onPostUnpause");oe?.(),g(),I(),A(),ie?.()}return this}}}),l.updateContainerElements(e),l};function cS(t,e={}){let n;const{immediate:r,...s}=e,i=Zt(!1),o=Zt(!1),l=g=>n&&n.activate(g),c=g=>n&&n.deactivate(g),u=()=>{n&&(n.pause(),o.value=!0)},h=()=>{n&&(n.unpause(),o.value=!1)},d=Y(()=>{const g=$e(t);return no(g).map(_=>{const R=$e(_);return typeof R=="string"?R:Yn(R)}).filter(q_)});return We(d,g=>{if(g.length)if(!n)n=lS(g,{...s,onActivate(){i.value=!0,e.onActivate&&e.onActivate()},onDeactivate(){i.value=!1,e.onDeactivate&&e.onDeactivate()}}),r&&l();else{const _=n?.active;n?.updateContainerElements(g),!_&&r&&l()}},{flush:"post"}),gn(()=>c()),{hasFocus:i,isPaused:o,activate:l,deactivate:c,pause:u,unpause:h}}const uS=({element:t,isActive:e,noTrap:n,fallbackFocus:r,focus:s},i={allowOutsideClick:!0,fallbackFocus:r.ref.value??void 0,escapeDeactivates:!1,clickOutsideDeactivates:!1,initialFocus:s})=>{const o=zt(ls(e)),l=zt(ls(n)),c=()=>!t.value?.querySelectorAll(`a, button, input, select, textarea, [tabindex]:not([tabindex="-1"]):not(.${r.classSelector})`)?.length,u=Fe(!1);xr(()=>{u.value=c(),z_(t,()=>{u.value=c()},{childList:!0,subtree:!0})});const h=cS(t,i);return We(o,async d=>{d&&l.value===!1?h.activate():h.deactivate()}),We(l,d=>{d===!0&&h.deactivate()}),{needsFallback:zt(u)}},hS=rA(SA);let ha="";const Jr=new Map,fS=(t,e)=>{const n=zt(ls(t)),r=zm(),s=Y(()=>!$e(e)),i=hS(typeof document<"u"?document.body:null,n.value&&s.value);xr(()=>{typeof document>"u"||(Jr.set(r,!1),We([n,s],([o,l])=>{const c=window.innerWidth-document.documentElement.clientWidth,u=Array.from(Jr.values()).some(g=>g===!0),h=o&&l;Jr.set(r,h),h&&!u&&!i.value&&(i.value=!0,c>0&&(ha=document.body.style.paddingRight,document.body.style.paddingRight=`${c+ha}px`));const d=Array.from(Jr.values()).some(g=>g===!0);u&&!d&&(Jr.set(r,!1),i.value=!1,document.body.style.paddingRight=ha)},{immediate:!0}))}),Ll(()=>{Jr.delete(r),Array.from(Jr.values()).some(l=>l===!0)||(document.body.style.paddingRight=ha,i.value=!1)})},dS=(t=[])=>{const{activeElement:e}=document;return e&&!t?.some(n=>n===e)?e:null},TD=(t,e={})=>{const n=r=>r===dS();try{t.focus(e)}catch(r){console.error(r)}return n(t)},ny=t=>(t?.()??[]).length===0,bD=t=>{if(t.getAttribute("display")==="none")return!1;const e=t.getBoundingClientRect();return!!(e&&e.height>0&&e.width>0)},pp=t=>{if(typeof window>"u")return 1055;const e=t??document.body,n=window.getComputedStyle(e).getPropertyValue("--bs-modal-zindex").trim(),r=Number.parseInt(n,10);return Number.isFinite(r)?r:1055};function pS(t,e=ry("injectSelf")){const{provides:n}=e;if(n&&t in n)return n[t]}function ry(t,e){const n=_n();if(!n)throw new Error(`[Bvn] ${t} must be called from inside a setup function`);return n}const gS=(t="")=>t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase(),gp=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);function sy(t={},e={},n){const r={};for(const s in t)r[s]=t[s];for(const s in e){const i=t[s],o=e[s];if(gp(i)&&gp(o)){r[s]=sy(i,o);continue}r[s]=o}return r}const mS=(t,e)=>typeof t.props?.[e]<"u"||typeof t.props?.[gS(e)]<"u";function _S(t={},e){const n=Et(wa,Fe({})),r=ry("useDefaults");if(e=e??r.type.name??r.type.__name,!e)throw new Error("[Bvn] Could not determine component name");const s=Y(()=>n.value?.[t._as??e]),i=new Proxy(t,{get(c,u){const h=Reflect.get(c,u);return u==="class"||u==="style"?[s.value?.[u],h].filter(d=>d!=null):typeof u=="string"&&!mS(r.vnode,u)?s.value?.[u]??n.value?.global?.[u]??h:h}}),o=Zt();f_(()=>{if(s.value){const c=Object.entries(s.value).filter(([u])=>u.startsWith(u[0].toUpperCase()));o.value=c.length?Object.fromEntries(c):void 0}else o.value=void 0});function l(){const c=pS(wa,r);Xi(wa,Y(()=>o.value?sy(c?.value??{},o.value):c?.value))}return{props:i,provideSubDefaults:l}}function li(t,e){const{props:n,provideSubDefaults:r}=_S(t,e);return r(),n}const Ia=t=>Y(()=>{let e=$e(t);return e={variant:e.variant??null,bgVariant:e.bgVariant??null,textVariant:e.textVariant??null,borderVariant:e.borderVariant??null},{[`text-bg-${e.variant}`]:e.variant!==null,[`text-${e.textVariant}`]:e.textVariant!==null,[`bg-${e.bgVariant}`]:e.bgVariant!==null,[`border-${e.borderVariant}`]:e.borderVariant!==null}}),yS={key:0,class:"visually-hidden"},vS=dn({__name:"BSpinner",props:{label:{default:void 0},role:{default:"status"},small:{type:Boolean,default:!1},tag:{default:"span"},type:{default:"border"},variant:{default:null}},setup(t){const n=li(t,"BSpinner"),r=Xm(),s=Ia(Y(()=>({textVariant:n.variant}))),i=Y(()=>[`spinner-${n.type}`,s.value,{[`spinner-${n.type}-sm`]:n.small}]),o=Y(()=>!ny(r.label));return(l,c)=>(De(),Mt(ii(W(n).tag),{class:St(i.value),role:W(n).label||o.value?W(n).role:null,"aria-hidden":W(n).label||o.value?null:!0},{default:jt(()=>[W(n).label||o.value?(De(),Pt("span",yS,[Ut(l.$slots,"label",{},()=>[rs(qn(W(n).label),1)])])):tn("",!0)]),_:3},8,["class","role","aria-hidden"]))}}),wD=(t,e)=>Object.keys(t).filter(n=>!e.map(r=>r.toString()).includes(n)).reduce((n,r)=>({...n,[r]:t[r]}),{}),ES=(t,e)=>[...e].reduce((n,r)=>(n[r]=t[r],n),{}),ID=(t,e,n)=>{const r=e.split(/[.[\]]/g);let s=t;for(const i of r){if(s===null||s===void 0)return n;i.trim()!==""&&(s=s[i])}return s===void 0?n:s},AD=(t,e,n)=>{const r=c=>{if((d=>d==null||typeof d!="object"&&typeof d!="function")(c))return c;if(typeof c=="function")return c.bind({});const h=new c.constructor;return Object.getOwnPropertyNames(c).forEach(d=>{h[d]=c[d]}),h},s=(c,u)=>{const h=u;if(c==null)return h;const d=Number.parseInt(c);return Number.isNaN(d)?h:d};if(!t)return{};if(!e||n===void 0)return t;const i=e.split(/[.[\]]/g).filter(c=>!!c.trim()),o=c=>{if(i.length>1){const u=i.shift(),h=s(i[0],null)!==null;c[u]=c[u]===void 0?h?[]:{}:c[u],o(c[u])}else c[i[0]]=n},l=r(t);return o(l),l},TS=(t,e)=>{if(t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s)||!TS(t[s],e[s]))return!1;return!0},SD="ArrowDown",CD="End",RD="Home",PD="ArrowUp",iy=/_/g,oy=/([a-z])([A-Z])/g,kD=/^[0-9]*\.?[0-9]+$/,bS=/(\s|^)(\w)/g,wS=/(\s|^)(\w)/,OD=t=>t.replace(iy," ").replace(oy,(e,n,r)=>`${n} ${r}`).replace(wS,(e,n,r)=>n+r.toUpperCase()),mp=t=>t.replace(iy," ").replace(oy,(e,n,r)=>`${n} ${r}`).replace(bS,(e,n,r)=>n+r.toUpperCase()),ND=t=>{const e=t.trim();return e.charAt(0).toUpperCase()+e.slice(1)},IS=t=>t.replace(/-./g,e=>e.charAt(1).toUpperCase()).replace(/\b\w/g,e=>e.toUpperCase()).replace(/\s+/g,""),AS=t=>!!(t.href||t.to),SS=(t,e)=>{const n=zt(ls(e)),r=zt(ls(t)),s=Y(()=>AS(r.value)),i=Y(()=>s.value?ES(r.value,n.value??["active","activeClass","append","exactActiveClass","href","rel","replace","routerComponentName","target","to","variant","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover"]):{});return{computedLink:s,computedLinkProps:i}},CS=({to:t,disabled:e,href:n,replace:r,routerComponentName:s})=>{const i=_n(),o=i?.appContext?.app?.config?.globalProperties?.$router,l=i?.appContext?.app?.config?.globalProperties?.$route,c=ii("RouterLink"),u=c&&typeof c!="string"&&"useLink"in c?c.useLink:null,h=Y(()=>$e(t)||""),d=zt(ls(r)),g=Y(()=>IS($e(s))),_=Y(()=>!(i?.appContext?.app?.component(g.value)!==void 0)||$e(e)||!h.value?"a":g.value),R=Y(()=>_.value==="RouterLink"),P=Y(()=>R.value&&typeof i?.appContext?.app?.$nuxt<"u"),k=Y(()=>_.value!=="a"&&!R.value&&!P.value),V=Y(()=>R.value||P.value),L=Y(()=>({to:h.value,replace:d.value})),H=u?.({to:h,replace:d}),q=Y(()=>V.value?H:null),Q=Y(()=>{if(q.value?.href.value)return q.value.href.value;const Z="#",I=$e(n);if(I)return I;if(typeof h.value=="string")return h.value||Z;const v=h.value;if(v!==void 0&&"path"in v){const E=v.path||"",C=v.query?`?${Object.keys(v.query).map(T=>`${T}=${v.query?.[T]}`).join("=")}`:"",A=!v.hash||v.hash.charAt(0)==="#"?v.hash||"":`#${v.hash}`;return`${E}${C}${A}`||Z}return Z});return{isNonStandardTag:k,tag:_,isRouterLink:R,isNuxtLink:P,computedHref:Q,routerName:g,router:o,route:l,link:q,linkProps:L}},ay=t=>Y(()=>{const e=$e(t);return{[`link-${e.variant}`]:e.variant!==null,[`link-opacity-${e.opacity}`]:e.opacity!==void 0,[`link-opacity-${e.opacityHover}-hover`]:e.opacityHover!==void 0,[`link-underline-${e.underlineVariant}`]:e.underlineVariant!==null,[`link-offset-${e.underlineOffset}`]:e.underlineOffset!==void 0,[`link-offset-${e.underlineOffsetHover}-hover`]:e.underlineOffsetHover!==void 0,"link-underline":e.underlineVariant===null&&(e.underlineOpacity!==void 0||e.underlineOpacityHover!==void 0),[`link-underline-opacity-${e.underlineOpacity}`]:e.underlineOpacity!==void 0,[`link-underline-opacity-${e.underlineOpacityHover}-hover`]:e.underlineOpacityHover!==void 0,"icon-link":e.icon===!0}}),_p="active",RS=dn({__name:"BLink",props:{active:{type:Boolean,default:void 0},activeClass:{default:"router-link-active"},disabled:{type:Boolean,default:!1},exactActiveClass:{default:"router-link-exact-active"},href:{default:void 0},icon:{type:Boolean,default:!1},noRel:{type:Boolean,default:!1},opacity:{default:void 0},opacityHover:{default:void 0},prefetch:{type:Boolean,default:void 0},prefetchOn:{default:void 0},noPrefetch:{type:Boolean,default:void 0},prefetchedClass:{default:void 0},rel:{default:void 0},replace:{type:Boolean,default:!1},routerComponentName:{default:"router-link"},routerTag:{default:"a"},stretched:{type:Boolean,default:!1},target:{default:void 0},to:{default:void 0},underlineOffset:{default:void 0},underlineOffsetHover:{default:void 0},underlineOpacity:{default:void 0},underlineOpacityHover:{default:void 0},underlineVariant:{default:null},variant:{default:null}},emits:["click"],setup(t,{emit:e}){const r=li(t,"BLink"),s=e,i=bb(),{computedHref:o,tag:l,link:c,isNuxtLink:u,isRouterLink:h,linkProps:d,isNonStandardTag:g}=CS({routerComponentName:()=>r.routerComponentName,disabled:()=>r.disabled,to:()=>r.to,replace:()=>r.replace,href:()=>r.href}),_=Et(XI,null),R=Et(ZI,null),P=ay(r),k=Y(()=>[P.value,i.class,V.value,{[_p]:r.active,[r.activeClass]:c.value?.isActive.value||!1,[r.exactActiveClass]:c.value?.isExactActive.value||!1,"stretched-link":r.stretched===!0}]),V=Y(()=>({[_p]:r.active,disabled:r.disabled})),L=I=>{if(r.disabled){I.preventDefault(),I.stopImmediatePropagation();return}(_?.isNav?.value===!0&&R===null||R!==null&&R.noAutoClose?.value!==!0)&&_?.hide?.(),s("click",I)},H=Y(()=>r.target==="_blank"?!r.rel&&r.noRel?"noopener":r.rel:void 0),q=Y(()=>r.disabled?"-1":typeof i.tabindex>"u"?null:i.tabindex),Q=Y(()=>({prefetch:r.prefetch,noPrefetch:r.noPrefetch,prefetchOn:r.prefetchOn,prefetchedClass:r.prefetchedClass,...d.value})),Z=Y(()=>({...h.value?d.value:void 0,...u.value||g.value?Q.value:void 0}));return(I,v)=>(De(),Mt(ii(W(l)),an({class:k.value,target:W(r).target,href:W(o),rel:H.value,tabindex:q.value,"aria-disabled":W(r).disabled?!0:null},Z.value,{onClick:v[0]||(v[0]=E=>{L(E),W(c)?.navigate(E)})}),{default:jt(()=>[Ut(I.$slots,"default")]),_:3},16,["class","target","href","rel","tabindex","aria-disabled"]))}}),qc=dn({__name:"BButton",props:ja({loading:{type:Boolean,default:!1},loadingFill:{type:Boolean,default:!1},loadingText:{default:"Loading..."},pill:{type:Boolean,default:!1},size:{default:"md"},squared:{type:Boolean,default:!1},tag:{default:"button"},type:{default:"button"},variant:{default:"secondary"},active:{type:Boolean,default:!1},activeClass:{default:void 0},disabled:{type:Boolean,default:void 0},exactActiveClass:{default:void 0},href:{default:void 0},icon:{type:Boolean,default:!1},noRel:{type:Boolean},opacity:{default:void 0},opacityHover:{default:void 0},prefetch:{type:Boolean},prefetchOn:{},noPrefetch:{type:Boolean},prefetchedClass:{},rel:{default:void 0},replace:{type:Boolean,default:void 0},routerComponentName:{default:void 0},routerTag:{default:void 0},stretched:{type:Boolean,default:!1},target:{default:void 0},to:{default:void 0},underlineOffset:{default:void 0},underlineOffsetHover:{default:void 0},underlineOpacity:{default:void 0},underlineOpacityHover:{default:void 0},underlineVariant:{default:null}},{pressed:{type:Boolean,default:void 0},pressedModifiers:{}}),emits:ja(["click"],["update:pressed"]),setup(t,{emit:e}){const r=li(t,"BButton"),s=e,i=Os("_element"),o=p_(t,"pressed"),{computedLink:l,computedLinkProps:c}=SS(r,["active-class","exact-active-class","replace","routerComponentName","routerTag"]),u=Y(()=>typeof o.value=="boolean"),h=Y(()=>r.tag==="button"&&r.href===void 0&&r.to===void 0),d=Y(()=>r.to!==void 0),g=Y(()=>r.href!==void 0?!1:!h.value),_=Y(()=>d.value?c.value:[]),R=Y(()=>r.href==="#"&&r.disabled?!0:g.value?r.disabled:null),P=Y(()=>r.variant?.startsWith("link")||!1),k=Y(()=>r.variant?.startsWith("link-")||!1),V=ay(Y(()=>({...P.value?{icon:r.icon,opacity:r.opacity,opacityHover:r.opacityHover,underlineOffset:r.underlineOffset,underlineOffsetHover:r.underlineOffsetHover,underlineOpacity:r.underlineOpacity,underlineOpacityHover:r.underlineOpacityHover,underlineVariant:r.underlineVariant,variant:k.value===!0?r.variant?.slice(5):null}:void 0}))),L=Y(()=>[P.value===!0&&l.value===!1?V.value:void 0,[`btn-${r.size}`],{[`btn-${r.variant}`]:r.variant!==null&&k.value===!1,active:r.active||o.value,"rounded-pill":r.pill,"rounded-0":r.squared,disabled:r.disabled}]),H=Y(()=>d.value?RS:r.href?"a":r.tag),q=Q=>{if(r.disabled){Q.preventDefault(),Q.stopPropagation();return}s("click",Q),u.value&&(o.value=!o.value)};return K_([" ","enter"],Q=>{r.href==="#"&&(Q.preventDefault(),i.value?.click())},{target:i}),(Q,Z)=>(De(),Mt(ii(H.value),an({ref:"_element",class:"btn"},_.value,{class:L.value,"aria-disabled":R.value,"aria-pressed":u.value?o.value:null,autocomplete:u.value?"off":null,disabled:h.value?W(r).disabled:null,href:W(r).href,rel:W(l)?W(r).rel:null,role:g.value||W(l)?"button":null,target:W(l)?W(r).target:null,type:h.value?W(r).type:null,to:h.value?null:W(r).to,onClick:q}),{default:jt(()=>[W(r).loading?Ut(Q.$slots,"loading",{key:0},()=>[W(r).loadingFill?tn("",!0):(De(),Pt(Bt,{key:0},[rs(qn(W(r).loadingText),1)],64)),Ut(Q.$slots,"loading-spinner",{},()=>[ot(vS,{small:W(r).size!=="lg",label:W(r).loadingFill?W(r).loadingText:void 0},null,8,["small","label"])])]):Ut(Q.$slots,"default",{key:1})]),_:3},16,["class","aria-disabled","aria-pressed","autocomplete","disabled","href","rel","role","target","type","to"]))}}),PS=["type","disabled","aria-label"],kS=dn({__name:"BCloseButton",props:{ariaLabel:{default:"Close"},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const r=li(t,"BCloseButton"),s=e;return(i,o)=>(De(),Pt("button",{type:W(r).type,class:"btn-close",disabled:W(r).disabled,"aria-label":W(r).ariaLabel,onClick:o[0]||(o[0]=l=>s("click",l))},null,8,PS))}}),OS=(t,e)=>{const n=zm();return Y(()=>$e(t)||mh(n||"",e))};class el{cancelable=!0;componentId=null;_defaultPrevented=!1;eventType="";nativeEvent=null;_preventDefault;relatedTarget=null;target=null;get defaultPrevented(){return this._defaultPrevented}set defaultPrevented(e){this._defaultPrevented=e}get preventDefault(){return this._preventDefault}set preventDefault(e){this._preventDefault=e}constructor(e,n={}){if(!e)throw new TypeError(`Failed to construct '${this.constructor.name}'. 1 argument required, ${arguments.length} given.`);Object.assign(this,el.Defaults,n,{eventType:e}),this._preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)}}static get Defaults(){return{cancelable:!0,componentId:null,eventType:"",nativeEvent:null,relatedTarget:null,target:null}}}class NS extends el{trigger=null;ok=void 0;constructor(e,n={}){super(e,n),Object.assign(this,el.Defaults,n,{eventType:e})}static get Defaults(){return{...super.Defaults,trigger:null,ok:void 0}}}const yp={name:"fade",enterActiveClass:"",enterFromClass:"showing",enterToClass:"",leaveActiveClass:"",leaveFromClass:"",leaveToClass:"showing",css:!0},DS=(t,e,n,r,s,i={transitionProps:{},showFn:()=>{},hideFn:()=>{}})=>{let o=!1;const l=!!t.value&&!e.initialAnimation||e.visible||!1,c=Fe(l),u=Fe(l),h=Fe(l);let d=typeof t.value!="boolean";We(t,()=>{if(d=typeof t.value!="boolean",o){o=!1;return}t.value?Z():v("modelValue",!0)});const g=Fe(l),_=Fe(!1),R=Y(()=>e.noAnimation||e.noFade||g.value||!1);let P=!1;xr(()=>{if(P=!0,!e.show&&l){const w=k("show",{cancelable:!0});if(n("show",w),w.defaultPrevented){n("show-prevented",k("show-prevented"));return}g.value=!0,t.value||(o=!0,t.value=!0),u.value=!0,h.value=!0,Re.value=!0,Ee.value=!0,b.value=!0,c.value=!0,i.showFn?.()}else(e.show||t.value&&e.initialAnimation)&&Z()}),We(()=>e.visible,w=>{g.value=!0,Un(()=>{w&&(Re.value=!0),w?Z():v("visible-prop",!0)})}),We(()=>e.show,w=>{w?Z():v("show-prop",!0)}),cs(r,"bv-toggle",()=>{t.value=!t.value});const k=(w,D={})=>new NS(w,{cancelable:!1,target:r?.value||null,relatedTarget:null,trigger:null,...D,componentId:s?.value});let V,L,H,q,Q;const Z=(w=!1)=>{if(c.value&&!L&&!q)return Promise.resolve(!0);if(Q=w,c.value&&!L&&q)return q;q=new Promise(B=>{H=B});const D=k("show",{cancelable:!0});return n("show",D),D.defaultPrevented?(n("show-prevented",k("show-prevented")),Re.value&&(Re.value=!1),t.value&&!d&&(o=!0,Un(()=>{t.value=!1})),H?.("show-prevented"),q):(L&&(clearTimeout(L),L=void 0),u.value=!0,h.value=!0,requestAnimationFrame(()=>{if(g.value||e.delay===void 0){if(!P)return;V=void 0,c.value=!0,i.showFn?.(),t.value||(o=!0,Un(()=>{t.value=!0}));return}V=setTimeout(()=>{P&&(V=void 0,c.value=!0,i.showFn?.(),t.value||(o=!0,Un(()=>{t.value=!0})))},typeof e.delay=="number"?e.delay:e.delay?.show||0)}),q)};let I;const v=(w,D)=>{if(!c.value&&!V)return Promise.resolve("");q||(q=new Promise(G=>{H=G})),typeof w!="string"&&(w=void 0),I=w;const B=k("hide",{cancelable:!0,trigger:w}),x=k(w||"ignore",{cancelable:!0,trigger:w});return w==="backdrop"&&e.noCloseOnBackdrop||w==="esc"&&e.noCloseOnEsc?(n("hide-prevented",k("hide-prevented",{trigger:w})),H?.("hide-prevented"),q):(V&&(clearTimeout(V),V=void 0),w&&!D&&n(w,x),n("hide",B),B.defaultPrevented||x.defaultPrevented?(n("hide-prevented",k("hide-prevented",{trigger:w})),t.value||Un(()=>{o=!0,t.value=!0}),H?.("hide-prevented"),q):(ne.value=!1,V&&(clearTimeout(V),V=void 0,_.value||(u.value=!1),h.value=!1),L=setTimeout(()=>{P&&(L=void 0,we.value=!0,c.value=!1,i.hideFn?.(),t.value&&(o=!0,t.value=d?0:!1))},g.value?0:typeof e.delay=="number"?e.delay:e.delay?.hide||0),q))},E=lp(w=>v(w),500),C=lp(()=>Z(),500),A=(w=!1)=>{const D=k("toggle",{cancelable:!0});return n("toggle",D),D.defaultPrevented?(n("toggle-prevented",k("toggle-prevented")),Promise.resolve("toggle-prevented")):c.value?v("toggle-function",!0):Z(w)},T=()=>{const w=k("toggle",{cancelable:!0});if(n("toggle",w),w.defaultPrevented){n("toggle-prevented",k("toggle-prevented"));return}c.value?v("toggle-trigger",!0):Z()},m=[],F=(w,D)=>{m.push({trigger:w,el:D}),D.addEventListener(w,T),oe(D)},te=(w,D,B=!0)=>{const x=m.findIndex(G=>G?.trigger===w&&G.el===D);x>-1&&(m.splice(x,1),D.removeEventListener(w,T),B&&(D.removeAttribute("aria-expanded"),D.classList.remove("collapsed"),D.classList.remove("not-collapsed")))},le=Et(j_,void 0)?.register({id:s.value,toggle:A,show:Z,hide:v,value:zt(c),registerTrigger:F,unregisterTrigger:te,component:_n()}),oe=w=>{w.setAttribute("aria-expanded",t.value?"true":"false"),w.classList.toggle("collapsed",!t.value),w.classList.toggle("not-collapsed",!!t.value)};We(t,()=>{m.forEach(w=>{oe(w.el)})}),We(s,(w,D)=>{le?.updateId(w,D)}),ch(()=>{le?.unregister(),m.forEach(w=>{w.el.removeEventListener(w.trigger,T)})}),Ll(()=>{P=!1,clearTimeout(V),clearTimeout(L),V=void 0,L=void 0});const ie=Fe(!1),fe=()=>{e.lazy===!0&&(ie.value=!0)},we=Fe(!1),be=Fe(l),Re=Fe(l),nt=w=>{i.transitionProps?.onBeforeEnter?.(w),e.transitionProps?.onBeforeEnter?.(w),be.value=!0},He=w=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{Re.value=!0})}),i.transitionProps?.onEnter?.(w),e.transitionProps?.onEnter?.(w)},ut=w=>{fe(),i.transitionProps?.onAfterEnter?.(w),e.transitionProps?.onAfterEnter?.(w),g.value&&requestAnimationFrame(()=>{g.value=!1}),_.value&&(_.value=!1),requestAnimationFrame(()=>{ne.value=!0,Un(()=>{n("shown",k("shown",{cancelable:!1}))})}),Q||(H?.(!0),q=void 0,H=void 0)},Qe=w=>{we.value||(we.value=!0),i.transitionProps?.onBeforeLeave?.(w),e.transitionProps?.onBeforeLeave?.(w),ne.value=!1},M=w=>{Re.value=!1,i.transitionProps?.onLeave?.(w),e.transitionProps?.onLeave?.(w)},ee=w=>{n("hidden",k("hidden",{trigger:I,cancelable:!1})),i.transitionProps?.onAfterLeave?.(w),e.transitionProps?.onAfterLeave?.(w),we.value=!1,be.value=!1,g.value&&requestAnimationFrame(()=>{g.value=!1}),requestAnimationFrame(()=>{_.value||(u.value=!1)}),H?.(I||""),q=void 0,H=void 0,I=void 0},X=Y(()=>_.value===!0||be.value===!0||e.lazy===!1||e.lazy===!0&&ie.value===!0&&e.unmountLazy===!1),ne=Fe(!1),Ee=Fe(!1),b=Fe(!1),S={...i.transitionProps,onBeforeEnter:nt,onEnter:He,onAfterEnter:ut,onBeforeLeave:Qe,onLeave:M,onAfterLeave:ee};return{showRef:c,renderRef:u,renderBackdropRef:h,isVisible:Re,isActive:be,trapActive:ne,show:Z,hide:v,toggle:A,throttleHide:E,throttleShow:C,buildTriggerableEvent:k,computedNoAnimation:R,localNoAnimation:g,localTemporaryHide:_,isLeaving:we,transitionProps:{...yp,...e.transitionProps,...S},lazyLoadCompleted:ie,markLazyLoadCompleted:fe,contentShowing:X,backdropReady:b,backdropVisible:Ee,backdropTransitionProps:{...yp,onBeforeEnter:()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{Ee.value=!0})}),b.value=!1},onAfterEnter:()=>{b.value=!0},onBeforeLeave:()=>{Ee.value=!1},onAfterLeave:()=>{b.value=!1,requestAnimationFrame(()=>{h.value=!1})}}}},VS=(t,e=typeof document<"u"?document:void 0)=>{if(t)return typeof t=="string"?typeof e>"u"||typeof document>"u"?void 0:document.getElementById(t)??e.querySelector(t)??void 0:t.$el??t},DD=t=>typeof t=="string"?mp(t):t.label!==void 0?t.label:typeof t.key=="string"?mp(t.key):t.key,VD=Object.freeze(Object.keys({bordered:0,borderless:0,borderVariant:0,captionTop:0,dark:0,fixed:0,hover:0,id:0,noBorderCollapse:0,outlined:0,responsive:0,small:0,stacked:0,stickyHeader:0,striped:0,stripedColumns:0,variant:0,tableAttrs:0,tableClass:0})),LD=Object.freeze(Object.keys({align:0,caption:0,detailsTdClass:0,fieldColumnClass:0,fields:0,footClone:0,footRowVariant:0,footVariant:0,headRowVariant:0,headVariant:0,items:0,labelStacked:0,modelValue:0,primaryKey:0,tbodyClass:0,tbodyTrAttrs:0,tbodyTrClass:0,tfootClass:0,tfootTrClass:0,theadClass:0,theadTrClass:0})),xD=(t,e)=>t.stacked&&t.labelStacked!==!0?{"data-label":e}:void 0,zc="modal-open",LS=()=>{const t=Et(H_),e=r=>{t?.removeStack(r),t?.removeRegistry(r)},n=IA("updateHTMLAttrs",(r,s,i)=>{const o=typeof r=="string"?window?.document.querySelector(r):Yn(r);o&&(s==="class"?o.classList.toggle(zc,i===zc):o.setAttribute(s,i))});return gn(()=>{t?.countStack.value===0&&n("body","class","")}),We(()=>t?.countStack.value,r=>{r!==void 0&&n("body","class",r>0?zc:"")}),{...t,dispose:e}},xS=(t,e)=>{const{pushRegistry:n,pushStack:r,removeStack:s,stack:i,dispose:o,countStack:l}=LS(),c=_n();if(!c||c.type.__name!=="BModal")throw new Error("useModalManager must only use in BModal component");n?.(c),gn(()=>{o(c)});const u=(h,d)=>{h?r?.(c):d&&!h&&s?.(c)};return u(e,e),We(t,u),{activePosition:Y(()=>i?.value.findIndex(h=>$e(h.exposed?.id)===$e(c.exposed?.id))),activeModalCount:l,stackWithoutSelf:Y(()=>i?.value.filter(h=>$e(h.exposed?.id)!==$e(c.exposed?.id))??[])}},MS=["id","aria-labelledby","aria-describedby"],FS=["id"],vp="modal-fallback-focus",BS=dn({inheritAttrs:!1,__name:"BModal",props:ja({focus:{type:[String,Boolean,Object,null],default:void 0},backdropFirst:{type:Boolean,default:!1},body:{default:void 0},bodyAttrs:{default:void 0},bodyBgVariant:{default:null},bodyClass:{default:null},bodyScrolling:{type:Boolean,default:!1},bodyTextVariant:{default:null},bodyVariant:{default:null},busy:{type:Boolean,default:!1},buttonSize:{default:"md"},cancelClass:{default:void 0},cancelDisabled:{type:Boolean,default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{type:Boolean,default:!1},contentClass:{default:void 0},dialogClass:{default:void 0},footerBgVariant:{default:null},footerBorderVariant:{default:null},footerClass:{default:void 0},footerTextVariant:{default:null},footerVariant:{default:null},fullscreen:{type:[Boolean,String],default:!1},headerAttrs:{default:void 0},headerBgVariant:{default:null},headerBorderVariant:{default:null},headerClass:{default:void 0},headerCloseClass:{default:void 0},headerCloseLabel:{default:"Close"},headerCloseVariant:{default:"secondary"},headerTextVariant:{default:null},headerVariant:{default:null},noBackdrop:{type:Boolean,default:!1},noFooter:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1},noHeaderClose:{type:Boolean,default:!1},id:{default:void 0},modalClass:{default:void 0},noCloseOnBackdrop:{type:Boolean,default:!1},noCloseOnEsc:{type:Boolean,default:!1},noTrap:{type:Boolean,default:!1},noStacking:{type:Boolean},okClass:{default:void 0},okDisabled:{type:Boolean,default:!1},okOnly:{type:Boolean,default:!1},okTitle:{default:"OK"},okVariant:{default:"primary"},scrollable:{type:Boolean,default:!1},size:{default:"md"},title:{default:void 0},titleClass:{default:void 0},titleVisuallyHidden:{type:Boolean,default:!1},titleTag:{default:"h5"},teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:"body"},initialAnimation:{type:Boolean,default:!1},noAnimation:{type:Boolean},noFade:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},show:{type:Boolean,default:!1},transProps:{default:void 0},visible:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:ja(["backdrop","close","esc","hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(t,{expose:e,emit:n}){const s=li(t,"BModal"),i=n,o=Xm(),l=OS(()=>s.id,"modal"),c=p_(t,"modelValue"),u=Os("_element"),h=Os("_fallbackFocusElement"),d=Os("_okButton"),g=Os("_cancelButton"),_=Os("_closeButton"),R=()=>s.focus&&typeof s.focus!="boolean"?s.focus==="ok"?d:s.focus==="close"?_:s.focus==="cancel"?g:VS(s.focus,u.value??void 0)??u.value:u;let P=null;const k=()=>{if(s.noTrap&&s.focus!==!1){P=document.activeElement,P===u.value&&(P=null);const U=Yn(R());if(!U)return;U?.focus(),U.tagName&&U.tagName.toLowerCase()==="input"&&typeof U.select=="function"&&U.select()}},V=()=>{s.noTrap&&s.focus!==!1&&P&&(P?.focus(),P=null)},{showRef:L,renderRef:H,renderBackdropRef:q,hide:Q,show:Z,toggle:I,computedNoAnimation:v,transitionProps:E,backdropTransitionProps:C,isLeaving:A,isVisible:T,trapActive:m,contentShowing:F,backdropReady:te,backdropVisible:le}=DS(c,s,i,u,l,{transitionProps:{onAfterEnter:k,onAfterLeave:V}}),{needsFallback:oe}=uS({element:u,isActive:m,noTrap:()=>s.noTrap,fallbackFocus:{ref:h,classSelector:vp},focus:()=>s.focus===!1?!1:Yn(R())??void 0});K_("Escape",()=>{Q("esc")},{target:u}),fS(L,()=>s.bodyScrolling);const ie=Y(()=>!ny(o["header-close"])),fe=Y(()=>[s.dialogClass,{"modal-fullscreen":s.fullscreen===!0,[`modal-fullscreen-${s.fullscreen}-down`]:typeof s.fullscreen=="string",[`modal-${s.size}`]:s.size!=="md","modal-dialog-centered":s.centered,"modal-dialog-scrollable":s.scrollable}]),we=Ia(()=>({bgVariant:s.bodyBgVariant,textVariant:s.bodyTextVariant,variant:s.bodyVariant})),be=Y(()=>[s.bodyClass,we.value]),Re=Ia(()=>({bgVariant:s.headerBgVariant,textVariant:s.headerTextVariant,variant:s.headerVariant,borderVariant:s.headerBorderVariant})),nt=Y(()=>[s.headerClass,Re.value]),He=Y(()=>({variant:ie.value?s.headerCloseVariant:void 0,class:s.headerCloseClass})),ut=Ia(()=>({bgVariant:s.footerBgVariant,textVariant:s.footerTextVariant,variant:s.footerVariant,borderVariant:s.footerBorderVariant})),Qe=Y(()=>[s.footerClass,ut.value]),M=Y(()=>[s.titleClass,{"visually-hidden":s.titleVisuallyHidden}]),ee=Y(()=>s.cancelDisabled||s.busy),X=Y(()=>s.okDisabled||s.busy),{activePosition:ne,activeModalCount:Ee,stackWithoutSelf:b}=xS(L,c.value),S=Y(()=>({[`stack-position-${ne?.value??0}`]:!0,[`stack-inverse-position-${(Ee?.value??1)-1-(ne?.value??0)}`]:!0}));We(b,(U,$)=>{U.length>$.length&&L.value===!0&&s.noStacking===!0&&Q()});const w=Fe(pp(u.value??(typeof document<"u"?document.body:void 0)));xr(()=>{We(H,U=>{U&&Un(()=>{u.value&&(w.value=pp(u.value))})},{immediate:!0})});const D=Y(()=>L.value||A.value?w.value-((Ee?.value??0)*2-(ne?.value??0)*2):w.value),B=Y(()=>({"z-index":D.value,"--b-position":ne?.value??0,"--b-inverse-position":(Ee?.value??1)-1-(ne?.value??0),"--b-count":Ee?.value??0})),x=Y(()=>({"z-index":D.value-1,"--b-position":ne?.value??0,"--b-inverse-position":(Ee?.value??1)-1-(ne?.value??0),"--b-count":Ee?.value??0})),G=Y(()=>({id:l.value,cancel:()=>{Q("cancel")},close:()=>{Q("close")},hide:Q,show:Z,toggle:I,ok:()=>{Q("ok")},active:L.value,visible:L.value}));return e({hide:Q,id:l,show:Z,toggle:I,visible:L}),(U,$)=>(De(),Mt(OA,{to:W(s).teleportTo,disabled:W(s).teleportDisabled},{default:jt(()=>[W(H)||W(F)?(De(),Mt(wd,an({key:0},W(E),{appear:c.value||W(s).visible}),{default:jt(()=>[id(st("div",an({id:W(l),ref:"_element",class:["modal",[W(s).modalClass,{fade:!W(v),show:W(T),...S.value}]],role:"dialog","aria-labelledby":W(s).noHeader?void 0:`${W(l)}-label`,"aria-describedby":`${W(l)}-body`,tabindex:"-1"},U.$attrs,{style:[B.value,{display:"block"}],onMousedown:$[4]||($[4]=Lw(K=>W(Q)("backdrop"),["left","self"]))}),[st("div",{class:St(["modal-dialog",fe.value])},[W(F)?(De(),Pt("div",{key:0,class:St(["modal-content",W(s).contentClass])},[W(s).noHeader?tn("",!0):(De(),Pt("div",an({key:0,class:["modal-header",nt.value]},W(s).headerAttrs),[Ut(U.$slots,"header",Ln(fr(G.value)),()=>[(De(),Mt(ii(W(s).titleTag),{id:`${W(l)}-label`,class:St(["modal-title",M.value])},{default:jt(()=>[Ut(U.$slots,"title",Ln(fr(G.value)),()=>[rs(qn(W(s).title),1)])]),_:3},8,["id","class"])),W(s).noHeaderClose?tn("",!0):(De(),Pt(Bt,{key:0},[ie.value?(De(),Mt(qc,an({key:0,ref:"_closeButton"},He.value,{onClick:$[0]||($[0]=K=>W(Q)("close"))}),{default:jt(()=>[Ut(U.$slots,"header-close",Ln(fr(G.value)))]),_:3},16)):(De(),Mt(kS,an({key:1,ref:"_closeButton","aria-label":W(s).headerCloseLabel},He.value,{onClick:$[1]||($[1]=K=>W(Q)("close"))}),null,16,["aria-label"]))],64))])],16)),st("div",an({id:`${W(l)}-body`,class:["modal-body",be.value]},W(s).bodyAttrs),[Ut(U.$slots,"default",Ln(fr(G.value)),()=>[rs(qn(W(s).body),1)])],16,FS),W(s).noFooter?tn("",!0):(De(),Pt("div",{key:1,class:St(["modal-footer",Qe.value])},[Ut(U.$slots,"footer",Ln(fr(G.value)),()=>[Ut(U.$slots,"cancel",Ln(fr(G.value)),()=>[W(s).okOnly?tn("",!0):(De(),Mt(qc,{key:0,ref:"_cancelButton",disabled:ee.value,size:W(s).buttonSize,variant:W(s).cancelVariant,class:St(W(s).cancelClass),onClick:$[2]||($[2]=K=>W(Q)("cancel"))},{default:jt(()=>[rs(qn(W(s).cancelTitle),1)]),_:1},8,["disabled","size","variant","class"]))]),Ut(U.$slots,"ok",Ln(fr(G.value)),()=>[ot(qc,{ref:"_okButton",disabled:X.value,size:W(s).buttonSize,variant:W(s).okVariant,class:St(W(s).okClass),onClick:$[3]||($[3]=K=>W(Q)("ok"))},{default:jt(()=>[rs(qn(W(s).okTitle),1)]),_:1},8,["disabled","size","variant","class"])])])],2))],2)):tn("",!0)],2),W(oe)?(De(),Pt("div",{key:0,ref:"_fallbackFocusElement",class:St(vp),tabindex:"0",style:{width:"0",height:"0",overflow:"hidden"}},null,512)):tn("",!0)],16,MS),[[kd,W(L)&&(W(te)&&W(s).backdropFirst||!W(s).backdropFirst)]])]),_:3},16,["appear"])):tn("",!0),W(s).noBackdrop?tn("",!0):Ut(U.$slots,"backdrop",Ln(an({key:1},G.value)),()=>[W(q)?(De(),Mt(wd,Ln(an({key:0},W(C))),{default:jt(()=>[id(st("div",{class:St(["modal-backdrop",{fade:!W(v),show:W(le)||W(v),...S.value}]),style:Oo(x.value),onClick:$[5]||($[5]=K=>W(Q)("backdrop"))},null,6),[[kd,W(L)||W(A)&&W(s).backdropFirst&&!W(v)]])]),_:1},16)):tn("",!0)])]),_:3},8,["to","disabled"]))}}),US=()=>{const t=Fe(new Map);return{register:({id:n,component:r,value:s,toggle:i,show:o,hide:l,registerTrigger:c,unregisterTrigger:u})=>(t.value.set(n,{id:n,component:r,value:zt(s),toggle:i,show:o,hide:l,registerTrigger:c,unregisterTrigger:u}),{unregister(){t.value.delete(n)},updateId(h,d){const g=t.value.get(d);g&&(t.value.set(h,{...g,id:h}),t.value.delete(d))}}),values:t}},$S=dn({__name:"BContainer",props:{fluid:{type:[Boolean,String],default:!1},gutterX:{default:void 0},gutterY:{default:void 0},tag:{default:"div"}},setup(t){const n=li(t,"BContainer"),r=Y(()=>({container:n.fluid===!1,"container-fluid":n.fluid===!0,[`container-${n.fluid}`]:typeof n.fluid=="string",[`gx-${n.gutterX}`]:n.gutterX!==void 0,[`gy-${n.gutterY}`]:n.gutterY!==void 0}));return(s,i)=>(De(),Mt(ii(W(n).tag),{class:St(r.value)},{default:jt(()=>[Ut(s.$slots,"default")]),_:3},8,["class"]))}}),Ep="bootstrap-vue-next",Tp=(t,e)=>{const{all:n,...r}=t,s={};n&&e.forEach(o=>{s[o]=n});const i={...s,...r};return Object.entries(i).filter(([o,l])=>!!l&&e.includes(o)).map(([o])=>o)},Kc=new Set,bp=new Set;Object.assign(({aliases:t={},directives:e=!0,components:n=!0}={})=>{const s=Tp(typeof n=="boolean"?{all:n}:n,RA).reduce((c,u)=>(c.set(u,`${Ep}${G_[u]}`),c),new Map),o=Tp(typeof e=="boolean"?{all:e}:e,PA).reduce((c,u)=>{const h=u.toLowerCase().startsWith("v")?u:`v${u}`;return c.set(h,`${Ep}${Q_[h]}`),c},new Map);return[{type:"component",resolve(c){const u=s.get(c),h=s.get(t[c]);if(h){const d=t[c];return Kc.add(d),{name:d,from:h}}if(u)return Kc.add(c),{name:c,from:u}}},{type:"directive",resolve(c){const u=`v${c}`,h=o.get(u);if(h)return bp.add(u),{name:u,from:h}}}]},{__usedComponents:Kc,__usedDirectives:bp});const jS={install(t,e){const s=typeof e?.rtl=="boolean"?!1:e?.rtl?.rtlInitial??!1,i=typeof e?.rtl=="boolean"?void 0:e?.rtl?.localeInitial??void 0,o=Fe(s),l=Fe(i);t.provide(eA,{isRtl:o,locale:l})}},HS={install(t){const{register:e,values:n}=US();t.provide(j_,{register:e,values:n});const r=Fe({[ip]:[]}),s=(R=ip)=>{r.value[R]=[]};t.provide(tA,{items:r,reset:s});const i=Fe(new Map),o=Y(()=>i.value.size),l=Y(()=>[...i.value.values()]),c=Y(()=>l.value[l.value.length-1]),u=R=>{i.value.set(R.uid,R)},h=R=>{i.value.delete(R.uid)},d=Fe(new Map),g=R=>{d.value.set(R.uid,R)},_=R=>{d.value.delete(R.uid)};t.provide(H_,{countStack:o,lastStack:c,registry:Y(()=>d.value),stack:l,pushStack:u,removeStack:h,pushRegistry:g,removeRegistry:_})}},qS={install(t){const e=CA();t.provide(nA,e)}},zS=(t={})=>({install(e){(t.registries??!0)===!0&&e.use(HS,t),((t.rtl??!0)===!0||typeof t.rtl=="object")&&e.use(jS,t),(t.orchestrator??!0)===!0&&e.use(qS);const n=t?.components??{};e.provide(wa,Fe(n))}});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var ly="store";function KS(t){return t===void 0&&(t=null),Et(t!==null?t:ly)}function ci(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function WS(t){return t!==null&&typeof t=="object"}function GS(t){return t&&typeof t.then=="function"}function QS(t,e){return function(){return t(e)}}function cy(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function uy(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Hl(t,n,[],t._modules.root,!0),_h(t,n,e)}function _h(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},l={},c=cm(!0);c.run(function(){ci(i,function(u,h){o[h]=QS(u,t),l[h]=Y(function(){return o[h]()}),Object.defineProperty(t.getters,h,{get:function(){return l[h].value},enumerable:!0})})}),t._state=No({data:e}),t._scope=c,t.strict&&e0(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function Hl(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var l=yh(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){l[c]=r.state})}var u=r.context=YS(t,o,n);r.forEachMutation(function(h,d){var g=o+d;JS(t,g,h,u)}),r.forEachAction(function(h,d){var g=h.root?d:o+d,_=h.handler||h;XS(t,g,_,u)}),r.forEachGetter(function(h,d){var g=o+d;ZS(t,g,h,u)}),r.forEachChild(function(h,d){Hl(t,e,n.concat(d),h,s)})}function YS(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,l){var c=tl(i,o,l),u=c.payload,h=c.options,d=c.type;return(!h||!h.root)&&(d=e+d),t.dispatch(d,u)},commit:r?t.commit:function(i,o,l){var c=tl(i,o,l),u=c.payload,h=c.options,d=c.type;(!h||!h.root)&&(d=e+d),t.commit(d,u,h)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return hy(t,e)}},state:{get:function(){return yh(t.state,n)}}}),s}function hy(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function JS(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function XS(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var l=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return GS(l)||(l=Promise.resolve(l)),t._devtoolHook?l.catch(function(c){throw t._devtoolHook.emit("vuex:error",c),c}):l})}function ZS(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function e0(t){We(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function yh(t,e){return e.reduce(function(n,r){return n[r]},t)}function tl(t,e,n){return WS(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var t0="vuex bindings",wp="vuex:mutations",Wc="vuex:actions",Ps="vuex",n0=0;function r0(t,e){Gw({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[t0]},function(n){n.addTimelineLayer({id:wp,label:"Vuex Mutations",color:Ip}),n.addTimelineLayer({id:Wc,label:"Vuex Actions",color:Ip}),n.addInspector({id:Ps,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Ps)if(r.filter){var s=[];gy(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[py(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Ps){var s=r.nodeId;hy(e,s),r.state=o0(l0(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Ps){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(Ps),n.sendInspectorState(Ps),n.addTimelineEvent({layerId:wp,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=n0++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:Wc,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:Wc,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var Ip=8702998,s0=6710886,i0=16777215,fy={label:"namespaced",textColor:i0,backgroundColor:s0};function dy(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function py(t,e){return{id:e||"root",label:dy(e),tags:t.namespaced?[fy]:[],children:Object.keys(t._children).map(function(n){return py(t._children[n],e+n+"/")})}}function gy(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[fy]:[]}),Object.keys(e._children).forEach(function(s){gy(t,e._children[s],n,r+s+"/")})}function o0(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=a0(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?dy(o):o,editable:!1,value:Au(function(){return i[o]})}})}return s}function a0(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=Au(function(){return t[n]})}else e[n]=Au(function(){return t[n]})}),e}function l0(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function Au(t){try{return t()}catch(e){return e}}var yn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},my={namespaced:{configurable:!0}};my.namespaced.get=function(){return!!this._rawModule.namespaced};yn.prototype.addChild=function(e,n){this._children[e]=n};yn.prototype.removeChild=function(e){delete this._children[e]};yn.prototype.getChild=function(e){return this._children[e]};yn.prototype.hasChild=function(e){return e in this._children};yn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};yn.prototype.forEachChild=function(e){ci(this._children,e)};yn.prototype.forEachGetter=function(e){this._rawModule.getters&&ci(this._rawModule.getters,e)};yn.prototype.forEachAction=function(e){this._rawModule.actions&&ci(this._rawModule.actions,e)};yn.prototype.forEachMutation=function(e){this._rawModule.mutations&&ci(this._rawModule.mutations,e)};Object.defineProperties(yn.prototype,my);var ys=function(e){this.register([],e,!1)};ys.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};ys.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};ys.prototype.update=function(e){_y([],this.root,e)};ys.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new yn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&ci(n.modules,function(l,c){s.register(e.concat(c),l,r)})};ys.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};ys.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function _y(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;_y(t.concat(r),e.getChild(r),n.modules[r])}}function c0(t){return new Kt(t)}var Kt=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ys(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,l=this,c=l.dispatch,u=l.commit;this.dispatch=function(g,_){return c.call(o,g,_)},this.commit=function(g,_,R){return u.call(o,g,_,R)},this.strict=s;var h=this._modules.root.state;Hl(this,h,[],this._modules.root),_h(this,h),r.forEach(function(d){return d(n)})},vh={state:{configurable:!0}};Kt.prototype.install=function(e,n){e.provide(n||ly,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&r0(e,this)};vh.state.get=function(){return this._state.data};vh.state.set=function(t){};Kt.prototype.commit=function(e,n,r){var s=this,i=tl(e,n,r),o=i.type,l=i.payload,c={type:o,payload:l},u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(d){d(l)})}),this._subscribers.slice().forEach(function(h){return h(c,s.state)}))};Kt.prototype.dispatch=function(e,n){var r=this,s=tl(e,n),i=s.type,o=s.payload,l={type:i,payload:o},c=this._actions[i];if(c){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(l,r.state)})}catch{}var u=c.length>1?Promise.all(c.map(function(h){return h(o)})):c[0](o);return new Promise(function(h,d){u.then(function(g){try{r._actionSubscribers.filter(function(_){return _.after}).forEach(function(_){return _.after(l,r.state)})}catch{}h(g)},function(g){try{r._actionSubscribers.filter(function(_){return _.error}).forEach(function(_){return _.error(l,r.state,g)})}catch{}d(g)})})}};Kt.prototype.subscribe=function(e,n){return cy(e,this._subscribers,n)};Kt.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return cy(r,this._actionSubscribers,n)};Kt.prototype.watch=function(e,n,r){var s=this;return We(function(){return e(s.state,s.getters)},n,Object.assign({},r))};Kt.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Kt.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Hl(this,this.state,e,this._modules.get(e),r.preserveState),_h(this,this.state)};Kt.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=yh(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),uy(this)};Kt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Kt.prototype.hotUpdate=function(e){this._modules.update(e),uy(this,!0)};Kt.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Kt.prototype,vh);function ql(){const t=KS();return{get user(){return t.state.auth.user},get loading(){return t.state.auth.loading},get error(){return t.state.auth.error},get authReady(){return t.state.auth.authReady},get justLoggedInAt(){return t.state.auth.justLoggedInAt},get sessionOrigin(){return t.state.auth.sessionOrigin},get isAuthReady(){return t.getters["auth/isAuthReady"]},get isAuthenticated(){return t.getters["auth/isAuthenticated"]},get currentUser(){return t.getters["auth/currentUser"]},get isLoading(){return t.getters["auth/isLoading"]},get getError(){return t.getters["auth/getError"]},initAuthStateListener(){return t.dispatch("auth/initAuthStateListener")},registerUser(e,n){return t.dispatch("auth/registerUser",{email:e,password:n})},loginUser(e,n){return t.dispatch("auth/loginUser",{email:e,password:n})},logoutUser(){return t.dispatch("auth/logoutUser")},clearError(){t.commit("auth/clearError")},resetJustLogged(){t.commit("auth/resetJustLogged")}}}const u0=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},h0={name:"NavBar",setup(){const t=ql(),e=JI(),n=Y(()=>t.isAuthenticated),r=Y(()=>t.currentUser),s=Y(()=>t.isLoading);return{isAuthenticated:n,currentUser:r,isLoading:s,handleLogout:async()=>{(await t.logoutUser()).success&&e.push("/login")},navigateToAdmin:()=>{console.log("Navegando a /admin..."),console.log("Usuario autenticado:",n.value),console.log("Ruta actual:",e.currentRoute.value.path),e.push("/admin").then(()=>{console.log("Navegacin completada a:",e.currentRoute.value.path)}).catch(l=>{console.error("Error en navegacin:",l)})}}}},f0={class:"modern-navbar"},d0={class:"navbar-container"},p0={key:0,class:"navbar-nav"},g0={key:1,class:"navbar-guest"},m0={key:2,class:"navbar-user"},_0={class:"user-info"},y0={class:"user-email","data-cy":"user-email"},v0=["disabled"],E0={key:0,class:"loading-spinner"},T0={key:1};function b0(t,e,n,r,s,i){return De(),Pt("nav",f0,[st("div",d0,[st("div",{class:"navbar-brand",onClick:e[0]||(e[0]=o=>t.$router.push("/"))},[...e[6]||(e[6]=[st("div",{class:"brand-icon"},"AW",-1),st("span",{class:"brand-text"},"AdWeb Online",-1)])]),r.isAuthenticated?(De(),Pt("div",p0,[st("button",{class:St(["nav-link",{active:t.$route.path==="/"}]),onClick:e[1]||(e[1]=o=>t.$router.push("/"))}," Inicio ",2),st("button",{class:St(["nav-link",{active:t.$route.path==="/admin"}]),onClick:e[2]||(e[2]=o=>t.$router.push("/admin"))}," Administrar ",2)])):(De(),Pt("div",g0,[st("button",{class:"guest-btn ghost",onClick:e[3]||(e[3]=o=>t.$router.push("/login"))}," Iniciar sesin "),st("button",{class:"guest-btn solid",onClick:e[4]||(e[4]=o=>t.$router.push("/register"))}," Registrarme ")])),r.isAuthenticated?(De(),Pt("div",m0,[st("div",_0,[e[7]||(e[7]=st("div",{class:"user-avatar"},null,-1)),st("span",y0,qn(r.currentUser?.email),1)]),st("button",{class:"logout-btn",onClick:e[5]||(e[5]=(...o)=>r.handleLogout&&r.handleLogout(...o)),disabled:r.isLoading,"data-cy":"logout-btn"},[r.isLoading?(De(),Pt("span",E0)):(De(),Pt("span",T0,"Salir"))],8,v0)])):tn("",!0)])])}const w0=u0(h0,[["render",b0],["__scopeId","data-v-7004991a"]]);function I0(){const t=ql(),e=Fe(!1),n="Sesin iniciada",r=Y(()=>t.currentUser?.email||"usuario"),s=Y(()=>`Bienvenido, ${r.value}. Ingreso detectado por onAuthStateChanged.`);We(()=>t.justLoggedInAt,o=>{o&&t.sessionOrigin==="onAuthStateChanged"&&(e.value=!0)});function i(){e.value=!1,t.resetJustLogged()}return{showWelcome:e,toastTitle:n,toastBody:s,onToastHidden:i}}const A0={id:"app"},S0={key:0,class:"py-5 text-center text-muted"},C0={class:"mb-0"},R0="Sesin iniciada",P0={__name:"App",setup(t){const e=ql(),{showWelcome:n,toastBody:r,onToastHidden:s}=I0();return xr(()=>{e.isAuthReady||e.initAuthStateListener()}),(i,o)=>(De(),Pt("div",A0,[ot(w0),ot(W($S),null,{default:jt(()=>[W(e).isAuthReady?(De(),Mt(W(U_),{key:1})):(De(),Pt("div",S0," Cargando sesin "))]),_:1}),ot(W(BS),{modelValue:W(n),"onUpdate:modelValue":o[0]||(o[0]=l=>Ze(n)?n.value=l:null),title:R0,"ok-only":"","ok-title":"Entendido",onHidden:W(s)},{default:jt(()=>[st("p",C0,qn(W(r)),1)]),_:1},8,["modelValue","onHidden"])]))}},k0="modulepreload",O0=function(t){return"/examenmodulo7/"+t},Ap={},Mi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(n.map(u=>{if(u=O0(u),u in Ap)return;Ap[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":k0,h||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((_,R)=>{g.addEventListener("load",_),g.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},yy=QI({history:AI("/examenmodulo7/"),routes:[{path:"/",name:"home",component:()=>Mi(()=>import("./HomeView-DGuWBdrT.js"),__vite__mapDeps([0,1,2,3])),meta:{public:!0}},{path:"/login",name:"login",component:()=>Mi(()=>import("./LoginView-CLmNsapE.js"),__vite__mapDeps([4,5])),meta:{requiresGuest:!0}},{path:"/register",name:"register",component:()=>Mi(()=>import("./RegisterView-CkEX-1i_.js"),__vite__mapDeps([6,7,2,8])),meta:{requiresGuest:!0}},{path:"/admin",name:"admin",component:()=>Mi(()=>import("./AdminView-E8t8Asw2.js"),__vite__mapDeps([9,7,2,10,1,11,12])),meta:{requiresAuth:!0}},{path:"/admin/edit/:id",name:"edit-course",component:()=>Mi(()=>import("./EditCourseView-CsxW1uQx.js"),__vite__mapDeps([13,7,2,1,10,11,14])),meta:{requiresAuth:!0},props:!0}]});yy.beforeEach(async(t,e)=>{const n=ql();n.isAuthReady||await n.initAuthStateListener();const r=t.matched.some(i=>i.meta?.requiresAuth),s=t.matched.some(i=>i.meta?.requiresGuest);return r&&!n.isAuthenticated?t.name!=="login"?{name:"login",query:{redirect:t.fullPath},replace:!0}:!0:s&&n.isAuthenticated&&t.name!=="home"?{name:"home",replace:!0}:!0});const N0=()=>{};var Sp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},D0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ey={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let g=(l&15)<<2|u>>6,_=u&63;c||(_=64,o||(g=64)),r.push(n[h],n[d],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||d==null)throw new V0;const g=i<<2|l>>4;if(r.push(g),u!==64){const _=l<<4&240|u>>2;if(r.push(_),d!==64){const R=u<<6&192|d;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class V0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L0=function(t){const e=vy(t);return Ey.encodeByteArray(e,!0)},nl=function(t){return L0(t).replace(/\./g,"")},Ty=function(t){try{return Ey.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=()=>x0().__FIREBASE_DEFAULTS__,F0=()=>{if(typeof process>"u"||typeof Sp>"u")return;const t=Sp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},B0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ty(t[1]);return e&&JSON.parse(e)},zl=()=>{try{return N0()||M0()||F0()||B0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},by=t=>zl()?.emulatorHosts?.[t],U0=t=>{const e=by(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wy=()=>zl()?.config,Iy=t=>zl()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ay(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[nl(JSON.stringify(n)),nl(JSON.stringify(o)),""].join(".")}const so={};function H0(){const t={prod:[],emulator:[]};for(const e of Object.keys(so))so[e]?t.emulator.push(e):t.prod.push(e);return t}function q0(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Cp=!1;function Sy(t,e){if(typeof window>"u"||typeof document>"u"||!ui(window.location.host)||so[t]===e||so[t]||Cp)return;so[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=H0().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Cp=!0,o()},g}function h(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function d(){const g=q0(r),_=n("text"),R=document.getElementById(_)||document.createElement("span"),P=n("learnmore"),k=document.getElementById(P)||document.createElement("a"),V=n("preprendIcon"),L=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const H=g.element;l(H),h(k,P);const q=u();c(L,V),H.append(L,R,k,q),document.body.appendChild(H)}i?(R.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function K0(){const t=zl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Q0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y0(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function J0(){return!K0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X0(){try{return typeof indexedDB=="object"}catch{return!1}}function Z0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="FirebaseError";class nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eC,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?tC(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new nr(s,l,r)}}function tC(t,e){return t.replace(nC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nC=/\{\$([^}]+)}/g;function rC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Rp(i)&&Rp(o)){if(!hs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ui(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sC(t,e){const n=new iC(t,e);return n.subscribe.bind(n)}class iC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Gc),s.error===void 0&&(s.error=Gc),s.complete===void 0&&(s.complete=Gc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cC(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lC(t){return t===Zr?void 0:t}function cC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const hC={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},fC=Ae.INFO,dC={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},pC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=dC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eh{constructor(e){this.name=e,this._logLevel=fC,this._logHandler=pC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const gC=(t,e)=>e.some(n=>t instanceof n);let Pp,kp;function mC(){return Pp||(Pp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _C(){return kp||(kp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cy=new WeakMap,Su=new WeakMap,Ry=new WeakMap,Qc=new WeakMap,Th=new WeakMap;function yC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Tr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Cy.set(n,t)}).catch(()=>{}),Th.set(e,t),e}function vC(t){if(Su.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Su.set(t,e)}let Cu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Su.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ry.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EC(t){Cu=t(Cu)}function TC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yc(this),e,...n);return Ry.set(r,e.sort?e.sort():[e]),Tr(r)}:_C().includes(t)?function(...e){return t.apply(Yc(this),e),Tr(Cy.get(this))}:function(...e){return Tr(t.apply(Yc(this),e))}}function bC(t){return typeof t=="function"?TC(t):(t instanceof IDBTransaction&&vC(t),gC(t,mC())?new Proxy(t,Cu):t)}function Tr(t){if(t instanceof IDBRequest)return yC(t);if(Qc.has(t))return Qc.get(t);const e=bC(t);return e!==t&&(Qc.set(t,e),Th.set(e,t)),e}const Yc=t=>Th.get(t);function wC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Tr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Tr(o.result),c.oldVersion,c.newVersion,Tr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const IC=["get","getKey","getAll","getAllKeys","count"],AC=["put","add","delete","clear"],Jc=new Map;function Op(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jc.get(e))return Jc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||IC.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Jc.set(e,i),i}EC(t=>({...t,get:(e,n,r)=>Op(e,n)||t.get(e,n,r),has:(e,n)=>!!Op(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CC(t){return t.getComponent()?.type==="VERSION"}const Ru="@firebase/app",Np="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new Eh("@firebase/app"),RC="@firebase/app-compat",PC="@firebase/analytics-compat",kC="@firebase/analytics",OC="@firebase/app-check-compat",NC="@firebase/app-check",DC="@firebase/auth",VC="@firebase/auth-compat",LC="@firebase/database",xC="@firebase/data-connect",MC="@firebase/database-compat",FC="@firebase/functions",BC="@firebase/functions-compat",UC="@firebase/installations",$C="@firebase/installations-compat",jC="@firebase/messaging",HC="@firebase/messaging-compat",qC="@firebase/performance",zC="@firebase/performance-compat",KC="@firebase/remote-config",WC="@firebase/remote-config-compat",GC="@firebase/storage",QC="@firebase/storage-compat",YC="@firebase/firestore",JC="@firebase/ai",XC="@firebase/firestore-compat",ZC="firebase",eR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="[DEFAULT]",tR={[Ru]:"fire-core",[RC]:"fire-core-compat",[kC]:"fire-analytics",[PC]:"fire-analytics-compat",[NC]:"fire-app-check",[OC]:"fire-app-check-compat",[DC]:"fire-auth",[VC]:"fire-auth-compat",[LC]:"fire-rtdb",[xC]:"fire-data-connect",[MC]:"fire-rtdb-compat",[FC]:"fire-fn",[BC]:"fire-fn-compat",[UC]:"fire-iid",[$C]:"fire-iid-compat",[jC]:"fire-fcm",[HC]:"fire-fcm-compat",[qC]:"fire-perf",[zC]:"fire-perf-compat",[KC]:"fire-rc",[WC]:"fire-rc-compat",[GC]:"fire-gcs",[QC]:"fire-gcs-compat",[YC]:"fire-fst",[XC]:"fire-fst-compat",[JC]:"fire-vertex","fire-js":"fire-js",[ZC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Map,nR=new Map,ku=new Map;function Dp(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xs(t){const e=t.name;if(ku.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;ku.set(e,t);for(const n of rl.values())Dp(n,t);for(const n of nR.values())Dp(n,t);return!0}function bh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new Lo("app","Firebase",rR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=eR;function Py(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Pu,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw br.create("bad-app-name",{appName:String(s)});if(n||(n=wy()),!n)throw br.create("no-options");const i=rl.get(s);if(i){if(hs(n,i.options)&&hs(r,i.config))return i;throw br.create("duplicate-app",{appName:s})}const o=new uC(s);for(const c of ku.values())o.addComponent(c);const l=new sR(n,r,o);return rl.set(s,l),l}function ky(t=Pu){const e=rl.get(t);if(!e&&t===Pu&&wy())return Py();if(!e)throw br.create("no-app",{appName:t});return e}function wr(t,e,n){let r=tR[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(o.join(" "));return}Xs(new fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="firebase-heartbeat-database",oR=1,To="firebase-heartbeat-store";let Xc=null;function Oy(){return Xc||(Xc=wC(iR,oR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(To)}catch(n){console.warn(n)}}}}).catch(t=>{throw br.create("idb-open",{originalErrorMessage:t.message})})),Xc}async function aR(t){try{const n=(await Oy()).transaction(To),r=await n.objectStore(To).get(Ny(t));return await n.done,r}catch(e){if(e instanceof nr)Jn.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e?.message});Jn.warn(n.message)}}}async function Vp(t,e){try{const r=(await Oy()).transaction(To,"readwrite");await r.objectStore(To).put(e,Ny(t)),await r.done}catch(n){if(n instanceof nr)Jn.warn(n.message);else{const r=br.create("idb-set",{originalErrorMessage:n?.message});Jn.warn(r.message)}}}function Ny(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=1024,cR=30;class uR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Lp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>cR){const s=dR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lp(),{heartbeatsToSend:n,unsentEntries:r}=hR(this._heartbeatsCache.heartbeats),s=nl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Jn.warn(e),""}}}function Lp(){return new Date().toISOString().substring(0,10)}function hR(t,e=lR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),xp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X0()?Z0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xp(t){return nl(JSON.stringify({version:2,heartbeats:t})).length}function dR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t){Xs(new fs("platform-logger",e=>new SC(e),"PRIVATE")),Xs(new fs("heartbeat",e=>new uR(e),"PRIVATE")),wr(Ru,Np,t),wr(Ru,Np,"esm2020"),wr("fire-js","")}pR("");function Dy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gR=Dy,Vy=new Lo("auth","Firebase",Dy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Eh("@firebase/auth");function mR(t,...e){sl.logLevel<=Ae.WARN&&sl.warn(`Auth (${hi}): ${t}`,...e)}function Aa(t,...e){sl.logLevel<=Ae.ERROR&&sl.error(`Auth (${hi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw wh(t,...e)}function Sn(t,...e){return wh(t,...e)}function Ly(t,e,n){const r={...gR(),[e]:n};return new Lo("auth","Firebase",r).create(e,{appName:t.name})}function Wn(t){return Ly(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Vy.create(t,...e)}function ge(t,e,...n){if(!t)throw wh(e,...n)}function zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Aa(e),new Error(e)}function Xn(t,e){t||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(){return typeof self<"u"&&self.location?.href||""}function _R(){return Mp()==="http:"||Mp()==="https:"}function Mp(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_R()||G0()||"connection"in navigator)?navigator.onLine:!0}function vR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=z0()||Q0()}get(){return yR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bR=new Mo(3e4,6e4);function Fr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Br(t,e,n,r,s={}){return My(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=xo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return W0()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ui(t.emulatorConfig.host)&&(u.credentials="include"),xy.fetch()(await Fy(t,t.config.apiHost,n,l),u)})}async function My(t,e,n){t._canInitEmulator=!1;const r={...ER,...e};try{const s=new IR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw fa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw fa(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ly(t,h,u);mn(t,h)}}catch(s){if(s instanceof nr)throw s;mn(t,"network-request-failed",{message:String(s)})}}async function Fo(t,e,n,r,s={}){const i=await Br(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Fy(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Ih(t.config,s):`${t.config.apiScheme}://${s}`;return TR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function wR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),bR.get())})}}function fa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Sn(t,e,r);return s.customData._tokenResponse=n,s}function Fp(t){return t!==void 0&&t.enterprise!==void 0}class AR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SR(t,e){return Br(t,"GET","/v2/recaptchaConfig",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e){return Br(t,"POST","/v1/accounts:delete",e)}async function il(t,e){return Br(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RR(t,e=!1){const n=pt(t),r=await n.getIdToken(e),s=Ah(r);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:io(Zc(s.auth_time)),issuedAtTime:io(Zc(s.iat)),expirationTime:io(Zc(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Zc(t){return Number(t)*1e3}function Ah(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Aa("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ty(n);return s?JSON.parse(s):(Aa("Failed to decode base64 JWT payload"),null)}catch(s){return Aa("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Bp(t){const e=Ah(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nr&&PR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function PR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=io(this.lastLoginAt),this.creationTime=io(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t){const e=t.auth,n=await t.getIdToken(),r=await bo(t,il(e,{idToken:n}));ge(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?By(s.providerUserInfo):[],o=NR(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!o?.length,u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Nu(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function OR(t){const e=pt(t);await ol(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function By(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e){const n=await My(t,{},async()=>{const r=xo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Fy(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ui(t.emulatorConfig.host)&&(c.credentials="include"),xy.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VR(t,e){return Br(t,"POST","/v2/accounts:revokeToken",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Bp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await DR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ks;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ks,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ln{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new kR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bo(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RR(this,e)}reload(){return OR(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ln({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ol(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(Wn(this.auth));const e=await this.getIdToken();return await bo(this,CR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:g,isAnonymous:_,providerData:R,stsTokenManager:P}=n;ge(d&&P,e,"internal-error");const k=Ks.fromJSON(this.name,P);ge(typeof d=="string",e,"internal-error"),hr(r,e.name),hr(s,e.name),ge(typeof g=="boolean",e,"internal-error"),ge(typeof _=="boolean",e,"internal-error"),hr(i,e.name),hr(o,e.name),hr(l,e.name),hr(c,e.name),hr(u,e.name),hr(h,e.name);const V=new ln({uid:d,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:k,createdAt:u,lastLoginAt:h});return R&&Array.isArray(R)&&(V.providerData=R.map(L=>({...L}))),c&&(V._redirectEventId=c),V}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ks;s.updateFromServerResponse(n);const i=new ln({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ol(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?By(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,l=new Ks;l.updateFromIdToken(r);const c=new ln({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Nu(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=new Map;function Kn(t){Xn(t instanceof Function,"Expected a class definition");let e=Up.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Up.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Uy.type="NONE";const $p=Uy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t,e,n){return`firebase:${t}:${e}:${n}`}class Ws{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Sa(this.userKey,s.apiKey,i),this.fullPersistenceKey=Sa("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await il(this.auth,{idToken:e}).catch(()=>{});return n?ln._fromGetAccountInfoResponse(this.auth,n,e):null}return ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ws(Kn($p),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Kn($p);const o=Sa(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const g=await il(e,{idToken:h}).catch(()=>{});if(!g)break;d=await ln._fromGetAccountInfoResponse(e,g,h)}else d=ln._fromJSON(e,h);u!==i&&(l=d),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ws(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ws(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($y(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ky(e))return"Blackberry";if(Wy(e))return"Webos";if(jy(e))return"Safari";if((e.includes("chrome/")||Hy(e))&&!e.includes("edge/"))return"Chrome";if(zy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function $y(t=Dt()){return/firefox\//i.test(t)}function jy(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hy(t=Dt()){return/crios\//i.test(t)}function qy(t=Dt()){return/iemobile/i.test(t)}function zy(t=Dt()){return/android/i.test(t)}function Ky(t=Dt()){return/blackberry/i.test(t)}function Wy(t=Dt()){return/webos/i.test(t)}function Sh(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LR(t=Dt()){return Sh(t)&&!!window.navigator?.standalone}function xR(){return Y0()&&document.documentMode===10}function Gy(t=Dt()){return Sh(t)||zy(t)||Wy(t)||Ky(t)||/windows phone/i.test(t)||qy(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t,e=[]){let n;switch(t){case"Browser":n=jp(Dt());break;case"Worker":n=`${jp(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e={}){return Br(t,"GET","/v2/passwordPolicy",Fr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=6;class UR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hp(this),this.idTokenSubscription=new Hp(this),this.beforeStateQueue=new MR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ws.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await il(this,{idToken:e}),r=await ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ol(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(Wn(this));const n=e?pt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(Wn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(Wn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FR(this),n=new UR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kn(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Ws.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&mR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function vs(t){return pt(t)}class Hp{constructor(e){this.auth=e,this.observer=null,this.addObserver=sC(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jR(t){Kl=t}function Yy(t){return Kl.loadJS(t)}function HR(){return Kl.recaptchaEnterpriseScript}function qR(){return Kl.gapiScript}function zR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class KR{constructor(){this.enterprise=new WR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class WR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const GR="recaptcha-enterprise",Jy="NO_RECAPTCHA";class QR{constructor(e){this.type=GR,this.auth=vs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{SR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new AR(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Fp(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Jy)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new KR().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Fp(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=HR();c.length!==0&&(c+=l),Yy(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function qp(t,e,n,r=!1,s=!1){const i=new QR(t);let o;if(s)o=Jy;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Du(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qp(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await qp(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e){const n=bh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(hs(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function JR(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Kn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function XR(t,e,n){const r=vs(t);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Xy(e),{host:o,port:l}=ZR(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(hs(u,r.config.emulator)&&hs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ui(o)?(Ay(`${i}//${o}${c}`),Sy("Auth",!0)):eP()}function Xy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZR(t){const e=Xy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:zp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:zp(o)}}}function zp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function tP(t,e){return Br(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(t,e){return Fo(t,"POST","/v1/accounts:signInWithPassword",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(t,e){return Fo(t,"POST","/v1/accounts:signInWithEmailLink",Fr(t,e))}async function sP(t,e){return Fo(t,"POST","/v1/accounts:signInWithEmailLink",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Ch{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new wo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Du(e,n,"signInWithPassword",nP);case"emailLink":return rP(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Du(e,r,"signUpPassword",tP);case"emailLink":return sP(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t,e){return Fo(t,"POST","/v1/accounts:signInWithIdp",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="http://localhost";class ds extends Ch{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ds(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gs(e,n)}buildRequest(){const e={requestUri:iP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aP(t){const e=Bi(Ui(t)).link,n=e?Bi(Ui(e)).deep_link_id:null,r=Bi(Ui(t)).deep_link_id;return(r?Bi(Ui(r)).link:null)||r||n||e||t}class Rh{constructor(e){const n=Bi(Ui(e)),r=n.apiKey??null,s=n.oobCode??null,i=oP(n.mode??null);ge(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=aP(e);try{return new Rh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.providerId=fi.PROVIDER_ID}static credential(e,n){return wo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Rh.parseLink(n);return ge(r,"argument-error"),wo._fromEmailAndCode(e,r.code,r.tenantId)}}fi.PROVIDER_ID="password";fi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends Zy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Bo{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Bo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ds._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Bo{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Bo{constructor(){super("twitter.com")}static credential(e,n){return ds._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e){return Fo(t,"POST","/v1/accounts:signUp",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ln._fromIdTokenResponse(e,r,s),o=Kp(r);return new ps({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kp(r);return new ps({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends nr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,al.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new al(e,n,r,s)}}function ev(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?al._fromErrorAndOperation(t,i,e,r):i})}async function cP(t,e,n=!1){const r=await bo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ps._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t,e,n=!1){const{auth:r}=t;if(nn(r.app))return Promise.reject(Wn(r));const s="reauthenticate";try{const i=await bo(t,ev(r,s,e,t),n);ge(i.idToken,r,"internal-error");const o=Ah(i.idToken);ge(o,r,"internal-error");const{sub:l}=o;return ge(t.uid===l,r,"user-mismatch"),ps._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(t,e,n=!1){if(nn(t.app))return Promise.reject(Wn(t));const r="signIn",s=await ev(t,r,e),i=await ps._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function hP(t,e){return tv(vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nv(t){const e=vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fP(t,e,n){if(nn(t.app))return Promise.reject(Wn(t));const r=vs(t),o=await Du(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lP).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&nv(t),c}),l=await ps._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function dP(t,e,n){return nn(t.app)?Promise.reject(Wn(t)):hP(pt(t),fi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&nv(t),r})}function pP(t,e,n,r){return pt(t).onIdTokenChanged(e,n,r)}function gP(t,e,n){return pt(t).beforeAuthStateChanged(e,n)}function mP(t,e,n,r){return pt(t).onAuthStateChanged(e,n,r)}function _P(t){return pt(t).signOut()}const ll="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ll,"1"),this.storage.removeItem(ll),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=1e3,vP=10;class sv extends rv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);xR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sv.type="LOCAL";const EP=sv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends rv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iv.type="SESSION";const ov=iv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await TP(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Ph("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function wP(t){Cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}async function IP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AP(){return navigator?.serviceWorker?.controller||null}function SP(){return av()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="firebaseLocalStorageDb",CP=1,cl="firebaseLocalStorage",cv="fbase_key";class Uo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gl(t,e){return t.transaction([cl],e?"readwrite":"readonly").objectStore(cl)}function RP(){const t=indexedDB.deleteDatabase(lv);return new Uo(t).toPromise()}function Vu(){const t=indexedDB.open(lv,CP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cl,{keyPath:cv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cl)?e(r):(r.close(),await RP(),e(await Vu()))})})}async function Wp(t,e,n){const r=Gl(t,!0).put({[cv]:e,value:n});return new Uo(r).toPromise()}async function PP(t,e){const n=Gl(t,!1).get(e),r=await new Uo(n).toPromise();return r===void 0?null:r.value}function Gp(t,e){const n=Gl(t,!0).delete(e);return new Uo(n).toPromise()}const kP=800,OP=3;class uv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>OP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return av()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wl._getInstance(SP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await IP(),!this.activeServiceWorker)return;this.sender=new bP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vu();return await Wp(e,ll,"1"),await Gp(e,ll),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>PP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Gl(s,!1).getAll();return new Uo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uv.type="LOCAL";const NP=uv;new Mo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t,e){return e?Kn(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends Ch{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VP(t){return tv(t.auth,new kh(t),t.bypassAuthState)}function LP(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),uP(n,new kh(t),t.bypassAuthState)}async function xP(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),cP(n,new kh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VP;case"linkViaPopup":case"linkViaRedirect":return xP;case"reauthViaPopup":case"reauthViaRedirect":return LP;default:mn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new Mo(2e3,1e4);class Fs extends hv{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=Ph();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MP.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="pendingRedirect",Ca=new Map;class BP extends hv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ca.get(this.auth._key());if(!e){try{const r=await UP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ca.set(this.auth._key(),e)}return this.bypassAuthState||Ca.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UP(t,e){const n=HP(e),r=jP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function $P(t,e){Ca.set(t._key(),e)}function jP(t){return Kn(t._redirectPersistence)}function HP(t){return Sa(FP,t.config.apiKey,t.name)}async function qP(t,e,n=!1){if(nn(t.app))return Promise.reject(Wn(t));const r=vs(t),s=DP(r,e),o=await new BP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=600*1e3;class KP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!fv(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Sn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qp(e))}saveEventToCache(e){this.cachedEventUids.add(Qp(e)),this.lastProcessedEventTime=Date.now()}}function Qp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fv({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function WP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t,e={}){return Br(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YP=/^https?/;async function JP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await GP(t);for(const n of e)try{if(XP(n))return}catch{}mn(t,"unauthorized-domain")}function XP(t){const e=Ou(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YP.test(n))return!1;if(QP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=new Mo(3e4,6e4);function Yp(){const t=Cn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ek(t){return new Promise((e,n)=>{function r(){Yp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yp(),n(Sn(t,"network-request-failed"))},timeout:ZP.get()})}if(Cn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Cn().gapi?.load)r();else{const s=zR("iframefcb");return Cn()[s]=()=>{gapi.load?r():n(Sn(t,"network-request-failed"))},Yy(`${qR()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Ra=null,e})}let Ra=null;function tk(t){return Ra=Ra||ek(t),Ra}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new Mo(5e3,15e3),rk="__/auth/iframe",sk="emulator/auth/iframe",ik={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ok=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ak(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ih(e,sk):`https://${t.config.authDomain}/${rk}`,r={apiKey:e.apiKey,appName:t.name,v:hi},s=ok.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${xo(r).slice(1)}`}async function lk(t){const e=await tk(t),n=Cn().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:ak(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ik,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Sn(t,"network-request-failed"),l=Cn().setTimeout(()=>{i(o)},nk.get());function c(){Cn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uk=500,hk=600,fk="_blank",dk="http://localhost";class Jp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pk(t,e,n,r=uk,s=hk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...ck,width:r.toString(),height:s.toString(),top:i,left:o},u=Dt().toLowerCase();n&&(l=Hy(u)?fk:n),$y(u)&&(e=e||dk,c.scrollbars="yes");const h=Object.entries(c).reduce((g,[_,R])=>`${g}${_}=${R},`,"");if(LR(u)&&l!=="_self")return gk(e||"",l),new Jp(null);const d=window.open(e||"",l,h);ge(d,t,"popup-blocked");try{d.focus()}catch{}return new Jp(d)}function gk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="__/auth/handler",_k="emulator/auth/handler",yk=encodeURIComponent("fac");async function Xp(t,e,n,r,s,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hi,eventId:s};if(e instanceof Zy){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Bo){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${yk}=${encodeURIComponent(c)}`:"";return`${vk(t)}?${xo(l).slice(1)}${u}`}function vk({config:t}){return t.emulator?Ih(t,_k):`https://${t.authDomain}/${mk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu="webStorageSupport";class Ek{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ov,this._completeRedirectFn=qP,this._overrideRedirectResult=$P}async _openPopup(e,n,r,s){Xn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Xp(e,n,r,Ou(),s);return pk(e,i,Ph())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Xp(e,n,r,Ou(),s);return wP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lk(e),r=new KP(e);return n.register("authEvent",s=>(ge(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eu,{type:eu},s=>{const i=s?.[0]?.[eu];i!==void 0&&n(!!i),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gy()||jy()||Sh()}}const Tk=Ek;var Zp="@firebase/auth",eg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ik(t){Xs(new fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qy(t)},u=new $R(r,s,i,c);return JR(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xs(new fs("auth-internal",e=>{const n=vs(e.getProvider("auth").getImmediate());return(r=>new bk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(Zp,eg,wk(t)),wr(Zp,eg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=300,Sk=Iy("authIdTokenMaxAge")||Ak;let tg=null;const Ck=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Sk)return;const s=n?.token;tg!==s&&(tg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Rk(t=ky()){const e=bh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YR(t,{popupRedirectResolver:Tk,persistence:[NP,EP,ov]}),r=Iy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Ck(i.toString());gP(n,o,()=>o(n.currentUser)),pP(n,l=>o(l))}}const s=by("auth");return s&&XR(n,`http://${s}`),n}function Pk(){return document.getElementsByTagName("head")?.[0]??document}jR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Pk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ik("Browser");var kk="firebase",Ok="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(kk,Ok,"app");var ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,dv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function E(){}E.prototype=v.prototype,I.F=v.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(C,A,T){for(var m=Array(arguments.length-2),F=2;F<arguments.length;F++)m[F-2]=arguments[F];return v.prototype[A].apply(C,m)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,v,E){E||(E=0);const C=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)C[A]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(A=0;A<16;++A)C[A]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=I.g[0],E=I.g[1],A=I.g[2];let T=I.g[3],m;m=v+(T^E&(A^T))+C[0]+3614090360&4294967295,v=E+(m<<7&4294967295|m>>>25),m=T+(A^v&(E^A))+C[1]+3905402710&4294967295,T=v+(m<<12&4294967295|m>>>20),m=A+(E^T&(v^E))+C[2]+606105819&4294967295,A=T+(m<<17&4294967295|m>>>15),m=E+(v^A&(T^v))+C[3]+3250441966&4294967295,E=A+(m<<22&4294967295|m>>>10),m=v+(T^E&(A^T))+C[4]+4118548399&4294967295,v=E+(m<<7&4294967295|m>>>25),m=T+(A^v&(E^A))+C[5]+1200080426&4294967295,T=v+(m<<12&4294967295|m>>>20),m=A+(E^T&(v^E))+C[6]+2821735955&4294967295,A=T+(m<<17&4294967295|m>>>15),m=E+(v^A&(T^v))+C[7]+4249261313&4294967295,E=A+(m<<22&4294967295|m>>>10),m=v+(T^E&(A^T))+C[8]+1770035416&4294967295,v=E+(m<<7&4294967295|m>>>25),m=T+(A^v&(E^A))+C[9]+2336552879&4294967295,T=v+(m<<12&4294967295|m>>>20),m=A+(E^T&(v^E))+C[10]+4294925233&4294967295,A=T+(m<<17&4294967295|m>>>15),m=E+(v^A&(T^v))+C[11]+2304563134&4294967295,E=A+(m<<22&4294967295|m>>>10),m=v+(T^E&(A^T))+C[12]+1804603682&4294967295,v=E+(m<<7&4294967295|m>>>25),m=T+(A^v&(E^A))+C[13]+4254626195&4294967295,T=v+(m<<12&4294967295|m>>>20),m=A+(E^T&(v^E))+C[14]+2792965006&4294967295,A=T+(m<<17&4294967295|m>>>15),m=E+(v^A&(T^v))+C[15]+1236535329&4294967295,E=A+(m<<22&4294967295|m>>>10),m=v+(A^T&(E^A))+C[1]+4129170786&4294967295,v=E+(m<<5&4294967295|m>>>27),m=T+(E^A&(v^E))+C[6]+3225465664&4294967295,T=v+(m<<9&4294967295|m>>>23),m=A+(v^E&(T^v))+C[11]+643717713&4294967295,A=T+(m<<14&4294967295|m>>>18),m=E+(T^v&(A^T))+C[0]+3921069994&4294967295,E=A+(m<<20&4294967295|m>>>12),m=v+(A^T&(E^A))+C[5]+3593408605&4294967295,v=E+(m<<5&4294967295|m>>>27),m=T+(E^A&(v^E))+C[10]+38016083&4294967295,T=v+(m<<9&4294967295|m>>>23),m=A+(v^E&(T^v))+C[15]+3634488961&4294967295,A=T+(m<<14&4294967295|m>>>18),m=E+(T^v&(A^T))+C[4]+3889429448&4294967295,E=A+(m<<20&4294967295|m>>>12),m=v+(A^T&(E^A))+C[9]+568446438&4294967295,v=E+(m<<5&4294967295|m>>>27),m=T+(E^A&(v^E))+C[14]+3275163606&4294967295,T=v+(m<<9&4294967295|m>>>23),m=A+(v^E&(T^v))+C[3]+4107603335&4294967295,A=T+(m<<14&4294967295|m>>>18),m=E+(T^v&(A^T))+C[8]+1163531501&4294967295,E=A+(m<<20&4294967295|m>>>12),m=v+(A^T&(E^A))+C[13]+2850285829&4294967295,v=E+(m<<5&4294967295|m>>>27),m=T+(E^A&(v^E))+C[2]+4243563512&4294967295,T=v+(m<<9&4294967295|m>>>23),m=A+(v^E&(T^v))+C[7]+1735328473&4294967295,A=T+(m<<14&4294967295|m>>>18),m=E+(T^v&(A^T))+C[12]+2368359562&4294967295,E=A+(m<<20&4294967295|m>>>12),m=v+(E^A^T)+C[5]+4294588738&4294967295,v=E+(m<<4&4294967295|m>>>28),m=T+(v^E^A)+C[8]+2272392833&4294967295,T=v+(m<<11&4294967295|m>>>21),m=A+(T^v^E)+C[11]+1839030562&4294967295,A=T+(m<<16&4294967295|m>>>16),m=E+(A^T^v)+C[14]+4259657740&4294967295,E=A+(m<<23&4294967295|m>>>9),m=v+(E^A^T)+C[1]+2763975236&4294967295,v=E+(m<<4&4294967295|m>>>28),m=T+(v^E^A)+C[4]+1272893353&4294967295,T=v+(m<<11&4294967295|m>>>21),m=A+(T^v^E)+C[7]+4139469664&4294967295,A=T+(m<<16&4294967295|m>>>16),m=E+(A^T^v)+C[10]+3200236656&4294967295,E=A+(m<<23&4294967295|m>>>9),m=v+(E^A^T)+C[13]+681279174&4294967295,v=E+(m<<4&4294967295|m>>>28),m=T+(v^E^A)+C[0]+3936430074&4294967295,T=v+(m<<11&4294967295|m>>>21),m=A+(T^v^E)+C[3]+3572445317&4294967295,A=T+(m<<16&4294967295|m>>>16),m=E+(A^T^v)+C[6]+76029189&4294967295,E=A+(m<<23&4294967295|m>>>9),m=v+(E^A^T)+C[9]+3654602809&4294967295,v=E+(m<<4&4294967295|m>>>28),m=T+(v^E^A)+C[12]+3873151461&4294967295,T=v+(m<<11&4294967295|m>>>21),m=A+(T^v^E)+C[15]+530742520&4294967295,A=T+(m<<16&4294967295|m>>>16),m=E+(A^T^v)+C[2]+3299628645&4294967295,E=A+(m<<23&4294967295|m>>>9),m=v+(A^(E|~T))+C[0]+4096336452&4294967295,v=E+(m<<6&4294967295|m>>>26),m=T+(E^(v|~A))+C[7]+1126891415&4294967295,T=v+(m<<10&4294967295|m>>>22),m=A+(v^(T|~E))+C[14]+2878612391&4294967295,A=T+(m<<15&4294967295|m>>>17),m=E+(T^(A|~v))+C[5]+4237533241&4294967295,E=A+(m<<21&4294967295|m>>>11),m=v+(A^(E|~T))+C[12]+1700485571&4294967295,v=E+(m<<6&4294967295|m>>>26),m=T+(E^(v|~A))+C[3]+2399980690&4294967295,T=v+(m<<10&4294967295|m>>>22),m=A+(v^(T|~E))+C[10]+4293915773&4294967295,A=T+(m<<15&4294967295|m>>>17),m=E+(T^(A|~v))+C[1]+2240044497&4294967295,E=A+(m<<21&4294967295|m>>>11),m=v+(A^(E|~T))+C[8]+1873313359&4294967295,v=E+(m<<6&4294967295|m>>>26),m=T+(E^(v|~A))+C[15]+4264355552&4294967295,T=v+(m<<10&4294967295|m>>>22),m=A+(v^(T|~E))+C[6]+2734768916&4294967295,A=T+(m<<15&4294967295|m>>>17),m=E+(T^(A|~v))+C[13]+1309151649&4294967295,E=A+(m<<21&4294967295|m>>>11),m=v+(A^(E|~T))+C[4]+4149444226&4294967295,v=E+(m<<6&4294967295|m>>>26),m=T+(E^(v|~A))+C[11]+3174756917&4294967295,T=v+(m<<10&4294967295|m>>>22),m=A+(v^(T|~E))+C[2]+718787259&4294967295,A=T+(m<<15&4294967295|m>>>17),m=E+(T^(A|~v))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(A+(m<<21&4294967295|m>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.v=function(I,v){v===void 0&&(v=I.length);const E=v-this.blockSize,C=this.C;let A=this.h,T=0;for(;T<v;){if(A==0)for(;T<=E;)s(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<v;)if(C[A++]=I.charCodeAt(T++),A==this.blockSize){s(this,C),A=0;break}}else for(;T<v;)if(C[A++]=I[T++],A==this.blockSize){s(this,C),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;v=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=v&255,v/=256;for(this.v(I),I=Array(16),v=0,E=0;E<4;++E)for(let C=0;C<32;C+=8)I[v++]=this.g[E]>>>C&255;return I};function i(I,v){var E=l;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=v(I)}function o(I,v){this.h=v;const E=[];let C=!0;for(let A=I.length-1;A>=0;A--){const T=I[A]|0;C&&T==v||(E[A]=T,C=!1)}this.g=E}var l={};function c(I){return-128<=I&&I<128?i(I,function(v){return new o([v|0],v<0?-1:0)}):new o([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(I<0)return k(u(-I));const v=[];let E=1;for(let C=0;I>=E;C++)v[C]=I/E|0,E*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return k(h(I.substring(1),v));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(v,8));let C=d;for(let T=0;T<I.length;T+=8){var A=Math.min(8,I.length-T);const m=parseInt(I.substring(T,T+A),v);A<8?(A=u(Math.pow(v,A)),C=C.j(A).add(u(m))):(C=C.j(E),C=C.add(u(m)))}return C}var d=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-k(this).m();let I=0,v=1;for(let E=0;E<this.g.length;E++){const C=this.i(E);I+=(C>=0?C:4294967296+C)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R(this))return"0";if(P(this))return"-"+k(this).toString(I);const v=u(Math.pow(I,6));var E=this;let C="";for(;;){const A=q(E,v).g;E=V(E,A.j(v));let T=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=A,R(E))return T+C;for(;T.length<6;)T="0"+T;C=T+C}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function R(I){if(I.h!=0)return!1;for(let v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function P(I){return I.h==-1}t.l=function(I){return I=V(this,I),P(I)?-1:R(I)?0:1};function k(I){const v=I.g.length,E=[];for(let C=0;C<v;C++)E[C]=~I.g[C];return new o(E,~I.h).add(g)}t.abs=function(){return P(this)?k(this):this},t.add=function(I){const v=Math.max(this.g.length,I.g.length),E=[];let C=0;for(let A=0;A<=v;A++){let T=C+(this.i(A)&65535)+(I.i(A)&65535),m=(T>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);C=m>>>16,T&=65535,m&=65535,E[A]=m<<16|T}return new o(E,E[E.length-1]&-2147483648?-1:0)};function V(I,v){return I.add(k(v))}t.j=function(I){if(R(this)||R(I))return d;if(P(this))return P(I)?k(this).j(k(I)):k(k(this).j(I));if(P(I))return k(this.j(k(I)));if(this.l(_)<0&&I.l(_)<0)return u(this.m()*I.m());const v=this.g.length+I.g.length,E=[];for(var C=0;C<2*v;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(let A=0;A<I.g.length;A++){const T=this.i(C)>>>16,m=this.i(C)&65535,F=I.i(A)>>>16,te=I.i(A)&65535;E[2*C+2*A]+=m*te,L(E,2*C+2*A),E[2*C+2*A+1]+=T*te,L(E,2*C+2*A+1),E[2*C+2*A+1]+=m*F,L(E,2*C+2*A+1),E[2*C+2*A+2]+=T*F,L(E,2*C+2*A+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new o(E,0)};function L(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function H(I,v){this.g=I,this.h=v}function q(I,v){if(R(v))throw Error("division by zero");if(R(I))return new H(d,d);if(P(I))return v=q(k(I),v),new H(k(v.g),k(v.h));if(P(v))return v=q(I,k(v)),new H(k(v.g),v.h);if(I.g.length>30){if(P(I)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,C=v;C.l(I)<=0;)E=Q(E),C=Q(C);var A=Z(E,1),T=Z(C,1);for(C=Z(C,2),E=Z(E,2);!R(C);){var m=T.add(C);m.l(I)<=0&&(A=A.add(E),T=m),C=Z(C,1),E=Z(E,1)}return v=V(I,A.j(v)),new H(A,v)}for(A=d;I.l(v)>=0;){for(E=Math.max(1,Math.floor(I.m()/v.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),T=u(E),m=T.j(v);P(m)||m.l(I)>0;)E-=C,T=u(E),m=T.j(v);R(T)&&(T=g),A=A.add(T),I=V(I,m)}return new H(A,I)}t.B=function(I){return q(this,I).h},t.and=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)&I.i(C);return new o(E,this.h&I.h)},t.or=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)|I.i(C);return new o(E,this.h|I.h)},t.xor=function(I){const v=Math.max(this.g.length,I.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)^I.i(C);return new o(E,this.h^I.h)};function Q(I){const v=I.g.length+1,E=[];for(let C=0;C<v;C++)E[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(E,I.h)}function Z(I,v){const E=v>>5;v%=32;const C=I.g.length-E,A=[];for(let T=0;T<C;T++)A[T]=v>0?I.i(T+E)>>>v|I.i(T+E+1)<<32-v:I.i(T+E);return new o(A,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ir=o}).apply(typeof ng<"u"?ng:typeof self<"u"?self:typeof window<"u"?window:{});var da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pv,$i,gv,Pa,Lu,mv,_v,yv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof da=="object"&&da];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,f){if(f)e:{var p=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var O=a[y];if(!(O in p))break e;p=p[O]}a=a[a.length-1],y=p[a],f=f(y),f!=y&&f!=null&&e(p,a,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(f){var p=[],y;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&p.push([y,f[y]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,p){return a.call.apply(a.bind,arguments)}function u(a,f,p){return u=c,u.apply(null,arguments)}function h(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function d(a,f){function p(){}p.prototype=f.prototype,a.Z=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(y,O,N){for(var J=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)J[Te-2]=arguments[Te];return f.prototype[O].apply(y,J)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const f=a.length;if(f>0){const p=Array(f);for(let y=0;y<f;y++)p[y]=a[y];return p}return[]}function R(a,f){for(let y=1;y<arguments.length;y++){const O=arguments[y];var p=typeof O;if(p=p!="object"?p:O?Array.isArray(O)?"array":p:"null",p=="array"||p=="object"&&typeof O.length=="number"){p=a.length||0;const N=O.length||0;a.length=p+N;for(let J=0;J<N;J++)a[p+J]=O[J]}else a.push(O)}}class P{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(a){o.setTimeout(()=>{throw a},0)}function V(){var a=I;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class L{constructor(){this.h=this.g=null}add(f,p){const y=H.get();y.set(f,p),this.h?this.h.next=y:this.g=y,this.h=y}}var H=new P(()=>new q,a=>a.reset());class q{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,Z=!1,I=new L,v=()=>{const a=Promise.resolve(void 0);Q=()=>{a.then(E)}};function E(){for(var a;a=V();){try{a.h.call(a.g)}catch(p){k(p)}var f=H;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}Z=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,f),o.removeEventListener("test",p,f)}catch{}return a})();function m(a){return/^[\s\xa0]*$/.test(a)}function F(a,f){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}d(F,A),F.prototype.init=function(a,f){const p=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),le=0;function oe(a,f,p,y,O){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!y,this.ha=O,this.key=++le,this.da=this.fa=!1}function ie(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function fe(a,f,p){for(const y in a)f.call(p,a[y],y,a)}function we(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function be(a){const f={};for(const p in a)f[p]=a[p];return f}const Re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(a,f){let p,y;for(let O=1;O<arguments.length;O++){y=arguments[O];for(p in y)a[p]=y[p];for(let N=0;N<Re.length;N++)p=Re[N],Object.prototype.hasOwnProperty.call(y,p)&&(a[p]=y[p])}}function He(a){this.src=a,this.g={},this.h=0}He.prototype.add=function(a,f,p,y,O){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const J=Qe(a,f,y,O);return J>-1?(f=a[J],p||(f.fa=!1)):(f=new oe(f,this.src,N,!!y,O),f.fa=p,a.push(f)),f};function ut(a,f){const p=f.type;if(p in a.g){var y=a.g[p],O=Array.prototype.indexOf.call(y,f,void 0),N;(N=O>=0)&&Array.prototype.splice.call(y,O,1),N&&(ie(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Qe(a,f,p,y){for(let O=0;O<a.length;++O){const N=a[O];if(!N.da&&N.listener==f&&N.capture==!!p&&N.ha==y)return O}return-1}var M="closure_lm_"+(Math.random()*1e6|0),ee={};function X(a,f,p,y,O){if(Array.isArray(f)){for(let N=0;N<f.length;N++)X(a,f[N],p,y,O);return null}return p=G(p),a&&a[te]?a.J(f,p,l(y)?!!y.capture:!1,O):ne(a,f,p,!1,y,O)}function ne(a,f,p,y,O,N){if(!f)throw Error("Invalid event type");const J=l(O)?!!O.capture:!!O;let Te=B(a);if(Te||(a[M]=Te=new He(a)),p=Te.add(f,p,y,J,N),p.proxy)return p;if(y=Ee(),p.proxy=y,y.src=a,y.listener=p,a.addEventListener)T||(O=J),O===void 0&&(O=!1),a.addEventListener(f.toString(),y,O);else if(a.attachEvent)a.attachEvent(w(f.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ee(){function a(p){return f.call(a.src,a.listener,p)}const f=D;return a}function b(a,f,p,y,O){if(Array.isArray(f))for(var N=0;N<f.length;N++)b(a,f[N],p,y,O);else y=l(y)?!!y.capture:!!y,p=G(p),a&&a[te]?(a=a.i,N=String(f).toString(),N in a.g&&(f=a.g[N],p=Qe(f,p,y,O),p>-1&&(ie(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete a.g[N],a.h--)))):a&&(a=B(a))&&(f=a.g[f.toString()],a=-1,f&&(a=Qe(f,p,y,O)),(p=a>-1?f[a]:null)&&S(p))}function S(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[te])ut(f.i,a);else{var p=a.type,y=a.proxy;f.removeEventListener?f.removeEventListener(p,y,a.capture):f.detachEvent?f.detachEvent(w(p),y):f.addListener&&f.removeListener&&f.removeListener(y),(p=B(f))?(ut(p,a),p.h==0&&(p.src=null,f[M]=null)):ie(a)}}}function w(a){return a in ee?ee[a]:ee[a]="on"+a}function D(a,f){if(a.da)a=!0;else{f=new F(f,this);const p=a.listener,y=a.ha||a.src;a.fa&&S(a),a=p.call(y,f)}return a}function B(a){return a=a[M],a instanceof He?a:null}var x="__closure_events_fn_"+(Math.random()*1e9>>>0);function G(a){return typeof a=="function"?a:(a[x]||(a[x]=function(f){return a.handleEvent(f)}),a[x])}function U(){C.call(this),this.i=new He(this),this.M=this,this.G=null}d(U,C),U.prototype[te]=!0,U.prototype.removeEventListener=function(a,f,p,y){b(this,a,f,p,y)};function $(a,f){var p,y=a.G;if(y)for(p=[];y;y=y.G)p.push(y);if(a=a.M,y=f.type||f,typeof f=="string")f=new A(f,a);else if(f instanceof A)f.target=f.target||a;else{var O=f;f=new A(y,a),nt(f,O)}O=!0;let N,J;if(p)for(J=p.length-1;J>=0;J--)N=f.g=p[J],O=K(N,y,!0,f)&&O;if(N=f.g=a,O=K(N,y,!0,f)&&O,O=K(N,y,!1,f)&&O,p)for(J=0;J<p.length;J++)N=f.g=p[J],O=K(N,y,!1,f)&&O}U.prototype.N=function(){if(U.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const p=a.g[f];for(let y=0;y<p.length;y++)ie(p[y]);delete a.g[f],a.h--}}this.G=null},U.prototype.J=function(a,f,p,y){return this.i.add(String(a),f,!1,p,y)},U.prototype.K=function(a,f,p,y){return this.i.add(String(a),f,!0,p,y)};function K(a,f,p,y){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let N=0;N<f.length;++N){const J=f[N];if(J&&!J.da&&J.capture==p){const Te=J.listener,rt=J.ha||J.src;J.fa&&ut(a.i,J),O=Te.call(rt,y)!==!1&&O}}return O&&!y.defaultPrevented}function de(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function re(a){a.g=de(()=>{a.g=null,a.i&&(a.i=!1,re(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class ue extends C{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(a){C.call(this),this.h=a,this.g={}}d(pe,C);var Ie=[];function Me(a){fe(a.g,function(f,p){this.g.hasOwnProperty(p)&&S(f)},a),a.g={}}pe.prototype.N=function(){pe.Z.N.call(this),Me(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=o.JSON.stringify,bt=o.JSON.parse,wt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Wt(){}function Gt(){}var on={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bs(){A.call(this,"d")}d(bs,A);function gt(){A.call(this,"c")}d(gt,A);var ht={},_i=null;function jr(){return _i=_i||new U}ht.Ia="serverreachability";function ff(a){A.call(this,ht.Ia,a)}d(ff,A);function yi(a){const f=jr();$(f,new ff(f))}ht.STAT_EVENT="statevent";function df(a,f){A.call(this,ht.STAT_EVENT,a),this.stat=f}d(df,A);function Vt(a){const f=jr();$(f,new df(f,a))}ht.Ja="timingevent";function pf(a,f){A.call(this,ht.Ja,a),this.size=f}d(pf,A);function vi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function Ei(){this.g=!0}Ei.prototype.ua=function(){this.g=!1};function zE(a,f,p,y,O,N){a.info(function(){if(a.g)if(N){var J="",Te=N.split("&");for(let Ue=0;Ue<Te.length;Ue++){var rt=Te[Ue].split("=");if(rt.length>1){const ft=rt[0];rt=rt[1];const En=ft.split("_");J=En.length>=2&&En[1]=="type"?J+(ft+"="+rt+"&"):J+(ft+"=redacted&")}}}else J=null;else J=N;return"XMLHTTP REQ ("+y+") [attempt "+O+"]: "+f+`
`+p+`
`+J})}function KE(a,f,p,y,O,N,J){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+O+"]: "+f+`
`+p+`
`+N+" "+J})}function ws(a,f,p,y){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+GE(a,p)+(y?" "+y:"")})}function WE(a,f){a.info(function(){return"TIMEOUT: "+f})}Ei.prototype.info=function(){};function GE(a,f){if(!a.g)return f;if(!f)return null;try{const N=JSON.parse(f);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var p=N[a];if(!(p.length<2)){var y=p[1];if(Array.isArray(y)&&!(y.length<1)){var O=y[0];if(O!="noop"&&O!="stop"&&O!="close")for(let J=1;J<y.length;J++)y[J]=""}}}}return ke(N)}catch{return f}}var Wo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mf;function fc(){}d(fc,Wt),fc.prototype.g=function(){return new XMLHttpRequest},mf=new fc;function Ti(a){return encodeURIComponent(String(a))}function QE(a){var f=1;a=a.split(":");const p=[];for(;f>0&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function rr(a,f,p,y){this.j=a,this.i=f,this.l=p,this.S=y||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _f}function _f(){this.i=null,this.g="",this.h=!1}var yf={},dc={};function pc(a,f,p){a.M=1,a.A=Qo(vn(f)),a.u=p,a.R=!0,vf(a,null)}function vf(a,f){a.F=Date.now(),Go(a),a.B=vn(a.A);var p=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),Nf(p.i,"t",y),a.C=0,p=a.j.L,a.h=new _f,a.g=Yf(a.j,p?f:null,!a.u),a.P>0&&(a.O=new ue(u(a.Y,a,a.g),a.P)),f=a.V,p=a.g,y=a.ba;var O="readystatechange";Array.isArray(O)||(O&&(Ie[0]=O.toString()),O=Ie);for(let N=0;N<O.length;N++){const J=X(p,O[N],y||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=a.J?be(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),yi(),zE(a.i,a.v,a.B,a.l,a.S,a.u)}rr.prototype.ba=function(a){a=a.target;const f=this.O;f&&or(a)==3?f.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{const Te=or(this.g),rt=this.g.ya(),Ue=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||Bf(this.g)))){this.K||Te!=4||rt==7||(rt==8||Ue<=0?yi(3):yi(2)),gc(this);var f=this.g.ca();this.X=f;var p=YE(this);if(this.o=f==200,KE(this.i,this.v,this.B,this.l,this.S,Te,f),this.o){if(this.U&&!this.L){t:{if(this.g){var y,O=this.g;if((y=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(y)){var N=y;break t}}N=null}if(a=N)ws(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mc(this,a);else{this.o=!1,this.m=3,Vt(12),Hr(this),bi(this);break e}}if(this.R){a=!0;let ft;for(;!this.K&&this.C<p.length;)if(ft=JE(this,p),ft==dc){Te==4&&(this.m=4,Vt(14),a=!1),ws(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==yf){this.m=4,Vt(15),ws(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else ws(this.i,this.l,ft,null),mc(this,ft);if(Ef(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||p.length!=0||this.h.h||(this.m=1,Vt(16),a=!1),this.o=this.o&&a,!a)ws(this.i,this.l,p,"[Invalid Chunked Response]"),Hr(this),bi(this);else if(p.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Ic(J),J.P=!0,Vt(11))}}else ws(this.i,this.l,p,null),mc(this,p);Te==4&&Hr(this),this.o&&!this.K&&(Te==4?Kf(this.j,this):(this.o=!1,Go(this)))}else hT(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Hr(this),bi(this)}}}catch{}finally{}};function YE(a){if(!Ef(a))return a.g.la();const f=Bf(a.g);if(f==="")return"";let p="";const y=f.length,O=or(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Hr(a),bi(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<y;N++)a.h.h=!0,p+=a.h.i.decode(f[N],{stream:!(O&&N==y-1)});return f.length=0,a.h.g+=p,a.C=0,a.h.g}function Ef(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function JE(a,f){var p=a.C,y=f.indexOf(`
`,p);return y==-1?dc:(p=Number(f.substring(p,y)),isNaN(p)?yf:(y+=1,y+p>f.length?dc:(f=f.slice(y,y+p),a.C=y+p,f)))}rr.prototype.cancel=function(){this.K=!0,Hr(this)};function Go(a){a.T=Date.now()+a.H,Tf(a,a.H)}function Tf(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=vi(u(a.aa,a),f)}function gc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}rr.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(WE(this.i,this.B),this.M!=2&&(yi(),Vt(17)),Hr(this),this.m=2,bi(this)):Tf(this,this.T-a)};function bi(a){a.j.I==0||a.K||Kf(a.j,a)}function Hr(a){gc(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Me(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function mc(a,f){try{var p=a.j;if(p.I!=0&&(p.g==a||_c(p.h,a))){if(!a.L&&_c(p.h,a)&&p.I==3){try{var y=p.Ba.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var O=y;if(O[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)ea(p),Xo(p);else break e;wc(p),Vt(18)}}else p.xa=O[1],0<p.xa-p.K&&O[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=vi(u(p.Va,p),6e3));If(p.h)<=1&&p.ta&&(p.ta=void 0)}else zr(p,11)}else if((a.L||p.g==a)&&ea(p),!m(f))for(O=p.Ba.g.parse(f),f=0;f<O.length;f++){let Ue=O[f];const ft=Ue[0];if(!(ft<=p.K))if(p.K=ft,Ue=Ue[1],p.I==2)if(Ue[0]=="c"){p.M=Ue[1],p.ba=Ue[2];const En=Ue[3];En!=null&&(p.ka=En,p.j.info("VER="+p.ka));const Kr=Ue[4];Kr!=null&&(p.za=Kr,p.j.info("SVER="+p.za));const ar=Ue[5];ar!=null&&typeof ar=="number"&&ar>0&&(y=1.5*ar,p.O=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const lr=a.g;if(lr){const na=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var N=y.h;N.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(yc(N,N.h),N.h=null))}if(y.G){const Ac=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ac&&(y.wa=Ac,qe(y.J,y.G,Ac))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),y=p;var J=a;if(y.na=Qf(y,y.L?y.ba:null,y.W),J.L){Af(y.h,J);var Te=J,rt=y.O;rt&&(Te.H=rt),Te.D&&(gc(Te),Go(Te)),y.g=J}else qf(y);p.i.length>0&&Zo(p)}else Ue[0]!="stop"&&Ue[0]!="close"||zr(p,7);else p.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?zr(p,7):bc(p):Ue[0]!="noop"&&p.l&&p.l.qa(Ue),p.A=0)}}yi(4)}catch{}}var XE=class{constructor(a,f){this.g=a,this.map=f}};function bf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function If(a){return a.h?1:a.g?a.g.size:0}function _c(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function yc(a,f){a.g?a.g.add(f):a.h=f}function Af(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}bf.prototype.cancel=function(){if(this.i=Sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Sf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.G);return f}return _(a.i)}var Cf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZE(a,f){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const y=a[p].indexOf("=");let O,N=null;y>=0?(O=a[p].substring(0,y),N=a[p].substring(y+1)):O=a[p],f(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function sr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof sr?(this.l=a.l,wi(this,a.j),this.o=a.o,this.g=a.g,Ii(this,a.u),this.h=a.h,vc(this,Df(a.i)),this.m=a.m):a&&(f=String(a).match(Cf))?(this.l=!1,wi(this,f[1]||"",!0),this.o=Ai(f[2]||""),this.g=Ai(f[3]||"",!0),Ii(this,f[4]),this.h=Ai(f[5]||"",!0),vc(this,f[6]||"",!0),this.m=Ai(f[7]||"")):(this.l=!1,this.i=new Ci(null,this.l))}sr.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(Si(f,Rf,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Si(f,Rf,!0),"@"),a.push(Ti(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Si(p,p.charAt(0)=="/"?nT:tT,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Si(p,sT)),a.join("")},sr.prototype.resolve=function(a){const f=vn(this);let p=!!a.j;p?wi(f,a.j):p=!!a.o,p?f.o=a.o:p=!!a.g,p?f.g=a.g:p=a.u!=null;var y=a.h;if(p)Ii(f,a.u);else if(p=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var O=f.h.lastIndexOf("/");O!=-1&&(y=f.h.slice(0,O+1)+y)}if(O=y,O==".."||O==".")y="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){y=O.lastIndexOf("/",0)==0,O=O.split("/");const N=[];for(let J=0;J<O.length;){const Te=O[J++];Te=="."?y&&J==O.length&&N.push(""):Te==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),y&&J==O.length&&N.push("")):(N.push(Te),y=!0)}y=N.join("/")}else y=O}return p?f.h=y:p=a.i.toString()!=="",p?vc(f,Df(a.i)):p=!!a.m,p&&(f.m=a.m),f};function vn(a){return new sr(a)}function wi(a,f,p){a.j=p?Ai(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Ii(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function vc(a,f,p){f instanceof Ci?(a.i=f,iT(a.i,a.l)):(p||(f=Si(f,rT)),a.i=new Ci(f,a.l))}function qe(a,f,p){a.i.set(f,p)}function Qo(a){return qe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ai(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Si(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,eT),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function eT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Rf=/[#\/\?@]/g,tT=/[#\?:]/g,nT=/[#\?]/g,rT=/[#\?@]/g,sT=/#/g;function Ci(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function qr(a){a.g||(a.g=new Map,a.h=0,a.i&&ZE(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Ci.prototype,t.add=function(a,f){qr(this),this.i=null,a=Is(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function Pf(a,f){qr(a),f=Is(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function kf(a,f){return qr(a),f=Is(a,f),a.g.has(f)}t.forEach=function(a,f){qr(this),this.g.forEach(function(p,y){p.forEach(function(O){a.call(f,O,y,this)},this)},this)};function Of(a,f){qr(a);let p=[];if(typeof f=="string")kf(a,f)&&(p=p.concat(a.g.get(Is(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)p=p.concat(a[f]);return p}t.set=function(a,f){return qr(this),this.i=null,a=Is(this,a),kf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=Of(this,a),a.length>0?String(a[0]):f):f};function Nf(a,f,p){Pf(a,f),p.length>0&&(a.i=null,a.g.set(Is(a,f),_(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let y=0;y<f.length;y++){var p=f[y];const O=Ti(p);p=Of(this,p);for(let N=0;N<p.length;N++){let J=O;p[N]!==""&&(J+="="+Ti(p[N])),a.push(J)}}return this.i=a.join("&")};function Df(a){const f=new Ci;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function Is(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function iT(a,f){f&&!a.j&&(qr(a),a.i=null,a.g.forEach(function(p,y){const O=y.toLowerCase();y!=O&&(Pf(this,y),Nf(this,O,p))},a)),a.j=f}function oT(a,f){const p=new Ei;if(o.Image){const y=new Image;y.onload=h(ir,p,"TestLoadImage: loaded",!0,f,y),y.onerror=h(ir,p,"TestLoadImage: error",!1,f,y),y.onabort=h(ir,p,"TestLoadImage: abort",!1,f,y),y.ontimeout=h(ir,p,"TestLoadImage: timeout",!1,f,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else f(!1)}function aT(a,f){const p=new Ei,y=new AbortController,O=setTimeout(()=>{y.abort(),ir(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:y.signal}).then(N=>{clearTimeout(O),N.ok?ir(p,"TestPingServer: ok",!0,f):ir(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),ir(p,"TestPingServer: error",!1,f)})}function ir(a,f,p,y,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),y(p)}catch{}}function lT(){this.g=new wt}function Ec(a){this.i=a.Sb||null,this.h=a.ab||!1}d(Ec,Wt),Ec.prototype.g=function(){return new Yo(this.i,this.h)};function Yo(a,f){U.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Yo,U),t=Yo.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,Pi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Ri(this):Pi(this),this.readyState==3&&Vf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ri(this))},t.Na=function(a){this.g&&(this.response=a,Ri(this))},t.ga=function(){this.g&&Ri(this)};function Ri(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Pi(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function Pi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Lf(a){let f="";return fe(a,function(p,y){f+=y,f+=":",f+=p,f+=`\r
`}),f}function Tc(a,f,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Lf(p),typeof a=="string"?p!=null&&Ti(p):qe(a,f,p))}function Je(a){U.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Je,U);var cT=/^https?$/i,uT=["POST","PUT"];t=Je.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mf.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(N){xf(this,N);return}if(a=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var O in y)p.set(O,y[O]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const N of y.keys())p.set(N,y.get(N));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),O=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(uT,f,void 0)>=0)||y||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,J]of p)this.g.setRequestHeader(N,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){xf(this,N)}};function xf(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Mf(a),Jo(a)}function Mf(a){a.A||(a.A=!0,$(a,"complete"),$(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,$(this,"complete"),$(this,"abort"),Jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),Je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ff(this):this.Xa())},t.Xa=function(){Ff(this)};function Ff(a){if(a.h&&typeof i<"u"){if(a.v&&or(a)==4)setTimeout(a.Ca.bind(a),0);else if($(a,"readystatechange"),or(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var y;if(y=N===0){let J=String(a.D).match(Cf)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),y=!cT.test(J?J.toLowerCase():"")}p=y}if(p)$(a,"complete"),$(a,"success");else{a.o=6;try{var O=or(a)>2?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.ca()+"]",Mf(a)}}finally{Jo(a)}}}}function Jo(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,f||$(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function or(a){return a.g?a.g.readyState:0}t.ca=function(){try{return or(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),bt(f)}};function Bf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function hT(a){const f={};a=(a.g&&or(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(m(a[y]))continue;var p=QE(a[y]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const N=f[O]||[];f[O]=N,N.push(p)}we(f,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function Uf(a){this.za=0,this.i=[],this.j=new Ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,a),this.Za=ki("retryDelaySeedMs",1e4,a),this.Ta=ki("forwardChannelMaxRetries",2,a),this.va=ki("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new bf(a&&a.concurrentRequestLimit),this.Ba=new lT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Uf.prototype,t.ka=8,t.I=1,t.connect=function(a,f,p,y){Vt(0),this.W=a,this.H=f||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.J=Qf(this,null,this.W),Zo(this)};function bc(a){if($f(a),a.I==3){var f=a.V++,p=vn(a.J);if(qe(p,"SID",a.M),qe(p,"RID",f),qe(p,"TYPE","terminate"),Oi(a,p),f=new rr(a,a.j,f),f.M=2,f.A=Qo(vn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=f.A,p=!0),p||(f.g=Yf(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Go(f)}Gf(a)}function Xo(a){a.g&&(Ic(a),a.g.cancel(),a.g=null)}function $f(a){Xo(a),a.v&&(o.clearTimeout(a.v),a.v=null),ea(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Zo(a){if(!wf(a.h)&&!a.m){a.m=!0;var f=a.Ea;Q||v(),Z||(Q(),Z=!0),I.add(f,a),a.D=0}}function fT(a,f){return If(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=vi(u(a.Ea,a,f),Wf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const O=new rr(this,this.j,a);let N=this.o;if(this.U&&(N?(N=be(N),nt(N,this.U)):N=this.U),this.u!==null||this.R||(O.J=N,N=null),this.S)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,f>4096){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=Hf(this,O,f),p=vn(this.J),qe(p,"RID",a),qe(p,"CVER",22),this.G&&qe(p,"X-HTTP-Session-Id",this.G),Oi(this,p),N&&(this.R?f="headers="+Ti(Lf(N))+"&"+f:this.u&&Tc(p,this.u,N)),yc(this.h,O),this.Ra&&qe(p,"TYPE","init"),this.S?(qe(p,"$req",f),qe(p,"SID","null"),O.U=!0,pc(O,p,null)):pc(O,p,f),this.I=2}}else this.I==3&&(a?jf(this,a):this.i.length==0||wf(this.h)||jf(this))};function jf(a,f){var p;f?p=f.l:p=a.V++;const y=vn(a.J);qe(y,"SID",a.M),qe(y,"RID",p),qe(y,"AID",a.K),Oi(a,y),a.u&&a.o&&Tc(y,a.u,a.o),p=new rr(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Hf(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),yc(a.h,p),pc(p,y,f)}function Oi(a,f){a.H&&fe(a.H,function(p,y){qe(f,y,p)}),a.l&&fe({},function(p,y){qe(f,y,p)})}function Hf(a,f,p){p=Math.min(a.i.length,p);const y=a.l?u(a.l.Ka,a.l,a):null;e:{var O=a.i;let Te=-1;for(;;){const rt=["count="+p];Te==-1?p>0?(Te=O[0].g,rt.push("ofs="+Te)):Te=0:rt.push("ofs="+Te);let Ue=!0;for(let ft=0;ft<p;ft++){var N=O[ft].g;const En=O[ft].map;if(N-=Te,N<0)Te=Math.max(0,O[ft].g-100),Ue=!1;else try{N="req"+N+"_"||"";try{var J=En instanceof Map?En:Object.entries(En);for(const[Kr,ar]of J){let lr=ar;l(ar)&&(lr=ke(ar)),rt.push(N+Kr+"="+encodeURIComponent(lr))}}catch(Kr){throw rt.push(N+"type="+encodeURIComponent("_badmap")),Kr}}catch{y&&y(En)}}if(Ue){J=rt.join("&");break e}}J=void 0}return a=a.i.splice(0,p),f.G=a,J}function qf(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;Q||v(),Z||(Q(),Z=!0),I.add(f,a),a.A=0}}function wc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=vi(u(a.Da,a),Wf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,zf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=vi(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Xo(this),zf(this))};function Ic(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function zf(a){a.g=new rr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=vn(a.na);qe(f,"RID","rpc"),qe(f,"SID",a.M),qe(f,"AID",a.K),qe(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&qe(f,"TO",a.ia),qe(f,"TYPE","xmlhttp"),Oi(a,f),a.u&&a.o&&Tc(f,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Qo(vn(f)),p.u=null,p.R=!0,vf(p,a)}t.Va=function(){this.C!=null&&(this.C=null,Xo(this),wc(this),Vt(19))};function ea(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Kf(a,f){var p=null;if(a.g==f){ea(a),Ic(a),a.g=null;var y=2}else if(_c(a.h,f))p=f.G,Af(a.h,f),y=1;else return;if(a.I!=0){if(f.o)if(y==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var O=a.D;y=jr(),$(y,new pf(y,p)),Zo(a)}else qf(a);else if(O=f.m,O==3||O==0&&f.X>0||!(y==1&&fT(a,f)||y==2&&wc(a)))switch(p&&p.length>0&&(f=a.h,f.i=f.i.concat(p)),O){case 1:zr(a,5);break;case 4:zr(a,10);break;case 3:zr(a,6);break;default:zr(a,2)}}}function Wf(a,f){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*f}function zr(a,f){if(a.j.info("Error code "+f),f==2){var p=u(a.bb,a),y=a.Ua;const O=!y;y=new sr(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||wi(y,"https"),Qo(y),O?oT(y.toString(),p):aT(y.toString(),p)}else Vt(2);a.I=0,a.l&&a.l.pa(f),Gf(a),$f(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Gf(a){if(a.I=0,a.ja=[],a.l){const f=Sf(a.h);(f.length!=0||a.i.length!=0)&&(R(a.ja,f),R(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Qf(a,f,p){var y=p instanceof sr?vn(p):new sr(p);if(y.g!="")f&&(y.g=f+"."+y.g),Ii(y,y.u);else{var O=o.location;y=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const N=new sr(null);y&&wi(N,y),f&&(N.g=f),O&&Ii(N,O),p&&(N.h=p),y=N}return p=a.G,f=a.wa,p&&f&&qe(y,p,f),qe(y,"VER",a.ka),Oi(a,y),y}function Yf(a,f,p){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Je(new Ec({ab:p})):new Je(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jf(){}t=Jf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ta(){}ta.prototype.g=function(a,f){return new Qt(a,f)};function Qt(a,f){U.call(this),this.g=new Uf(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!m(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!m(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new As(this)}d(Qt,U),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){bc(this.g)},Qt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=ke(a),a=p);f.i.push(new XE(f.Ya++,a)),f.I==3&&Zo(f)},Qt.prototype.N=function(){this.g.l=null,delete this.j,bc(this.g),delete this.g,Qt.Z.N.call(this)};function Xf(a){bs.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const p in f){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}d(Xf,bs);function Zf(){gt.call(this),this.status=1}d(Zf,gt);function As(a){this.g=a}d(As,Jf),As.prototype.ra=function(){$(this.g,"a")},As.prototype.qa=function(a){$(this.g,new Xf(a))},As.prototype.pa=function(a){$(this.g,new Zf)},As.prototype.oa=function(){$(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,yv=function(){return new ta},_v=function(){return jr()},mv=ht,Lu={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,Pa=Wo,gf.COMPLETE="complete",gv=gf,Gt.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",U.prototype.listen=U.prototype.J,$i=Gt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,pv=Je}).apply(typeof da<"u"?da:typeof self<"u"?self:typeof window<"u"?window:{});const rg="@firebase/firestore",sg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Eh("@firebase/firestore");function Ds(){return gs.logLevel}function se(t,...e){if(gs.logLevel<=Ae.DEBUG){const n=e.map(Oh);gs.debug(`Firestore (${di}): ${t}`,...n)}}function Zn(t,...e){if(gs.logLevel<=Ae.ERROR){const n=e.map(Oh);gs.error(`Firestore (${di}): ${t}`,...n)}}function Zs(t,...e){if(gs.logLevel<=Ae.WARN){const n=e.map(Oh);gs.warn(`Firestore (${di}): ${t}`,...n)}}function Oh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,vv(t,r,n)}function vv(t,e,n){let r=`FIRESTORE (${di}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Zn(r),new Error(r)}function xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||vv(e,s,r)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ct.UNAUTHENTICATED)))}shutdown(){}}class Dk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Vk{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ar,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ar)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new Ev(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class Lk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Lk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ct.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ig{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ig(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ig(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Fk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function xu(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return tu(s)===tu(i)?Se(s,i):tu(s)?1:-1}return Se(t.length,e.length)}const Bk=55296,Uk=57343;function tu(t){const e=t.charCodeAt(0);return e>=Bk&&e<=Uk}function ei(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="__name__";class wn{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=wn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Se(e.length,n.length)}static compareSegments(e,n){const r=wn.isNumericId(e),s=wn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?wn.extractNumericId(e).compare(wn.extractNumericId(n)):xu(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}}class ze extends wn{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new ze(n)}static emptyPath(){return new ze([])}}const $k=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends wn{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return $k.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===og}static keyField(){return new yt([og])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ae(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ae(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new ae(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(ze.fromString(e))}static fromName(e){return new he(ze.fromString(e).popFirst(5))}static empty(){return new he(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e,n){if(!n)throw new ae(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jk(t,e,n,r){if(e===!0&&r===!0)throw new ae(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ag(t){if(!he.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lg(t){if(he.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function Rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dh(t);throw new ae(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e){const n={typeString:t};return e&&(n.value=e),n}function $o(t,e){if(!bv(t))throw new ae(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ae(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=-62135596800,ug=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ug);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cg)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ug}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($o(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:tt("string",Ke._jsonSchemaVersion),seconds:tt("number"),nanoseconds:tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Ke(0,0))}static max(){return new ye(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=-1;function Hk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Pr(s,he.empty(),e)}function qk(t){return new Pr(t.readTime,t.key,Io)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(ye.min(),he.empty(),Io)}static max(){return new Pr(ye.max(),he.empty(),Io)}}function zk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==Kk)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):j.reject(n)}static resolve(e){return new j(((n,r)=>{n(e)}))}static reject(e){return new j(((n,r)=>{r(e)}))}static waitFor(e){return new j(((n,r)=>{let s=0,i=0,o=!1;e.forEach((l=>{++s,l.next((()=>{++i,o&&i===s&&n()}),(c=>r(c)))})),o=!0,i===s&&n()}))}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next((s=>s?j.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new j(((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next((h=>{o[u]=h,++l,l===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new j(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function Gk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ql.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=-1;function Yl(t){return t==null}function ul(t){return t===0&&1/t==-1/0}function Qk(t){return typeof t=="number"&&Number.isInteger(t)&&!ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="";function Yk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hg(e)),e=Jk(t.get(n),e);return hg(e)}function Jk(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case wv:n+="";break;default:n+=i}}return n}function hg(t){return t+wv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Iv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pa(this.root,e,this.comparator,!0)}}class pa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??mt.RED,this.left=s??mt.EMPTY,this.right=i??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new mt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dg(this.data.getIterator())}getIteratorFrom(e){return new dg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class dg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new lt(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ei(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Av("Invalid base64 string: "+i):i}})(e);return new Tt(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const Xk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=Xk.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="server_timestamp",Cv="__type__",Rv="__previous_value__",Pv="__local_write_time__";function Lh(t){return(t?.mapValue?.fields||{})[Cv]?.stringValue===Sv}function Jl(t){const e=t.mapValue.fields[Rv];return Lh(e)?Jl(e):e}function Ao(t){const e=kr(t.mapValue.fields[Pv].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const hl="(default)";class So{constructor(e,n){this.projectId=e,this.database=n||hl}static empty(){return new So("","")}get isDefaultDatabase(){return this.database===hl}isEqual(e){return e instanceof So&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="__type__",e1="__max__",ga={mapValue:{}},Ov="__vector__",fl="value";function Nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lh(t)?4:n1(t)?9007199254740991:t1(t)?10:11:me(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=Nr(t);if(n!==Nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ao(t).isEqual(Ao(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=kr(s.timestampValue),l=kr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Or(s.bytesValue).isEqual(Or(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Xe(s.doubleValue),l=Xe(i.doubleValue);return o===l?ul(o)===ul(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return ei(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(fg(o)!==fg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Dn(o[c],l[c])))return!1;return!0})(t,e);default:return me(52216,{left:t})}}function Co(t,e){return(t.values||[]).find((n=>Dn(n,e)))!==void 0}function ti(t,e){if(t===e)return 0;const n=Nr(t),r=Nr(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=Xe(i.integerValue||i.doubleValue),c=Xe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return pg(t.timestampValue,e.timestampValue);case 4:return pg(Ao(t),Ao(e));case 5:return xu(t.stringValue,e.stringValue);case 6:return(function(i,o){const l=Or(i),c=Or(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Se(l[u],c[u]);if(h!==0)return h}return Se(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Se(Xe(i.latitude),Xe(o.latitude));return l!==0?l:Se(Xe(i.longitude),Xe(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return gg(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const l=i.fields||{},c=o.fields||{},u=l[fl]?.arrayValue,h=c[fl]?.arrayValue,d=Se(u?.values?.length||0,h?.values?.length||0);return d!==0?d:gg(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===ga.mapValue&&o===ga.mapValue)return 0;if(i===ga.mapValue)return 1;if(o===ga.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const g=xu(c[d],h[d]);if(g!==0)return g;const _=ti(l[c[d]],u[h[d]]);if(_!==0)return _}return Se(c.length,h.length)})(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function pg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=kr(t),r=kr(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function gg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ti(n[s],r[s]);if(i)return i}return Se(n.length,r.length)}function ni(t){return Mu(t)}function Mu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=kr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Or(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return he.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Mu(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Mu(n.fields[o])}`;return s+"}"})(t.mapValue):me(61005,{value:t})}function ka(t){switch(Nr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jl(t);return e?16+ka(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+ka(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Ur(r.fields,((i,o)=>{s+=i.length+ka(o)})),s})(t.mapValue);default:throw me(13486,{value:t})}}function Fu(t){return!!t&&"integerValue"in t}function xh(t){return!!t&&"arrayValue"in t}function mg(t){return!!t&&"nullValue"in t}function _g(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oa(t){return!!t&&"mapValue"in t}function t1(t){return(t?.mapValue?.fields||{})[kv]?.stringValue===Ov}function oo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ur(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=oo(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oo(t.arrayValue.values[n]);return e}return{...t}}function n1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===e1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(n)}setAll(e){let n=yt.emptyPath(),r={},s=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=oo(o):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Oa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Oa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ur(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new qt(oo(this.value))}}function Nv(t){const e=[];return Ur(t.fields,((n,r)=>{const s=new yt([n]);if(Oa(r)){const i=Nv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new kt(e,0,ye.min(),ye.min(),ye.min(),qt.empty(),0)}static newFoundDocument(e,n,r,s){return new kt(e,1,n,ye.min(),r,s,0)}static newNoDocument(e,n){return new kt(e,2,n,ye.min(),ye.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,ye.min(),ye.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.position=e,this.inclusive=n}}function yg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=ti(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function vg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n="asc"){this.field=e,this.dir=n}}function r1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{}class it extends Dv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new i1(e,n,r):n==="array-contains"?new l1(e,r):n==="in"?new c1(e,r):n==="not-in"?new u1(e,r):n==="array-contains-any"?new h1(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new o1(e,r):new a1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ti(n,this.value)):n!==null&&Nr(this.value)===Nr(n)&&this.matchesComparison(ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends Dv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vn(e,n)}matches(e){return Vv(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vv(t){return t.op==="and"}function Lv(t){return s1(t)&&Vv(t)}function s1(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Bu(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+ni(t.value);if(Lv(t))return t.filters.map((e=>Bu(e))).join(",");{const e=t.filters.map((n=>Bu(n))).join(",");return`${t.op}(${e})`}}function xv(t,e){return t instanceof it?(function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&Dn(r.value,s.value)})(t,e):t instanceof Vn?(function(r,s){return s instanceof Vn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,l)=>i&&xv(o,s.filters[l])),!0):!1})(t,e):void me(19439)}function Mv(t){return t instanceof it?(function(n){return`${n.field.canonicalString()} ${n.op} ${ni(n.value)}`})(t):t instanceof Vn?(function(n){return n.op.toString()+" {"+n.getFilters().map(Mv).join(" ,")+"}"})(t):"Filter"}class i1 extends it{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class o1 extends it{constructor(e,n){super(e,"in",n),this.keys=Fv("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class a1 extends it{constructor(e,n){super(e,"not-in",n),this.keys=Fv("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Fv(t,e){return(e.arrayValue?.values||[]).map((n=>he.fromName(n.referenceValue)))}class l1 extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xh(n)&&Co(n.arrayValue,this.value)}}class c1 extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Co(this.value.arrayValue,n)}}class u1 extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(Co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Co(this.value.arrayValue,n)}}class h1 extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Co(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Eg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new f1(t,e,n,r,s,i,o)}function Mh(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Bu(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Yl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ni(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ni(r))).join(",")),e.Te=n}return e.Te}function Fh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vg(t.startAt,e.startAt)&&vg(t.endAt,e.endAt)}function Uu(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function d1(t,e,n,r,s,i,o,l){return new Xl(t,e,n,r,s,i,o,l)}function Bh(t){return new Xl(t)}function Tg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function p1(t){return t.collectionGroup!==null}function ao(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new lt(yt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(l=l.add(u.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new pl(i,r))})),n.has(yt.keyField().canonicalString())||e.Ie.push(new pl(yt.keyField(),r))}return e.Ie}function Pn(t){const e=ve(t);return e.Ee||(e.Ee=g1(e,ao(t))),e.Ee}function g1(t,e){if(t.limitType==="F")return Eg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new pl(s.field,i)}));const n=t.endAt?new dl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new dl(t.startAt.position,t.startAt.inclusive):null;return Eg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $u(t,e,n){return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zl(t,e){return Fh(Pn(t),Pn(e))&&t.limitType===e.limitType}function Bv(t){return`${Mh(Pn(t))}|lt:${t.limitType}`}function Vs(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Mv(s))).join(", ")}]`),Yl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>ni(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>ni(s))).join(",")),`Target(${r})`})(Pn(t))}; limitType=${t.limitType})`}function ec(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of ao(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,l,c){const u=yg(o,l,c);return o.inclusive?u<=0:u<0})(r.startAt,ao(r),s)||r.endAt&&!(function(o,l,c){const u=yg(o,l,c);return o.inclusive?u>=0:u>0})(r.endAt,ao(r),s))})(t,e)}function m1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Uv(t){return(e,n)=>{let r=!1;for(const s of ao(t)){const i=_1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _1(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):(function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ti(c,u):me(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Iv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=new Ye(he.comparator);function er(){return y1}const $v=new Ye(he.comparator);function ji(...t){let e=$v;for(const n of t)e=e.insert(n.key,n);return e}function jv(t){let e=$v;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ss(){return lo()}function Hv(){return lo()}function lo(){return new Es((t=>t.toString()),((t,e)=>t.isEqual(e)))}const v1=new Ye(he.comparator),E1=new lt(he.comparator);function Ce(...t){let e=E1;for(const n of t)e=e.add(n);return e}const T1=new lt(Se);function b1(){return T1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ul(e)?"-0":e}}function qv(t){return{integerValue:""+t}}function w1(t,e){return Qk(e)?qv(e):Uh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this._=void 0}}function I1(t,e,n){return t instanceof gl?(function(s,i){const o={fields:{[Cv]:{stringValue:Sv},[Pv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lh(i)&&(i=Jl(i)),i&&(o.fields[Rv]=i),{mapValue:o}})(n,e):t instanceof Ro?Kv(t,e):t instanceof Po?Wv(t,e):(function(s,i){const o=zv(s,i),l=bg(o)+bg(s.Ae);return Fu(o)&&Fu(s.Ae)?qv(l):Uh(s.serializer,l)})(t,e)}function A1(t,e,n){return t instanceof Ro?Kv(t,e):t instanceof Po?Wv(t,e):n}function zv(t,e){return t instanceof ml?(function(r){return Fu(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class gl extends tc{}class Ro extends tc{constructor(e){super(),this.elements=e}}function Kv(t,e){const n=Gv(e);for(const r of t.elements)n.some((s=>Dn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Po extends tc{constructor(e){super(),this.elements=e}}function Wv(t,e){let n=Gv(e);for(const r of t.elements)n=n.filter((s=>!Dn(s,r)));return{arrayValue:{values:n}}}class ml extends tc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bg(t){return Xe(t.integerValue||t.doubleValue)}function Gv(t){return xh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function S1(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Ro&&s instanceof Ro||r instanceof Po&&s instanceof Po?ei(r.elements,s.elements,Dn):r instanceof ml&&s instanceof ml?Dn(r.Ae,s.Ae):r instanceof gl&&s instanceof gl})(t.transform,e.transform)}class C1{constructor(e,n){this.version=e,this.transformResults=n}}class un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Na(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nc{}function Qv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $h(t.key,un.none()):new jo(t.key,t.data,un.none());{const n=t.data,r=qt.empty();let s=new lt(yt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new $r(t.key,r,new Jt(s.toArray()),un.none())}}function R1(t,e,n){t instanceof jo?(function(s,i,o){const l=s.value.clone(),c=Ig(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof $r?(function(s,i,o){if(!Na(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Ig(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Yv(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function co(t,e,n,r){return t instanceof jo?(function(i,o,l,c){if(!Na(i.precondition,o))return l;const u=i.value.clone(),h=Ag(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof $r?(function(i,o,l,c){if(!Na(i.precondition,o))return l;const u=Ag(i.fieldTransforms,c,o),h=o.data;return h.setAll(Yv(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,l){return Na(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function P1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=zv(r.transform,s||null);i!=null&&(n===null&&(n=qt.empty()),n.set(r.field,i))}return n||null}function wg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ei(r,s,((i,o)=>S1(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jo extends nc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $r extends nc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yv(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ig(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,A1(o,l,n[s]))}return r}function Ag(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,I1(i,o,e))}return r}class $h extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k1 extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&R1(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Hv();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=Qv(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ye.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ce())}isEqual(e){return this.batchId===e.batchId&&ei(this.mutations,e.mutations,((n,r)=>wg(n,r)))&&ei(this.baseMutations,e.baseMutations,((n,r)=>wg(n,r)))}}class jh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return v1})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new jh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,Pe;function V1(t){switch(t){case z.OK:return me(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function Jv(t){if(t===void 0)return Zn("GRPC error has no .code"),z.UNKNOWN;switch(t){case et.OK:return z.OK;case et.CANCELLED:return z.CANCELLED;case et.UNKNOWN:return z.UNKNOWN;case et.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case et.INTERNAL:return z.INTERNAL;case et.UNAVAILABLE:return z.UNAVAILABLE;case et.UNAUTHENTICATED:return z.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case et.NOT_FOUND:return z.NOT_FOUND;case et.ALREADY_EXISTS:return z.ALREADY_EXISTS;case et.PERMISSION_DENIED:return z.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case et.ABORTED:return z.ABORTED;case et.OUT_OF_RANGE:return z.OUT_OF_RANGE;case et.UNIMPLEMENTED:return z.UNIMPLEMENTED;case et.DATA_LOSS:return z.DATA_LOSS;default:return me(39323,{code:t})}}(Pe=et||(et={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new Ir([4294967295,4294967295],0);function Sg(t){const e=L1().encode(t),n=new dv;return n.update(e),new Uint8Array(n.digest())}function Cg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ir([n,r],0),new Ir([s,i],0)]}class Hh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hi(`Invalid padding: ${n}`);if(r<0)throw new Hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ir.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ir.fromNumber(r)));return s.compare(x1)===1&&(s=new Ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sg(e),[r,s]=Cg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hh(i,s,n);return r.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=Sg(e),[r,s]=Cg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ho.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rc(ye.min(),s,new Ye(Se),er(),Ce())}}class Ho{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ho(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Xv{constructor(e,n){this.targetId=e,this.Ce=n}}class Zv{constructor(e,n,r=Tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rg{constructor(){this.ve=0,this.Fe=Pg(),this.Me=Tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),r=Ce();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:me(38017,{changeType:i})}})),new Ho(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Pg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class M1{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=ma(),this.He=ma(),this.Ye=new Ye(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Uu(i))if(r===0){const o=new he(i.path);this.et(n,o,kt.newNoDocument(o,ye.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Or(r).toUint8Array()}catch(c){if(c instanceof Av)return Zs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Hh(o,s,i)}catch(c){return Zs(c instanceof Hi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Uu(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,kt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Ce();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new rc(e,n,this.Ye,this.je,r);return this.je=er(),this.Je=ma(),this.He=ma(),this.Ye=new Ye(Se),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new lt(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new lt(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rg),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ma(){return new Ye(he.comparator)}function Pg(){return new Ye(he.comparator)}const F1={asc:"ASCENDING",desc:"DESCENDING"},B1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U1={and:"AND",or:"OR"};class $1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ju(t,e){return t.useProto3Json||Yl(e)?e:{value:e}}function _l(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j1(t,e){return _l(t,e.toTimestamp())}function kn(t){return xe(!!t,49232),ye.fromTimestamp((function(n){const r=kr(n);return new Ke(r.seconds,r.nanos)})(t))}function qh(t,e){return Hu(t,e).canonicalString()}function Hu(t,e){const n=(function(s){return new ze(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function tE(t){const e=ze.fromString(t);return xe(oE(e),10190,{key:e.toString()}),e}function qu(t,e){return qh(t.databaseId,e.path)}function nu(t,e){const n=tE(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(rE(n))}function nE(t,e){return qh(t.databaseId,e)}function H1(t){const e=tE(t);return e.length===4?ze.emptyPath():rE(e)}function zu(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rE(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kg(t,e,n){return{name:qu(t,e),fields:n.value.mapValue.fields}}function q1(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(xe(h===void 0||typeof h=="string",58123),Tt.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Tt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(u){const h=u.code===void 0?z.UNKNOWN:Jv(u.code);return new ae(h,u.message||"")})(o);n=new Zv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=nu(t,r.document.name),i=kn(r.document.updateTime),o=r.document.createTime?kn(r.document.createTime):ye.min(),l=new qt({mapValue:{fields:r.document.fields}}),c=kt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Da(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=nu(t,r.document),i=r.readTime?kn(r.readTime):ye.min(),o=kt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Da([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=nu(t,r.document),i=r.removedTargetIds||[];n=new Da([],i,s,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new D1(s,i),l=r.targetId;n=new Xv(l,o)}}return n}function z1(t,e){let n;if(e instanceof jo)n={update:kg(t,e.key,e.value)};else if(e instanceof $h)n={delete:qu(t,e.key)};else if(e instanceof $r)n={update:kg(t,e.key,e.data),updateMask:eO(e.fieldMask)};else{if(!(e instanceof k1))return me(16599,{Vt:e.type});n={verify:qu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const l=o.transform;if(l instanceof gl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ro)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Po)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ml)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw me(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:j1(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:me(27497)})(t,e.precondition)),n}function K1(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?kn(s.updateTime):kn(i);return o.isEqual(ye.min())&&(o=kn(i)),new C1(o,s.transformResults||[])})(n,e)))):[]}function W1(t,e){return{documents:[nE(t,e.path)]}}function G1(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nE(t,s);const i=(function(u){if(u.length!==0)return iE(Vn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(g){return{field:Ls(g.field),direction:J1(g.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ju(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function Q1(t){let e=H1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const g=sE(d);return g instanceof Vn&&Lv(g)?g.getFilters():[g]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((g=>(function(R){return new pl(xs(R.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(g)))})(n.orderBy));let l=null;n.limit&&(l=(function(d){let g;return g=typeof d=="object"?d.value:d,Yl(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(d){const g=!!d.before,_=d.values||[];return new dl(_,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const g=!d.before,_=d.values||[];return new dl(_,g)})(n.endAt)),d1(e,s,o,i,l,"F",c,u)}function Y1(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xs(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xs(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xs(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xs(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(t):t.fieldFilter!==void 0?(function(n){return it.create(xs(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Vn.create(n.compositeFilter.filters.map((r=>sE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(n.compositeFilter.op))})(t):me(30097,{filter:t})}function J1(t){return F1[t]}function X1(t){return B1[t]}function Z1(t){return U1[t]}function Ls(t){return{fieldPath:t.canonicalString()}}function xs(t){return yt.fromServerFormat(t.fieldPath)}function iE(t){return t instanceof it?(function(n){if(n.op==="=="){if(_g(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NAN"}};if(mg(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_g(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NAN"}};if(mg(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ls(n.field),op:X1(n.op),value:n.value}}})(t):t instanceof Vn?(function(n){const r=n.getFilters().map((s=>iE(s)));return r.length===1?r[0]:{compositeFilter:{op:Z1(n.op),filters:r}}})(t):me(54877,{filter:t})}function eO(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function oE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r,s,i=ye.min(),o=ye.min(),l=Tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.yt=e}}function nO(t){const e=Q1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$u(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.Cn=new sO}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Pr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class sO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aE=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(aE,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ri(0)}static cr(){return new ri(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="LruGarbageCollector",iO=1048576;function Dg([t,e],[n,r]){const s=Se(t,n);return s===0?Se(e,r):s}class oO{constructor(e){this.Ir=e,this.buffer=new lt(Dg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Dg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(Ng,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){gi(n)?se(Ng,"Ignoring IndexedDB error during garbage collection: ",n):await pi(n)}await this.Vr(3e5)}))}}class lO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Ql.ce);const r=new oO(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Og)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Og):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,l=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),Ds()<=Ae.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function cO(t,e){return new lO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.changes=new Es((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&co(r.mutation,s,Jt.empty(),Ke.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ce()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ce()){const s=ss();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=ji();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=ss();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ce())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,r,s){let i=er();const o=lo(),l=(function(){return lo()})();return n.forEach(((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof $r)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),co(h.mutation,u,h.mutation.getFieldMask(),Ke.now())):o.set(u.key,Jt.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>l.set(u,new hO(h,o.get(u)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=lo();let s=new Ye(((o,l)=>o-l)),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Jt.empty();h=l.applyToLocalView(u,h),r.set(c,h);const d=(s.get(l.batchId)||Ce()).add(c);s=s.insert(l.batchId,d)}))})).next((()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=Hv();h.forEach((g=>{if(!i.has(g)){const _=Qv(n.get(g),r.get(g));_!==null&&d.set(g,_),i=i.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return j.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(ss());let l=Io,c=i;return o.next((u=>j.forEach(u,((h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next((g=>{c=c.insert(h,g)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,c,u,Ce()))).next((h=>({batchId:l,changes:jv(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next((r=>{let s=ji();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ji();return this.indexManager.getCollectionParents(e,i).next((l=>j.forEach(l,(c=>{const u=(function(d,g){return new Xl(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((d,g)=>{o=o.insert(d,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,kt.newInvalidDocument(h)))}));let l=ji();return o.forEach(((c,u)=>{const h=i.get(c);h!==void 0&&co(h.mutation,u,Jt.empty(),Ke.now()),ec(n,u)&&(l=l.insert(c,u))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}})(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:nO(s.bundledQuery),readTime:kn(s.readTime)}})(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.overlays=new Ye(he.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ss();return j.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=ss(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ye(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ss(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=ss(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>l.set(u,h))),!(l.size()>=s)););return j.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new N1(n,r));let i=this.qr.get(n);i===void 0&&(i=Ce(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this.Qr=new lt(dt.$r),this.Ur=new lt(dt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new dt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new he(new ze([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new ze([])),r=new dt(n,e),s=new dt(n,e+1);let i=Ce();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new dt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new lt(dt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new O1(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new dt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Vh:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const l=this.Xr(o.Yr);i.push(l)})),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(Se);return n.forEach((s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{r=r.add(l.Yr)}))})),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new dt(new he(i),0);let l=new lt(Se);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)}),o),j.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,(s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new dt(n,0),s=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.ri=e,this.docs=(function(){return new Ye(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=er();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():kt.newInvalidDocument(s))})),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=er();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||zk(qk(h),r)<=0||(s.has(h.key)||ec(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){me(9500)}ii(e,n){return j.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new yO(this)}getSize(e){return j.resolve(this.size)}}class yO extends uO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.persistence=e,this.si=new Es((n=>Mh(n)),Fh),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new zh,this.targetCount=0,this.ai=ri.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ri(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)})),j.waitFor(i).next((()=>s))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ql(0),this.li=!1,this.li=!0,this.hi=new gO,this.referenceDelegate=e(this),this.Pi=new vO(this),this.indexManager=new rO,this.remoteDocumentCache=(function(s){return new _O(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new tO(n),this.Ii=new dO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new mO(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new EO(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return j.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class EO extends Wk{constructor(e){super(),this.currentSequenceNumber=e}}class Kh{constructor(e){this.persistence=e,this.Ri=new zh,this.Vi=null}static mi(e){return new Kh(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(r=>{const s=he.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,ye.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yl{constructor(e,n){this.persistence=e,this.pi=new Es((r=>Yk(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=cO(this,n)}static mi(e,n){return new yl(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return j.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?j.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((l=>{l||(r++,i.removeEntry(o,ye.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ka(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ce(),s=Ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return J0()?8:Gk(Dt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new TO;return this.Ss(e,n,o).next((l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ds()<=Ae.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Vs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Ds()<=Ae.DEBUG&&se("QueryEngine","Query:",Vs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ds()<=Ae.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Vs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):j.resolve())}ys(e,n){if(Tg(n))return j.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=$u(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Ce(...i);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,$u(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,r,s){return Tg(n)||s.isEqual(ye.min())?j.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?j.resolve(null):(Ds()<=Ae.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vs(n)),this.vs(e,o,n,Hk(s,Io)).next((l=>l)))}))}Ds(e,n){let r=new lt(Uv(e));return n.forEach(((s,i)=>{ec(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ds()<=Ae.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Vs(n)),this.ps.getDocumentsMatchingQuery(e,n,Pr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="LocalStore",wO=3e8;class IO{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ye(Se),this.xs=new Es((i=>Mh(i)),Fh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function AO(t,e,n,r){return new IO(t,e,n,r)}async function cE(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],l=[];let c=Ce();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:l})))}))}))}function SO(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,u,h){const d=u.batch,g=d.keys();let _=j.resolve();return g.forEach((R=>{_=_.next((()=>h.getEntry(c,R))).next((P=>{const k=u.docVersions.get(R);xe(k!==null,48541),P.version.compareTo(k)<0&&(d.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(c,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=Ce();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function uE(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function CO(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach(((h,d)=>{const g=s.get(d);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d))));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(Tt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(d,_),(function(P,k,V){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=wO?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(g,_,h)&&l.push(n.Pi.updateTargetData(i,_))}));let c=er(),u=Ce();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),l.push(RO(i,o,e.documentUpdates).next((h=>{c=h.ks,u=h.qs}))),!r.isEqual(ye.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(h)}return j.waitFor(l).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,u))).next((()=>c))})).then((i=>(n.Ms=s,i)))}function RO(t,e,n){let r=Ce(),s=Ce();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=er();return n.forEach(((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):se(Gh,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)})),{ks:o,qs:s}}))}function PO(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Vh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function kO(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,j.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new Er(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Ku(t,e,n){const r=ve(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!gi(o))throw o;se(Gh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Vg(t,e,n){const r=ve(t);let s=ye.min(),i=Ce();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,h){const d=ve(c),g=d.xs.get(h);return g!==void 0?j.resolve(d.Ms.get(g)):d.Pi.getTargetData(u,h)})(r,o,Pn(e)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ye.min(),n?i:Ce()))).next((l=>(OO(r,m1(e),l),{documents:l,Qs:i})))))}function OO(t,e,n){let r=t.Os.get(e)||ye.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class Lg{constructor(){this.activeTargetIds=b1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NO{constructor(){this.Mo=new Lg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Lg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="ConnectivityMonitor";class Mg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(xg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(xg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a=null;function Wu(){return _a===null?_a=(function(){return 268435456+Math.round(2147483648*Math.random())})():_a++,"0x"+_a.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru="RestConnection",VO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===hl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Wu(),l=this.zo(e,n.toUriEncodedString());se(ru,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=ui(u);return this.Jo(e,l,c,r,h).then((d=>(se(ru,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw Zs(ru,`RPC '${e}' ${o} failed with error: `,d,"url: ",l,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+di})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=VO[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class MO extends LO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Wu();return new Promise(((l,c)=>{const u=new pv;u.setWithCredentials(!0),u.listenOnce(gv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Pa.NO_ERROR:const d=u.getResponseJson();se(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),l(d);break;case Pa.TIMEOUT:se(It,`RPC '${e}' ${o} timed out`),c(new ae(z.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:const g=u.getStatus();if(se(It,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_?.error;if(R&&R.status&&R.message){const P=(function(V){const L=V.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(L)>=0?L:z.UNKNOWN})(R.status);c(new ae(P,R.message))}else c(new ae(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ae(z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{se(It,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);se(It,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=Wu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yv(),l=_v(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");se(It,`Creating RPC '${e}' stream ${s}: ${h}`,c);const d=o.createWebChannel(h,c);this.I_(d);let g=!1,_=!1;const R=new xO({Yo:k=>{_?se(It,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(se(It,`Opening RPC '${e}' stream ${s} transport.`),d.open(),g=!0),se(It,`RPC '${e}' stream ${s} sending:`,k),d.send(k))},Zo:()=>d.close()}),P=(k,V,L)=>{k.listen(V,(H=>{try{L(H)}catch(q){setTimeout((()=>{throw q}),0)}}))};return P(d,$i.EventType.OPEN,(()=>{_||(se(It,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),P(d,$i.EventType.CLOSE,(()=>{_||(_=!0,se(It,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(d))})),P(d,$i.EventType.ERROR,(k=>{_||(_=!0,Zs(It,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),R.a_(new ae(z.UNAVAILABLE,"The operation could not be completed")))})),P(d,$i.EventType.MESSAGE,(k=>{if(!_){const V=k.data[0];xe(!!V,16349);const L=V,H=L?.error||L[0]?.error;if(H){se(It,`RPC '${e}' stream ${s} received error:`,H);const q=H.status;let Q=(function(v){const E=et[v];if(E!==void 0)return Jv(E)})(q),Z=H.message;Q===void 0&&(Q=z.INTERNAL,Z="Unknown error status: "+q+" with message "+H.message),_=!0,R.a_(new ae(Q,Z)),d.close()}else se(It,`RPC '${e}' stream ${s} received:`,V),R.u_(V)}})),P(l,mv.STAT_EVENT,(k=>{k.stat===Lu.PROXY?se(It,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Lu.NOPROXY&&se(It,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function su(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){return new $1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="PersistentStream";class fE{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Zn(n.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new ae(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(Fg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(se(Fg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FO extends fE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=q1(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?kn(o.readTime):ye.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=zu(this.serializer),n.addTarget=(function(i,o){let l;const c=o.target;if(l=Uu(c)?{documents:W1(i,c)}:{query:G1(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=eE(i,o.resumeToken);const u=ju(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ye.min())>0){l.readTime=_l(i,o.snapshotVersion.toTimestamp());const u=ju(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l})(this.serializer,e);const r=Y1(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=zu(this.serializer),n.removeTarget=e,this.q_(n)}}class BO extends fE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=K1(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>z1(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{}class $O extends UO{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Hu(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ae(z.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,Hu(n,r),s,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(z.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class jO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zn(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="RemoteStore";class HO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Ts(this)&&(se(ms,"Restarting streams for network reachability change."),await(async function(c){const u=ve(c);u.Ea.add(4),await qo(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ic(u)})(this))}))})),this.Ra=new jO(r,s)}}async function ic(t){if(Ts(t))for(const e of t.da)await e(!0)}async function qo(t){for(const e of t.da)await e(!1)}function dE(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xh(n)?Jh(n):mi(n).O_()&&Yh(n,e))}function Qh(t,e){const n=ve(t),r=mi(n);n.Ia.delete(e),r.O_()&&pE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ts(n)&&n.Ra.set("Unknown"))}function Yh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mi(t).Y_(e)}function pE(t,e){t.Va.Ue(e),mi(t).Z_(e)}function Jh(t){t.Va=new M1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),mi(t).start(),t.Ra.ua()}function Xh(t){return Ts(t)&&!mi(t).x_()&&t.Ia.size>0}function Ts(t){return ve(t).Ea.size===0}function gE(t){t.Va=void 0}async function qO(t){t.Ra.set("Online")}async function zO(t){t.Ia.forEach(((e,n)=>{Yh(t,e)}))}async function KO(t,e){gE(t),Xh(t)?(t.Ra.ha(e),Jh(t)):t.Ra.set("Unknown")}async function WO(t,e,n){if(t.Ra.set("Online"),e instanceof Zv&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))})(t,e)}catch(r){se(ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vl(t,r)}else if(e instanceof Da?t.Va.Ze(e):e instanceof Xv?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const r=await uE(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Tt.EMPTY_BYTE_STRING,h.snapshotVersion)),pE(i,c);const d=new Er(h.target,c,u,h.sequenceNumber);Yh(i,d)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){se(ms,"Failed to raise snapshot:",r),await vl(t,r)}}async function vl(t,e,n){if(!gi(e))throw e;t.Ea.add(1),await qo(t),t.Ra.set("Offline"),n||(n=()=>uE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{se(ms,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ic(t)}))}function mE(t,e){return e().catch((n=>vl(t,n,e)))}async function oc(t){const e=ve(t),n=Dr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vh;for(;GO(e);)try{const s=await PO(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,QO(e,s)}catch(s){await vl(e,s)}_E(e)&&yE(e)}function GO(t){return Ts(t)&&t.Ta.length<10}function QO(t,e){t.Ta.push(e);const n=Dr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function _E(t){return Ts(t)&&!Dr(t).x_()&&t.Ta.length>0}function yE(t){Dr(t).start()}async function YO(t){Dr(t).ra()}async function JO(t){const e=Dr(t);for(const n of t.Ta)e.ea(n.mutations)}async function XO(t,e,n){const r=t.Ta.shift(),s=jh.from(r,e,n);await mE(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await oc(t)}async function ZO(t,e){e&&Dr(t).X_&&await(async function(r,s){if((function(o){return V1(o)&&o!==z.ABORTED})(s.code)){const i=r.Ta.shift();Dr(r).B_(),await mE(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await oc(r)}})(t,e),_E(t)&&yE(t)}async function Bg(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),se(ms,"RemoteStore received new credentials");const r=Ts(n);n.Ea.add(3),await qo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ic(n)}async function eN(t,e){const n=ve(t);e?(n.Ea.delete(2),await ic(n)):e||(n.Ea.add(2),await qo(n),n.Ra.set("Unknown"))}function mi(t){return t.ma||(t.ma=(function(n,r,s){const i=ve(n);return i.sa(),new FO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:qO.bind(null,t),t_:zO.bind(null,t),r_:KO.bind(null,t),H_:WO.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Xh(t)?Jh(t):t.Ra.set("Unknown")):(await t.ma.stop(),gE(t))}))),t.ma}function Dr(t){return t.fa||(t.fa=(function(n,r,s){const i=ve(n);return i.sa(),new BO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:YO.bind(null,t),r_:ZO.bind(null,t),ta:JO.bind(null,t),na:XO.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await oc(t)):(await t.fa.stop(),t.Ta.length>0&&(se(ms,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Zh(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ef(t,e){if(Zn("AsyncQueue",`${e}: ${t}`),gi(t))return new ae(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{static emptySet(e){return new Qs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=ji(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(){this.ga=new Ye(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class si{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new si(e,n,Qs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class nN{constructor(){this.queries=$g(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ve(n),i=s.queries;s.queries=$g(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new ae(z.ABORTED,"Firestore shutting down"))}}function $g(){return new Es((t=>Bv(t)),Zl)}async function vE(t,e){const n=ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new tN,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=ef(o,`Initialization of query '${Vs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&tf(n)}async function EE(t,e){const n=ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rN(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&tf(n)}function sN(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function tf(t){t.Ca.forEach((e=>{e.next()}))}var Gu,jg;(jg=Gu||(Gu={})).Ma="default",jg.Cache="cache";class TE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new si(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.key=e}}class wE{constructor(e){this.key=e}}class iN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=Uv(e),this.tu=new Qs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ug,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,d)=>{const g=s.get(h),_=ec(this.query,d)?d:null,R=!!g&&this.mutatedKeys.has(g.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;g&&_?g.data.isEqual(_.data)?R!==P&&(r.track({type:3,doc:_}),k=!0):this.su(g,_)||(r.track({type:2,doc:_}),k=!0,(c&&this.eu(_,c)>0||u&&this.eu(_,u)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),k=!0):g&&!_&&(r.track({type:1,doc:g}),k=!0,(c||u)&&(l=!0)),k&&(_?(o=o.add(_),i=P?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(_,R){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:k})}};return P(_)-P(R)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new si(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ug,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new wE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new bE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return si.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nf="SyncEngine";class oN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aN{constructor(e){this.key=e,this.hu=!1}}class lN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Es((l=>Bv(l)),Zl),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(he.comparator),this.Au=new Map,this.Ru=new zh,this.Vu={},this.mu=new Map,this.fu=ri.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cN(t,e,n=!0){const r=PE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await IE(r,e,n,!0),s}async function uN(t,e){const n=PE(t);await IE(n,e,!0,!1)}async function IE(t,e,n,r){const s=await kO(t.localStore,Pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await hN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&dE(t.remoteStore,s),l}async function hN(t,e,n,r,s){t.pu=(d,g,_)=>(async function(P,k,V,L){let H=k.view.ru(V);H.Cs&&(H=await Vg(P.localStore,k.query,!1).then((({documents:I})=>k.view.ru(I,H))));const q=L&&L.targetChanges.get(k.targetId),Q=L&&L.targetMismatches.get(k.targetId)!=null,Z=k.view.applyChanges(H,P.isPrimaryClient,q,Q);return qg(P,k.targetId,Z.au),Z.snapshot})(t,d,g,_);const i=await Vg(t.localStore,e,!0),o=new iN(e,i.Qs),l=o.ru(i.documents),c=Ho.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);qg(t,n,u.au);const h=new oN(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function fN(t,e,n){const r=ve(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Zl(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ku(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qh(r.remoteStore,s.targetId),Qu(r,s.targetId)})).catch(pi)):(Qu(r,s.targetId),await Ku(r.localStore,s.targetId,!0))}async function dN(t,e){const n=ve(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qh(n.remoteStore,r.targetId))}async function pN(t,e,n){const r=TN(t);try{const s=await(function(o,l){const c=ve(o),u=Ke.now(),h=l.reduce(((_,R)=>_.add(R.key)),Ce());let d,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let R=er(),P=Ce();return c.Ns.getEntries(_,h).next((k=>{R=k,R.forEach(((V,L)=>{L.isValidDocument()||(P=P.add(V))}))})).next((()=>c.localDocuments.getOverlayedDocuments(_,R))).next((k=>{d=k;const V=[];for(const L of l){const H=P1(L,d.get(L.key).overlayedDocument);H!=null&&V.push(new $r(L.key,H,Nv(H.value.mapValue),un.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,V,l)})).next((k=>{g=k;const V=k.applyToLocalDocumentSet(d,P);return c.documentOverlayCache.saveOverlays(_,k.batchId,V)}))})).then((()=>({batchId:g.batchId,changes:jv(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ye(Se)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await zo(r,s.changes),await oc(r.remoteStore)}catch(s){const i=ef(s,"Failed to persist write");n.reject(i)}}async function AE(t,e){const n=ve(t);try{const r=await CO(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?xe(o.hu,14607):s.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))})),await zo(n,r,e)}catch(r){await pi(r)}}function Hg(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)})),(function(o,l){const c=ve(o);c.onlineState=l;let u=!1;c.queries.forEach(((h,d)=>{for(const g of d.Sa)g.va(l)&&(u=!0)})),u&&tf(c)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gN(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ye(he.comparator);o=o.insert(i,kt.newNoDocument(i,ye.min()));const l=Ce().add(i),c=new rc(ye.min(),new Map,new Ye(Se),o,l);await AE(r,c),r.du=r.du.remove(i),r.Au.delete(e),rf(r)}else await Ku(r.localStore,e,!1).then((()=>Qu(r,e,n))).catch(pi)}async function mN(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await SO(n.localStore,e);CE(n,r,null),SE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zo(n,s)}catch(s){await pi(s)}}async function _N(t,e,n){const r=ve(t);try{const s=await(function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next((d=>(xe(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>c.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);CE(r,e,n),SE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zo(r,s)}catch(s){await pi(s)}}function SE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function CE(t,e,n){const r=ve(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Qu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||RE(t,r)}))}function RE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),rf(t))}function qg(t,e,n){for(const r of n)r instanceof bE?(t.Ru.addReference(r.key,e),yN(t,r)):r instanceof wE?(se(nf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||RE(t,r.key)):me(19791,{wu:r})}function yN(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(se(nf,"New document in limbo: "+n),t.Eu.add(r),rf(t))}function rf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(ze.fromString(e)),r=t.fu.next();t.Au.set(r,new aN(n)),t.du=t.du.insert(n,r),dE(t.remoteStore,new Er(Pn(Bh(n.path)),r,"TargetPurposeLimboResolution",Ql.ce))}}async function zo(t,e,n){const r=ve(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{o.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=Wh.As(c.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(c,u){const h=ve(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>j.forEach(u,(g=>j.forEach(g.Es,(_=>h.persistence.referenceDelegate.addReference(d,g.targetId,_))).next((()=>j.forEach(g.ds,(_=>h.persistence.referenceDelegate.removeReference(d,g.targetId,_)))))))))}catch(d){if(!gi(d))throw d;se(Gh,"Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const _=h.Ms.get(g),R=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(g,P)}}})(r.localStore,i))}async function vN(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){se(nf,"User change. New user:",e.toKey());const r=await cE(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new ae(z.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zo(n,r.Ls)}}function EN(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return Ce().add(r.key);{let s=Ce();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function PE(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gN.bind(null,e),e.Pu.H_=rN.bind(null,e.eventManager),e.Pu.yu=sN.bind(null,e.eventManager),e}function TN(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_N.bind(null,e),e}class El{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return AO(this.persistence,new bO,e.initialUser,this.serializer)}Cu(e){return new lE(Kh.mi,this.serializer)}Du(e){return new NO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}El.provider={build:()=>new El};class bN extends El{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof yl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new aO(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new lE((r=>yl.mi(r,n)),this.serializer)}}class Yu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vN.bind(null,this.syncEngine),await eN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nN})()}createDatastore(e){const n=sc(e.databaseInfo.databaseId),r=(function(i){return new MO(i)})(e.databaseInfo);return(function(i,o,l,c){return new $O(i,o,l,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,l){return new HO(r,s,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>Hg(this.syncEngine,n,0)),(function(){return Mg.v()?new Mg:new DO})())}createSyncEngine(e,n){return(function(s,i,o,l,c,u,h){const d=new lN(s,i,o,l,c,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ve(n);se(ms,"RemoteStore shutting down."),r.Ea.add(5),await qo(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Yu.provider={build:()=>new Yu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class wN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=Nh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{se(Vr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(se(Vr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ef(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function iu(t,e){t.asyncQueue.verifyOperationInProgress(),se(Vr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await cE(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function zg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IN(t);se(Vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Bg(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Bg(e.remoteStore,s))),t._onlineComponents=e}async function IN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Vr,"Using user provided OfflineComponentProvider");try{await iu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await iu(t,new El)}}else se(Vr,"Using default OfflineComponentProvider"),await iu(t,new bN(void 0));return t._offlineComponents}async function OE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Vr,"Using user provided OnlineComponentProvider"),await zg(t,t._uninitializedComponentsProvider._online)):(se(Vr,"Using default OnlineComponentProvider"),await zg(t,new Yu))),t._onlineComponents}function AN(t){return OE(t).then((e=>e.syncEngine))}async function Ju(t){const e=await OE(t),n=e.eventManager;return n.onListen=cN.bind(null,e.syncEngine),n.onUnlisten=fN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dN.bind(null,e.syncEngine),n}function SN(t,e,n={}){const r=new Ar;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,l,c,u){const h=new kE({next:g=>{h.Nu(),o.enqueueAndForget((()=>EE(i,d))),g.fromCache&&c.source==="server"?u.reject(new ae(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new TE(l,h,{includeMetadataChanges:!0,qa:!0});return vE(i,d)})(await Ju(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="firestore.googleapis.com",Wg=!0;class Gg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DE,this.ssl=Wg}else this.host=e.host,this.ssl=e.ssl??Wg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iO)throw new ae(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ac{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Nk;switch(r.type){case"firstParty":return new xk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Kg.get(n);r&&(se("ComponentProvider","Removing Datastore"),Kg.delete(n),r.terminate())})(this),Promise.resolve()}}function CN(t,e,n,r={}){t=Rn(t,ac);const s=ui(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Ay(`https://${l}`),Sy("Firestore",!0)),i.host!==DE&&i.host!==l&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!hs(c,o)&&(t._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Ct.MOCK_USER;else{u=j0(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ae(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ct(d)}t._authCredentials=new Dk(new Ev(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ko(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($o(n,at._jsonSchema))return new at(e,r||null,new he(ze.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:tt("string",at._jsonSchemaVersion),referencePath:tt("string")};class Sr extends Ko{constructor(e,n,r){super(e,n,Bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new he(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function ou(t,e,...n){if(t=pt(t),Tv("collection","path",e),t instanceof ac){const r=ze.fromString(e,...n);return lg(r),new Sr(t,null,r)}{if(!(t instanceof at||t instanceof Sr))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return lg(r),new Sr(t.firestore,null,r)}}function Xu(t,e,...n){if(t=pt(t),arguments.length===1&&(e=Nh.newId()),Tv("doc","path",e),t instanceof ac){const r=ze.fromString(e,...n);return ag(r),new at(t,null,new he(r))}{if(!(t instanceof at||t instanceof Sr))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return ag(r),new at(t.firestore,t instanceof Sr?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="AsyncQueue";class Yg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hE(this,"async_queue_retry"),this._c=()=>{const r=su();r&&se(Qg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=su();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=su();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gi(e))throw e;se(Qg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Zn("INTERNAL UNHANDLED ERROR: ",Jg(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Zh.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:Jg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class _s extends ac{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Yg,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yg(e),this._firestoreClient=void 0,await e}}}function RN(t,e){const n=typeof t=="object"?t:ky(),r=typeof t=="string"?t:hl,s=bh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=U0("firestore");i&&CN(s,...i)}return s}function sf(t){if(t._terminated)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PN(t),t._firestoreClient}function PN(t){const e=t._freezeSettings(),n=(function(s,i,o,l){return new Zk(s,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,NE(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new wN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(Tt.fromBase64String(e))}catch(n){throw new ae(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($o(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:tt("string",rn._jsonSchemaVersion),bytes:tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:On._jsonSchemaVersion}}static fromJSON(e){if($o(e,On._jsonSchema))return new On(e.latitude,e.longitude)}}On._jsonSchemaVersion="firestore/geoPoint/1.0",On._jsonSchema={type:tt("string",On._jsonSchemaVersion),latitude:tt("number"),longitude:tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Nn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($o(e,Nn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Nn(e.vectorValues);throw new ae(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nn._jsonSchemaVersion="firestore/vectorValue/1.0",Nn._jsonSchema={type:tt("string",Nn._jsonSchemaVersion),vectorValues:tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=/^__.*__$/;class ON{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,n,this.fieldTransforms):new jo(e,this.data,n,this.fieldTransforms)}}class VE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class af{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new af({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LE(this.Ac)&&kN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sc(e)}Cc(e,n,r,s=!1){return new af({Ac:e,methodName:n,Dc:r,path:yt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xE(t){const e=t._freezeSettings(),n=sc(t._databaseId);return new NN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DN(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);lf("Data must be an object, but it was:",o,r);const l=ME(r,o);let c,u;if(i.merge)c=new Jt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const g=Zu(e,d,n);if(!o.contains(g))throw new ae(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);BE(h,g)||h.push(g)}c=new Jt(h),u=o.fieldTransforms.filter((d=>c.covers(d.field)))}else c=null,u=o.fieldTransforms;return new ON(new qt(l),c,u)}class cc extends of{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cc}}function VN(t,e,n,r){const s=t.Cc(1,e,n);lf("Data must be an object, but it was:",s,r);const i=[],o=qt.empty();Ur(r,((c,u)=>{const h=cf(e,c,n);u=pt(u);const d=s.yc(h);if(u instanceof cc)i.push(h);else{const g=uc(u,d);g!=null&&(i.push(h),o.set(h,g))}}));const l=new Jt(i);return new VE(o,l,s.fieldTransforms)}function LN(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Zu(e,r,n)],c=[s];if(i.length%2!=0)throw new ae(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Zu(e,i[g])),c.push(i[g+1]);const u=[],h=qt.empty();for(let g=l.length-1;g>=0;--g)if(!BE(u,l[g])){const _=l[g];let R=c[g];R=pt(R);const P=o.yc(_);if(R instanceof cc)u.push(_);else{const k=uc(R,P);k!=null&&(u.push(_),h.set(_,k))}}const d=new Jt(u);return new VE(h,d,o.fieldTransforms)}function uc(t,e){if(FE(t=pt(t)))return lf("Unsupported field value:",e,t),ME(t,e);if(t instanceof of)return(function(r,s){if(!LE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const l of r){let c=uc(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:_l(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_l(s.serializer,i)}}if(r instanceof On)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rn)return{bytesValue:eE(s.serializer,r._byteString)};if(r instanceof at){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Nn)return(function(o,l){return{mapValue:{fields:{[kv]:{stringValue:Ov},[fl]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Uh(l.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Dh(r)}`)})(t,e)}function ME(t,e){const n={};return Iv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(t,((r,s)=>{const i=uc(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function FE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof On||t instanceof rn||t instanceof at||t instanceof of||t instanceof Nn)}function lf(t,e,n){if(!FE(n)||!bv(n)){const r=Dh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Zu(t,e,n){if((e=pt(e))instanceof lc)return e._internalPath;if(typeof e=="string")return cf(t,e);throw Tl("Field path arguments must be of type string or ",t,!1,void 0,n)}const xN=new RegExp("[~\\*/\\[\\]]");function cf(t,e,n){if(e.search(xN)>=0)throw Tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lc(...e.split("."))._internalPath}catch{throw Tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ae(z.INVALID_ARGUMENT,l+t+c)}function BE(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($E("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MN extends UE{data(){return super.data()}}function $E(t,e){return typeof e=="string"?cf(t,e):e instanceof lc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FN{convertValue(e,n="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ur(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[fl].arrayValue?.values?.map((r=>Xe(r.doubleValue)));return new Nn(n)}convertGeoPoint(e){return new On(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ao(e));default:return null}}convertTimestamp(e){const n=kr(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);xe(oE(r),9688,{name:e});const s=new So(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||Zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class qi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class os extends UE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($E("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=os._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}os._jsonSchemaVersion="firestore/documentSnapshot/1.0",os._jsonSchema={type:tt("string",os._jsonSchemaVersion),bundleSource:tt("string","DocumentSnapshot"),bundleName:tt("string"),bundle:tt("string")};class Va extends os{data(e={}){return super.data(e)}}class as{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new qi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Va(this._firestore,this._userDataWriter,r.key,r,new qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((l=>{const c=new Va(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new Va(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:UN(l.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=as._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}as._jsonSchemaVersion="firestore/querySnapshot/1.0",as._jsonSchema={type:tt("string",as._jsonSchemaVersion),bundleSource:tt("string","QuerySnapshot"),bundleName:tt("string"),bundle:tt("string")};class uf extends FN{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function $N(t){t=Rn(t,Ko);const e=Rn(t.firestore,_s),n=sf(e),r=new uf(e);return jE(t._query),SN(n,t._query).then((s=>new as(e,r,t,s)))}function jN(t,e,n,...r){t=Rn(t,at);const s=Rn(t.firestore,_s),i=xE(s);let o;return o=typeof(e=pt(e))=="string"||e instanceof lc?LN(i,"updateDoc",t._key,e,n,r):VN(i,"updateDoc",t._key,e),hf(s,[o.toMutation(t._key,un.exists(!0))])}function HN(t){return hf(Rn(t.firestore,_s),[new $h(t._key,un.none())])}function qN(t,e){const n=Rn(t.firestore,_s),r=Xu(t),s=BN(t.converter,e);return hf(n,[DN(xE(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then((()=>r))}function zN(t,...e){t=pt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Xg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Xg(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let i,o,l;if(t instanceof at)o=Rn(t.firestore,_s),l=Bh(t._key.path),i={next:c=>{e[r]&&e[r](KN(o,t,c))},error:e[r+1],complete:e[r+2]};else{const c=Rn(t,Ko);o=Rn(c.firestore,_s),l=c._query;const u=new uf(o);i={next:h=>{e[r]&&e[r](new as(o,u,c,h))},error:e[r+1],complete:e[r+2]},jE(t._query)}return(function(u,h,d,g){const _=new kE(g),R=new TE(h,_,d);return u.asyncQueue.enqueueAndForget((async()=>vE(await Ju(u),R))),()=>{_.Nu(),u.asyncQueue.enqueueAndForget((async()=>EE(await Ju(u),R)))}})(sf(o),l,s,i)}function hf(t,e){return(function(r,s){const i=new Ar;return r.asyncQueue.enqueueAndForget((async()=>pN(await AN(r),s,i))),i.promise})(sf(t),e)}function KN(t,e,n){const r=n.docs.get(e._key),s=new uf(t);return new os(t,s,e._key,r,new qi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){di=s})(hi),Xs(new fs("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new _s(new Vk(r.getProvider("auth-internal")),new Mk(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ae(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new So(u.options.projectId,h)})(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),wr(rg,sg,e),wr(rg,sg,"esm2020")})();const WN={apiKey:"AIzaSyAfQkjP5FypLOx4pHf9WrkV3V_6nGkxG2o",authDomain:"examenmodulo7.firebaseapp.com",projectId:"examenmodulo7",storageBucket:"examenmodulo7.firebasestorage.app",messagingSenderId:"925742124353",appId:"1:925742124353:web:2432f4d1ca9e36b2b765c0"},HE=Py(WN),zi=Rk(HE),Ms=RN(HE);console.log("Firebase inicializado correctamente");console.log("Auth:",zi);console.log("Firestore:",Ms);let ya=null;const GN=()=>({user:null,loading:!1,error:null,authReady:!1,justLoggedInAt:null,sessionOrigin:null,lastToastTs:0}),QN={isAuthenticated:t=>!!t.user,currentUser:t=>t.user,isLoading:t=>t.loading,getError:t=>t.error,isAuthReady:t=>t.authReady},YN={setUser(t,e){t.user=e},setLoading(t,e){t.loading=e},setError(t,e){t.error=e},setAuthReady(t,e){t.authReady=e},setJustLoggedInAt(t,e){t.justLoggedInAt=e},setSessionOrigin(t,e){t.sessionOrigin=e},setLastToastTs(t,e){t.lastToastTs=e},clearError(t){t.error=null},resetJustLogged(t){t.justLoggedInAt=null}},JN={initAuthStateListener({state:t,commit:e}){return ya||(e("setLoading",!0),ya=new Promise(n=>{let r=!0;mP(zi,s=>{const i=t.user;if(e("setUser",s),i==null&&s!=null){const o=s.uid,l=s.metadata?.lastSignInTime||"",c=`welcomed:${o}`;if((typeof window<"u"?window.localStorage.getItem(c):null)!==l){e("setSessionOrigin","onAuthStateChanged");const h=Date.now();h-t.lastToastTs>1e3&&(e("setJustLoggedInAt",h),e("setLastToastTs",h)),typeof window<"u"&&window.localStorage.setItem(c,l)}}r&&(e("setAuthReady",!0),e("setLoading",!1),r=!1,n(s))})}),ya)},async registerUser({commit:t},{email:e,password:n}){t("setLoading",!0),t("clearError");try{t("setSessionOrigin","manual");const r=await fP(zi,e,n);return t("setUser",r.user),{success:!0,user:r.user}}catch(r){const s=r?.message||"Ocurri un error al registrar usuario";return t("setError",s),{success:!1,error:s}}finally{t("setLoading",!1)}},async loginUser({commit:t},{email:e,password:n}){t("setLoading",!0),t("clearError");try{t("setSessionOrigin","manual");const r=await dP(zi,e,n);return t("setUser",r.user),{success:!0,user:r.user}}catch(r){const s=r?.message||"Ocurri un error al iniciar sesin";return t("setError",s),{success:!1,error:s}}finally{t("setLoading",!1)}},async logoutUser({commit:t}){t("setLoading",!0),t("clearError");try{return await _P(zi),t("setUser",null),t("setSessionOrigin",null),t("resetJustLogged"),{success:!0}}catch(e){const n=e?.message||"Ocurri un error al cerrar sesin";return t("setError",n),{success:!1,error:n}}finally{t("setLoading",!1)}}},XN={namespaced:!0,state:GN,getters:QN,mutations:YN,actions:JN},ZN=()=>({courses:[],loading:!1,error:null,unsubscribe:null}),eD={allCourses:t=>t.courses,activeCourses:t=>t.courses.filter(e=>e.estado),getCourseByCode:t=>e=>t.courses.find(n=>n.codigo===e),isLoading:t=>t.loading,getError:t=>t.error,hasListener:t=>typeof t.unsubscribe=="function"},tD={setCourses(t,e){t.courses=e},setLoading(t,e){t.loading=e},setError(t,e){t.error=e},setUnsubscribe(t,e){t.unsubscribe=e},addCourseLocal(t,e){t.courses=[e,...t.courses]},updateCourseLocal(t,{id:e,data:n}){const r=t.courses.findIndex(s=>s.id===e);r!==-1&&t.courses.splice(r,1,{...t.courses[r],...n})},deleteCourseLocal(t,e){t.courses=t.courses.filter(n=>n.id!==e)},clearError(t){t.error=null}},nD={initCoursesListener({state:t,commit:e}){if(t.unsubscribe)return t.unsubscribe;e("setLoading",!0);const n=ou(Ms,"courses"),r=zN(n,s=>{const i=s.docs.map(o=>({id:o.id,...o.data()}));e("setCourses",i),e("setLoading",!1)},s=>{e("setError",s?.message||"Error al escuchar los cursos"),e("setLoading",!1)});return e("setUnsubscribe",r),r},stopListener({state:t,commit:e}){if(t.unsubscribe&&typeof t.unsubscribe=="function")try{t.unsubscribe()}finally{e("setUnsubscribe",null)}},async fetchCourses({commit:t}){t("setLoading",!0),t("clearError");try{const e=ou(Ms,"courses"),r=(await $N(e)).docs.map(s=>({id:s.id,...s.data()}));t("setCourses",r)}catch(e){t("setError",e?.message||"Error al obtener los cursos")}finally{t("setLoading",!1)}},async addCourse({state:t,commit:e},n){e("setLoading",!0),e("clearError");try{const r=ou(Ms,"courses"),s=await qN(r,n);return t.unsubscribe||e("addCourseLocal",{id:s.id,...n}),{success:!0,id:s.id}}catch(r){const s=r?.message||"Error al agregar el curso";return e("setError",s),{success:!1,error:s}}finally{e("setLoading",!1)}},async updateCourse({state:t,commit:e},{courseId:n,courseData:r}){e("setLoading",!0),e("clearError");try{const s=Xu(Ms,"courses",n);return await jN(s,r),t.unsubscribe||e("updateCourseLocal",{id:n,data:r}),{success:!0}}catch(s){const i=s?.message||"Error al actualizar el curso";return e("setError",i),{success:!1,error:i}}finally{e("setLoading",!1)}},async deleteCourse({state:t,commit:e},n){e("setLoading",!0),e("clearError");try{const r=Xu(Ms,"courses",n);return await HN(r),t.unsubscribe||e("deleteCourseLocal",n),{success:!0}}catch(r){const s=r?.message||"Error al eliminar el curso";return e("setError",s),{success:!1,error:s}}finally{e("setLoading",!1)}},clearError({commit:t}){t("clearError")}},rD={namespaced:!0,state:ZN,getters:eD,mutations:tD,actions:nD},qE=c0({modules:{auth:XN,courses:rD}}),hc=Fw(P0);hc.use(qE);hc.use(yy);hc.use(zS());qE.dispatch("auth/initAuthStateListener");hc.mount("#app");export{DD as $,St as A,Lw as B,id as C,aD as D,qc as E,Bt as F,$e as G,Xi as H,dD as I,OS as J,Ln as K,fr as L,Oo as M,ja as N,Xm as O,p_ as P,We as Q,kD as R,OD as S,xD as T,AD as U,mD as V,ES as W,LD as X,VD as Y,oD as Z,RS as _,SS as a,ID as a0,Et as a1,gD as a2,kd as a3,SD as a4,PD as a5,RD as a6,CD as a7,TS as a8,vS as a9,uD as aA,wD as aB,BS as aa,cD as ab,zt as ac,ls as ad,bb as ae,hD as af,Os as ag,vD as ah,ny as ai,lD as aj,bD as ak,Un as al,fD as am,Ul as an,KS as ao,ED as ap,yD as aq,DS as ar,f_ as as,kS as at,wd as au,_D as av,TD as aw,ND as ax,pD as ay,hb as az,Ia as b,Y as c,dn as d,Mt as e,ot as f,W as g,ii as h,rs as i,u0 as j,sD as k,st as l,an as m,Fe as n,De as o,xr as p,Ll as q,Ut as r,Pt as s,qn as t,li as u,tn as v,jt as w,iD as x,ql as y,JI as z};
