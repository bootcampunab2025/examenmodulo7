import{j as v,c as f,p as b,s as C,v as u,l as t,e as i,g as r,w as n,z as x,B as w,o,i as l,t as d}from"./index-CnDOF7Do.js";import{_ as A}from"./BAlert.vue_vue_type_script_setup_true_lang-BoLIpZFk-BMwzMJkR.js";import{d as D}from"./BCard.vue_vue_type_script_setup_true_lang-BAaV9t2h-CIFWF0FW.js";import{_ as S}from"./BTable.vue_vue_type_script_setup_true_lang-BpEcqTUn-DWnsn5f9.js";import{u as $}from"./orders-BgooqpD3.js";const B={class:"my-courses-container"},L={key:0,class:"text-center my-5"},M={key:1,class:"text-center py-5"},V={__name:"MyCoursesView",setup(q){const a=$(),m=x(),_=w(),g=[{key:"nombre",label:"Curso"},{key:"codigo",label:"Código"},{key:"precio",label:"Precio"},{key:"purchasedAt",label:"Fecha de compra"}],p=f(()=>a.userCourses),h=f(()=>p.value),y=async()=>{if(!m.isAuthenticated){_.push({name:"login",query:{redirect:"/my-courses"}});return}await a.fetchUserCourses()},k=s=>{if(!s)return"—";try{return(s.toDate?s.toDate():new Date(s)).toLocaleDateString("es-CL",{year:"numeric",month:"short",day:"numeric"})}catch{return"—"}};return b(()=>{y()}),C(()=>m.isAuthenticated,s=>{s&&y()}),(s,e)=>(o(),u("div",B,[e[3]||(e[3]=t("header",{class:"mb-4 text-center"},[t("h1",{class:"display-6"},"Mis Cursos"),t("p",{class:"text-muted mb-0"},"Revisa los cursos que has adquirido.")],-1)),r(a).coursesLoading?(o(),u("div",L,[...e[1]||(e[1]=[t("div",{class:"spinner-border text-primary",role:"status"},null,-1),t("p",{class:"mt-3 text-muted"},"Cargando tus cursos…",-1)])])):r(a).coursesError?(o(),i(r(A),{key:1,variant:"danger"},{default:n(()=>[l(d(r(a).coursesError),1)]),_:1})):(o(),i(r(D),{key:2},{default:n(()=>[p.value.length?(o(),i(r(S),{key:0,items:h.value,fields:g,responsive:""},{"cell(precio)":n(c=>[l(" $"+d(c.item.precio.toLocaleString("es-CL")),1)]),"cell(purchasedAt)":n(c=>[l(d(k(c.item.purchasedAt)),1)]),_:1},8,["items"])):(o(),u("div",M,[e[2]||(e[2]=t("p",{class:"text-muted"},"Aún no has comprado cursos. Regresa al catálogo y agrega algunos al carrito.",-1)),t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=c=>s.$router.push("/"))},"Ir al catálogo")]))]),_:1}))]))}},z=v(V,[["__scopeId","data-v-a98f321a"]]);export{z as default};
